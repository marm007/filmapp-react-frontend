{"version":3,"sources":["contexts/film/filmContext.js","contexts/film/filmProvider.js","components/film/preview/rate-film.js","components/film/preview/description.js","components/film/preview/index.js","components/film/recommendations/reducer.js","skeletons/recommendations.js","components/film/recommendations/index.js","components/film/comments/reducer.js","services/commentService.js","components/film/comments/add-comment.js","components/film/comments/sort-comments.js","components/film/comments/remove-comment.js","components/film/comments/index.js","components/film/playlist/reducer.js","components/film/playlist/remove-playlist.js","components/film/playlist/remove-film.js","components/film/playlist/index.js","components/film/index.js","pages/film.js","helpers/index.js","hooks/use-window-width.js","images/image_not_found.png","components/film-column/index.js","components/film-fluid.js"],"names":["FilmContext","createContext","filmInitialState","isPreviewLoaded","playerHeight","reloadPlaylist","error","filmReducer","state","action","type","fieldName","payload","FilmProvider","children","useReducer","filmState","filmDispatch","Provider","value","RateFilm","filmId","data","history","useHistory","useState","isRating","setIsRating","likes","dislikes","isLiked","isDisliked","rateData","setRateData","handleRateClick","a","like","likeResult","me","details","userResult","liked","indexOf","disliked","console","response","status","push","location","pathname","useEffect","className","onClick","icon","faThumbsUp","faThumbsDown","Description","description","id","useParams","isExpanded","setIsExpanded","handleTruncate","event","preventDefault","TruncateButton","title","style","whiteSpace","textAlign","line","truncateText","text","textTruncateChild","FilmPreview","user","useContext","UserContext","img","video","film","views","setFilm","playerRef","useCallback","node","getBoundingClientRect","height","setPlayerNode","playerNode","measure","window","addEventListener","removeEventListener","requests","view","index","auth","Promise","allSettled","filmViewResponse","filmResponse","userResponse","document","filmData","process","handleGetFilm","ref","playsInline","poster","src","faEye","recommendationsInitialState","films","isLoading","isAllLoaded","isInitialLoaded","recommendationsReducer","length","recommendationsMaxFetchCount","RecommendationsSkeleton","FilmsRecommendations","handleRedirect","isSmallScreen","useWindowsWidth","dispatch","handleRecommendationsOnBottom","useBottomScrollListener","filmApi","exclude","limit","preview","then","res","forEach","catch","err","initialLoad","skip","fetchData","map","isRecommendations","Array","_","commentsInitialState","comments","commentsCount","currentSort","isAdding","isSorting","isRemoving","commentsReducer","comments_count","commentsMaxFetchCount","filter","comment","all","film_id","params","axios","get","remove","delete","headers","authHeader","AddComment","setComment","setIsAdding","handleAddComment","form","post","onSubmit","placeholder","onChange","target","disabled","SortComments","setIsSorting","setCurrentSort","dir","sorts","setSorts","handleSortComments","sortToChange","sort","_sort","href","role","RemoveComment","RemoveModalContext","showModal","clear","removeModalData","setIsRemoving","removeComment","substring","concat","Comments","handleOnCommentsBottom","getInitialComments","commentApi","loadComments","author_name","displayCommentDate","author_id","filmPlaylistInitialState","playlist","currentFilm","currentFilmIndex","headerHeight","filmPlaylistReducer","removingFilmId","isRemovingFilm","filtered","findIndex","is_public","RemovePlaylist","removePlaylist","width","handleRemove","RemoveFilm","partialUpdate","films_id","is_remove_films","PlaylistContainer","useLocation","headerRef","playlistApi","filmIndex","prototype","call","handleReloadPlaylist","parsed","queryString","parse","search","list","handleGetPlaylist","sm","isPublic","isPlaylist","dispatchPrivacyUpdate","onYReachEnd","onScrollY","isNonExisting","fontWeight","alt","image_not_found","image","Film","onSmallScreen","useWindowWidth","historyObject","date","Date","createdAt","getDate","slice","getMonth","getFullYear","getHours","getMinutes","parseSearchDate","today","time","Math","abs","floor","UTC","handleCloseModalWindow","toSplit","replace","split","innerWidth","isScreenSmall","setIsScreenSmall","checkScreenSize","isSearch","filmID","FilmFluid","props"],"mappings":"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","file":"static/js/9.75a8a026.chunk.js","sourcesContent":["import { createContext } from 'react'\nconst FilmContext = createContext();\nexport default FilmContext","import { useReducer } from \"react\"\nimport FilmContext from \"./filmContext\"\n\nconst filmInitialState = {\n    isPreviewLoaded: false,\n    playerHeight: null,\n    reloadPlaylist: false,\n    error: null\n}\n\nconst filmReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                isPreviewLoaded: true,\n                error: null\n            }\n        }\n        default:\n            return state\n    }\n}\n\nconst FilmProvider = ({ children }) => {\n    const [filmState, filmDispatch] = useReducer(filmReducer, filmInitialState)\n\n\n    return (\n        <FilmContext.Provider value={[filmState, filmDispatch]}>\n            {children}\n        </FilmContext.Provider>\n    );\n}\n\nexport default FilmProvider","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { useEffect, useState } from \"react\"\nimport { useHistory } from \"react-router-dom\"\nimport { like } from \"../../../services/filmService\"\nimport { me } from \"../../../services/userService\"\nimport { faThumbsDown, faThumbsUp } from '@fortawesome/free-solid-svg-icons'\n\nexport default function RateFilm({ filmId, data }) {\n\n\n    let history = useHistory()\n\n    const [isRating, setIsRating] = useState(false)\n\n    const [rateData, setRateData] = useState({ likes: '', dislikes: '', isLiked: false, isDisliked: false })\n\n\n    useEffect(() => {\n        setRateData(data)\n    }, [data])\n\n    async function handleRateClick(action) {\n        if (action === null || isRating) return\n\n        setIsRating(true)\n\n        try {\n            const likeResult = await like(filmId, { action })\n\n            const userResult = await me({ details: true })\n            const details = userResult.data.details\n            const isLiked = details.liked.indexOf(filmId) > -1\n            const isDisliked = details.disliked.indexOf(filmId) > -1\n\n            setRateData({ isLiked, isDisliked, likes: likeResult.data.likes, dislikes: likeResult.data.dislikes })\n            setIsRating(false)\n\n        } catch (err) {\n            console.error(err)\n            setIsRating(false)\n            if (err.response && err.response.status === 401) {\n                history.push(`${history.location.pathname}/login`);\n            }\n        }\n    }\n\n\n    return (\n        <>\n            <div className=\"col-4 col-sm-4 text-right d-flex justify-content-end\">\n                <p className={`${rateData.isLiked ? 'film-picked-thumb-color' : ''} cursor-pointer noselect`}\n                    onClick={() => handleRateClick('like')}>\n                    <FontAwesomeIcon icon={faThumbsUp} />\n                    &ensp;{rateData.likes}\n                </p>\n            </div>\n            <div className=\"col-4 col-sm-4 d-flex justify-content-start\">\n                <p className={`${rateData.isDisliked ? 'film-picked-thumb-color' : ''} cursor-pointer noselect`}\n                    onClick={() => handleRateClick('dislike')}>\n                    <FontAwesomeIcon icon={faThumbsDown} />\n                    &ensp;{rateData.dislikes}\n                </p>\n            </div>\n        </>\n    )\n}","import { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport TextTruncate from \"react-text-truncate\";\n\nexport default function Description({ description }) {\n\n    let { id } = useParams()\n\n    const [isExpanded, setIsExpanded] = useState(false)\n\n    useEffect(() => {\n        setIsExpanded(false)\n    }, [id])\n\n    const handleTruncate = (event) => {\n        event.preventDefault();\n        setIsExpanded(!isExpanded)\n    }\n    const TruncateButton = (title) => {\n        return (\n            <span>\n                <button className=\"btn btn-link p-0 m-0 mb-1 title font-weight-bold\"\n                    onClick={handleTruncate}>{title}</button>\n            </span>\n        )\n    }\n\n    return (\n        <div className=\"col-12 col-sm-12 p-0\" style={{ whiteSpace: 'pre-line', textAlign: 'justify' }}>\n            <TextTruncate line={!isExpanded && 2}\n                truncateText=\"â€¦\"\n                text={description}\n                textTruncateChild={TruncateButton('Show more')} />\n\n            {isExpanded && TruncateButton('Show less')}\n        </div>\n    )\n}","import React, { useState, useEffect, useCallback, useContext } from 'react';\nimport { useHistory, useParams } from 'react-router-dom'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEye } from '@fortawesome/free-solid-svg-icons'\nimport { Player } from 'video-react';\n\nimport { view, index } from '../../../services/filmService'\nimport { me } from '../../../services/userService'\n\nimport FilmContext from '../../../contexts/film/filmContext'\nimport UserContext from '../../../contexts/user/userContext';\nimport RateFilm from './rate-film';\nimport Description from './description';\n\nimport \"../../../../node_modules/video-react/dist/video-react.css\";\nimport 'core-js/modules/esnext.promise.all-settled'\n\n\nconst FilmPreview = () => {\n\n    let history = useHistory()\n    let { id } = useParams()\n\n    const { user } = useContext(UserContext)\n\n    // eslint-disable-next-line no-unused-vars\n    const [filmState, filmDispatch] = useContext(FilmContext)\n\n    const [film, setFilm] = useState({\n        img: '',\n        video: '',\n        film: '',\n        title: '',\n        views: '',\n        description: `\\r\\n\\n\\n`,\n    })\n\n    const [rateData, setRateData] = useState({\n        likes: '',\n        dislikes: '',\n        isLiked: false,\n        isDisliked: false\n    })\n\n    const playerRef = useCallback(node => {\n        if (node !== null) {\n            filmDispatch({\n                type: 'field',\n                fieldName: 'playerHeight',\n                payload: node.getBoundingClientRect().height\n            })\n            setPlayerNode(node)\n        }\n    }, [filmDispatch])\n\n\n\n    const [playerNode, setPlayerNode] = useState(null);\n\n\n    useEffect(() => {\n        if (playerNode) {\n\n            const measure = () => {\n                filmDispatch({\n                    type: 'field',\n                    fieldName: 'playerHeight',\n                    payload: playerNode.getBoundingClientRect().height\n                })\n            }\n\n            window.addEventListener(\"resize\", measure);\n\n            return () => window.removeEventListener(\"resize\", measure);\n        }\n    }, [playerNode, filmDispatch]);\n\n    useEffect(() => {\n        async function handleGetFilm() {\n\n            let requests = [view(id), index(id)]\n            if (user.auth) requests.push(me({ details: true }))\n            const [filmViewResponse, filmResponse, userResponse] = await Promise.allSettled(requests);\n\n            if (filmResponse.status === \"rejected\" || filmViewResponse.status === \"rejected\") {\n\n                filmDispatch({\n                    type: 'field',\n                    fieldName: 'error',\n                    payload: true\n                })\n\n                document.title = `FilmApp`\n\n                return\n            }\n\n            const filmData = filmResponse.value.data\n\n            filmDispatch({\n                type: 'success'\n            })\n\n            const film = {\n                ...filmData,\n                img: `${process.env.REACT_APP_API_URL}films/${filmData.id}/thumbnail?width=poster`,\n                video: `${process.env.REACT_APP_API_URL}films/${filmData.id}/video`,\n                views: filmViewResponse.value.data.views\n            }\n\n            let isLiked = false\n            let isDisliked = false\n\n            if (userResponse && userResponse.status === \"fulfilled\") {\n                const details = userResponse.value.data.details\n                isLiked = details.liked.indexOf(id) > -1\n                isDisliked = details.disliked.indexOf(id) > -1\n            }\n\n            setRateData({ isLiked, isDisliked, likes: film.likes, dislikes: film.dislikes })\n            setFilm(film)\n            document.title = `${film.title} - FilmApp`\n        }\n        handleGetFilm()\n    }, [id, filmDispatch, user.auth, history.location.state])\n\n\n\n\n    return (\n\n        <div className=\"p-0\">\n            <div className=\"col-12 col-sm-12 preview-margins p-0\">\n                <div ref={playerRef}>\n                    <Player\n                        playsInline\n                        poster={film.img}\n                        src={film.video} />\n                </div>\n            </div>\n            {\n                film &&\n                <div className=\"px-0\">\n                    <div className=\"col-12 col-sm-12 mt-4 p-0\">\n                        <div className=\"row p-0 m-0\">\n                            <div className=\"col-12 col-sm-12 p-0\">\n                                {!film.title && <p className=\"font-weight-bold\"><br /></p>}\n                                <p className=\"font-weight-bold\">{film.title}</p>\n                            </div>\n                            <div className=\"col-4 col-sm-4 p-0\">\n                                <p><FontAwesomeIcon icon={faEye} /> &ensp;{film.views}</p>\n                            </div>\n\n                            <RateFilm filmId={id} data={rateData} />\n\n                            <div className=\"col-12 col-sm-12 mt-4 mb-4 divider\" />\n\n                            <Description description={film.description} />\n\n                        </div>\n                    </div>\n                    <div className=\"col-12 col-sm-12 mt-4 mb-2 divider p-0\" />\n                </div>\n            }\n        </div>\n\n\n    )\n}\n\n\nexport default FilmPreview\n","import { recommendationsMaxFetchCount } from \"../../../config\"\n\nexport const recommendationsInitialState = {\n    films: null,\n    isLoading: false,\n    isAllLoaded: false,\n    isInitialLoaded: false,\n    error: null,\n}\n\nexport function recommendationsReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'clear': {\n            return recommendationsInitialState\n        }\n        case 'initial-success': {\n            return {\n                ...recommendationsInitialState,\n                isInitialLoaded: true,\n                films: action.payload\n            }\n        }\n        case 'load': {\n            return !state.isLoading && !state.isAllLoaded && state.isInitialLoaded && !state.error ? {\n                ...state,\n                isLoading: true,\n                isAllLoaded: false\n            } : state\n        }\n        case 'success': {\n            return {\n                ...state,\n                films: [...state.films, ...action.payload],\n                isLoading: false,\n                isAllLoaded: action.payload.length < recommendationsMaxFetchCount\n            }\n        }\n        case 'error': {\n            return {\n                ...recommendationsInitialState,\n                error: action.payload\n            }\n        }\n        default: return state\n    }\n}\n","import Skeleton from 'react-loading-skeleton';\n\nconst RecommendationsSkeleton = () => {\n\n\n    return (\n\n        <div className=\"col-12 mx-0 mb-4 container-px\">\n            <div className=\"row p-0 m-0\">\n                <div className='col-6 col-sm-6 m-0 p-0' >\n                    <div className=\"embed-responsive embed-responsive-16by9 p-0\">\n                        <Skeleton className=\"embed-responsive-item w-100 h-100 p-0\" />\n                    </div>\n                </div>\n                <div className='col-6 col-sm-6 m-0'>\n                    <div className=\"row m-0 h-25\">\n                        <div className=\"col p-0 w-100 h-100\">\n                            <Skeleton className=\"w-100 h-100 line-height-unset\" />\n                        </div>\n                    </div>\n                    <div className=\"pt-2 h-75\">\n                            <Skeleton className=\"w-100 h-100 line-height-unset\" />\n                        </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default RecommendationsSkeleton","import React, { useEffect, useReducer, useCallback, useContext } from 'react';\n\nimport { recommendationsReducer, recommendationsInitialState } from './reducer'\n\nimport Film from '../../film-fluid';\n\nimport FilmSkeleton from '../../../skeletons/film';\nimport RecommendationsSkeleton from '../../../skeletons/recommendations'\n\nimport * as filmApi from '../../../services/filmService'\n\nimport { recommendationsMaxFetchCount } from \"../../../config\"\n\nimport useBottomScrollListener from '../../../hooks/use-bottom-scroll-listener';\nimport FilmContext from '../../../contexts/film/filmContext';\n\nimport useWindowsWidth from '../../../hooks/use-window-width';\nimport { useParams } from 'react-router-dom';\n\nconst FilmsRecommendations = ({ handleRedirect }) => {\n\n    let { id } = useParams()\n\n    const isSmallScreen = useWindowsWidth(768);\n\n    // eslint-disable-next-line no-unused-vars\n    const [filmState, filmDispatch] = useContext(FilmContext)\n\n    const [{ films, isLoading, isAllLoaded, error }, dispatch] = useReducer(recommendationsReducer, recommendationsInitialState)\n\n\n    const handleRecommendationsOnBottom = useCallback(() => {\n        dispatch({ type: 'load' })\n    }, [])\n\n    useBottomScrollListener(handleRecommendationsOnBottom)\n\n    useEffect(() => {\n        async function initialLoad() {\n            await filmApi.all({ exclude: id, limit: recommendationsMaxFetchCount, preview: true })\n                .then(res => {\n                    let films = res.data;\n\n                    films.forEach(film => {\n                        film.img = `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail`\n\n                    });\n\n                    dispatch({\n                        type: 'initial-success',\n                        payload: films\n                    })\n\n\n                })\n                .catch(err => console.error(err))\n        }\n\n        dispatch({\n            type: 'clear'\n        })\n\n        if (filmState.isPreviewLoaded) {\n            initialLoad()\n        }\n    }, [id, filmState.isPreviewLoaded])\n\n    useEffect(() => {\n        if (filmState.error) {\n            dispatch({\n                type: 'error',\n                payload: filmState.error\n            })\n        }\n    }, [filmState.error])\n\n    useEffect(() => {\n        async function fetchData() {\n            await filmApi.all({ exclude: id, skip: films.length, limit: recommendationsMaxFetchCount, preview: true }).then(res => {\n                let films = res.data;\n\n                films.forEach(film => {\n                    film.img = `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail`\n\n                });\n\n                dispatch({\n                    type: 'success',\n                    payload: films\n                })\n            }).catch(err => console.error(err))\n        }\n        if (isLoading && films && id) fetchData()\n    }, [isLoading, id, films])\n\n\n    return (\n\n        <div className=\"row m-0\">\n\n            {\n                films ? films.map((film, index) => <Film key={film.id} film={film}\n                    index={index} isRecommendations={true} filmDispatch={filmDispatch}\n                    handleRedirect={() => handleRedirect(film)} />)\n                    : ([...Array(24)].map((_, index) => isSmallScreen ?\n                        (<FilmSkeleton key={index} isRecommendations={true} />) :\n                        (<RecommendationsSkeleton key={index} />)\n                    ))\n            }\n\n\n            {\n                !isAllLoaded && <div className=\"fetch-loader d-flex justify-content-center\">\n                    {(isLoading) && !error && <div className=\"spinner-border\" />}\n                </div>\n            }\n        </div>\n    )\n}\n\nexport default FilmsRecommendations\n","import { commentsMaxFetchCount } from \"../../../config\"\n\nexport const commentsInitialState = {\n    comments: null,\n    commentsCount: null,\n    currentSort: null,\n\n    isLoading: false,\n    isAllLoaded: false,\n    isInitialLoaded: false,\n\n    isAdding: false,\n    isSorting: false,\n    isRemoving: false,\n\n    error: null\n}\n\nexport function commentsReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'clear': {\n            return {\n                ...commentsInitialState\n            }\n        }\n        case 'initial-success': {\n            return {\n                ...state,\n                comments: action.payload.comments,\n                commentsCount: action.payload.comments_count,\n                isAllLoaded: action.payload.comments.length < commentsMaxFetchCount,\n                isInitialLoaded: true,\n                error: null,\n            }\n        }\n        case 'load': {\n            return state.isInitialLoaded && !state.isLoading && !state.isAllLoaded &&\n                !state.isAdding && !state.isSorting && !state.isRemoving && !state.error ?\n                {\n                    ...state,\n                    isLoading: true\n                } : state\n        }\n        case 'load-success': {\n            return {\n                ...state,\n                isLoading: false,\n                comments: [...state.comments, ...action.payload],\n                isAllLoaded: action.payload.length < commentsMaxFetchCount\n            }\n        }\n        case 'add': {\n            return {\n                ...state,\n                isAdding: true,\n                error: null\n            }\n        }\n        case 'add-success': {\n            return {\n                ...state,\n                isAdding: false,\n                comments: [action.payload, ...state.comments],\n                commentsCount: state.commentsCount + 1,\n            }\n        }\n        case 'remove': {\n            return {\n                ...state,\n                isRemoving: true\n            }\n        }\n        case 'remove-success': {\n            return {\n                ...state,\n                isRemoving: false,\n                commentsCount: state.commentsCount - 1,\n                comments: state.comments.filter(comment => comment.id !== action.payload)\n            }\n        }\n        case 'sort': {\n            return {\n                ...state,\n                comments: null,\n                isSorting: true,\n            }\n        }\n        case 'sort-success': {\n            return {\n                ...state,\n                isSorting: false,\n                currentSort: action.payload.currentSort,\n                comments: action.payload.comments,\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isLoading: false,\n                isAdding: false,\n                isSorting: false,\n                error: action.payload,\n            }\n        }\n        default: return state\n    }\n}","import axios from '../helpers/axios'\nimport authHeader from '../helpers/auth-header'\n\n\nexport const all = (film_id, params) => axios.get(`films/${film_id}/comments`, { params })\n\nexport const create = (film_id, form) => axios.post(`films/${film_id}/comments`, form, { headers: authHeader() })\n\nexport const update = (id, update) => axios.put(`comments/${id}`, update, { headers: authHeader() })\n\nexport const remove = (id) => axios.delete(`comments/${id}`, { headers: authHeader() })\n\nexport const sort = (film_id, params) => axios.get(`films/${film_id}/comments/sort`, { params, headers: authHeader() })\n\n\n","import { useState } from \"react\";\nimport { create } from '../../../services/commentService'\n\nexport default function AddComment({ filmId, dispatch }) {\n    const [comment, setComment] = useState('')\n    const [isAdding, setIsAdding] = useState(false)\n\n    const handleAddComment = (event) => {\n        event.preventDefault()\n\n        setIsAdding(true)\n        dispatch({ type: 'add' })\n\n        return create(filmId, { text: comment })\n            .then(res => {\n                setComment('')\n                setIsAdding(false)\n                dispatch({\n                    type: 'add-success',\n                    payload: res.data\n                })\n            })\n            .catch(err => {\n                setComment('')\n                setIsAdding(false)\n                dispatch({\n                    type: 'error',\n                    payload: err.response.status\n                })\n            })\n    }\n    return (\n        <>\n            <form onSubmit={(event) => (comment && !isAdding) ? handleAddComment(event) : null}>\n                <div id=\"fiordur\">\n                    <input type=\"text\" placeholder=\"Comment\" value={comment}\n                        onChange={({ target }) => setComment(target.value)}\n                    />\n                </div>\n                <div className=\"col d-flex justify-content-end\" >\n                    <button disabled={isAdding || !comment}\n                        type=\"submit\"\n                        className=\"btn btn-primary mt-3\">\n                        Submit\n                    </button>\n                </div>\n            </form>\n\n            {\n                isAdding && <div style={{ height: 32 + 'px' }} className=\"d-flex justify-content-center\">\n                    <div className=\"spinner-border\" />\n                </div>\n            }\n        </>\n    )\n}","/* eslint-disable jsx-a11y/anchor-is-valid */\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { useState } from \"react\";\nimport { commentsMaxFetchCount } from \"../../../config\";\nimport { sort } from '../../../services/commentService'\n\nexport default function SortComments({ filmId, dispatch }) {\n\n    const [isSorting, setIsSorting] = useState(false)\n    const [currentSort, setCurrentSort] = useState(null)\n    const [sorts, setSorts] = useState([\n        { id: 'created_at', title: 'By date', dir: 1 },\n        { id: 'author_name', title: 'By author name', dir: 1 }\n    ])\n\n\n    const handleSortComments = (event, id) => {\n        event.preventDefault()\n        const sortToChange = id === 'created_at' ? sorts[0] : id === 'author_name' ? sorts[1] : null\n        if (!sortToChange) return\n\n        setIsSorting(true)\n\n        if (currentSort && currentSort.id === sortToChange.id) {\n            sortToChange.dir *= -1\n            if (sortToChange.dir === 1) { setCurrentSort(null) }\n            else { setCurrentSort(sortToChange) }\n        } else {\n            setCurrentSort(sortToChange)\n        }\n\n        setSorts(sorts.map(sort => sort.id === sortToChange.id ? sortToChange : sort))\n        dispatch({ type: 'sort' })\n\n        let params = { limit: commentsMaxFetchCount }\n        params = sortToChange ? { ...params, [sortToChange.id]: sortToChange.dir } : params\n\n        return sort(filmId, params)\n            .then(res => {\n                setIsSorting(false)\n                dispatch({ type: 'sort-success', payload: { comments: res.data, currentSort } })\n            })\n            .catch(err => {\n                setIsSorting(false)\n                dispatch({ type: 'error', payload: 'Sort error.' })\n                console.error(err)\n            })\n    };\n\n    return (\n        <>\n            <div className=\"dropdown col-2 col-sm-2\">\n                <button className=\"btn btn-secondary dropdown-toggle\" id=\"sortDropDown\"\n                    data-toggle=\"dropdown\" aria-expanded=\"false\">\n                    Sort\n                </button>\n                <ul className=\"dropdown-menu\" aria-labelledby=\"#sortDropDown\">\n                    {\n                        sorts.map(_sort => {\n                            return (\n                                <li key={_sort.id} onClick={(event) => handleSortComments(event, _sort.id)}>\n                                    <a className={`dropdown-item${(currentSort && _sort.id === currentSort.id) ? ' active' : ''}`}\n                                        href=\"#\" role=\"button\">\n                                        {_sort.title}\n                                        {\n                                            !currentSort ? '' :\n                                                currentSort.id === _sort.id && _sort.dir === 1 ?\n                                                    <FontAwesomeIcon className=\"ml-2\" icon=\"sort-up\" /> :\n                                                    currentSort.id === _sort.id && _sort.dir === -1 ?\n                                                        <FontAwesomeIcon className=\"ml-2\" icon=\"sort-down\" /> :\n                                                        ''\n                                        }\n                                    </a>\n                                </li>);\n                        })\n                    }\n\n                </ul>\n            </div>\n            {\n                isSorting && <div style={{ height: 32 + 'px' }} className=\"d-flex justify-content-center\">\n                    <div className=\"spinner-border\" />\n                </div>\n            }\n        </>\n    )\n}","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { useContext, useEffect, useState } from \"react\";\nimport RippleButton from \"../../buttons/ripple\";\n\nimport RemoveModalContext from '../../../contexts/removeModal/removeModalContext';\n\nimport { remove } from '../../../services/commentService'\n\nexport default function RemoveComment({ id, text, dispatch }) {\n    const { showModal, clear, removeModalData } = useContext(RemoveModalContext)\n\n    const [isRemoving, setIsRemoving] = useState(false)\n\n    useEffect(() => {\n        async function removeComment() {\n            await remove(id)\n                .then(res => {\n                    setIsRemoving(false)\n                    dispatch({ type: 'remove-success', payload: id })\n                    clear()\n                })\n                .catch(err => {\n                    setIsRemoving(false)\n                    clear()\n                    console.error(err)\n                })\n        }\n\n        if (isRemoving && removeModalData.isRemoving &&\n            removeModalData.type === 'comment' && removeModalData.id === id) removeComment()\n    }, [isRemoving, clear, removeModalData, id, dispatch])\n\n    const handleRemoveComment = () => {\n        if (removeModalData.isRemoving) return\n\n        setIsRemoving(true)\n        dispatch({ type: 'remove' })\n        showModal(id, 'comment', text.substring(0, 10).concat('...'))\n    }\n\n    return (\n        <RippleButton className=\"m-button cursor-pointer button-ripple-24 d-flex justify-content-center align-items-center remove-holder p-0 m-0 ml-auto\"\n            onClick={handleRemoveComment}>\n            <FontAwesomeIcon icon=\"trash-alt\" />\n\n        </RippleButton>\n    )\n}","/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { useContext, useEffect, useReducer, useCallback } from 'react';\n\nimport { commentsReducer, commentsInitialState } from './reducer';\n\nimport * as commentApi from '../../../services/commentService'\nimport * as filmApi from '../../../services/filmService'\n\nimport { commentsMaxFetchCount } from \"../../../config\"\n\nimport { displayCommentDate } from '../../../helpers';\nimport useBottomScrollListener from '../../../hooks/use-bottom-scroll-listener';\nimport UserContext from '../../../contexts/user/userContext';\nimport FilmContext from '../../../contexts/film/filmContext';\nimport { useParams } from 'react-router-dom';\nimport AddComment from './add-comment';\nimport SortComments from './sort-comments';\nimport RemoveComment from './remove-comment';\n\nconst Comments = () => {\n\n    let { id } = useParams()\n\n\n    const { user } = useContext(UserContext);\n\n    // eslint-disable-next-line no-unused-vars\n    const [filmState, filmDispatch] = useContext(FilmContext)\n\n    const [{\n        comments,\n        commentsCount,\n        isLoading,\n        isAllLoaded,\n        currentSort,\n        error\n    }, dispatch] = useReducer(commentsReducer, commentsInitialState)\n\n    const handleOnCommentsBottom = useCallback(() => {\n        dispatch({ type: 'load' })\n    }, [])\n\n    useBottomScrollListener(handleOnCommentsBottom)\n\n    useEffect(() => {\n        if (filmState.error) {\n            dispatch({\n                type: 'error',\n                payload: filmState.error\n            })\n        }\n    }, [filmState.error])\n\n    useEffect(() => {\n        const getInitialComments = async () => {\n            await filmApi\n                .indexDetails(id)\n                .then(res => {\n                    dispatch({\n                        type: 'initial-success',\n                        payload: res.data\n                    })\n                })\n                .catch(err => {\n                    console.error(err)\n                    dispatch({\n                        type: 'error',\n                        payload: 'Something went wrong!'\n                    })\n                })\n        }\n\n        if (filmState.isPreviewLoaded) getInitialComments()\n\n    }, [id, filmState.isPreviewLoaded])\n\n    useEffect(() => {\n        async function loadComments() {\n\n            let params = { skip: comments.length, limit: commentsMaxFetchCount }\n            params = currentSort ? { ...params, [currentSort.id]: currentSort.dir } : params\n\n            await commentApi\n                .all(id, params)\n                .then(res => {\n                    dispatch({\n                        type: 'load-success',\n                        payload: res.data\n                    })\n                })\n                .catch(err => {\n                    dispatch({\n                        type: 'error'\n                    })\n                })\n        }\n\n        if (isLoading && id) loadComments()\n\n    }, [isLoading, comments, currentSort, id])\n\n\n\n\n\n    return (\n\n        <div className=\"col p-0\">\n            <div className=\"row p-0 mt-4 mb-4\">\n                <div className=\"col-7 col-sm-5 col-md-4 d-flex align-items-center \">\n                    {commentsCount !== null && <span>{commentsCount}{commentsCount === 1 ? ' comment' : ' comments'} </span>}\n                </div>\n                <SortComments filmId={id} dispatch={dispatch} />\n            </div>\n\n            <AddComment filmId={id} dispatch={dispatch} />\n\n            {\n                comments && comments.map(comment => {\n                    return (\n                        <div className=\"col col-sm-12 p-0 mt-4 remove-container\" key={comment.id}>\n                            <div className=\"d-flex\">\n                                <p className=\"m-0 font-weight-bold\">\n                                    <small className=\"m-0 font-weight-bold\">{comment.author_name}&nbsp;</small>\n                                </p>\n                                <p >\n                                    <small className=\"m-0\">{displayCommentDate(comment)}</small>\n                                </p>\n                                {\n                                    user.id === comment.author_id &&\n                                    <RemoveComment id={comment.id} text={comment.text} dispatch={dispatch} />\n                                }\n                            </div>\n                            <p className=\"d-block d-sm-block\">\n                                <small>{comment.text}</small>\n                            </p>\n                        </div>\n                    )\n                })\n            }\n\n            {\n                !isAllLoaded && <div className=\"fetch-loader d-flex justify-content-center\">\n                    {(isLoading) && !error && <div className=\"spinner-border\" />}\n                </div>\n            }\n\n        </div>\n\n    )\n}\n\nexport default Comments","\nexport const filmPlaylistInitialState = {\n    playlist: null,\n    currentFilm: null,\n    currentFilmIndex: 0,\n    isLoading: false,\n    headerHeight: null,\n    playerHeight: null\n}\n\nexport const filmPlaylistReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                isLoading: false,\n                playlist: action.playlist,\n                currentFilm: action.currentFilm,\n                currentFilmIndex: action.currentFilmIndex\n            }\n        }\n        case 'clear': {\n            return filmPlaylistInitialState\n        }\n        case 'remove-film': {\n            return {\n                ...state,\n                removingFilmId: action.payload,\n                isRemovingFilm: true\n            }\n        }\n        case 'remove-film-success': {\n\n            const filtered = state.playlist.films.filter(film => film.id !== action.payload)\n            return {\n                ...state,\n                currentFilm: action.payload === state.currentFilm ? null : state.currentFilm,\n                currentFilmIndex: action.payload === state.currentFilm ? 0 : filtered.findIndex(film => film.id === state.currentFilm) + 1,\n                playlist: {\n                    ...state.playlist,\n                    films: filtered\n                },\n                isRemovingFilm: false,\n            }\n        }\n        case 'change-playlist-privacy-success': {\n            return {\n                ...state,\n                playlist: { ...state.playlist, is_public: action.payload.is_public }\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isLoading: false,\n                error: action.payload\n            }\n        }\n        default:\n            return state\n    }\n}","import { useContext, useEffect, useState } from \"react\"\nimport RemoveModalContext from \"../../../contexts/removeModal/removeModalContext\"\nimport UserContext from \"../../../contexts/user/userContext\"\nimport RemoveButton from \"../../buttons/remove\"\n\nimport { remove } from \"../../../services/playlistService\"\n\nexport default function RemovePlaylist({ playlist, dispatch }) {\n\n    const { showModal, clear, removeModalData } = useContext(RemoveModalContext)\n    const { user } = useContext(UserContext)\n\n    const [isRemoving, setIsRemoving] = useState(false)\n\n\n    useEffect(() => {\n\n        async function removePlaylist() {\n            setIsRemoving(true)\n\n            await remove(playlist.id)\n                .then(res => {\n                    setIsRemoving(false)\n\n                    dispatch({ type: 'clear' })\n                    clear()\n                })\n                .catch(err => {\n                    setIsRemoving(false)\n                    console.error(err)\n                    clear()\n                })\n        }\n        if (isRemoving && removeModalData.isRemoving &&\n            removeModalData.id === playlist.id && removeModalData.type === 'playlist') removePlaylist()\n    }, [isRemoving, clear, dispatch, playlist, removeModalData])\n\n\n\n    const handleRemovePlaylist = () => {\n        if (removeModalData.isRemoving) return\n        setIsRemoving(true)\n        showModal(playlist.id, 'playlist', playlist.title)\n    }\n\n    return (\n        <div style={{ width: '24px' }} className=\"p-0 justify-content-end d-flex\">\n            {\n                user.id === playlist.author_id &&\n                <RemoveButton handleRemove={() => handleRemovePlaylist()} />\n            }\n        </div>\n    )\n}","\nimport { useContext } from \"react\"\nimport UserContext from \"../../../contexts/user/userContext\"\nimport { partialUpdate } from \"../../../services/playlistService\"\nimport RemoveButton from \"../../buttons/remove\"\n\nexport default function RemoveFilm({ playlist, filmId, dispatch }) {\n\n    const { user } = useContext(UserContext)\n\n    async function handleRemoveFilm() {\n        await partialUpdate(playlist.id, { films_id: [filmId], is_remove_films: true })\n            .then(res => {\n                dispatch({ type: 'remove-film-success', payload: filmId })\n            })\n            .catch(err => {\n                console.error(err)\n            })\n    }\n\n\n    return (\n\n        user.id === playlist.author_id ?\n            <div style={{ width: '24px' }} className=\"p-0 d-flex align-items-center justify-content-center\">\n                <RemoveButton handleRemove={handleRemoveFilm} />\n            </div> : null\n\n    )\n\n}","import React, { useContext, useEffect, useCallback, useReducer } from 'react';\nimport { useLocation, useParams } from 'react-router-dom'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport queryString from \"query-string\";\nimport TextTruncate from \"react-text-truncate\";\nimport PerfectScrollbar from 'react-perfect-scrollbar'\n\nimport { filmPlaylistInitialState, filmPlaylistReducer } from './reducer';\n\nimport BlurredImageComponent from '../../blurred-image';\n\nimport * as playlistApi from '../../../services/playlistService'\n\nimport FilmContext from '../../../contexts/film/filmContext';\nimport UserContext from '../../../contexts/user/userContext';\nimport ChangePrivacyButton from '../../buttons/change-privacy';\n\nimport image_not_found from '../../../images/image_not_found.png';\nimport RemovePlaylist from './remove-playlist';\nimport RemoveFilm from './remove-film';\n\nimport 'react-perfect-scrollbar/dist/css/styles.css';\n\nconst PlaylistContainer = ({ handleRedirect }) => {\n\n    let location = useLocation()\n    let { id } = useParams()\n\n\n    const { user } = useContext(UserContext)\n    const [filmState, filmDispatch] = useContext(FilmContext)\n\n    const [{\n        playlist,\n        currentFilm,\n        currentFilmIndex,\n        headerHeight,\n        playerHeight,\n        error\n    }, dispatch] = useReducer(filmPlaylistReducer, filmPlaylistInitialState)\n\n\n    const headerRef = useCallback(node => {\n        if (node !== null) {\n            dispatch({\n                type: 'field',\n                fieldName: 'headerHeight',\n                payload: node.getBoundingClientRect().height\n            });\n        }\n    }, [])\n\n    useEffect(() => {\n        dispatch({\n            type: 'field',\n            fieldName: 'playerHeight',\n            payload: filmState.playerHeight\n        });\n    }, [filmState.playerHeight])\n\n    useEffect(() => {\n        dispatch({\n            type: 'error',\n            payload: filmState.error\n        });\n    }, [filmState.error])\n\n\n    useEffect(() => {\n        async function handleReloadPlaylist() {\n            await playlistApi.index(playlist.id)\n                .then(res => {\n\n                    let filmIndex = 0\n                    let filmId = null\n\n                    Array.prototype.forEach.call(res.data.films, (film, index) => {\n                        if (film && film.id === id) {\n                            filmIndex = index + 1\n                            filmId = film.id\n                        }\n                    })\n\n                    dispatch({\n                        type: 'success',\n                        playlist: res.data,\n                        currentFilm: filmId,\n                        currentFilmIndex: filmIndex\n                    })\n\n                    filmDispatch({\n                        type: 'field',\n                        fieldName: 'reloadPlaylist',\n                        payload: false\n                    })\n\n                    return res.data\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (filmState.reloadPlaylist && playlist) handleReloadPlaylist()\n\n    }, [filmState.reloadPlaylist, playlist, filmDispatch, id])\n\n\n\n    useEffect(() => {\n        const parsed = queryString.parse(location.search);\n        if (!parsed.list) {\n            dispatch({ type: 'clear' })\n            return\n        }\n\n        async function handleGetPlaylist() {\n            await playlistApi.index(parsed.list).then(res => {\n\n                let filmIndex = 0\n                let filmId = null\n\n                Array.prototype.forEach.call(res.data.films, (film, index) => {\n                    if (film && film.id === id) {\n                        filmIndex = index + 1\n                        filmId = film.id\n                    }\n                })\n\n                dispatch({\n                    type: 'success',\n                    playlist: res.data,\n                    currentFilm: filmId,\n                    currentFilmIndex: filmIndex\n                })\n                return res.data\n            }).catch(err => {\n                console.error(err)\n                dispatch({ type: 'clear' })\n            })\n        }\n        if (!error && filmState.isPreviewLoaded) handleGetPlaylist()\n    }, [id, location.search, error, filmState.isPreviewLoaded])\n\n\n    return (\n\n        playlist && playerHeight && !error &&\n        <div className='col mb-4'>\n            <div className='col p-0 border'>\n                <div ref={headerRef}\n                    style={{ height: headerHeight + 'px' }}\n                    className=\"col remove-container pt-2 pb-2 film-preview-playlist-header\" sm={12}>\n                    <div className=\"row m-0 px-2\">\n                        <div className=\"button-ripple-div-next-width colbutton-ripple-div-next-width\">\n                            <p className=\"mb-1 font-weight-bold film-preview-playlist-text-truncate\">{playlist.title}</p>\n                        </div>\n\n                        <RemovePlaylist playlist={playlist} dispatch={dispatch} />\n\n                        <div className=\"col-12 col-sm-12 p-0\">\n                            {\n                                user.id === playlist.author_id &&\n                                <ChangePrivacyButton\n                                    id={playlist.id}\n                                    isPublic={playlist.is_public}\n                                    isPlaylist={true}\n                                    dispatchPrivacyUpdate={dispatch} />\n                            }\n                            {\n                                user.id === playlist.author_id && <small>&nbsp;</small>\n\n                            }\n                            <small>{playlist.author_name}&nbsp;</small>\n                            <small\n                                className=\"film-preview-playlist-index\">\n                                - {currentFilmIndex}/{playlist.films.length}\n                            </small>\n                        </div>\n                    </div>\n                </div>\n                <div style={{ height: playerHeight - headerHeight + 'px' }}\n                    className=\"col-12 col-sm-12 p-0 film-preview-playlist-container\">\n                    <PerfectScrollbar\n                        onYReachEnd={() => { }}\n                        onScrollY={() => { }}>\n                        {\n                            playlist.films.map((film, index) => {\n                                return (\n                                    <div className=\"row m-0 p-0 pr-2 remove-container\" key={film.id}>\n                                        <div className={`${index === playlist.films.length - 1 ?\n                                            \"mt-3 mb-3 \" :\n                                            \"mt-3\"} button-ripple-div-next-width col`}\n                                            onClick={() => {\n                                                if (!film.isNonExisting)\n                                                    handleRedirect(film)\n                                            }}>\n                                            <div className=\"row m-0 p-0 play-outer-container\">\n                                                <div\n                                                    className=\"col-1 col-sm-1 text-center justify-content-center d-flex align-items-center p-0 pl-1\" >\n                                                    {\n                                                        (currentFilm === film.id) ?\n                                                            <small>\n                                                                <FontAwesomeIcon style={{ fontWeight: 300 }}\n                                                                    icon=\"play\" />\n                                                            </small>\n                                                            :\n                                                            <small>{index + 1}</small>\n\n                                                    }\n                                                </div>\n                                                <div className=\"col-6 col-sm-6 pr-2 pl-2\">\n                                                    <div className=\"w-100 play-container\">\n                                                        {\n                                                            film.isNonExisting ?\n                                                                <img alt=\"\" className=\"embed-responsive-item play-image\"\n                                                                    src={image_not_found} />\n                                                                :\n                                                                <BlurredImageComponent\n                                                                    image={`${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail`} />\n                                                        }\n                                                    </div>\n                                                </div>\n                                                <div className=\"col-5 col-sm-5 p-0\">\n                                                    {\n                                                        film.isNonExisting ?\n                                                            <TextTruncate line={2} text=\"Not found\"\n                                                                className=\"mb-0 title font-weight-bold\" />\n                                                            :\n                                                            <>\n                                                                <TextTruncate line={1} text={film.title}\n                                                                    className=\"mb-0 title font-weight-bold\" />\n                                                                <p className=\"mb-1 author-nick\">\n                                                                    <span>{film.author_name}</span>\n                                                                </p>\n                                                            </>\n                                                    }\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        <RemoveFilm playlist={playlist} filmId={film.id} dispatch={dispatch} />\n\n                                    </div>\n                                )\n                            })\n                        }\n                    </PerfectScrollbar>\n                </div>\n            </div>\n        </div >\n\n\n    )\n}\n\n\nexport default PlaylistContainer\n","import { useHistory, useLocation } from 'react-router-dom'\nimport queryString from \"query-string\";\n\nimport FilmPreview from './preview'\nimport FilmsRecommendations from './recommendations';\nimport Comments from './comments';\nimport PlaylistContainer from './playlist';\n\nimport useWindowWidth from '../../hooks/use-window-width'\n\nimport './style.css'\n\n\nconst Film = () => {\n\n    let history = useHistory()\n    let location = useLocation()\n\n    const onSmallScreen = useWindowWidth(768);\n\n    const handleRedirect = (film) => {\n        const parsed = queryString.parse(location.search);\n        let historyObject = { pathname: `${process.env.REACT_APP_PATH_NAME}film/` + film.id, state: { film } }\n        if (parsed.list) historyObject = { ...historyObject, search: `?list=${parsed.list}` }\n        history.push(historyObject);\n    };\n\n    return (\n        <div className=\"row p-0 m-0 mt-4 mx-2\">\n            <div className=\"col-12 order-first col-sm-12 order-first col-md-8 film-preview-container-px\">\n                <FilmPreview />\n                {!onSmallScreen && <Comments />}\n            </div>\n            <div className=\"col-12 order-2 col-sm-12 order-2 col-md-4 p-0\">\n                <PlaylistContainer handleRedirect={handleRedirect} />\n                <FilmsRecommendations handleRedirect={handleRedirect} />\n            </div>\n            {onSmallScreen &&\n                <div className=\"col-12 order-last col-sm-12 order-sm-last col-md-8 pb-5 container-px\">\n                    <Comments />\n                </div>\n            }\n        </div>\n    )\n}\n\nexport default Film","import FilmProvider from '../contexts/film/filmProvider'\nimport FilmComponent from '../components/film'\n\nexport default function Film() {\n\n    return (\n\n        <FilmProvider>\n            <FilmComponent />\n        </FilmProvider>\n    )\n\n}","export const displayCommentDate = (comment) => {\n    let date = new Date(Date.parse(comment.createdAt));\n    let time = (('0' + date.getDate()).slice(-2) + '-' + ('0' + (date.getMonth() + 1)).slice(-2) + '-'\n        + ('0' + date.getFullYear()).slice(-2)\n        + ' o ' + ('0' + date.getHours()).slice(-2) + ':' + ('0' + date.getMinutes()).slice(-2))\n    return time;\n};\n\nexport const parseSearchDate = (film) => {\n\n    let date = new Date(Date.parse(film.createdAt));\n    let today = new Date();\n\n\n    let time = Math.abs(Math.floor((\n        Date.UTC(\n            date.getFullYear(),\n            date.getMonth(),\n            date.getDate(),\n            date.getHours(),\n            date.getMinutes()) -\n        Date.UTC(\n            today.getFullYear(),\n            today.getMonth(),\n            today.getDate(),\n            today.getHours(),\n            today.getMinutes()))\n        / (1000 * 60)));\n\n    if (time / 60 >= 1) {\n        time /= 60;\n\n        if (time / 24 >= 1) {\n\n            time /= 24;\n\n            if (time / 30 >= 1) {\n\n                time /= 30;\n\n                if (time / 12 >= 1) {\n\n                    time = time / 12;\n                    time = Math.floor(time) + ' years ';\n\n                } else {\n                    time = Math.floor(time) + ' months ';\n                }\n\n            } else {\n                time = Math.floor(time) + ' days ';\n            }\n\n        } else {\n            time = Math.floor(time) + ' hours ';\n        }\n    } else {\n        time = Math.floor(time) + ' minutes ';\n    }\n\n    time = time + 'ago';\n\n    return time;\n};\n\nexport const handleCloseModalWindow = (history, toSplit, replace = false) => {\n\n    let pathname = history.location.pathname.split(toSplit)[0]\n\n    const historyObject = {\n        pathname: pathname === '' ? process.env.REACT_APP_PATH_NAME : pathname,\n        search: history.location.search,\n        state: history.location.state\n    }\n\n    if (replace) {\n        history.replace(historyObject)\n    }\n    else {\n        history.push(historyObject)\n    }\n\n}","import { useState, useEffect } from \"react\";\n\nconst useWindowsWidth = (width = 600) => {\n  const [isScreenSmall, setIsScreenSmall] = useState(window.innerWidth < width);\n\n  let checkScreenSize = () => {\n    setIsScreenSmall(window.innerWidth < width);\n  };\n  useEffect(() => {\n    checkScreenSize();\n    window.addEventListener(\"resize\", checkScreenSize);\n\n    return () => window.removeEventListener(\"resize\", checkScreenSize);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return isScreenSmall;\n};\n\nexport default useWindowsWidth;\n","export default __webpack_public_path__ + \"static/media/image_not_found.c4ba1e76.png\";","import { useContext } from 'react';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport TextTruncate from \"react-text-truncate\";\n\nimport BlurredImageComponent from \"../blurred-image\";\n\nimport PlaylistAddButtonComponent from \"../buttons/update-playlist\";\n\nimport UserContext from '../../contexts/user/userContext';\n\nimport './style.css'\n\nconst Film = ({ film, index, handleRedirect, isRecommendations, isSearch, filmDispatch, children }) => {\n\n    const { user } = useContext(UserContext);\n\n\n    return (\n        <div className={`col-12  ${isSearch ? 'col-lg-8' : ''} mb-4 container-px`}>\n\n            <div className={`row p-0 m-0 play-outer-container remove-container p-0`}>\n\n                <div className={`col-6 ${isSearch ? 'col-sm-4' : ''} m-0 p-0`}\n                    onClick={() => handleRedirect()}>\n                    <div className=\"play-container\">\n                        <BlurredImageComponent\n                            image={film.img} />\n                        <FontAwesomeIcon className=\"play-middle\" icon=\"play\" />\n                    </div>\n                </div>\n\n                <div className={`col-6 ${isSearch ? 'col-sm-8' : 'col-sm-6'} pr-0`}>\n                    <div className={`row mx-0 mb-0 h-100`}>\n                        <div className={`${user.auth ? 'button-ripple-div-next-width' : 'col-12'} col p-0 pr-2 cursor-pointer`}\n                            onClick={() => handleRedirect()}>\n\n                            <TextTruncate line={1} text={film.title} className={`mb-1 title`} />\n\n                            {\n                                children ? children : <div className=\"mb-0 author-nick\">\n                                    <span>{film.author_name}&nbsp;</span>\n                                    <span>â€¢&nbsp;</span>\n                                    <span>{film.views} views</span>\n                                </div>\n                            }\n                        </div>\n                        <div className={`${user.auth ? 'click-under-buttons-container' : 'click-under-buttons-container'}`}>\n                            {\n                                user.auth ?\n                                    <PlaylistAddButtonComponent\n                                        isRecommendations={isRecommendations}\n                                        filmDispatch={filmDispatch}\n                                        index={index}\n                                        filmID={film.id} /> : null\n                            }\n                            <div className=\"col col-12 m-0 p-0 click-under-buttons\"\n                                onClick={() => handleRedirect()}>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div >\n    )\n}\n\nexport default Film","import useWindowsWidth from \"../hooks/use-window-width\";\nimport FilmRow from './film-row'\nimport FilmColumn from './film-column'\n\nconst FilmFluid = (props) => {\n    const isSmallScreen = useWindowsWidth(props.isRecommendations ? 768 : 576)\n\n    return isSmallScreen ? <FilmRow {...props} /> : <FilmColumn {...props} />\n}\n\nexport default FilmFluid"],"sourceRoot":""}