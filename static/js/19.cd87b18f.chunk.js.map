{"version":3,"sources":["components/pages/film/reducers/previewReducer.js","helpers/contexts/film/filmContext.js","components/pages/film/preview.js","components/pages/film/reducers/recommendationsReducer.js","components/pages/film/recommendationsSkeleton.js","components/pages/film/recommendations.js","components/pages/film/reducers/commentsReducer.js","services/commentService.js","components/pages/film/comments.js","components/pages/film/reducers/playlistReducer.js","components/pages/film/playlistContainer.js","helpers/contexts/film/filmProvider.js","components/pages/film/index.js","images/image_not_found.png","helpers/index.js"],"names":["initialPreviewState","film","img","video","title","views","likes","dislikes","description","isLiked","isDisliked","isLikeButtonClicked","likeAction","isDescExpanded","previewReducer","state","action","type","fieldName","payload","FilmContext","createContext","FilmPreview","props","history","useHistory","location","useLocation","user","useContext","UserContext","filmDispatch","playerRef","useCallback","node","getBoundingClientRect","height","setPlayerNode","useReducer","dispatch","useState","playerNode","useEffect","measure","window","addEventListener","removeEventListener","a","requests","filmApi","match","params","id","auth","push","userApi","details","Promise","allSettled","filmResponse","filmViewResponse","userResponse","status","filmData","value","data","comments","commentsCount","comments_count","process","liked","indexOf","disliked","handleGetFilm","likeResult","likeData","userResult","console","error","response","pathname","handleLike","handleTruncate","e","preventDefault","TruncateButton","className","onClick","ref","playsInline","poster","src","icon","faEye","faThumbsUp","faThumbsDown","style","whiteSpace","textAlign","line","truncateText","text","textTruncateChild","recommendationsInitialState","films","isLoading","isAllFetched","isInitialLoaded","recommendationsReducer","length","recommendationsMaxFetchCount","RecommendationsSkeleton","FilmsRecommendations","isSmallScreen","useWindowsWidth","filmState","handleRecommendationsOnBottom","useBottomScrollListener","exclude","limit","then","res","forEach","catch","err","isPreviewLoaded","initialLoad","skip","fetchData","map","index","isRecommendations","handleRedirect","Array","_","commentsInitialState","isAdding","isRemoving","toRemove","isSorting","sort","sorts","dir","commentsReducer","commentsMaxFetchCount","filter","comment","sortToChange","all","film_id","axios","get","remove","delete","headers","authHeader","Comments","RemoveModalContext","showModal","clear","removeModalData","handleOnCommentsBottom","commentApi","loadSortedComments","loadComments","form","post","addComment","substring","concat","removeComment","sortParams","sortComments","sortTmp","tmpSort","handleSortComments","href","role","onSubmit","handleAddComment","placeholder","onChange","target","disabled","author_name","displayCommentDate","author_id","handleRemoveComment","filmPlaylistInitialState","playlist","currentFilm","currentFilmIndex","isRemovingPlaylist","isRemovingFilm","removingFilmId","headerHeight","playerHeight","filmPlaylistReducer","filtered","findIndex","is_public","PlaylistContainer","clearPlaylist","headerRef","playlistApi","filmIndex","filmId","prototype","call","reloadPlaylist","handleReloadPlaylist","parsed","queryString","parse","search","list","handleGetPlaylist","removePlaylist","films_id","is_remove_films","removeFilm","sm","width","handleRemove","isPublic","isPlaylist","dispatchPrivacyUpdate","onYReachEnd","onScrollY","isNonExisting","fontWeight","alt","image_not_found","image","filmInitialState","filmReducer","FilmProvider","children","Provider","Film","onSmallScreen","useWindowWidth","historyObject","date","Date","createdAt","getDate","slice","getMonth","getFullYear","getHours","getMinutes","parseSearchDate","today","time","Math","abs","floor","UTC"],"mappings":"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","file":"static/js/19.cd87b18f.chunk.js","sourcesContent":["const initialFilm = {\r\n    img: '',\r\n    video: '',\r\n    film: '',\r\n    title: '',\r\n    views: '',\r\n    likes: '',\r\n    dislikes: '',\r\n    description: `\\r\\n\\n\\n`,\r\n}\r\n\r\nexport const initialPreviewState = {\r\n    film: initialFilm,\r\n    isLiked: false,\r\n    isDisliked: false,\r\n    isLikeButtonClicked: false,\r\n    likeAction: null,\r\n    isDescExpanded: false\r\n}\r\n\r\nexport function previewReducer(state, action) {\r\n    switch (action.type) {\r\n        case 'field': {\r\n            return {\r\n                ...state,\r\n                [action.fieldName]: action.payload\r\n            }\r\n        }\r\n        case 'like': {\r\n            return {\r\n                ...state,\r\n                isLikeButtonClicked: true,\r\n                likeAction: action.payload\r\n            }\r\n        }\r\n        case 'success': {\r\n            return {\r\n                ...state,\r\n                film: action.film,\r\n                isLiked: action.isLiked,\r\n                isDisliked: action.isDisliked,\r\n                isLikeButtonClicked: false,\r\n                likeAction: null,\r\n                isDescExpanded: false\r\n            }\r\n        }\r\n        case 'error': {\r\n            return {\r\n                ...state,\r\n                isLikeButtonClicked: false,\r\n                likeAction: null\r\n            }\r\n        }\r\n        default: return state\r\n    }\r\n}","import { createContext } from 'react'\r\nconst FilmContext = createContext();\r\nexport default FilmContext","import React, { useState, useEffect, useCallback, useContext, useReducer } from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faEye, faThumbsDown, faThumbsUp } from '@fortawesome/free-solid-svg-icons'\r\nimport { Player } from 'video-react';\r\nimport TextTruncate from 'react-text-truncate';\r\nimport \"../../../../node_modules/video-react/dist/video-react.css\";\r\n\r\nimport { initialPreviewState, previewReducer } from './reducers/previewReducer';\r\n\r\nimport * as filmApi from '../../../services/filmService'\r\nimport * as userApi from '../../../services/userService'\r\n\r\nimport FilmContext from '../../../helpers/contexts/film/filmContext'\r\nimport UserContext from '../../../helpers/contexts/user/userContext';\r\nimport 'core-js/modules/esnext.promise.all-settled'\r\n\r\nconst FilmPreview = (props) => {\r\n\r\n    let history = useHistory()\r\n    let location = useLocation()\r\n\r\n    const { user } = useContext(UserContext)\r\n\r\n    // eslint-disable-next-line no-unused-vars\r\n    const [filmState, filmDispatch] = useContext(FilmContext)\r\n\r\n    const playerRef = useCallback(node => {\r\n        if (node !== null) {\r\n            filmDispatch({\r\n                type: 'field',\r\n                fieldName: 'playerHeight',\r\n                payload: node.getBoundingClientRect().height\r\n            })\r\n            setPlayerNode(node)\r\n        }\r\n    }, [filmDispatch])\r\n\r\n    const [state, dispatch] = useReducer(previewReducer, initialPreviewState)\r\n\r\n    const { film, isLiked, isDisliked, isLikeButtonClicked, likeAction, isDescExpanded } = state\r\n\r\n    const [playerNode, setPlayerNode] = useState(null);\r\n\r\n\r\n    useEffect(() => {\r\n        if (playerNode) {\r\n\r\n            const measure = () => {\r\n                filmDispatch({\r\n                    type: 'field',\r\n                    fieldName: 'playerHeight',\r\n                    payload: playerNode.getBoundingClientRect().height\r\n                })\r\n            }\r\n\r\n            window.addEventListener(\"resize\", measure);\r\n\r\n            return () => window.removeEventListener(\"resize\", measure);\r\n        }\r\n    }, [playerNode, filmDispatch]);\r\n\r\n    useEffect(() => {\r\n        async function handleGetFilm() {\r\n            let requests = [filmApi.index(props.match.params.id), filmApi.view(props.match.params.id)]\r\n            if (user.auth) requests.push(userApi.me({ details: true }))\r\n\r\n            const [filmResponse, filmViewResponse, userResponse] = await Promise.allSettled(requests);\r\n\r\n            if (filmResponse.status === \"rejected\" || filmViewResponse.status === \"rejected\") {\r\n                filmDispatch({\r\n                    type: 'field',\r\n                    fieldName: 'error',\r\n                    payload: true\r\n                })\r\n                return\r\n            }\r\n\r\n\r\n            const filmData = filmResponse.value.data\r\n\r\n            filmDispatch({\r\n                type: 'success',\r\n                comments: filmData.comments,\r\n                commentsCount: filmData.comments_count\r\n            })\r\n\r\n            const film = {\r\n                ...filmData,\r\n                img: `${process.env.REACT_APP_API_URL}films/${filmData.id}/thumbnail?width=poster`,\r\n                video: `${process.env.REACT_APP_API_URL}films/${filmData.id}/video`,\r\n                views: filmViewResponse.value.data.views\r\n            }\r\n            let isLiked = false\r\n            let isDisliked = false\r\n\r\n\r\n            if (userResponse && userResponse.status === \"fulfilled\") {\r\n                const details = userResponse.value.data.details\r\n                isLiked = details.liked.indexOf(props.match.params.id) > -1\r\n                isDisliked = details.disliked.indexOf(props.match.params.id) > -1\r\n            }\r\n\r\n            dispatch({\r\n                type: 'success',\r\n                film: film,\r\n                isLiked: isLiked,\r\n                isDisliked: isDisliked\r\n            })\r\n\r\n        }\r\n        handleGetFilm()\r\n    }, [props.match.params.id, filmDispatch, user.auth])\r\n\r\n    useEffect(() => {\r\n        async function handleLike() {\r\n            if (likeAction === null) return\r\n\r\n            try {\r\n                const likeResult = await filmApi.like(film.id, { action: likeAction })\r\n\r\n                let likeData = likeResult.data\r\n                likeData.img = `${process.env.REACT_APP_API_URL}films/${likeData.id}/thumbnail?width=poster`\r\n                likeData.video = `${process.env.REACT_APP_API_URL}films/${likeData.id}/video`\r\n\r\n                const userResult = await userApi.me({ details: true })\r\n                const details = userResult.data.details\r\n                const isLiked = details.liked.indexOf(likeData.id) > -1\r\n                const isDisliked = details.disliked.indexOf(likeData.id) > -1\r\n\r\n                dispatch({\r\n                    type: 'success',\r\n                    film: likeData,\r\n                    isLiked: isLiked,\r\n                    isDisliked: isDisliked\r\n                })\r\n\r\n            } catch (err) {\r\n                console.error(err)\r\n                dispatch({\r\n                    type: 'error'\r\n                })\r\n                if (err.response && err.response.status === 401) {\r\n                    history.push(`${location.pathname}/login`);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (isLikeButtonClicked) handleLike()\r\n    }, [film.id, isLikeButtonClicked, likeAction, history, location])\r\n\r\n    const handleTruncate = (e) => {\r\n        e.preventDefault();\r\n        dispatch({\r\n            type: 'field',\r\n            fieldName: 'isDescExpanded',\r\n            payload: !isDescExpanded\r\n        })\r\n    }\r\n\r\n    const handleLike = (action) => {\r\n        if (isLikeButtonClicked) return\r\n        dispatch({\r\n            type: 'like',\r\n            payload: action\r\n        })\r\n\r\n    };\r\n\r\n    const TruncateButton = (title) => {\r\n        return (<span>\r\n            <button className=\"btn btn-link p-0 m-0 mb-1 title font-weight-bold\"\r\n                onClick={handleTruncate}>{title}</button>\r\n        </span>)\r\n    }\r\n    return (\r\n\r\n        <div className=\"p-0\">\r\n            <div className=\"col-12 col-sm-12 preview-margins p-0\">\r\n                <div ref={playerRef}>\r\n                    <Player\r\n                        playsInline\r\n                        poster={film.img}\r\n                        src={film.video} />\r\n                </div>\r\n            </div>\r\n            {\r\n                film &&\r\n                <div className=\"px-0\">\r\n                    <div className=\"col-12 col-sm-12 mt-4 p-0\">\r\n                        <div className=\"row p-0 m-0\">\r\n                            <div className=\"col-12 col-sm-12 p-0\">\r\n                                {!film.title && <p className=\"font-weight-bold\"><br /></p>}\r\n                                <p className=\"font-weight-bold\">{film.title}</p>\r\n                            </div>\r\n                            <div className=\"col-4 col-sm-4 p-0\">\r\n                                <p><FontAwesomeIcon icon={faEye} /> &ensp;{film.views}</p>\r\n                            </div>\r\n                            <div className=\"col-4 col-sm-4 text-right d-flex justify-content-end\">\r\n                                <p className={`${isLiked ? 'film-picked-thumb-color' : ''} cursor-pointer noselect`}\r\n                                    onClick={() => handleLike('like')}>\r\n                                    <FontAwesomeIcon icon={faThumbsUp} />\r\n                                    &ensp;{film.likes}\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"col-4 col-sm-4 d-flex justify-content-start\">\r\n                                <p className={`${isDisliked ? 'film-picked-thumb-color' : ''} cursor-pointer noselect`}\r\n                                    onClick={() => handleLike('dislike')}>\r\n                                    <FontAwesomeIcon icon={faThumbsDown} />\r\n                                    &ensp;{film.dislikes}\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"col-12 col-sm-12 mt-4 mb-4 divider\" />\r\n\r\n                            <div className=\"col-12 col-sm-12 p-0\" style={{ whiteSpace: 'pre-line', textAlign: 'justify' }}>\r\n                                <TextTruncate line={!isDescExpanded && 2}\r\n                                    truncateText=\"…\"\r\n                                    text={film.description}\r\n                                    textTruncateChild={TruncateButton('Show more')} />\r\n\r\n                                {isDescExpanded && TruncateButton('Show less')}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-12 col-sm-12 mt-4 mb-2 divider p-0\" />\r\n                </div>\r\n            }\r\n        </div>\r\n\r\n\r\n    )\r\n}\r\n\r\n\r\nexport default FilmPreview\r\n","import { recommendationsMaxFetchCount } from \"../../../../config\"\r\n\r\nexport const recommendationsInitialState = {\r\n    films: null,\r\n    id: null,\r\n    isLoading: false,\r\n    isAllFetched: false,\r\n    isInitialLoaded: false,\r\n    error: null,\r\n}\r\n\r\nexport function recommendationsReducer(state, action) {\r\n    switch (action.type) {\r\n        case 'field': {\r\n            return {\r\n                ...state,\r\n                [action.fieldName]: action.payload\r\n            }\r\n        }\r\n        case 'clear': {\r\n            return recommendationsInitialState\r\n        }\r\n        case 'initial-success': {\r\n            return {\r\n                ...recommendationsInitialState,\r\n                films: action.films,\r\n                id: action.id,\r\n                isInitialLoaded: true\r\n            }\r\n        }\r\n        case 'load': {\r\n\r\n            return {\r\n                ...state,\r\n                isLoading: true,\r\n                isAllFetched: false\r\n            }\r\n        }\r\n        case 'success': {\r\n            return {\r\n                ...state,\r\n                films: [...state.films, ...action.payload],\r\n                isLoading: false,\r\n                isAllFetched: action.payload.length < recommendationsMaxFetchCount\r\n            }\r\n        }\r\n        case 'error': {\r\n            return {\r\n                ...recommendationsInitialState,\r\n                error: action.payload\r\n            }\r\n        }\r\n        default: return state\r\n    }\r\n}\r\n","import Skeleton from 'react-loading-skeleton';\r\n\r\nconst RecommendationsSkeleton = () => {\r\n\r\n\r\n    return (\r\n\r\n        <div className=\"col-12 mx-0 mb-4 container-px\">\r\n            <div className=\"row p-0 m-0\">\r\n                <div className='col-6 col-sm-6 m-0 p-0' >\r\n                    <div className=\"embed-responsive embed-responsive-16by9 p-0\">\r\n                        <Skeleton className=\"embed-responsive-item w-100 h-100 p-0\" />\r\n                    </div>\r\n                </div>\r\n                <div className='col-6 col-sm-6 m-0'>\r\n                    <div className=\"row m-0 h-25\">\r\n                        <div className=\"col p-0 w-100 h-100\">\r\n                            <Skeleton className=\"w-100 h-100 line-height-unset\" />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"pt-2 h-75\">\r\n                            <Skeleton className=\"w-100 h-100 line-height-unset\" />\r\n                        </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RecommendationsSkeleton","import React, { useEffect, useReducer, useCallback, useContext } from 'react';\r\n\r\nimport { recommendationsReducer, recommendationsInitialState } from './reducers/recommendationsReducer'\r\n\r\nimport Film from '../../models/film';\r\n\r\nimport * as filmApi from '../../../services/filmService'\r\n\r\nimport { recommendationsMaxFetchCount } from \"../../../config\"\r\n\r\nimport useBottomScrollListener from '../../../helpers/hooks/useBottomScrollListener';\r\nimport FilmContext from '../../../helpers/contexts/film/filmContext';\r\n\r\nimport RecommendationsSkeleton from './recommendationsSkeleton'\r\nimport FilmSkeleton from '../../models/film/skeleton';\r\n\r\nimport useWindowsWidth from '../../../helpers/hooks/useWindowsWidth';\r\n\r\nconst FilmsRecommendations = (props) => {\r\n\r\n    const isSmallScreen = useWindowsWidth(768);\r\n\r\n    // eslint-disable-next-line no-unused-vars\r\n    const [filmState, filmDispatch] = useContext(FilmContext)\r\n\r\n    const [state, dispatch] = useReducer(recommendationsReducer, recommendationsInitialState)\r\n\r\n    const { films, isLoading, isAllFetched, isInitialLoaded, id, error } = state\r\n\r\n    const handleRecommendationsOnBottom = useCallback(() => {\r\n        if (!isLoading && !isAllFetched && isInitialLoaded && !error && id) {\r\n            dispatch({\r\n                type: 'load'\r\n            })\r\n        }\r\n    }, [isLoading, isAllFetched, isInitialLoaded, error, id])\r\n\r\n    useBottomScrollListener(handleRecommendationsOnBottom)\r\n\r\n    useEffect(() => {\r\n        async function initialLoad() {\r\n            await filmApi.all({ exclude: props.match.params.id, limit: recommendationsMaxFetchCount })\r\n                .then(res => {\r\n                    let films = res.data;\r\n\r\n                    films.forEach(film => {\r\n                        film.img = `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail`\r\n\r\n                    });\r\n\r\n                    dispatch({\r\n                        type: 'initial-success',\r\n                        films: films,\r\n                        id: props.match.params.id\r\n                    })\r\n\r\n\r\n                })\r\n                .catch(err => console.error(err))\r\n        }\r\n\r\n        dispatch({\r\n            type: 'clear'\r\n        })\r\n\r\n        if (filmState.isPreviewLoaded) {\r\n            initialLoad()\r\n        }\r\n    }, [props.match.params.id, filmState.isPreviewLoaded])\r\n\r\n    useEffect(() => {\r\n        if (filmState.error) {\r\n            dispatch({\r\n                type: 'error',\r\n                payload: filmState.error\r\n            })\r\n        }\r\n    }, [filmState.error])\r\n\r\n    useEffect(() => {\r\n        async function fetchData() {\r\n            await filmApi.all({ exclude: id, skip: films.length, limit: recommendationsMaxFetchCount }).then(res => {\r\n                let films = res.data;\r\n\r\n                films.forEach(film => {\r\n                    film.img = `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail`\r\n\r\n                });\r\n\r\n                dispatch({\r\n                    type: 'success',\r\n                    payload: films\r\n                })\r\n            }).catch(err => console.error(err))\r\n        }\r\n        if (isLoading && films && id) fetchData()\r\n    }, [isLoading, id, films])\r\n\r\n\r\n    return (\r\n\r\n        <div className=\"row m-0\">\r\n\r\n            {\r\n                films ? films.map((film, index) => <Film key={film.id} film={film} index={index} isRecommendations={true} filmDispatch={filmDispatch} handleRedirect={() => props.handleRedirect(film.id)} />)\r\n                    : ([...Array(20)].map((_, index) => isSmallScreen ?\r\n                        (<FilmSkeleton key={index} isRecommendations={true} />) :\r\n                        (<RecommendationsSkeleton key={index} />)\r\n                    ))\r\n            }\r\n\r\n\r\n            {\r\n                !isAllFetched && <div className=\"fetch-loader d-flex justify-content-center\">\r\n                    {(isLoading) && !error && <div className=\"spinner-border\" />}\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FilmsRecommendations\r\n","import { commentsMaxFetchCount } from \"../../../../config\"\r\n\r\nexport const commentsInitialState = {\r\n    comments: null,\r\n    commentsCount: null,\r\n    text: '',\r\n    id: null,\r\n    isLoading: false,\r\n    isAllFetched: false,\r\n    isInitialLoaded: false,\r\n    isAdding: false,\r\n    isRemoving: false,\r\n    toRemove: null,\r\n    isSorting: false,\r\n    sort: null,\r\n    sorts: [\r\n        { id: 'created_at', title: 'By date', dir: 1 },\r\n        { id: 'author_name', title: 'By author name', dir: 1 }\r\n    ],\r\n    error: null\r\n}\r\n\r\nexport function commentsReducer(state, action) {\r\n    switch (action.type) {\r\n        case 'field': {\r\n            return {\r\n                ...state,\r\n                [action.fieldName]: action.payload\r\n            }\r\n        }\r\n        case 'clear': {\r\n            return {\r\n                ...commentsInitialState,\r\n                id: action.id\r\n            }\r\n        }\r\n        case 'load': {\r\n            return !state.isLoading && !state.isAllFetched && state.isInitialLoaded && !state.isAdding &&\r\n                !state.error && state.id && !state.isSorting ?\r\n                {\r\n                    ...state,\r\n                    isLoading: true\r\n                } : state\r\n        }\r\n        case 'initial-success': {\r\n            return {\r\n                ...state,\r\n                comments: action.comments,\r\n                commentsCount: action.commentsCount,\r\n                isAllFetched: action.comments.length < commentsMaxFetchCount,\r\n                isInitialLoaded: true,\r\n                error: null,\r\n            }\r\n        }\r\n        case 'load-success': {\r\n            return {\r\n                ...state,\r\n                comments: [...state.comments, ...action.payload],\r\n                isLoading: false,\r\n                isAllFetched: action.payload.length < commentsMaxFetchCount\r\n            }\r\n        }\r\n        case 'add': {\r\n            return {\r\n                ...state,\r\n                isAdding: true,\r\n                error: null\r\n            }\r\n        }\r\n        case 'add-success': {\r\n            return {\r\n                ...state,\r\n                text: '',\r\n                commentsCount: state.commentsCount + 1,\r\n                comments: [action.payload, ...state.comments],\r\n                isAdding: false\r\n            }\r\n        }\r\n        case 'remove': {\r\n            return {\r\n                ...state,\r\n                isRemoving: true,\r\n                toRemove: action.payload\r\n            }\r\n        }\r\n        case 'remove-success': {\r\n            return {\r\n                ...state,\r\n                isRemoving: false,\r\n                toRemove: null,\r\n                commentsCount: state.commentsCount - 1,\r\n                comments: state.toRemove ? state.comments.filter(comment => comment.id !== state.toRemove.id) : state.data\r\n            }\r\n        }\r\n        case 'sort': {\r\n            return {\r\n                ...state,\r\n                comments: null,\r\n                isAllFetched: false,\r\n                sorts: state.sorts.map(sort => {\r\n                    if (sort.id === action.sortToChange.id) return action.sortToChange\r\n                    else return sort\r\n                }),\r\n                sort: action.sort,\r\n                isSorting: true,\r\n            }\r\n        }\r\n        case 'sort-success': {\r\n            return {\r\n                ...state,\r\n                isSorting: false,\r\n                comments: action.payload,\r\n            }\r\n        }\r\n        case 'error': {\r\n            return {\r\n                ...state,\r\n                isAdding: false,\r\n                isLoading: false,\r\n                isSorting: false,\r\n                error: action.payload,\r\n            }\r\n        }\r\n        default: return state\r\n    }\r\n}","import axios from '../helpers/axios'\r\nimport authHeader from '../helpers/authHeader'\r\n\r\n\r\nexport const all = (film_id, params) => axios.get(`films/${film_id}/comments`, { params })\r\n\r\nexport const create = (film_id, form) => axios.post(`films/${film_id}/comments`, form, { headers: authHeader() })\r\n\r\nexport const update = (id, update) => axios.put(`comments/${id}`, update, { headers: authHeader() })\r\n\r\nexport const remove = (id) => axios.delete(`comments/${id}`, { headers: authHeader() })\r\n\r\nexport const sort = (film_id, params) => axios.get(`films/${film_id}/comments/sort`, { params, headers: authHeader() })\r\n\r\n\r\n","/* eslint-disable jsx-a11y/anchor-is-valid */\r\nimport React, { useContext, useEffect, useReducer, useCallback } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nimport { commentsReducer, commentsInitialState } from './reducers/commentsReducer';\r\n\r\nimport * as commentApi from '../../../services/commentService'\r\n\r\nimport { commentsMaxFetchCount } from \"../../../config\"\r\n\r\nimport { displayCommentDate } from '../../../helpers';\r\nimport useBottomScrollListener from '../../../helpers/hooks/useBottomScrollListener';\r\nimport UserContext from '../../../helpers/contexts/user/userContext';\r\nimport FilmContext from '../../../helpers/contexts/film/filmContext';\r\nimport RemoveModalContext from '../../../helpers/contexts/removeModal/removeModalContext';\r\nimport RippleButton from '../../buttons/ripple';\r\n\r\nconst Comments = (props) => {\r\n\r\n    const { showModal, clear, removeModalData } = useContext(RemoveModalContext)\r\n\r\n    const { user } = useContext(UserContext);\r\n\r\n    const [filmState, filmDispatch] = useContext(FilmContext)\r\n\r\n    const [state, dispatch] = useReducer(commentsReducer, commentsInitialState)\r\n    const {\r\n        comments,\r\n        commentsCount,\r\n        text,\r\n        isInitialLoaded,\r\n        isLoading,\r\n        isAllFetched,\r\n        isAdding,\r\n        id,\r\n        isRemoving,\r\n        toRemove,\r\n        isSorting,\r\n        sort,\r\n        sorts,\r\n        error\r\n    } = state\r\n\r\n    const handleOnCommentsBottom = useCallback(() => {\r\n        if (!isLoading && !isAllFetched && isInitialLoaded && !isAdding && !error && id && !isSorting) {\r\n            dispatch({\r\n                type: 'load'\r\n            })\r\n        }\r\n    }, [isLoading, isAllFetched, isInitialLoaded, isAdding, error, id, isSorting])\r\n\r\n    useBottomScrollListener(handleOnCommentsBottom)\r\n\r\n    useEffect(() => {\r\n        dispatch({\r\n            type: 'clear',\r\n            id: props.match.params.id\r\n        })\r\n    }, [props.match.params.id])\r\n\r\n    useEffect(() => {\r\n        if (filmState.error) {\r\n            dispatch({\r\n                type: 'error',\r\n                payload: filmState.error\r\n            })\r\n        }\r\n    }, [filmState.error])\r\n\r\n    useEffect(() => {\r\n        function getCommentsFromContext() {\r\n            dispatch({\r\n                type: 'initial-success',\r\n                comments: filmState.comments,\r\n                commentsCount: filmState.commentsCount,\r\n            })\r\n        }\r\n\r\n        if (filmState.comments && filmState.commentsCount !== null) getCommentsFromContext()\r\n    }, [filmState.comments, filmState.commentsCount, filmDispatch])\r\n\r\n    useEffect(() => {\r\n        async function loadComments() {\r\n            await commentApi.all(id, { skip: comments.length, limit: commentsMaxFetchCount })\r\n                .then(res => {\r\n                    dispatch({\r\n                        type: 'load-success',\r\n                        payload: res.data\r\n                    })\r\n                })\r\n                .catch(err => {\r\n                    dispatch({\r\n                        type: 'error'\r\n                    })\r\n                })\r\n        }\r\n        async function loadSortedComments() {\r\n            await commentApi.sort(id, { [sort.id]: sort.dir, skip: comments.length, limit: commentsMaxFetchCount })\r\n                .then(res => {\r\n                    dispatch({\r\n                        type: 'load-success',\r\n                        payload: res.data\r\n                    })\r\n                })\r\n                .catch(err => {\r\n                    dispatch({\r\n                        type: 'error'\r\n                    })\r\n                })\r\n        }\r\n        if (isLoading && isInitialLoaded && !isAdding &&\r\n            comments && id && !isSorting) {\r\n            if (!sort)\r\n                loadComments()\r\n            else\r\n                loadSortedComments()\r\n        }\r\n    }, [isLoading, isAdding, id, comments, isInitialLoaded, isSorting, sort])\r\n\r\n\r\n    useEffect(() => {\r\n        const addComment = async () => {\r\n            const comment = { text: text }\r\n\r\n            await commentApi.create(id, comment)\r\n                .then(res => {\r\n                    dispatch({\r\n                        type: 'add-success',\r\n                        payload: res.data\r\n                    })\r\n                })\r\n                .catch(err => {\r\n                    dispatch({\r\n                        type: 'error',\r\n                        payload: err.response.status\r\n                    })\r\n                })\r\n        };\r\n        if (isAdding && !isLoading && id) addComment()\r\n    }, [isAdding, isLoading, id, text])\r\n\r\n    useEffect(() => {\r\n        async function removeComment() {\r\n            await commentApi.remove(toRemove.id)\r\n                .then(res => {\r\n                    dispatch({ type: 'remove-success' })\r\n                    clear()\r\n                })\r\n                .catch(err => {\r\n                    clear()\r\n                    console.error(err)\r\n                })\r\n        }\r\n\r\n        if (isRemoving && toRemove && removeModalData.isRemoving &&\r\n            removeModalData.id === toRemove.id && removeModalData.type === 'comment' &&\r\n            removeModalData.title === toRemove.text.substring(0, 10).concat('...')) removeComment()\r\n    }, [isRemoving, toRemove, clear, removeModalData])\r\n\r\n    useEffect(() => {\r\n        async function sortComments() {\r\n            const sortParams = sort ? { [sort.id]: sort.dir, limit: commentsMaxFetchCount } : {}\r\n\r\n            await commentApi.sort(id, sortParams)\r\n                .then(res => {\r\n                    dispatch({ type: 'sort-success', payload: res.data })\r\n                })\r\n                .catch(err => {\r\n                    dispatch({ type: 'error', payload: 'Sort error.' })\r\n                    console.error(err)\r\n                })\r\n        }\r\n        if (isSorting) sortComments()\r\n    }, [isSorting, sort, id])\r\n\r\n    const handleAddComment = (e) => {\r\n        e.preventDefault()\r\n        dispatch({\r\n            type: 'add'\r\n        })\r\n    }\r\n\r\n    const handleRemoveComment = (comment) => {\r\n        if (removeModalData.isRemoving) return\r\n        dispatch({ type: 'remove', payload: comment })\r\n        showModal(comment.id, 'comment', comment.text.substring(0, 10).concat('...'))\r\n    }\r\n\r\n    const handleSortComments = (e, id) => {\r\n        e.preventDefault()\r\n\r\n        let sortToChange = null\r\n\r\n        switch (id) {\r\n            case 'created_at':\r\n                sortToChange = sorts[0]\r\n\r\n                break;\r\n            case 'author_name':\r\n                sortToChange = sorts[1]\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        let tmpSort = null\r\n\r\n        if (sort && sort.id === sortToChange.id) {\r\n            sortToChange.dir *= -1\r\n            tmpSort = sortToChange\r\n            if (sortToChange.dir === 1) {\r\n                tmpSort = null\r\n            }\r\n        } else {\r\n            tmpSort = sortToChange\r\n        }\r\n\r\n        dispatch({\r\n            type: 'sort',\r\n            sortToChange: sortToChange,\r\n            sort: tmpSort\r\n        })\r\n\r\n    };\r\n\r\n\r\n    return (\r\n\r\n        <div className=\"col p-0\">\r\n            <div className=\"row p-0 mt-4 mb-4\">\r\n                <div className=\"col-7 col-sm-5 col-md-4 d-flex align-items-center \">\r\n                    {commentsCount !== null && <span>{commentsCount}{commentsCount === 1 ? ' comment' : ' comments'} </span>}\r\n                </div>\r\n                <div className=\"dropdown col-2 col-sm-2\">\r\n                    <button className=\"btn btn-secondary dropdown-toggle\" id=\"sortDropDown\"\r\n                        data-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                        Sort\r\n                    </button>\r\n                    <ul className=\"dropdown-menu\" aria-labelledby=\"#sortDropDown\">\r\n                        {\r\n                            sorts.map(sortTmp => {\r\n                                return (\r\n                                    <li key={sortTmp.id} onClick={e => handleSortComments(e, sortTmp.id)}>\r\n                                        <a className={`dropdown-item${(sort && sortTmp.id === sort.id) ? ' active' : ''}`} href=\"#\" role=\"button\">\r\n                                            {sortTmp.title}\r\n                                            {sort && sort.id === sortTmp.id && sortTmp.dir === 1 ?\r\n                                                <FontAwesomeIcon className=\"ml-2\" icon=\"sort-up\" /> :\r\n                                                sort && sort.id === sortTmp.id && sortTmp.dir === -1 ?\r\n                                                    <FontAwesomeIcon className=\"ml-2\" icon=\"sort-down\" /> : \"\"}\r\n                                        </a></li>);\r\n                            })\r\n                        }\r\n\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <form onSubmit={(e) => (text && !isAdding) ? handleAddComment(e) : null}>\r\n                <div id=\"fiordur\">\r\n                    <input type=\"text\"  placeholder=\"Comment\" value={text}\r\n                        onChange={e => dispatch({ type: 'field', fieldName: 'text', payload: e.target.value })}\r\n                    />\r\n                </div>\r\n                <div className=\"col d-flex justify-content-end\" >\r\n                    <button disabled={isAdding || !text}\r\n                        type=\"submit\"\r\n                        className=\"btn btn-primary mt-3\">\r\n                        Submit\r\n                    </button>\r\n                </div>\r\n            </form>\r\n\r\n            {\r\n                isAdding && <div style={{ height: 32 + 'px' }} className=\"d-flex justify-content-center\">\r\n                    <div className=\"spinner-border\" />\r\n                </div>\r\n            }\r\n            {\r\n                comments && comments.map(comment => {\r\n                    return (\r\n                        <div className=\"col col-sm-12 p-0 mt-4 remove-container\" key={comment.id}>\r\n                            <div className=\"d-flex\">\r\n                                <p className=\"m-0 font-weight-bold\">\r\n                                    <small className=\"m-0 font-weight-bold\">{comment.author_name}&nbsp;</small>\r\n                                </p>\r\n                                <p >\r\n                                    <small className=\"m-0\">{displayCommentDate(comment)}</small>\r\n                                </p>\r\n                                {\r\n                                    user.id === comment.author_id &&\r\n\r\n                                    <RippleButton className=\"m-button cursor-pointer button-ripple-24 d-flex justify-content-center align-items-center remove-holder p-0 m-0 ml-auto\"\r\n                                        onClick={() => handleRemoveComment(comment)}>\r\n                                        <FontAwesomeIcon icon=\"trash-alt\" />\r\n\r\n                                    </RippleButton>\r\n                                }\r\n                            </div>\r\n                            <p className=\"d-block d-sm-block\">\r\n                                <small>{comment.text}</small>\r\n                            </p>\r\n                        </div>\r\n                    )\r\n                })\r\n            }\r\n\r\n            {\r\n                !isAllFetched && <div className=\"fetch-loader d-flex justify-content-center\">\r\n                    {(isLoading || isSorting) && !error && <div className=\"spinner-border\" />}\r\n                </div>\r\n            }\r\n\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Comments","\r\nexport const filmPlaylistInitialState = {\r\n    playlist: null,\r\n    currentFilm: null,\r\n    currentFilmIndex: 0,\r\n    isLoading: false,\r\n    isRemovingPlaylist: false,\r\n    isRemovingFilm: false,\r\n    removingFilmId: null,\r\n    headerHeight: null,\r\n    playerHeight: null\r\n}\r\n\r\nexport const filmPlaylistReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'field': {\r\n            return {\r\n                ...state,\r\n                [action.fieldName]: action.payload\r\n            }\r\n        }\r\n        case 'success': {\r\n            return {\r\n                ...state,\r\n                isLoading: false,\r\n                playlist: action.playlist,\r\n                currentFilm: action.currentFilm,\r\n                currentFilmIndex: action.currentFilmIndex\r\n            }\r\n        }\r\n        case 'clear': {\r\n            return filmPlaylistInitialState\r\n        }\r\n        case 'remove-film': {\r\n            return {\r\n                ...state,\r\n                removingFilmId: action.payload,\r\n                isRemovingFilm: true\r\n            }\r\n        }\r\n        case 'remove-film-success': {\r\n\r\n            if (!state.removingFilmId)\r\n                return {\r\n                    ...state,\r\n                    isRemovingFilm: false\r\n                }\r\n\r\n            const filtered = state.playlist.films.filter(film => film.id !== state.removingFilmId)\r\n            return {\r\n                ...state,\r\n                currentFilm: state.removingFilmId === state.currentFilm ? null : state.currentFilm,\r\n                currentFilmIndex: state.removingFilmId === state.currentFilm ? 0 : filtered.findIndex(film => film.id === state.currentFilm) + 1,\r\n                playlist: {\r\n                    ...state.playlist,\r\n                    films: filtered\r\n                },\r\n                isRemovingFilm: false,\r\n            }\r\n        }\r\n        case 'change-playlist-privacy-success': {\r\n            return {\r\n                ...state,\r\n                playlist: { ...state.playlist, is_public: action.payload.is_public }\r\n            }\r\n        }\r\n        case 'error': {\r\n            return {\r\n                ...state,\r\n                isLoading: false,\r\n                error: action.payload\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}","import React, { useContext, useEffect, useCallback, useReducer } from 'react';\r\nimport { useLocation } from 'react-router-dom'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport queryString from \"query-string\";\r\nimport TextTruncate from \"react-text-truncate\";\r\nimport PerfectScrollbar from 'react-perfect-scrollbar'\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\n\r\nimport { filmPlaylistInitialState, filmPlaylistReducer } from './reducers/playlistReducer';\r\n\r\nimport BlurredImageComponent from '../../models/blurredImage';\r\n\r\nimport * as playlistApi from '../../../services/playlistService'\r\n\r\nimport FilmContext from '../../../helpers/contexts/film/filmContext';\r\nimport UserContext from '../../../helpers/contexts/user/userContext';\r\nimport RemoveModalContext from '../../../helpers/contexts/removeModal/removeModalContext';\r\nimport RemoveButton from '../../buttons/remove';\r\nimport ChangePrivacyButton from '../../buttons/changePrivacy';\r\n\r\nimport image_not_found from '../../../images/image_not_found.png'; // Tell Webpack this JS file uses this image\r\n\r\nconst PlaylistContainer = (props) => {\r\n\r\n    const { showModal, clear, removeModalData } = useContext(RemoveModalContext)\r\n\r\n    let location = useLocation()\r\n\r\n    const { user } = useContext(UserContext)\r\n    const [filmState, filmDispatch] = useContext(FilmContext)\r\n\r\n    const [state, dispatch] = useReducer(filmPlaylistReducer, filmPlaylistInitialState)\r\n\r\n    const {\r\n        playlist,\r\n        isRemovingPlaylist,\r\n        isRemovingFilm,\r\n        removingFilmId,\r\n        currentFilm,\r\n        currentFilmIndex,\r\n        headerHeight,\r\n        playerHeight,\r\n        error\r\n    } = state\r\n\r\n    const clearPlaylist = () => {\r\n        dispatch({ type: 'clear' })\r\n    }\r\n\r\n    const headerRef = useCallback(node => {\r\n        if (node !== null) {\r\n            dispatch({\r\n                type: 'field',\r\n                fieldName: 'headerHeight',\r\n                payload: node.getBoundingClientRect().height\r\n            });\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        dispatch({\r\n            type: 'field',\r\n            fieldName: 'playerHeight',\r\n            payload: filmState.playerHeight\r\n        });\r\n    }, [filmState.playerHeight])\r\n\r\n    useEffect(() => {\r\n        dispatch({\r\n            type: 'error',\r\n            payload: filmState.error\r\n        });\r\n    }, [filmState.error])\r\n\r\n\r\n    useEffect(() => {\r\n        async function handleReloadPlaylist() {\r\n            await playlistApi.index(playlist.id)\r\n                .then(res => {\r\n\r\n                    let filmIndex = 0\r\n                    let filmId = null\r\n\r\n                    Array.prototype.forEach.call(res.data.films, (film, index) => {\r\n                        if (film && film.id === props.match.params.id) {\r\n                            filmIndex = index + 1\r\n                            filmId = film.id\r\n                        }\r\n                    })\r\n\r\n                    dispatch({\r\n                        type: 'success',\r\n                        playlist: res.data,\r\n                        currentFilm: filmId,\r\n                        currentFilmIndex: filmIndex\r\n                    })\r\n\r\n                    filmDispatch({\r\n                        type: 'field',\r\n                        fieldName: 'reloadPlaylist',\r\n                        payload: false\r\n                    })\r\n\r\n                    return res.data\r\n                })\r\n                .catch(err => {\r\n                    console.error(err)\r\n                })\r\n        }\r\n\r\n        if (filmState.reloadPlaylist && playlist) handleReloadPlaylist()\r\n\r\n    }, [filmState.reloadPlaylist, playlist, filmDispatch, props.match.params.id])\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        const parsed = queryString.parse(location.search);\r\n        if (!parsed.list) {\r\n            clearPlaylist()\r\n            return\r\n        }\r\n\r\n        async function handleGetPlaylist() {\r\n            await playlistApi.index(parsed.list).then(res => {\r\n\r\n                let filmIndex = 0\r\n                let filmId = null\r\n\r\n                Array.prototype.forEach.call(res.data.films, (film, index) => {\r\n                    if (film && film.id === props.match.params.id) {\r\n                        filmIndex = index + 1\r\n                        filmId = film.id\r\n                    }\r\n                })\r\n\r\n                dispatch({\r\n                    type: 'success',\r\n                    playlist: res.data,\r\n                    currentFilm: filmId,\r\n                    currentFilmIndex: filmIndex\r\n                })\r\n                return res.data\r\n            }).catch(err => {\r\n                console.error(err)\r\n                clearPlaylist()\r\n            })\r\n        }\r\n        if (!error && filmState.isPreviewLoaded) handleGetPlaylist()\r\n    }, [props.match.params.id, location.search, error, filmState.isPreviewLoaded])\r\n\r\n\r\n    useEffect(() => {\r\n        async function removePlaylist() {\r\n            await playlistApi.remove(playlist.id)\r\n                .then(res => {\r\n                    clearPlaylist()\r\n                    clear()\r\n                })\r\n                .catch(err => {\r\n                    console.error(err)\r\n                    clear()\r\n                })\r\n        }\r\n        if (isRemovingPlaylist && removeModalData.isRemoving &&\r\n            removeModalData.id === playlist.id && removeModalData.type === 'playlist' &&\r\n            removeModalData.title === playlist.title) removePlaylist()\r\n    }, [clear, isRemovingPlaylist, playlist, removeModalData])\r\n\r\n\r\n    useEffect(() => {\r\n        async function removeFilm() {\r\n            await playlistApi.partialUpdate(playlist.id, { films_id: [removingFilmId], is_remove_films: true })\r\n                .then(res => {\r\n                    dispatch({\r\n                        type: 'remove-film-success'\r\n                    })\r\n                })\r\n                .catch(err => {\r\n                    console.error(err)\r\n                })\r\n        }\r\n\r\n        if (isRemovingFilm) removeFilm()\r\n    }, [isRemovingFilm, playlist, removingFilmId])\r\n\r\n    const handleRemovePlaylist = () => {\r\n\r\n        if (removeModalData.isRemoving) return\r\n\r\n        dispatch({\r\n            type: 'field',\r\n            fieldName: 'isRemovingPlaylist',\r\n            payload: true\r\n        })\r\n\r\n        showModal(playlist.id, 'playlist', playlist.title)\r\n    }\r\n\r\n    const handleRemoveFromPlaylist = (id) => {\r\n        if (isRemovingFilm) return\r\n\r\n        dispatch({\r\n            type: 'remove-film',\r\n            payload: id\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n\r\n        playlist && playerHeight && !error &&\r\n        <div className='col mb-4'>\r\n            <div className='col p-0 border'>\r\n                <div ref={headerRef}\r\n                    style={{ height: headerHeight + 'px' }}\r\n                    className=\"col remove-container pt-2 pb-2 film-preview-playlist-header\" sm={12}>\r\n                    <div className=\"row m-0 px-2\">\r\n                        <div className=\"button-ripple-div-next-width colbutton-ripple-div-next-width\">\r\n                            <p className=\"mb-1 font-weight-bold film-preview-playlist-text-truncate\">{playlist.title}</p>\r\n                        </div>\r\n                        <div style={{ width: '24px' }} className=\"p-0 justify-content-end d-flex\">\r\n                            {\r\n                                user.id === playlist.author_id &&\r\n                                <RemoveButton handleRemove={() => handleRemovePlaylist()} />\r\n                            }\r\n                        </div>\r\n                        <div className=\"col-12 col-sm-12 p-0\">\r\n                            {\r\n                                user.id === playlist.author_id &&\r\n                                <ChangePrivacyButton\r\n                                    id={playlist.id}\r\n                                    isPublic={playlist.is_public}\r\n                                    isPlaylist={true}\r\n                                    dispatchPrivacyUpdate={dispatch} />\r\n                            }\r\n                            {\r\n                                user.id === playlist.author_id && <small>&nbsp;</small>\r\n\r\n                            }\r\n                            <small>{playlist.author_name}&nbsp;</small>\r\n                            <small\r\n                                className=\"film-preview-playlist-index\">\r\n                                - {currentFilmIndex}/{playlist.films.length}\r\n                            </small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div style={{ height: playerHeight - headerHeight + 'px' }}\r\n                    className=\"col-12 col-sm-12 p-0 film-preview-playlist-container\">\r\n                    <PerfectScrollbar\r\n                        onYReachEnd={() => { }}\r\n                        onScrollY={() => { }}>\r\n                        {\r\n                            playlist.films.map((film, index) => {\r\n                                return(\r\n                                    <div className=\"row m-0 p-0 pr-2 remove-container\" key={film.id}>\r\n                                        <div className={`${index === playlist.films.length - 1 ?\r\n                                            \"mt-3 mb-3 \" :\r\n                                            \"mt-3\"} button-ripple-div-next-width col`}\r\n                                            onClick={() => {\r\n                                                if (!film.isNonExisting)\r\n                                                    props.handleRedirect(film.id)\r\n                                            }}>\r\n                                            <div className=\"row m-0 p-0 play-outer-container\">\r\n                                                <div\r\n                                                    className=\"col-1 col-sm-1 text-center justify-content-center d-flex align-items-center p-0 pl-1\" >\r\n                                                    {\r\n                                                        (currentFilm === film.id) ?\r\n                                                            <small>\r\n                                                                <FontAwesomeIcon style={{ fontWeight: 300 }}\r\n                                                                    icon=\"play\" />\r\n                                                            </small>\r\n                                                            :\r\n                                                            <small>{index + 1}</small>\r\n\r\n                                                    }\r\n                                                </div>\r\n                                                <div className=\"col-6 col-sm-6 pr-2 pl-2\">\r\n                                                    <div className=\"w-100 play-container\">\r\n                                                        {film.isNonExisting ?\r\n                                                            <img alt=\"\" className=\"embed-responsive-item play-image\"\r\n                                                                src={image_not_found} />\r\n                                                            :\r\n                                                            <BlurredImageComponent\r\n                                                                image={`${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail`} />\r\n                                                        }\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"col-5 col-sm-5 p-0\">\r\n                                                    {film.isNonExisting ?\r\n                                                        (<TextTruncate line={2} text=\"Not found\"\r\n                                                            className=\"mb-0 title font-weight-bold\" />)\r\n                                                        :\r\n                                                        (<>\r\n                                                            <TextTruncate line={1} text={film.title}\r\n                                                                className=\"mb-0 title font-weight-bold\" />\r\n                                                            <p className=\"mb-1 author-nick\">\r\n                                                                <span>{film.author_name}</span>\r\n                                                            </p>\r\n                                                        </>)\r\n                                                    }\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        {\r\n                                            user.id === playlist.author_id &&\r\n                                            <div style={{ width: '24px' }} className=\"p-0 d-flex align-items-center justify-content-center\">\r\n                                                <RemoveButton handleRemove={() => handleRemoveFromPlaylist(film.id)} />\r\n                                            </div>\r\n                                        }\r\n\r\n                                    </div>\r\n                                )\r\n                            })\r\n                        }\r\n                    </PerfectScrollbar>\r\n                </div>\r\n            </div>\r\n        </div >\r\n\r\n\r\n    )\r\n}\r\n\r\n\r\nexport default PlaylistContainer\r\n","import { useReducer } from \"react\"\r\nimport FilmContext from \"./filmContext\"\r\n\r\nconst filmInitialState = {\r\n    isPreviewLoaded: false,\r\n    comments: null,\r\n    commentsCount: null,\r\n    playerHeight: null,\r\n    reloadPlaylist: false,\r\n    error: null\r\n}\r\n\r\nconst filmReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'field': {\r\n            return {\r\n                ...state,\r\n                [action.fieldName]: action.payload\r\n            }\r\n        }\r\n        case 'success': {\r\n            return {\r\n                ...state,\r\n                isPreviewLoaded: true,\r\n                comments: action.comments,\r\n                commentsCount: action.commentsCount,\r\n                error: null\r\n            }\r\n        }\r\n        case 'reset-comments': {\r\n            return {\r\n                ...state,\r\n                comments: null,\r\n                commentsCount: null\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nconst FilmProvider = ({ children }) => {\r\n    const [filmState, filmDispatch] = useReducer(filmReducer, filmInitialState)\r\n\r\n\r\n    return (\r\n        <FilmContext.Provider value={[filmState, filmDispatch]}>\r\n            {children}\r\n        </FilmContext.Provider>\r\n    );\r\n}\r\n\r\nexport default FilmProvider","import { useHistory, useLocation } from 'react-router-dom'\r\nimport queryString from \"query-string\";\r\n\r\nimport FilmPreview from './preview'\r\nimport FilmsRecommendations from './recommendations';\r\nimport Comments from './comments';\r\nimport PlaylistContainer from './playlistContainer';\r\n\r\nimport useWindowWidth from '../../../helpers/hooks/useWindowsWidth'\r\nimport FilmProvider from '../../../helpers/contexts/film/filmProvider'\r\n\r\nimport './film.css'\r\n\r\n\r\nconst Film = (props) => {\r\n\r\n    let history = useHistory()\r\n    let location = useLocation()\r\n\r\n    const onSmallScreen = useWindowWidth(768);\r\n\r\n    const handleRedirect = (id) => {\r\n        const parsed = queryString.parse(location.search);\r\n        let historyObject = { pathname: `${process.env.REACT_APP_PATH_NAME}film/` + id }\r\n        if (parsed.list) historyObject = { ...historyObject, search: `?list=${parsed.list}` }\r\n        history.push(historyObject);\r\n    };\r\n\r\n    return (\r\n        <FilmProvider>\r\n            <div className=\"row p-0 m-0 mt-4 mx-2\">\r\n                <div className=\"col-12 order-first col-sm-12 order-first col-md-8 film-preview-container-px\">\r\n                    <FilmPreview {...props} />\r\n                    {!onSmallScreen && <Comments {...props} />}\r\n                </div>\r\n                <div className=\"col-12 order-2 col-sm-12 order-2 col-md-4 p-0\">\r\n                    <PlaylistContainer handleRedirect={handleRedirect} {...props} />\r\n                    <FilmsRecommendations handleRedirect={handleRedirect} {...props} />\r\n                </div>\r\n                {onSmallScreen &&\r\n                    <div className=\"col-12 order-last col-sm-12 order-sm-last col-md-8 pb-5 container-px\">\r\n                        <Comments {...props} />\r\n                    </div>\r\n                }\r\n            </div>\r\n\r\n        </FilmProvider>\r\n    )\r\n}\r\n\r\nexport default Film","export default __webpack_public_path__ + \"static/media/image_not_found.c4ba1e76.png\";","export const checkIfPlaylistButtonClick = (target) => {\r\n    if ((target.tagName === 'path' && target.parentNode.className.animVal && target.parentNode.className.animVal.includes('playlist-add-icon')) ||\r\n        (target.tagName === 'svg' && target.className.animVal && target.className.animVal.includes('playlist-add-icon')) ||\r\n        (target.className && typeof target.className === 'string' && target.className.includes('playlist-add-icon-holder')))\r\n        return true\r\n    return false\r\n}\r\n\r\nexport const displayCommentDate = (comment) => {\r\n    let date = new Date(Date.parse(comment.createdAt));\r\n    let time = (('0' + date.getDate()).slice(-2) + '-' + ('0' + (date.getMonth() + 1)).slice(-2) + '-'\r\n        + ('0' + date.getFullYear()).slice(-2)\r\n        + ' o ' + ('0' + date.getHours()).slice(-2) + ':' + ('0' + date.getMinutes()).slice(-2))\r\n    return time;\r\n};\r\n\r\nexport const parseSearchDate = (film) => {\r\n\r\n    let date = new Date(Date.parse(film.createdAt));\r\n    let today = new Date();\r\n\r\n\r\n    let time = Math.abs(Math.floor((\r\n        Date.UTC(\r\n            date.getFullYear(),\r\n            date.getMonth(),\r\n            date.getDate(),\r\n            date.getHours(),\r\n            date.getMinutes()) -\r\n        Date.UTC(\r\n            today.getFullYear(),\r\n            today.getMonth(),\r\n            today.getDate(),\r\n            today.getHours(),\r\n            today.getMinutes()))\r\n        / (1000 * 60)));\r\n\r\n    if (time / 60 >= 1) {\r\n        time /= 60;\r\n\r\n        if (time / 24 >= 1) {\r\n\r\n            time /= 24;\r\n\r\n            if (time / 30 >= 1) {\r\n\r\n                time /= 30;\r\n\r\n                if (time / 12 >= 1) {\r\n\r\n                    time = time / 12;\r\n                    time = Math.floor(time) + ' years ';\r\n\r\n                } else {\r\n                    time = Math.floor(time) + ' months ';\r\n                }\r\n\r\n            } else {\r\n                time = Math.floor(time) + ' days ';\r\n            }\r\n\r\n        } else {\r\n            time = Math.floor(time) + ' hours ';\r\n        }\r\n    } else {\r\n        time = Math.floor(time) + ' minutes ';\r\n    }\r\n\r\n    time = time + 'ago';\r\n\r\n    return time;\r\n};\r\n"],"sourceRoot":""}