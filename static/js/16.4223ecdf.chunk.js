(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[16],{521:function(e,t,n){"use strict";n.r(t);var r=n(526),i=n.n(r),a=n(527),c=n(60),s=n(1),u=n(7),o=n(539),l=n(139),d=n(137),f=n(15),b={title:"",initialPlaylist:{title:""},isInitialLoaded:!1,isSumbitted:!1,isSending:!1,isError:!1,error:"",isSuccess:!1},p=function(e,t){switch(t.type){case"field":return Object(f.a)(Object(f.a)({},e),{},Object(d.a)({error:"",isError:!1},t.fieldName,t.payload));case"initial-success":return Object(f.a)(Object(f.a)({},e),{},{isInitialLoaded:!0,title:t.payload,initialPlaylist:{title:t.payload}});case"submit":return Object(f.a)(Object(f.a)({},e),{},{isSumbitted:!0,isError:!1,error:""});case"send":return Object(f.a)(Object(f.a)({},e),{},{isSending:!0});case"success":return Object(f.a)(Object(f.a)({},e),{},{isSuccess:!0,isSending:!1,isSumbitted:!1,isError:!1,error:""});case"error":return Object(f.a)(Object(f.a)({},e),{},{isSuccess:!1,isSending:!1,isSumbitted:!1,isError:!0,error:t.payload?t.payload:""});default:return e}},j=n(544),m=n(2);t.default=function(){var e=Object(u.g)(),t=Object(u.i)().id,n=Object(s.useReducer)(p,b),r=Object(c.a)(n,2),d=r[0],f=r[1],h=d.title,O=d.initialPlaylist,v=d.isInitialLoaded,y=d.isSumbitted,g=d.isSending,x=d.isError,S=d.error,w=d.isSuccess;Object(s.useEffect)((function(){(function(){var e=Object(a.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.b(t).then((function(e){f({type:"initial-success",payload:e.data.title})})).catch((function(e){f({type:"error"})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,e]),Object(s.useEffect)((function(){g&&function(){var n=Object(a.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j.c(t,{title:h}).then((function(t){f({type:"success"}),setTimeout((function(){return e.goBack()}),500)})).catch((function(e){f({type:"error"})}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[t,e,g,h]);return Object(m.jsxs)(l.a,{id:"updatatePlaylistModal",title:"Update",onClose:function(){e.goBack()},children:[Object(m.jsxs)("form",{onSubmit:g?function(e){e.preventDefautl(),f({type:"submit"}),h&&f({type:"send"})}:null,children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"title",children:"Title"}),Object(m.jsx)(o.a,{type:"text",name:"title",value:h,isInvalid:y&&!h,onChange:function(e){return f({type:"field",fieldName:"title",payload:e.target.value})}}),Object(m.jsx)("div",{className:"invalid-feedback",children:"Title cannot be empty"})]}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("button",{className:"btn btn-primary",disabled:!v||v&&h===O.title,type:"submit",children:"Save"})})]}),x&&Object(m.jsx)("div",{className:"alert alert-danger mt-2 mb-0",children:S||"Something went wrong"}),w&&Object(m.jsx)("div",{className:"alert alert-success mt-2 mb-0",children:"Changes saved successfully!"})]})}},526:function(e,t,n){e.exports=n(240)},527:function(e,t,n){"use strict";function r(e,t,n,r,i,a,c){try{var s=e[a](c),u=s.value}catch(o){return void n(o)}s.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var c=e.apply(t,n);function s(e){r(c,i,a,s,u,"next",e)}function u(e){r(c,i,a,s,u,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return i}))},539:function(e,t,n){"use strict";var r=n(1),i=n(2);t.a=function(e){var t=e.isInvalid,n=e.onChange,a=e.type,c=e.name,s=e.value,u=e.placeholder,o=void 0===u?"":u,l="textarea"===a?"textarea":"input",d=Object(r.useRef)(null);return Object(r.useEffect)((function(){d.current&&(t?d.current.classList.add("is-invalid"):d.current.classList.remove("is-invalid"))}),[t]),Object(i.jsx)(l,{ref:d,className:"form-control",placeholder:o,type:a,name:c,value:s,onChange:n})}},544:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return o}));var r=n(42),i=n(138),a=function(e){return r.a.post("playlists",e,{headers:Object(i.a)()})},c=function(e){return r.a.get("playlists/".concat(e),{headers:Object(i.a)()})},s=function(e){return r.a.get("playlists",{params:e,headers:Object(i.a)()})},u=function(e,t){return r.a.patch("playlists/".concat(e),t,{headers:Object(i.a)()})},o=function(e){return r.a.delete("playlists/".concat(e),{headers:Object(i.a)()})}}}]);
//# sourceMappingURL=16.4223ecdf.chunk.js.map