(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[8],{478:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return n})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return l}));var c=10,i=12,n=10,s=40,l=20},479:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return l})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return o}));var c=a(23),i=a(57),n=function(e){return c.a.post("playlists",e,{headers:Object(i.a)()})},s=function(e){return c.a.get("playlists/".concat(e),{headers:Object(i.a)()})},l=function(e){return c.a.get("playlists",{params:e,headers:Object(i.a)()})},r=function(e,t){return c.a.patch("playlists/".concat(e),t,{headers:Object(i.a)()})},o=function(e){return c.a.delete("playlists/".concat(e),{headers:Object(i.a)()})}},480:function(e,t,a){"use strict";var c=a(25),i=a.n(c),n=a(41),s=a(16),l=a(192),r=a(476),o=a(190),d=a(0),u=a(479),p=a(1);t.a=function(e){var t=e.isPublic,a=e.id,c=e.isProfile,j=e.dispatchPrivacyUpdate,b=e.filmDispatch,f=Object(d.useState)(!1),m=Object(s.a)(f,2),h=m[0],O=m[1];Object(d.useEffect)((function(){function e(){return(e=Object(n.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.c(a,{is_public:!t}).then((function(e){O(!1),j({type:"change-playlist-privacy-success",payload:e.data}),void 0!==b&&b({type:"field",fieldName:"reloadPlaylist",payload:!0})})).catch((function(e){console.error(e),O(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}h&&function(){e.apply(this,arguments)}()}),[j,h,t,a,b]);var y=Object(p.jsx)(r.a,{style:{marginLeft:"auto",borderRadius:"20px",width:"24px",height:"24px"},className:"m-button",onClick:function(e){e.stopPropagation(),h||O(!0)},children:Object(p.jsx)(o.a,{icon:t?"globe-europe":"lock"})});return c?Object(p.jsx)(l.a,{className:"text-center justify-content-center d-flex align-items-center p-0 flex-grow-0",children:Object(p.jsx)(l.a,{className:"remove-holder p-0 m-0 flex-grow-0",style:{height:"24px",width:"24"},children:y})}):y}},481:function(e,t,a){"use strict";var c=a(16),i=a(0),n=a(498),s=a(1);t.a=function(e){var t=Object(i.useState)("data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="),a=Object(c.a)(t,2),l=a[0],r=a[1];return Object(i.useEffect)((function(){r(e.image)}),[e.image]),Object(s.jsx)(n.a,{aspectRatio:"16x9",children:Object(s.jsx)("img",{alt:"",className:"embed-responsive-item play-image",src:l})})}},484:function(e,t,a){"use strict";var c=a(192),i=a(476),n=a(190),s=a(1);t.a=function(e){var t=e.handleRemove;return Object(s.jsx)(c.a,{className:"text-center justify-content-center d-flex align-items-center p-0 flex-grow-0",children:Object(s.jsx)(c.a,{className:"remove-holder p-0 m-0 flex-grow-0",style:{height:"24px",width:"24px"},children:Object(s.jsx)(i.a,{style:{marginLeft:"auto",borderRadius:"20px",width:"24px",height:"24px"},className:"m-button ",onClick:t,children:Object(s.jsx)(n.a,{icon:"trash-alt"})})})})}},486:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n}));var c=function(e){return!!("path"===e.tagName&&e.parentNode.className.animVal&&e.parentNode.className.animVal.includes("playlist-add-icon")||"svg"===e.tagName&&e.className.animVal&&e.className.animVal.includes("playlist-add-icon")||e.className&&"string"===typeof e.className&&e.className.includes("playlist-add-icon-holder"))},i=function(e){var t=new Date(Date.parse(e.createdAt));return("0"+t.getDate()).slice(-2)+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getFullYear()).slice(-2)+" o "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)},n=function(e){var t=new Date(Date.parse(e.createdAt)),a=new Date,c=Math.abs(Math.floor((Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())-Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes()))/6e4));return c/60>=1?(c/=60)/24>=1?(c/=24)/30>=1?(c/=30)/12>=1?(c/=12,c=Math.floor(c)+" years "):c=Math.floor(c)+" months ":c=Math.floor(c)+" days ":c=Math.floor(c)+" hours ":c=Math.floor(c)+" minutes ",c+="ago"}},488:function(e,t,a){},490:function(e,t,a){"use strict";var c=a(16),i=a(0),n=a(589),s=a(192),l=a(190),r=a(2),o=a(25),d=a.n(o),u=a(41),p=a(467),j=a(472),b=a(102),f=a(468),m=a(270),h=a(456),O=a(158),y=a(479),x=a(117),g=a(191),v=a(155),N=a(17),w=a(478),A={playlists:[],isLoading:!0,isAllFetched:!1,isCreating:!1,isAdding:!1,playlistToUpgrade:null,title:"",isPublic:!1,error:""};function k(e,t){switch(t.type){case"field":return Object(r.a)(Object(r.a)({},e),{},Object(N.a)({error:""},t.fieldName,t.payload));case"load":return Object(r.a)(Object(r.a)({},e),{},{isLoading:!0,isAllFetched:!1});case"load-success":return Object(r.a)(Object(r.a)({},e),{},{playlists:[].concat(Object(v.a)(e.playlists),Object(v.a)(t.payload)),isLoading:!1,isAllFetched:t.payload<w.d,error:""});case"create":return Object(r.a)(Object(r.a)({},e),{},{isLoading:!1,isCreating:!0});case"create-success":return Object(r.a)(Object(r.a)({},e),{},{isLoading:!1,isCreating:!1});case"add":return Object(r.a)(Object(r.a)({},e),{},{isLoading:!1,isAdding:!0,playlistToUpgrade:t.payload});case"add-update-playlist":return Object(r.a)(Object(r.a)({},e),{},{playlists:e.playlists.map((function(t){return t.id===e.playlistToUpgrade.id?Object(r.a)(Object(r.a)({},t),{},{contains:!t.contains}):t})),playlistToUpgrade:null});case"add-success":return Object(r.a)(Object(r.a)({},e),{},{isAdding:!1});case"change-playlist-privacy-success":return Object(r.a)(Object(r.a)({},e),{},{playlists:e.playlists.map((function(e){return e.id===t.payload.id?Object(r.a)(Object(r.a)({},e),{},{is_public:t.payload.is_public}):e}))});case"error":return Object(r.a)(Object(r.a)({},e),{},{isLoading:!1,isAllFetched:!1,isCreating:!1,error:t.payload,title:""});default:return e}}var C=a(480),P=a(485),D=a.n(P),L=a(1);var _=function(e){var t=e.filmID,a=e.handlePlaylistClose,o=e.isPreview,v=e.filmDispatch,N=D()({background:"black"}),P=Object(c.a)(N,2),_=P[0],F=P[1],R=Object(i.useContext)(x.a).createToast,E=Object(i.useReducer)(k,A),M=Object(c.a)(E,2),T=M[0],I=M[1],U=T.playlists,S=T.title,H=T.isPublic,V=T.isLoading,Y=T.isAllFetched,B=T.isCreating,q=T.isAdding,G=T.playlistToUpgrade,J=T.error,z=Object(i.useCallback)((function(){V||Y||B||q||I({type:"load"})}),[V,Y,B,q]),Q=Object(g.a)(z);return Object(i.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a({playlists:!0,skip:U.length,limit:w.d}).then((function(e){var a=e.data.playlists;a.forEach((function(e){e.contains=e.films.indexOf(t)>-1})),I({type:"load-success",payload:a})})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}V&&function(){e.apply(this,arguments)}()}),[t,U,V]),Object(i.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={title:S,is_public:H,films_id:[t]},e.next=3,y.a(c).then((function(e){I({type:"create-success"}),R("Created playlist ".concat(S)),a()})).catch((function(e){console.error(e);var t=null;e.response&&e.response.data&&e.response.data.error?t=e.response.data.error:e.response&&e.response.data&&e.response.data.errors&&(t=e.response.data.errors[0]),I({type:"error",payload:"Path `title` is required."===t?"Playlist title is required":t})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}B&&function(){e.apply(this,arguments)}()}),[B,S,H,R,a,t]),Object(i.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={films_id:[t]},a=G.contains?Object(r.a)(Object(r.a)({},a),{},{is_remove_films:!0}):Object(r.a)(Object(r.a)({},a),{},{is_remove_films:!1}),c=G.contains?"Deleted from playlist ".concat(G.title):"Added to playlist ".concat(G.title),I({type:"add-update-playlist",playlist:G}),e.next=6,y.c(G.id,a).then((function(e){I({type:"add-success"}),o&&v({type:"field",fieldName:"reloadPlaylist",payload:!0}),R(c)})).catch((function(e){return console.error(e)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}q&&G&&function(){e.apply(this,arguments)}()}),[q,G,R,v,t,o]),Object(L.jsxs)(n.a.Menu,{onClick:function(e){return e.stopPropagation()},style:{width:"240px"},children:[Object(L.jsxs)(p.a,{className:"m-0 m-button playlist-add-button-ripple",children:[Object(L.jsx)(s.a,{className:"playlist-add-exit-text-width",children:"Save to..."}),Object(L.jsxs)(s.a,{xs:2,sm:2,onClick:function(e){_(e),setTimeout(a,150)},style:{borderRadius:"20px",width:"24px",height:"24px"},className:"playlist-add-icon-holder p-0 playlist-add-button-ripple d-flex align-items-center text-center justify-content-center",children:[Object(L.jsx)(l.a,{icon:"times"}),F]})]}),Object(L.jsx)(n.a.Divider,{}),Object(L.jsxs)("div",{ref:Q,style:{maxHeight:"100px",overflowY:"scroll",minHeight:"3rem"},children:[U.map((function(e,t){return Object(L.jsxs)(p.a,{className:"m-0 playlist-form-group",children:[Object(L.jsx)(s.a,{xs:10,sm:10,className:"p-0",children:Object(L.jsxs)(j.a.Check,{id:e.id,className:"form-check",children:[Object(L.jsx)(b.a.Input,{type:"checkbox",onChange:function(){return function(e){I({type:"add",payload:e})}(e)},checked:e.contains}),Object(L.jsx)(b.a.Label,{children:Object(L.jsx)("p",{className:"playlist-check-label",children:e.title})})]})}),Object(L.jsx)(C.a,{id:e.id,isPublic:e.is_public,isProfile:!1,filmDispatch:v,dispatchPrivacyUpdate:I})]},e.id)})),!Y&&Object(L.jsx)("div",{style:{height:"32px"},className:"d-flex justify-content-center",children:V&&Object(L.jsx)(f.a,{animation:"border"})})]}),Object(L.jsx)(n.a.Divider,{}),Object(L.jsx)(n.a.ItemText,{children:"Create a new playlist"}),Object(L.jsx)(p.a,{className:"m-0 p-0",children:Object(L.jsxs)(j.a,{children:[Object(L.jsx)(m.a,{isInvalid:""!==J,onChange:function(e){return I({type:"field",fieldName:"title",payload:e.target.value})},className:"mb-2 mt-2",placeholder:"Enter playlist title..."}),Object(L.jsx)(m.a.Feedback,{type:"invalid",className:"mb-2 mt-2",children:J}),Object(L.jsxs)(j.a.Select,{"aria-label":"Privacy",className:"mb-2 mt-2",onChange:function(e){return I({type:"field",fieldName:"isPublic",payload:"public"===e.target.value})},children:[Object(L.jsx)("option",{value:"private",children:"Private"}),Object(L.jsx)("option",{value:"public",children:"Public"})]}),Object(L.jsxs)(j.a.Group,{className:"d-flex align-items-center mt-2",children:[Object(L.jsx)(h.a,{disabled:B,onClick:B?null:function(e){e.stopPropagation(),I({type:"create"})},children:"Create"}),B&&Object(L.jsx)(f.a,{className:"ms-2",animation:"grow"})]})]})})]})},F=a(51),R=a(60);a(488);t.a=function(e){var t=Object(i.useContext)(F.a).user,a=D()({background:"black"}),r=Object(c.a)(a,2),o=r[0],d=r[1],u=Object(i.useState)(!1),p=Object(c.a)(u,2),j=p[0],b=p[1];return t.auth?Object(L.jsxs)(n.a,{show:j,onToggle:function(e,t,a){b(e)},className:e.isPreview?"col-sm-2 col-2 p-0":"",children:[Object(L.jsx)(n.a.Toggle,{variant:"link",bsPrefix:"p-0",className:"m-button playlist-add-button-ripple",style:{color:"black"},children:Object(L.jsx)("div",{style:{display:"inline-block",width:"100%",height:"100%"},children:Object(L.jsxs)(s.a,{onClick:o,style:{verticalAlign:"top",borderRadius:"20px",width:"24px",height:"24px"},className:"playlist-add-icon-holder p-0 playlist-add-button-ripple",children:[Object(L.jsx)(l.a,{style:{opacity:j?1:""},className:"playlist-add-icon",icon:R.a}),d]})})}),j&&Object(L.jsx)(_,{isPreview:e.isPreview,filmDispatch:e.filmDispatch,isOpen:j,filmID:e.filmID,handlePlaylistClose:function(){b(!1)}})]}):null}},491:function(e,t,a){},492:function(e,t,a){"use strict";a(0);var c=a(192),i=a(467),n=a(190),s=a(483),l=a.n(s),r=a(481),o=a(490),d=a(486),u=a(484),p=(a(491),a(1));t.a=function(e){var t=e.film,a=e.index,s=e.handleRedirect,j=e.handleRemove,b=e.isProfile,f=e.isRecommendations;return Object(p.jsx)("div",{className:f?"row mx-0 mb-4":"col mb-5 col-12 col-sm-6 col-md-3 col-lg-2",children:Object(p.jsxs)("div",{className:(f?"row p-0 m-0":"col").concat(" play-outer-container remove-container"),onClick:function(e){Object(d.a)(e.target)||s(t.id)},children:[Object(p.jsx)(c.a,{xs:f?6:12,sm:f?6:12,className:"m-0 p-0",children:Object(p.jsxs)("div",{className:"embed-responsive embed-responsive-16by9 z-depth-1-half play-container",children:[Object(p.jsx)(r.a,{image:t.img}),Object(p.jsx)(n.a,{className:"play-middle",icon:"play"})]})}),Object(p.jsxs)(c.a,{xs:f?6:12,sm:f?6:12,className:f?"m-0":"m-0 p-0",children:[Object(p.jsxs)(i.a,{className:"m-0 mt-1",children:[Object(p.jsx)(c.a,{className:"film-preview-playlist-title-width p-0",children:Object(p.jsx)(l.a,{line:1,text:t.title,className:"mb-1 mt-1 title "})}),Object(p.jsx)(c.a,{className:"p-0 d-flex justify-content-end",children:b?Object(p.jsx)(u.a,{handleRemove:j}):Object(p.jsx)(o.a,{index:a,filmID:t.id})})]}),Object(p.jsx)("p",{className:"mb-0 author-nick-color",children:Object(p.jsx)("small",{children:t.author_name})}),Object(p.jsx)("p",{className:"mb-0 film-views",children:Object(p.jsxs)("small",{children:[t.views," views"]})})]})]})})}},607:function(e,t,a){"use strict";a.r(t);var c=a(25),i=a.n(c),n=a(41),s=a(16),l=a(0),r=a(22),o=a(467),d=a(468),u=a(157),p=a(155),j=a(17),b=a(2),f=a(478),m={films:null,isLoading:!1,isAllFetched:!1,isInitialLoaded:!1,error:null},h=function(e,t){switch(t.type){case"field":return Object(b.a)(Object(b.a)({},e),{},Object(j.a)({},t.fieldName,t.payload));case"load":return Object(b.a)(Object(b.a)({},e),{},{isLoading:!0,isAllFetched:!1,error:""});case"initial-load":return Object(b.a)(Object(b.a)({},e),{},{films:Object(p.a)(new Set(Object(p.a)(t.payload))),isLoading:!1,isInitialLoaded:!0,isAllFetched:t.payload.length<f.b});case"success":return Object(b.a)(Object(b.a)({},e),{},{films:Object(p.a)(new Set([].concat(Object(p.a)(e.films),Object(p.a)(t.payload)))),isLoading:!1,isAllFetched:t.payload.length<f.c,error:null});case"error":return Object(b.a)(Object(b.a)({},e),{},{isLoading:!1,isAllFetched:!1,error:t.payload});default:return e}},O=a(191),y=a(492),x=a(1);t.default=function(e){var t=Object(r.g)(),a=Object(l.useReducer)(h,m),c=Object(s.a)(a,2),p=c[0],j=c[1],b=p.films,g=p.isLoading,v=p.isAllFetched,N=p.isInitialLoaded,w=Object(l.useCallback)((function(){g||v||!N||j({type:"load"})}),[g,v,N]);Object(O.a)(w,{triggerOnNoScroll:!0}),Object(l.useEffect)((function(){function e(){return(e=Object(n.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a({limit:f.b}).then((function(e){var t=e.data;t.forEach((function(e){e.img="".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail?width=small_webp")})),j({type:"initial-load",payload:t})}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(l.useEffect)((function(){function e(){return(e=Object(n.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a({skip:b.length,limit:f.c}).then((function(e){var t=e.data;t.forEach((function(e){e.img="".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail?width=small_webp")})),j({type:"success",payload:t})})).catch((function(e){return console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}g&&N&&b&&function(){e.apply(this,arguments)}()}),[g,N,b]);var A=function(e){t.push({pathname:"".concat("/filmapp-react-frontend/","film/")+e})};return Object(x.jsxs)(o.a,{className:"mt-5 mx-2",children:[b&&b.map((function(e,t){return Object(x.jsx)(y.a,{film:e,index:t,handleRedirect:A},e.id)})),!v&&Object(x.jsx)("div",{className:N?"fetch-loader d-flex justify-content-center":"suspense-loader",children:(g||!N)&&Object(x.jsx)(d.a,{className:N?"":"suspense-loader-spinner",animation:"border"})})]})}}}]);
//# sourceMappingURL=8.df0c21a9.chunk.js.map