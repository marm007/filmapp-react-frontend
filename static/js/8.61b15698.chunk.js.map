{"version":3,"sources":["components/pages/playlists/reducer.js","components/pages/playlists/index.js","config/index.js","helpers/hooks/useBottomScrollListener.js","components/buttons/ripple/index.js","services/playlistService.js","components/models/film/skeleton.js","components/buttons/changePrivacy/index.js","components/buttons/remove/index.js","helpers/hooks/useIntersectionObserver.js","components/models/blurredImage/index.js","components/buttons/edit/index.js","components/models/playlist/index.js"],"names":["initialState","playlists","playlistsCount","isLoading","isAllFetched","isInitialLoaded","error","playlistsPageReducer","state","action","type","fieldName","payload","Set","responseCount","pageInitialMaxFetchCount","pageMaxFetchCount","PlaylistsPage","history","useHistory","useReducer","dispatch","handleOnPlaylistsBottom","useCallback","useBottomScrollListener","triggerOnNoScroll","useEffect","a","playlistApi","limit","then","res","result","data","filtered","filter","playlist","film_id","forEach","img","process","length","catch","err","console","fetchInitialPlaylists","skip","fetchPlaylists","setRedirect","playlistID","filmID","push","pathname","search","className","map","index","handleRedirect","id","Array","_","commentsMaxFetchCount","recommendationsMaxFetchCount","playlistButtonMaxFetchCount","createCallback","debounce","handleOnScroll","options","lodashDebounce","onBottom","useMemo","offset","debounceOptions","leading","debouncedOnBottom","containerRef","useRef","current","scrollNode","scrollContainerBottomPosition","Math","round","scrollTop","clientHeight","scrollHeight","document","getElementById","scrollingElement","documentElement","window","innerHeight","ref","node","addEventListener","removeEventListener","RippleButton","onClick","children","props","useRipple","background","addRipple","ripples","e","onMouseDown","create","body","axios","post","headers","authHeader","get","show","params","partialUpdate","patch","remove","delete","FilmSkeleton","isRecommendations","ChangePrivacyButton","isPublic","isPlaylist","dispatchPrivacyUpdate","filmDispatch","useState","isChanging","setIsChanging","is_public","undefined","changePrivacy","preventDefault","stopPropagation","icon","RemoveButton","handleRemove","require","useIntersectionObserver","target","onIntersect","threshold","rootMargin","React","observer","IntersectionObserver","observe","unobserve","BlurredImage","src","srcWebp","thumb","thumbWebp","isCached","isLoaded","setIsLoaded","srcSet","alt","style","visibility","onLoad","opacity","BlurredImageComponent","image","isVisible","setIsVisible","setIsCached","observerElement","isIntersecting","tmp","Image","concat","complete","EditButton","Playlist","isProfile","setStyle","line","text","title","author_name"],"mappings":"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","file":"static/js/8.61b15698.chunk.js","sourcesContent":["import { pageInitialMaxFetchCount, pageMaxFetchCount  } from '../../../config'\r\n\r\n\r\nexport const initialState = {\r\n    playlists: null,\r\n    playlistsCount: 0,\r\n    isLoading: false,\r\n    isAllFetched: false,\r\n    isInitialLoaded: false,\r\n    error: null,\r\n}\r\n\r\nexport const playlistsPageReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'field': {\r\n            return {\r\n                ...state,\r\n                [action.fieldName]: action.payload\r\n            }\r\n        }\r\n        case 'initial-success': {\r\n            return {\r\n                ...state,\r\n                playlists: [...new Set([...action.playlists])],\r\n                isLoading: false,\r\n                isInitialLoaded: true,\r\n                isAllFetched: action.responseCount < pageInitialMaxFetchCount,\r\n                playlistsCount: state.playlistsCount + action.responseCount,\r\n            }\r\n        }\r\n        case 'load': {\r\n            return {\r\n                ...state,\r\n                isLoading: true,\r\n                isAllFetched: false,\r\n                error: null\r\n            }\r\n        }\r\n        case 'success': {\r\n            return {\r\n                ...state,\r\n                playlists: [...new Set([...state.playlists, ...action.playlists])],\r\n                isLoading: false,\r\n                isAllFetched: action.responseCount < pageMaxFetchCount,\r\n                playlistsCount: state.playlistsCount + action.responseCount,\r\n                error: null\r\n            }\r\n        }\r\n        case 'clear': {\r\n            return initialState\r\n        }\r\n        case 'error': {\r\n            return {\r\n                ...state,\r\n                isLoading: false,\r\n                isAllFetched: false,\r\n                error: action.payload\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n","import React, { useEffect, useReducer, useCallback } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport { playlistsPageReducer, initialState } from './reducer'\r\n\r\nimport Skeleton from '../../models/film/skeleton';\r\nimport Playlist from '../../models/playlist';\r\n\r\nimport * as playlistApi from '../../../services/playlistService'\r\n\r\nimport { pageInitialMaxFetchCount, pageMaxFetchCount } from '../../../config';\r\n\r\nimport useBottomScrollListener from '../../../helpers/hooks/useBottomScrollListener';\r\n\r\nconst pathName = process.env.REACT_APP_PATH_NAME;\r\n\r\nfunction PlaylistsPage() {\r\n\r\n    let history = useHistory()\r\n\r\n    const [state, dispatch] = useReducer(playlistsPageReducer, initialState)\r\n    const { playlists, isLoading, isAllFetched, isInitialLoaded, playlistsCount } = state\r\n\r\n    const handleOnPlaylistsBottom = useCallback(() => {\r\n        if (!isLoading && !isAllFetched && isInitialLoaded) {\r\n            dispatch({\r\n                type: 'load'\r\n            })\r\n        }\r\n    }, [isAllFetched, isLoading, isInitialLoaded])\r\n\r\n    useBottomScrollListener(handleOnPlaylistsBottom, { triggerOnNoScroll: true })\r\n\r\n    useEffect(() => {\r\n        async function fetchInitialPlaylists() {\r\n            await playlistApi.show({ limit: pageInitialMaxFetchCount })\r\n                .then(res => {\r\n                    const result = res.data;\r\n\r\n                    let filtered = result.filter(playlist => playlist.film_id)\r\n\r\n                    filtered.forEach(playlist => {\r\n                        playlist.img = `${process.env.REACT_APP_API_URL}films/${playlist.film_id}/thumbnail`\r\n                    });\r\n\r\n                    dispatch({\r\n                        type: 'initial-success',\r\n                        playlists: filtered,\r\n                        responseCount: result.length\r\n                    })\r\n\r\n                })\r\n                .catch(err => {\r\n                    console.error(err)\r\n                })\r\n        }\r\n\r\n        dispatch({ type: 'clear' })\r\n        fetchInitialPlaylists()\r\n\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        async function fetchPlaylists() {\r\n            await playlistApi.show({ skip: playlistsCount, limit: pageMaxFetchCount })\r\n                .then(res => {\r\n                    const result = res.data;\r\n\r\n                    let filtered = result.filter(playlist => playlist.film_id)\r\n\r\n                    filtered.forEach(playlist => {\r\n                        playlist.img = `${process.env.REACT_APP_API_URL}films/${playlist.film_id}/thumbnail`\r\n                    });\r\n\r\n                    dispatch({\r\n                        type: 'success',\r\n                        playlists: filtered,\r\n                        responseCount: result.length\r\n                    })\r\n\r\n                })\r\n                .catch(err => {\r\n                    console.error(err)\r\n                })\r\n        }\r\n\r\n        if (isLoading && isInitialLoaded) fetchPlaylists()\r\n\r\n    }, [isLoading, isInitialLoaded, playlists, playlistsCount])\r\n\r\n\r\n    const setRedirect = (playlistID, filmID) => {\r\n        history.push({\r\n            pathname: `${pathName}film/` + filmID,\r\n            search: `?list=${playlistID}`\r\n        });\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"row mt-5 mx-2\">\r\n            {\r\n                playlists ? playlists.map((playlist, index) => <Playlist key={playlist.id} playlist={playlist} index={index} handleRedirect={setRedirect} />)\r\n                    : ([...Array(20)].map((_, index) => (\r\n                        <Skeleton key={index} />\r\n                    )))\r\n            }\r\n            {\r\n                !isAllFetched && <div className=\"fetch-loader d-flex justify-content-center\">\r\n                    {\r\n                        isLoading &&\r\n                        <div className=\"spinner spinner-border\" />\r\n                    }\r\n                </div>\r\n            }\r\n\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default PlaylistsPage\r\n","export const commentsMaxFetchCount = 10\r\nexport const recommendationsMaxFetchCount = 12\r\n\r\nexport const playlistButtonMaxFetchCount = 10\r\n\r\nexport const pageInitialMaxFetchCount = 40\r\nexport const pageMaxFetchCount = 20\r\n","import { useCallback, useEffect, useRef, useMemo } from 'react';\r\nimport lodashDebounce from 'lodash.debounce';\r\n\r\nconst createCallback = (debounce, handleOnScroll, options) => {\r\n  if (debounce) {\r\n    return lodashDebounce(handleOnScroll, debounce, options);\r\n  } else {\r\n    return handleOnScroll;\r\n  }\r\n};\r\n\r\nfunction useBottomScrollListener(\r\n  onBottom = () => { },\r\n  options = {},\r\n) {\r\n  const { offset, triggerOnNoScroll, debounce, debounceOptions, id } = useMemo(\r\n    () => ({\r\n      offset: options?.offset ?? 20,\r\n      debounce: options?.debounce ?? 200,\r\n      debounceOptions: options?.debounceOptions ?? { leading: true },\r\n      triggerOnNoScroll: options?.triggerOnNoScroll ?? false,\r\n      id: options?.id ?? null\r\n    }),\r\n    [options?.offset, options?.debounce, options?.debounceOptions, options?.triggerOnNoScroll, options?.id],\r\n  );\r\n\r\n  const debouncedOnBottom = useMemo(() => createCallback(debounce, onBottom, debounceOptions), [onBottom, debounce, debounceOptions]);\r\n  const containerRef = useRef(null);\r\n  const handleOnScroll = useCallback(() => {\r\n\r\n    if (containerRef.current != null) {\r\n      const scrollNode = containerRef.current;\r\n      const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + scrollNode.clientHeight);\r\n      const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\r\n\r\n      if (scrollPosition <= scrollContainerBottomPosition) {\r\n        debouncedOnBottom();\r\n      }\r\n    } else if (id !== null) {\r\n      const scrollNode = document.getElementById(id);\r\n      if (scrollNode) {\r\n        const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + scrollNode.clientHeight);\r\n        const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\r\n        if (scrollPosition <= scrollContainerBottomPosition) {\r\n          debouncedOnBottom();\r\n        }\r\n      }\r\n    } else {\r\n      const scrollNode = document.scrollingElement || document.documentElement;\r\n      const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + window.innerHeight);\r\n      const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\r\n\r\n      if (scrollPosition <= scrollContainerBottomPosition) {\r\n        debouncedOnBottom();\r\n      }\r\n    }\r\n  }, [debouncedOnBottom, offset, id]);\r\n\r\n  useEffect(() => {\r\n    const ref = containerRef.current;\r\n    const node = document.getElementById(id)\r\n\r\n    if (ref != null) {\r\n      ref.addEventListener('scroll', handleOnScroll);\r\n    } else if (node !== null) {\r\n      node.addEventListener('scroll', handleOnScroll);\r\n    } else {\r\n      window.addEventListener('scroll', handleOnScroll);\r\n    }\r\n\r\n    if (triggerOnNoScroll) {\r\n      handleOnScroll();\r\n    }\r\n\r\n    return () => {\r\n      if (ref != null) {\r\n        ref.removeEventListener('scroll', handleOnScroll);\r\n      } else if (node !== null) {\r\n        node.addEventListener('scroll', handleOnScroll);\r\n      } else {\r\n        window.removeEventListener('scroll', handleOnScroll);\r\n      }\r\n    };\r\n  }, [handleOnScroll, triggerOnNoScroll, id]);\r\n\r\n  return containerRef;\r\n}\r\n\r\nexport default useBottomScrollListener;\r\n","import useRipple from 'useripple'\r\n\r\nconst RippleButton = ({ onClick = () => {}, children, className, id, ...props }) => {\r\n\r\n    const [addRipple, ripples] = useRipple({ background: 'black' })\r\n\r\n    return (\r\n        <button id={id ? id : ''} onClick={(e) => {\r\n            onClick(e)\r\n        }}\r\n            onMouseDown={addRipple}\r\n            className={`btn btn-link button-ripple text-dark ${className}`} {...props}>\r\n            {children}\r\n            {ripples}\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default RippleButton","import axios from '../helpers/axios'\r\nimport authHeader from '../helpers/authHeader'\r\n\r\n\r\nexport const create = (body) => axios.post('playlists', body, { headers: authHeader() })\r\nexport const index = (id) => axios.get(`playlists/${id}`, { headers: authHeader() })\r\nexport const show = (params) => axios.get(`playlists`, { params, headers: authHeader() })\r\nexport const partialUpdate = (id, body) => axios.patch(`playlists/${id}`, body, { headers: authHeader() })\r\n\r\n\r\nexport const remove = (id) => axios.delete(`playlists/${id}`, { headers: authHeader() })\r\n\r\n","import Skeleton from 'react-loading-skeleton';\r\n\r\nimport '../../pages/film/film.css'\r\n\r\nconst FilmSkeleton = ({ isRecommendations }) => {\r\n\r\n    return (\r\n        <div className={`${isRecommendations ? 'col-sm-12' : 'col-sm-6'} mb-4 col col-12 col-md-3 col-lg-2 container-px`}>\r\n            <div className=\"col-12 col-sm-12 p-0\">\r\n                <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\r\n                    <div className=\"embed-responsive-item\">\r\n                        <Skeleton className=\"w-100 h-100 line-height-unset\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"col-12 col-sm-12 mt-2 p-0\">\r\n                <div className=\"col p-0\">\r\n                    <Skeleton className=\"w-100 h-100 line-height-unset\" />\r\n                </div>\r\n\r\n                <div className=\"col p-0\">\r\n                    <Skeleton className={`${isRecommendations ? 'line-height-unset' : ''} col w-100`} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FilmSkeleton","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\nimport { useEffect, useState } from \"react\"\r\nimport * as playlistApi from '../../../services/playlistService'\r\nimport RippleButton from \"../ripple\"\r\n\r\nconst ChangePrivacyButton = ({ isPublic, id, isPlaylist, dispatchPrivacyUpdate, filmDispatch }) => {\r\n\r\n    const [isChanging, setIsChanging] = useState(false)\r\n\r\n\r\n    useEffect(() => {\r\n        async function changePrivacy() {\r\n            await playlistApi.partialUpdate(id, { is_public: !isPublic })\r\n                .then(res => {\r\n                    setIsChanging(false)\r\n\r\n                    dispatchPrivacyUpdate({\r\n                        type: 'change-playlist-privacy-success',\r\n                        payload: res.data\r\n                    })\r\n\r\n                    if (filmDispatch !== undefined) {\r\n                        filmDispatch({\r\n                            type: 'field',\r\n                            fieldName: 'reloadPlaylist',\r\n                            payload: true\r\n                        })\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.error(err)\r\n                    setIsChanging(false)\r\n                })\r\n        }\r\n        if (isChanging) changePrivacy()\r\n    }, [dispatchPrivacyUpdate, isChanging, isPublic, id, filmDispatch])\r\n\r\n    const handleChangePrivacy = (e) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        if (!isChanging) setIsChanging(true)\r\n    }\r\n\r\n\r\n    return <RippleButton\r\n        className={`button-ripple-24 p-0 ${isPlaylist ? '' : 'remove-holder'}`}\r\n        onClick={handleChangePrivacy}>\r\n        <FontAwesomeIcon icon={isPublic ? \"globe-europe\" : \"lock\"} />\r\n    </RippleButton>\r\n}\r\n\r\nexport default ChangePrivacyButton","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\nimport RippleButton from '../ripple'\r\n\r\nconst RemoveButton = ({ handleRemove }) => {\r\n    return (\r\n        <RippleButton\r\n            className=\"button-ripple-24 remove-holder p-0\"\r\n            onClick={handleRemove}>\r\n            <FontAwesomeIcon icon=\"trash-alt\" />\r\n        </RippleButton>\r\n    )\r\n}\r\n\r\nexport default RemoveButton","import React from \"react\";\r\nrequire('intersection-observer');\r\n\r\nconst useIntersectionObserver = ({\r\n  target,\r\n  onIntersect,\r\n  threshold = 0.1,\r\n  rootMargin = \"0px\"\r\n}) => {\r\n  React.useEffect(() => {\r\n    const observer = new IntersectionObserver(onIntersect, {\r\n      rootMargin,\r\n      threshold\r\n    });\r\n    const current = target.current;\r\n    observer.observe(current);\r\n    return () => {\r\n      observer.unobserve(current);\r\n    };\r\n  });\r\n};\r\nexport default useIntersectionObserver;","import React, { useState, useRef } from 'react';\r\nimport useIntersectionObserver from '../../../helpers/hooks/useIntersectionObserver';\r\nimport \"./blurred.css\";\r\n\r\nconst BlurredImage = ({ src, srcWebp, thumb, thumbWebp, isCached }) => {\r\n    const [isLoaded, setIsLoaded] = useState(isCached);\r\n\r\n    return (\r\n        <div>\r\n\r\n            <picture >\r\n                <source type=\"image/webp\" srcSet={thumbWebp} />\r\n                <source type=\"image/jpeg\" srcSet={thumb} />\r\n                <img className=\"image thumb\" alt=\"\"\r\n                    style={{ visibility: isLoaded ? \"hidden\" : \"visible\" }}\r\n                    src={thumb}\r\n                    onLoad={() => {\r\n                        setIsLoaded(true);\r\n                    }} />\r\n            </picture>\r\n\r\n            <picture >\r\n                <source type=\"image/webp\" srcSet={srcWebp} />\r\n                <source type=\"image/jpeg\" srcSet={src} />\r\n                <img className=\"image full\" alt=\"\"\r\n                    style={{ opacity: isLoaded ? 1 : 0 }}\r\n                    src={src}\r\n                    onLoad={() => {\r\n                        setIsLoaded(true);\r\n                    }} />\r\n            </picture>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction BlurredImageComponent({ image }) {\r\n    const ref = useRef();\r\n    const [isVisible, setIsVisible] = useState(false);\r\n    const [isCached, setIsCached] = useState(false);\r\n\r\n    useIntersectionObserver({\r\n        target: ref,\r\n        onIntersect: ([{ isIntersecting }], observerElement) => {\r\n            if (isIntersecting) {\r\n                let tmp = new Image();\r\n                tmp.src = image.concat('?width=poster_webp');\r\n                setIsCached(tmp.complete)\r\n                setIsVisible(true);\r\n                if (ref.current)\r\n                    observerElement.unobserve(ref.current);\r\n            }\r\n        }\r\n    });\r\n\r\n    return (\r\n        <div\r\n            ref={ref}\r\n            className=\"image-container embed-responsive embed-responsive-16by9  play-image\"\r\n        >\r\n            {isVisible && (\r\n                <BlurredImage isCached={isCached}\r\n                    src={image.concat('?width=poster')}\r\n                    srcWebp={image.concat('?width=poster_webp')}\r\n                    thumb={image.concat('?width=preview')}\r\n                    thumbWebp={image.concat('?width=preview_webp')} />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default BlurredImageComponent;","import React from 'react'\r\nimport { useHistory } from \"react-router-dom\"\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\nimport RippleButton from \"../ripple\"\r\n\r\nconst EditButton = ({ isPlaylist, id }) => {\r\n    let history = useHistory()\r\n\r\n    const handleEditClick = (e) => {\r\n        e.stopPropagation()\r\n        if (isPlaylist) {\r\n            history.push(`profile/update-playlist/${id}`)\r\n        } else {\r\n            history.push(`profile/update-film/${id}`)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <RippleButton className=\"button-ripple-24 remove-holder p-0\"\r\n            onClick={handleEditClick}>\r\n            <FontAwesomeIcon icon=\"edit\" />\r\n        </RippleButton>\r\n    )\r\n}\r\n\r\nexport default EditButton","import React, { useEffect, useState } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport TextTruncate from \"react-text-truncate\";\r\nimport BlurredImageComponent from \"../blurredImage\";\r\nimport RemoveButton from '../../buttons/remove';\r\nimport ChangePrivacyButton from '../../buttons/changePrivacy';\r\nimport EditButton from '../../buttons/edit';\r\n\r\nconst Playlist = ({ playlist, handleRedirect, handleRemove, isProfile, dispatchPrivacyUpdate }) => {\r\n\r\n    const colWidth = isProfile ? 8 : 10\r\n\r\n    const [style, setStyle] = useState(\"mb-4 play-outer-container remove-container\")\r\n\r\n    useEffect(() => {\r\n        if (!playlist.film_id) setStyle(\"mb-4 play-cursor-default remove-container\")\r\n    }, [playlist.film_id])\r\n\r\n\r\n    return (\r\n        <div className=\"col-12 col-sm-6 col-md-3 col-lg-2 container-px\"\r\n            key={playlist.id}>\r\n            <div className={`col ${style} p-0`} onClick={() => handleRedirect(playlist.id, playlist.film_id)}>\r\n                <div className=\"play-container p-0\">\r\n                    <BlurredImageComponent\r\n                        image={playlist.img} />\r\n\r\n                    <div className=\"row play-middle w-100 m-0\">\r\n                        <div className=\"col-5 col-sm-5 pr-1 d-flex justify-content-end align-items-center\">\r\n                            <FontAwesomeIcon icon=\"play\" />\r\n                        </div>\r\n                        <div className=\"col-7 col-sm-7 pl-1 d-flex justify-content-start align-items-center\">\r\n                            <small className=\"font-weight-bold\" >Play all</small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"row m-0 mt-1\">\r\n                    <div className={`p-0 col ${isProfile ? 'button-ripple-div-next-width-3x' : 'col-12'}`}>\r\n                        <TextTruncate line={1} text={playlist.title}\r\n                            className=\"mb-1 mt-1 title \" />\r\n                    </div>\r\n\r\n\r\n                    {\r\n                        isProfile && <>\r\n                            <ChangePrivacyButton\r\n                                id={playlist.id}\r\n                                isPublic={playlist.is_public}\r\n                                isProfile={true}\r\n                                dispatchPrivacyUpdate={dispatchPrivacyUpdate} />\r\n                            <RemoveButton handleRemove={handleRemove} />\r\n                            <EditButton isPlaylist={true} id={playlist.id} />\r\n                        </>\r\n                    }\r\n                </div>\r\n                <p className=\"mb-0 author-nick\">\r\n                    <span>{playlist.author_name}</span>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Playlist"],"sourceRoot":""}