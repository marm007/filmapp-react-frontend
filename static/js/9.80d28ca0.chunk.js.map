{"version":3,"sources":["config/index.js","helpers/hooks/useBottomScrollListener.js","components/helpers/rippleButton.js","services/playlistService.js","components/helpers/film/skeleton.js","components/helpers/changePrivacyButton.js","components/helpers/removeButton.js","helpers/hooks/useIntersectionObserver.js","components/helpers/blurredImage/index.js","components/helpers/playlist/index.js","components/pages/playlists/reducer.js","components/pages/playlists/index.js"],"names":["commentsMaxFetchCount","recommendationsMaxFetchCount","playlistButtonMaxFetchCount","pageInitialMaxFetchCount","pageMaxFetchCount","createCallback","debounce","handleOnScroll","options","lodashDebounce","useBottomScrollListener","onBottom","useMemo","offset","debounceOptions","leading","triggerOnNoScroll","id","debouncedOnBottom","containerRef","useRef","useCallback","current","scrollNode","scrollContainerBottomPosition","Math","round","scrollTop","clientHeight","scrollHeight","document","getElementById","scrollingElement","documentElement","window","innerHeight","useEffect","ref","node","addEventListener","removeEventListener","RippleButton","onClick","children","className","useRipple","background","addRipple","ripples","style","color","e","onMouseDown","create","body","axios","post","headers","authHeader","index","get","show","params","partialUpdate","patch","remove","delete","FilmSkeleton","isRecommendations","lineHeight","ChangePrivacyButton","isPublic","isProfile","dispatchPrivacyUpdate","filmDispatch","useState","isChanging","setIsChanging","a","playlistApi","is_public","then","res","type","payload","data","undefined","fieldName","catch","err","console","error","changePrivacy","privacyButton","stopPropagation","icon","height","width","RemoveButton","handleRemove","useIntersectionObserver","target","onIntersect","threshold","rootMargin","React","observer","IntersectionObserver","observe","unobserve","BlurredImage","src","srcWebp","thumbWebp","thumb","isCached","isLoaded","setIsLoaded","alt","visibility","srcSet","opacity","onLoad","BlurredImageComponent","image","isVisible","setIsVisible","setIsCached","observerElement","isIntersecting","tmp","Image","concat","complete","Playlist","playlist","handleRedirect","colWidth","setStyle","film_id","img","margin","display","justifyContent","alignItems","line","text","title","author_name","initialState","playlists","playlistsCount","isLoading","isAllFetched","isInitialLoaded","playlistsPageReducer","state","action","Set","responseCount","PlaylistsPage","history","useHistory","useReducer","dispatch","handleOnPlaylistsBottom","limit","result","filtered","filter","forEach","process","length","fetchInitialPlaylists","skip","fetchPlaylists","setRedirect","playlistID","filmID","push","pathname","search","map","Array","_"],"mappings":"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","file":"static/js/9.80d28ca0.chunk.js","sourcesContent":["export const commentsMaxFetchCount = 10\nexport const recommendationsMaxFetchCount = 12\n\nexport const playlistButtonMaxFetchCount = 10\n\nexport const pageInitialMaxFetchCount = 40\nexport const pageMaxFetchCount = 20\n","import { useCallback, useEffect, useRef, useMemo } from 'react';\nimport lodashDebounce from 'lodash.debounce';\n\nconst createCallback = (debounce, handleOnScroll, options) => {\n  if (debounce) {\n    return lodashDebounce(handleOnScroll, debounce, options);\n  } else {\n    return handleOnScroll;\n  }\n};\n\nfunction useBottomScrollListener(\n  onBottom = () => { },\n  options = {},\n) {\n  const { offset, triggerOnNoScroll, debounce, debounceOptions, id } = useMemo(\n    () => ({\n      offset: options?.offset ?? 20,\n      debounce: options?.debounce ?? 200,\n      debounceOptions: options?.debounceOptions ?? { leading: true },\n      triggerOnNoScroll: options?.triggerOnNoScroll ?? false,\n      id: options?.id ?? null\n    }),\n    [options?.offset, options?.debounce, options?.debounceOptions, options?.triggerOnNoScroll, options?.id],\n  );\n\n  const debouncedOnBottom = useMemo(() => createCallback(debounce, onBottom, debounceOptions), [onBottom, debounce, debounceOptions]);\n  const containerRef = useRef(null);\n  const handleOnScroll = useCallback(() => {\n\n    if (containerRef.current != null) {\n      const scrollNode = containerRef.current;\n      const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + scrollNode.clientHeight);\n      const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\n\n      if (scrollPosition <= scrollContainerBottomPosition) {\n        debouncedOnBottom();\n      }\n    } else if (id !== null) {\n      const scrollNode = document.getElementById(id);\n      if (scrollNode) {\n        const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + scrollNode.clientHeight);\n        const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\n        if (scrollPosition <= scrollContainerBottomPosition) {\n          debouncedOnBottom();\n        }\n      }\n    } else {\n      const scrollNode = document.scrollingElement || document.documentElement;\n      const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + window.innerHeight);\n      const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\n\n      if (scrollPosition <= scrollContainerBottomPosition) {\n        debouncedOnBottom();\n      }\n    }\n  }, [debouncedOnBottom, offset, id]);\n\n  useEffect(() => {\n    const ref = containerRef.current;\n    const node = document.getElementById(id)\n\n    if (ref != null) {\n      ref.addEventListener('scroll', handleOnScroll);\n    } else if (node !== null) {\n      node.addEventListener('scroll', handleOnScroll);\n    } else {\n      window.addEventListener('scroll', handleOnScroll);\n    }\n\n    if (triggerOnNoScroll) {\n      handleOnScroll();\n    }\n\n    return () => {\n      if (ref != null) {\n        ref.removeEventListener('scroll', handleOnScroll);\n      } else if (node !== null) {\n        node.addEventListener('scroll', handleOnScroll);\n      } else {\n        window.removeEventListener('scroll', handleOnScroll);\n      }\n    };\n  }, [handleOnScroll, triggerOnNoScroll, id]);\n\n  return containerRef;\n}\n\nexport default useBottomScrollListener;\n","import useRipple from 'useripple'\n\nconst RippleButton = ({ onClick, children, className }) => {\n\n    const [addRipple, ripples] = useRipple({ background: 'black' })\n\n    return (\n        <button style={{ color: 'black' }} onClick={(e) => {\n            onClick(e)\n        }}\n            onMouseDown={addRipple}\n            className={`btn btn-link button-ripple ${className}`}>\n            {children}\n            {ripples}\n        </button>\n    )\n}\n\nexport default RippleButton","import axios from '../helpers/axios'\nimport authHeader from '../helpers/authHeader'\n\n\nexport const create = (body) => axios.post('playlists', body, { headers: authHeader() })\nexport const index = (id) => axios.get(`playlists/${id}`, { headers: authHeader() })\nexport const show = (params) => axios.get(`playlists`, { params, headers: authHeader() })\nexport const partialUpdate = (id, body) => axios.patch(`playlists/${id}`, body, { headers: authHeader() })\n\n\nexport const remove = (id) => axios.delete(`playlists/${id}`, { headers: authHeader() })\n\n","import Skeleton from 'react-loading-skeleton';\n\nimport '../../pages/film/film.css'\n\nconst FilmSkeleton = ({ isRecommendations }) => {\n\n    return (\n        <div className={`${isRecommendations ? 'col-sm-12' : 'col-sm-6'} mb-5 col col-12 col-md-3 col-lg-2`}>\n            <div className=\"col-12 col-sm-12\">\n                <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\n                    <div className=\"ratio ratio-16x9\">\n                        <Skeleton className=\"w-100 h-100\" style={{ lineHeight: '1.5' }} />\n                    </div>\n                </div>\n            </div>\n            <div className=\"col-12 col-sm-12 mt-2\">\n                <div className=\"col p-0\">\n                    <Skeleton className=\"col w-100\" />\n                </div>\n\n                <div className=\"col p-0\">\n                    <Skeleton className=\"w-100\" />\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default FilmSkeleton","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { useEffect, useState } from \"react\"\nimport * as playlistApi from '../../services/playlistService'\nimport RippleButton from \"./rippleButton\"\n\nconst ChangePrivacyButton = ({ isPublic, id, isProfile, dispatchPrivacyUpdate, filmDispatch }) => {\n\n    const [isChanging, setIsChanging] = useState(false)\n\n\n    useEffect(() => {\n        async function changePrivacy() {\n            await playlistApi.partialUpdate(id, { is_public: !isPublic })\n                .then(res => {\n                    setIsChanging(false)\n\n                    dispatchPrivacyUpdate({\n                        type: 'change-playlist-privacy-success',\n                        payload: res.data\n                    })\n\n                    if (filmDispatch !== undefined) {\n                        filmDispatch({\n                            type: 'field',\n                            fieldName: 'reloadPlaylist',\n                            payload: true\n                        })\n                    }\n                })\n                .catch(err => {\n                    console.error(err)\n                    setIsChanging(false)\n                })\n        }\n        if (isChanging) changePrivacy()\n    }, [dispatchPrivacyUpdate, isChanging, isPublic, id, filmDispatch])\n\n    const handleChangePrivacy = (e) => {\n        e.stopPropagation()\n        if (!isChanging) setIsChanging(true)\n    }\n\n    const privacyButton = (\n        <RippleButton\n            className=\"button-ripple-24 p-0\"\n            onClick={handleChangePrivacy}>\n            <FontAwesomeIcon icon={isPublic ? \"globe-europe\" : \"lock\"} />\n        </RippleButton>\n    )\n\n    return isProfile ?\n        (\n            <div className=\"col text-center justify-content-center d-flex align-items-center p-0 flex-grow-0\"\n            >\n                <div\n                    className=\"col remove-holder p-0 m-0 flex-grow-0\"\n                    style={{ height: '24px', width: '24' }}>\n                    {privacyButton}\n                </div>\n            </div>\n        ) :\n        privacyButton\n}\n\nexport default ChangePrivacyButton","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport RippleButton from './rippleButton'\n\nconst RemoveButton = ({ handleRemove }) => {\n    return (\n        <RippleButton\n            className=\"button-ripple-24 remove-holder p-0\"\n            onClick={handleRemove}>\n            <FontAwesomeIcon icon=\"trash-alt\" />\n        </RippleButton>\n    )\n}\n\nexport default RemoveButton","import React from \"react\";\nconst useIntersectionObserver = ({\n  target,\n  onIntersect,\n  threshold = 0.1,\n  rootMargin = \"0px\"\n}) => {\n  React.useEffect(() => {\n    const observer = new IntersectionObserver(onIntersect, {\n      rootMargin,\n      threshold\n    });\n    const current = target.current;\n    observer.observe(current);\n    return () => {\n      observer.unobserve(current);\n    };\n  });\n};\nexport default useIntersectionObserver;","import React, { useState, useRef } from 'react';\nimport useIntersectionObserver from '../../../helpers/hooks/useIntersectionObserver';\nimport \"./blurred.css\";\n\nconst BlurredImage = ({ src, srcWebp, thumb, thumbWebp, isCached }) => {\n    const [isLoaded, setIsLoaded] = useState(isCached);\n\n    return (\n        <div className=\"ratio ratio-16x9\">\n            <img\n                className=\"image thumb\"\n                alt=\"\"\n                src={thumbWebp}\n                style={{ visibility: isLoaded ? \"hidden\" : \"visible\" }}\n            />\n\n            <picture>\n                <source type=\"image/webp\" srcSet={srcWebp} />\n                <source type=\"image/jpeg\" srcSet={src} />\n                <img className=\"image full\" alt=\"\"\n                    style={{ opacity: isLoaded ? 1 : 0 }}\n                    src={src}\n                    onLoad={() => {\n                        setIsLoaded(true);\n                    }} />\n            </picture>\n        </div>\n    );\n}\n\nfunction BlurredImageComponent({ image }) {\n    const ref = useRef();\n    const [isVisible, setIsVisible] = useState(false);\n    const [isCached, setIsCached] = useState(false);\n\n    useIntersectionObserver({\n        target: ref,\n        onIntersect: ([{ isIntersecting }], observerElement) => {\n            if (isIntersecting) {\n                let tmp = new Image();\n                tmp.src = image.concat('?width=poster_webp');\n                setIsCached(tmp.complete)\n                setIsVisible(true);\n                observerElement.unobserve(ref.current);\n            }\n        }\n    });\n\n    return (\n        <div\n            ref={ref}\n            className=\"image-container ratio ratio-16x9 play-image\"\n        >\n            {isVisible && (\n                <BlurredImage isCached={isCached}\n                    src={image.concat('?width=poster')}\n                    srcWebp={image.concat('?width=poster_webp')}\n                    thumb={image.concat('?width=preview')}\n                    thumbWebp={image.concat('?width=preview_webp')} />\n            )}\n        </div>\n    );\n}\n\nexport default BlurredImageComponent;","import React, { useEffect, useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport TextTruncate from \"react-text-truncate\";\nimport BlurredImageComponent from \"../blurredImage\";\nimport RemoveButton from '../../helpers/removeButton';\nimport ChangePrivacyButton from '../changePrivacyButton';\n\nconst Playlist = ({ playlist, handleRedirect, handleRemove, isProfile, dispatchPrivacyUpdate }) => {\n\n    const colWidth = isProfile ? 8 : 10\n\n    const [style, setStyle] = useState(\"mb-5 play-outer-container remove-container\")\n\n    useEffect(() => {\n        if (!playlist.film_id) setStyle(\"mb-5 play-cursor-default remove-container\")\n    }, [playlist.film_id])\n\n\n    return (\n        <div className=\"col-12 col-sm-6 col-md-3 col-lg-2\"\n            key={playlist.id}>\n            <div className={`col ${style}`} onClick={() => handleRedirect(playlist.id, playlist.film_id)}>\n                <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\n                    <BlurredImageComponent\n                        image={playlist.img} />\n\n                    <div style={{ width: '100%', margin: 0 }} className=\"row play-middle\">\n                        <div className=\"col-5 col-sm-5\" style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center' }}>\n                            <FontAwesomeIcon icon=\"play\" />\n                        </div>\n                        <div className=\"col-7 col-sm-7\" style={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center' }}>\n                            <small className=\"fw-bold\" >Play all</small>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"row m-0 mt-1\">\n                    <div className={`p-0 col-${colWidth} col-sm-${colWidth}`}>\n                        <TextTruncate line={1} text={playlist.title}\n                            className=\"mb-1 mt-1 title \" />\n                    </div>\n\n\n                    {\n                        isProfile && <div className=\"col-4 col-sm-4 p-0 d-flex justify-content-end\">\n                            <ChangePrivacyButton\n                                id={playlist.id}\n                                isPublic={playlist.is_public}\n                                isProfile={true}\n                                dispatchPrivacyUpdate={dispatchPrivacyUpdate} />\n                            <RemoveButton handleRemove={handleRemove} />\n                        </div>\n                    }\n                </div>\n                <p className=\"mb-0 author-nick\">\n                    <span>{playlist.author_name}</span>\n                </p>\n            </div>\n        </div>\n    )\n}\n\nexport default Playlist","import { pageInitialMaxFetchCount, pageMaxFetchCount  } from '../../../config'\n\n\nexport const initialState = {\n    playlists: null,\n    playlistsCount: 0,\n    isLoading: false,\n    isAllFetched: false,\n    isInitialLoaded: false,\n    error: null,\n}\n\nexport const playlistsPageReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'initial-success': {\n            return {\n                ...state,\n                playlists: [...new Set([...action.playlists])],\n                isLoading: false,\n                isInitialLoaded: true,\n                isAllFetched: action.responseCount < pageInitialMaxFetchCount,\n                playlistsCount: state.playlistsCount + action.responseCount,\n            }\n        }\n        case 'load': {\n            return {\n                ...state,\n                isLoading: true,\n                isAllFetched: false,\n                error: null\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                playlists: [...new Set([...state.playlists, ...action.playlists])],\n                isLoading: false,\n                isAllFetched: action.responseCount < pageMaxFetchCount,\n                playlistsCount: state.playlistsCount + action.responseCount,\n                error: null\n            }\n        }\n        case 'clear': {\n            return initialState\n        }\n        case 'error': {\n            return {\n                ...state,\n                isLoading: false,\n                isAllFetched: false,\n                error: action.payload\n            }\n        }\n        default:\n            return state\n    }\n}\n","import React, { useEffect, useReducer, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { playlistsPageReducer, initialState } from './reducer'\n\nimport Skeleton from '../../helpers/film/skeleton';\nimport Playlist from '../../helpers/playlist';\n\nimport * as playlistApi from '../../../services/playlistService'\n\nimport { pageInitialMaxFetchCount, pageMaxFetchCount } from '../../../config';\n\nimport useBottomScrollListener from '../../../helpers/hooks/useBottomScrollListener';\n\nconst pathName = process.env.REACT_APP_PATH_NAME;\n\nfunction PlaylistsPage() {\n\n    let history = useHistory()\n\n    const [state, dispatch] = useReducer(playlistsPageReducer, initialState)\n    const { playlists, isLoading, isAllFetched, isInitialLoaded, playlistsCount } = state\n\n    const handleOnPlaylistsBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && isInitialLoaded) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isAllFetched, isLoading, isInitialLoaded])\n\n    useBottomScrollListener(handleOnPlaylistsBottom, { triggerOnNoScroll: true })\n\n    useEffect(() => {\n        async function fetchInitialPlaylists() {\n            await playlistApi.show({ limit: pageInitialMaxFetchCount })\n                .then(res => {\n                    const result = res.data;\n\n                    let filtered = result.filter(playlist => playlist.film_id)\n\n                    filtered.forEach(playlist => {\n                        playlist.img = `${process.env.REACT_APP_API_URL}films/${playlist.film_id}/thumbnail`\n                    });\n\n                    dispatch({\n                        type: 'initial-success',\n                        playlists: filtered,\n                        responseCount: result.length\n                    })\n\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        dispatch({ type: 'clear' })\n        fetchInitialPlaylists()\n\n    }, [])\n\n    useEffect(() => {\n        async function fetchPlaylists() {\n            await playlistApi.show({ skip: playlistsCount, limit: pageMaxFetchCount })\n                .then(res => {\n                    const result = res.data;\n\n                    let filtered = result.filter(playlist => playlist.film_id)\n\n                    filtered.forEach(playlist => {\n                        playlist.img = `${process.env.REACT_APP_API_URL}films/${playlist.film_id}/thumbnail`\n                    });\n\n                    dispatch({\n                        type: 'success',\n                        playlists: filtered,\n                        responseCount: result.length\n                    })\n\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (isLoading && isInitialLoaded) fetchPlaylists()\n\n    }, [isLoading, isInitialLoaded, playlists, playlistsCount])\n\n\n    const setRedirect = (playlistID, filmID) => {\n        history.push({\n            pathname: `${pathName}film/` + filmID,\n            search: `?list=${playlistID}`\n        });\n    };\n\n\n    return (\n        <div className=\"row mt-5 mx-2\">\n            {\n                playlists ? playlists.map((playlist, index) => <Playlist key={playlist.id} playlist={playlist} index={index} handleRedirect={setRedirect} />)\n                    : ([...Array(20)].map((_, index) => (\n                        <Skeleton key={index} />\n                    )))\n            }\n            {\n                !isAllFetched && <div className=\"fetch-loader d-flex justify-content-center\">\n                    {\n                        isLoading &&\n                        <div className=\"spinner spinner-border\" />\n                    }\n                </div>\n            }\n\n        </div>\n\n    )\n}\n\nexport default PlaylistsPage\n"],"sourceRoot":""}