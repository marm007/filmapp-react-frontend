(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[13],{522:function(t,e,n){"use strict";n.r(e);var i=n(528),r=n.n(i),a=n(529),c=n(46),s=n(1),o=n(7),u=n(541),l=n(139),d=n(137),f=n(15),p={title:"",description:"",initialFilm:{title:"",description:""},isInitialLoaded:!1,isSumbitted:!1,isSending:!1,isError:!1,error:"",isSuccess:!1},b=function(t,e){switch(e.type){case"field":return Object(f.a)(Object(f.a)({},t),{},Object(d.a)({error:"",isError:!1},e.fieldName,e.payload));case"initial-success":return Object(f.a)(Object(f.a)({},t),{},{isInitialLoaded:!0,title:e.title,description:e.description,initialFilm:{title:e.title,description:e.description}});case"submit":return Object(f.a)(Object(f.a)({},t),{},{isSumbitted:!0,isError:!1,error:""});case"send":return Object(f.a)(Object(f.a)({},t),{},{isSending:!0});case"success":return Object(f.a)(Object(f.a)({},t),{},{isSuccess:!0,isSending:!1,isSumbitted:!1,isError:!1,error:""});case"error":return Object(f.a)(Object(f.a)({},t),{},{isSuccess:!1,isSending:!1,isSumbitted:!1,isError:!0,error:e.payload?e.payload:""});default:return t}},m=n(543),h=n(540),j=n(143),v=n(2);e.default=function(){var t=Object(s.useContext)(j.a).setToUpdate,e=Object(o.g)(),n=Object(o.i)().id,i=Object(s.useReducer)(b,p),d=Object(c.a)(i,2),f=d[0],O=d[1],g=f.title,y=f.description,x=f.initialFilm,S=f.isInitialLoaded,w=f.isSumbitted,M=f.isSending,D=f.isError,N=f.error,C=f.isSuccess;Object(s.useEffect)((function(){var t=function(){var t=Object(a.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.c(n).then((function(t){O({type:"initial-success",title:t.data.title,description:t.data.description})})).catch((function(t){O({type:"error"})}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e.location.state&&e.location.state.title&&e.location.state.description?O({type:"initial-success",title:e.location.state.title,description:e.location.state.description}):t()}),[n,e]),Object(s.useEffect)((function(){M&&function(){var i=Object(a.a)(r.a.mark((function i(){return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,m.f(n,{title:g,description:y}).then((function(n){O({type:"success"}),t(!1,n.data),setTimeout((function(){return Object(h.b)(e,"/update-film")}),500)})).catch((function(t){O({type:"error"})}));case 2:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}()()}),[y,n,e,M,g,t]);return Object(v.jsxs)(l.a,{id:"updatateFilmModal",title:"Update",onClose:function(){Object(h.b)(e,"/update-film")},children:[Object(v.jsxs)("form",{onSubmit:M?null:function(t){t.preventDefault(),O({type:"submit"}),g&&y&&O({type:"send"})},children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"title",children:"Title"}),Object(v.jsx)(u.a,{type:"text",name:"title",value:g,isInvalid:w&&!g,onChange:function(t){return O({type:"field",fieldName:"title",payload:t.target.value})}}),Object(v.jsx)("div",{className:"invalid-feedback",children:"Title cannot be empty"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"description",children:"Description"}),Object(v.jsx)(u.a,{type:"textarea",name:"description",value:y,isInvalid:w&&!y,onChange:function(t){return O({type:"field",fieldName:"description",payload:t.target.value})}}),Object(v.jsx)("div",{className:"invalid-feedback",children:"Description cannot be empty"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("button",{className:"btn btn-primary",disabled:!S||S&&y===x.description&&g===x.title,type:"submit",children:"Save"}),M&&Object(v.jsx)("div",{className:"ml-2 spinner-grow"})]})]}),D&&Object(v.jsx)("div",{className:"alert alert-danger mt-2 mb-0",children:N||"Something went wrong"}),C&&Object(v.jsx)("div",{className:"alert alert-success mt-2 mb-0",children:"Changes saved successfully!"})]})}},528:function(t,e,n){t.exports=n(242)},529:function(t,e,n){"use strict";function i(t,e,n,i,r,a,c){try{var s=t[a](c),o=s.value}catch(u){return void n(u)}s.done?e(o):Promise.resolve(o).then(i,r)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var c=t.apply(e,n);function s(t){i(c,r,a,s,o,"next",t)}function o(t){i(c,r,a,s,o,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return r}))},540:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return a}));var i=function(t){var e=new Date(Date.parse(t.createdAt));return("0"+e.getDate()).slice(-2)+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getFullYear()).slice(-2)+" o "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)},r=function(t){var e=new Date(Date.parse(t.createdAt)),n=new Date,i=Math.abs(Math.floor((Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes())-Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes()))/6e4));return i/60>=1?(i/=60)/24>=1?(i/=24)/30>=1?(i/=30)/12>=1?(i/=12,i=Math.floor(i)+" years "):i=Math.floor(i)+" months ":i=Math.floor(i)+" days ":i=Math.floor(i)+" hours ":i=Math.floor(i)+" minutes ",i+="ago"},a=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.location.pathname.split(e)[0],r={pathname:""===i?"/filmapp-react-frontend/":i,search:t.location.search,state:t.location.state};n?t.replace(r):t.push(r)}},541:function(t,e,n){"use strict";var i=n(1),r=n(2);e.a=function(t){var e=t.isInvalid,n=t.onChange,a=t.type,c=t.name,s=t.value,o=t.placeholder,u=void 0===o?"":o,l="textarea"===a?"textarea":"input",d=Object(i.useRef)(null);return Object(i.useEffect)((function(){d.current&&(e?d.current.classList.add("is-invalid"):d.current.classList.remove("is-invalid"))}),[e]),Object(r.jsx)(l,{ref:d,className:"form-control",placeholder:u,type:a,name:c,value:s,onChange:n})}},543:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return s})),n.d(e,"h",(function(){return o})),n.d(e,"i",(function(){return u})),n.d(e,"b",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"e",(function(){return f})),n.d(e,"g",(function(){return p}));var i=n(42),r=n(138),a=function(t){return i.a.get("films/",{params:t})},c=function(t){return i.a.get("films/".concat(t))},s=function(t){return i.a.get("films/".concat(t,"/details"))},o=function(t){return i.a.get("films/search",{params:t})},u=function(t){return i.a.patch("films/".concat(t,"/view"))},l=function(t){return i.a.post("films",t,{headers:Object(r.a)()})},d=function(t,e){return i.a.patch("films/".concat(t),e,{headers:Object(r.a)()})},f=function(t,e){return i.a.patch("films/".concat(t,"/action"),e,{headers:Object(r.a)()})},p=function(t){return i.a.delete("films/".concat(t),{headers:Object(r.a)()})}}}]);
//# sourceMappingURL=13.79126a85.chunk.js.map