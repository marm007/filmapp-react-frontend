{"version":3,"sources":["config/index.js","services/filmService.js","helpers/hooks/useBottomScrollListener.js","components/buttons/ripple/index.js","services/playlistService.js","helpers/hooks/useWindowsWidth.js","components/models/film/skeleton.js","services/userService.js","components/buttons/changePrivacy/index.js","components/buttons/remove/index.js","helpers/hooks/useIntersectionObserver.js","components/models/blurredImage/index.js","components/buttons/edit/index.js","components/buttons/updatePlaylist/reducer.js","components/buttons/updatePlaylist/menu.js","components/buttons/updatePlaylist/index.js","components/models/film/helper.js","components/models/film/index.js"],"names":["commentsMaxFetchCount","recommendationsMaxFetchCount","playlistButtonMaxFetchCount","pageInitialMaxFetchCount","pageMaxFetchCount","all","params","axios","get","index","id","search","view","patch","create","form","post","headers","authHeader","update","put","like","remove","delete","createCallback","debounce","handleOnScroll","options","lodashDebounce","useBottomScrollListener","onBottom","useMemo","offset","debounceOptions","leading","triggerOnNoScroll","debouncedOnBottom","containerRef","useRef","useCallback","current","scrollNode","scrollContainerBottomPosition","Math","round","scrollTop","clientHeight","scrollHeight","document","getElementById","scrollingElement","documentElement","window","innerHeight","useEffect","ref","node","addEventListener","removeEventListener","RippleButton","onClick","children","className","props","useRipple","background","addRipple","ripples","e","onMouseDown","body","show","partialUpdate","useWindowsWidth","width","useState","innerWidth","isScreenSmall","setIsScreenSmall","checkScreenSize","FilmSkeleton","isRecommendations","me","ChangePrivacyButton","isPublic","isPlaylist","dispatchPrivacyUpdate","filmDispatch","isChanging","setIsChanging","a","playlistApi","is_public","then","res","type","payload","data","undefined","fieldName","catch","err","console","error","changePrivacy","preventDefault","stopPropagation","icon","RemoveButton","handleRemove","require","useIntersectionObserver","target","onIntersect","threshold","rootMargin","React","observer","IntersectionObserver","observe","unobserve","BlurredImage","src","srcWebp","thumb","thumbWebp","isCached","isLoaded","setIsLoaded","srcSet","alt","style","visibility","onLoad","opacity","BlurredImageComponent","image","isVisible","setIsVisible","setIsCached","observerElement","isIntersecting","tmp","Image","concat","complete","EditButton","history","useHistory","push","playlistDropdownMenuInitialState","playlists","isLoading","isAllFetched","isCreating","isAdding","playlistToUpgrade","title","playlistDropdownMenuReducer","state","action","length","map","playlist","contains","PlaylistDropdownMenu","filmID","createToast","useContext","ToastContext","titleInputRef","useReducer","dispatch","handleOnPlaylistDropdownMenuBottom","scrollRef","userApi","skip","limit","result","forEach","films","indexOf","getMyPlaylists","handlePlaylistClose","click","films_id","errorMessage","response","errors","classList","add","creatPlaylist","is_remove_films","message","addToPlaylist","handleChange","maxHeight","overflowY","minHeight","onChange","handleAddToPlaylist","checked","htmlFor","height","onSubmit","placeholder","value","disabled","PlaylistAddButton","menuRef","isOpen","setIsOpen","handleOpenMenu","handleCloseMenu","element","$","on","off","faEllipsisV","recommendationsNormal","recommendationsSmall","searchNormal","searchSmall","getFilmClass","isSearch","isSmallScreen","Film","film","handleRedirect","isProfile","filmCSS","setFilmCSS","user","UserContext","img","auth","line","text","author_name","views"],"mappings":"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","file":"static/js/1.6dfbf194.chunk.js","sourcesContent":["export const commentsMaxFetchCount = 10\r\nexport const recommendationsMaxFetchCount = 12\r\n\r\nexport const playlistButtonMaxFetchCount = 10\r\n\r\nexport const pageInitialMaxFetchCount = 40\r\nexport const pageMaxFetchCount = 20\r\n","import axios from '../helpers/axios'\r\nimport authHeader from '../helpers/authHeader'\r\n\r\n\r\nexport const all = (params) => axios.get('films/', {params})\r\nexport const index = (id) => axios.get(`films/${id}`)\r\nexport const search = (params) => axios.get('films/search', {params})\r\n\r\nexport const view = (id) => axios.patch(`films/${id}/view`)\r\n\r\nexport const video = (id) => axios.get(`films/${id}/video`)\r\nexport const thumbnail = (id, params) => axios.get(`films/${id}/thumbnail`, {params})\r\n\r\nexport const create = (form) => axios.post(`films`, form, {headers: authHeader()})\r\n\r\nexport const update = (id, form) => axios.put(`films/${id}`, form, {headers: authHeader()})\r\nexport const partialUpdate = (id, form) => axios.patch(`films/${id}`, form, {headers: authHeader()})\r\n\r\nexport const like = (id, form) => axios.patch(`films/${id}/action`, form, {headers: authHeader()})\r\n\r\nexport const remove = (id) => axios.delete(`films/${id}`, { headers: authHeader() })\r\n\r\n\r\n\r\n","import { useCallback, useEffect, useRef, useMemo } from 'react';\r\nimport lodashDebounce from 'lodash.debounce';\r\n\r\nconst createCallback = (debounce, handleOnScroll, options) => {\r\n  if (debounce) {\r\n    return lodashDebounce(handleOnScroll, debounce, options);\r\n  } else {\r\n    return handleOnScroll;\r\n  }\r\n};\r\n\r\nfunction useBottomScrollListener(\r\n  onBottom = () => { },\r\n  options = {},\r\n) {\r\n  const { offset, triggerOnNoScroll, debounce, debounceOptions, id } = useMemo(\r\n    () => ({\r\n      offset: options?.offset ?? 20,\r\n      debounce: options?.debounce ?? 200,\r\n      debounceOptions: options?.debounceOptions ?? { leading: true },\r\n      triggerOnNoScroll: options?.triggerOnNoScroll ?? false,\r\n      id: options?.id ?? null\r\n    }),\r\n    [options?.offset, options?.debounce, options?.debounceOptions, options?.triggerOnNoScroll, options?.id],\r\n  );\r\n\r\n  const debouncedOnBottom = useMemo(() => createCallback(debounce, onBottom, debounceOptions), [onBottom, debounce, debounceOptions]);\r\n  const containerRef = useRef(null);\r\n  const handleOnScroll = useCallback(() => {\r\n\r\n    if (containerRef.current != null) {\r\n      const scrollNode = containerRef.current;\r\n      const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + scrollNode.clientHeight);\r\n      const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\r\n\r\n      if (scrollPosition <= scrollContainerBottomPosition) {\r\n        debouncedOnBottom();\r\n      }\r\n    } else if (id !== null) {\r\n      const scrollNode = document.getElementById(id);\r\n      if (scrollNode) {\r\n        const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + scrollNode.clientHeight);\r\n        const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\r\n        if (scrollPosition <= scrollContainerBottomPosition) {\r\n          debouncedOnBottom();\r\n        }\r\n      }\r\n    } else {\r\n      const scrollNode = document.scrollingElement || document.documentElement;\r\n      const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + window.innerHeight);\r\n      const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\r\n\r\n      if (scrollPosition <= scrollContainerBottomPosition) {\r\n        debouncedOnBottom();\r\n      }\r\n    }\r\n  }, [debouncedOnBottom, offset, id]);\r\n\r\n  useEffect(() => {\r\n    const ref = containerRef.current;\r\n    const node = document.getElementById(id)\r\n\r\n    if (ref != null) {\r\n      ref.addEventListener('scroll', handleOnScroll);\r\n    } else if (node !== null) {\r\n      node.addEventListener('scroll', handleOnScroll);\r\n    } else {\r\n      window.addEventListener('scroll', handleOnScroll);\r\n    }\r\n\r\n    if (triggerOnNoScroll) {\r\n      handleOnScroll();\r\n    }\r\n\r\n    return () => {\r\n      if (ref != null) {\r\n        ref.removeEventListener('scroll', handleOnScroll);\r\n      } else if (node !== null) {\r\n        node.addEventListener('scroll', handleOnScroll);\r\n      } else {\r\n        window.removeEventListener('scroll', handleOnScroll);\r\n      }\r\n    };\r\n  }, [handleOnScroll, triggerOnNoScroll, id]);\r\n\r\n  return containerRef;\r\n}\r\n\r\nexport default useBottomScrollListener;\r\n","import useRipple from 'useripple'\r\n\r\nconst RippleButton = ({ onClick = () => {}, children, className, id, ...props }) => {\r\n\r\n    const [addRipple, ripples] = useRipple({ background: 'black' })\r\n\r\n    return (\r\n        <button id={id ? id : ''} onClick={(e) => {\r\n            onClick(e)\r\n        }}\r\n            onMouseDown={addRipple}\r\n            className={`btn btn-link button-ripple text-dark ${className}`} {...props}>\r\n            {children}\r\n            {ripples}\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default RippleButton","import axios from '../helpers/axios'\r\nimport authHeader from '../helpers/authHeader'\r\n\r\n\r\nexport const create = (body) => axios.post('playlists', body, { headers: authHeader() })\r\nexport const index = (id) => axios.get(`playlists/${id}`, { headers: authHeader() })\r\nexport const show = (params) => axios.get(`playlists`, { params, headers: authHeader() })\r\nexport const partialUpdate = (id, body) => axios.patch(`playlists/${id}`, body, { headers: authHeader() })\r\n\r\n\r\nexport const remove = (id) => axios.delete(`playlists/${id}`, { headers: authHeader() })\r\n\r\n","import { useState, useEffect } from \"react\";\r\n\r\nconst useWindowsWidth = (width = 600) => {\r\n  const [isScreenSmall, setIsScreenSmall] = useState(window.innerWidth < width);\r\n\r\n  let checkScreenSize = () => {\r\n    setIsScreenSmall(window.innerWidth < width);\r\n  };\r\n  useEffect(() => {\r\n    checkScreenSize();\r\n    window.addEventListener(\"resize\", checkScreenSize);\r\n\r\n    return () => window.removeEventListener(\"resize\", checkScreenSize);\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return isScreenSmall;\r\n};\r\n\r\nexport default useWindowsWidth;\r\n","import Skeleton from 'react-loading-skeleton';\r\n\r\nimport '../../pages/film/film.css'\r\n\r\nconst FilmSkeleton = ({ isRecommendations }) => {\r\n\r\n    return (\r\n        <div className={`${isRecommendations ? 'col-sm-12' : 'col-sm-6'} mb-4 col col-12 col-md-3 col-lg-2 container-px`}>\r\n            <div className=\"col-12 col-sm-12 p-0\">\r\n                <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\r\n                    <div className=\"embed-responsive-item\">\r\n                        <Skeleton className=\"w-100 h-100 line-height-unset\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"col-12 col-sm-12 mt-2 p-0\">\r\n                <div className=\"col p-0\">\r\n                    <Skeleton className=\"w-100 h-100 line-height-unset\" />\r\n                </div>\r\n\r\n                <div className=\"col p-0\">\r\n                    <Skeleton className={`${isRecommendations ? 'line-height-unset' : ''} col w-100`} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FilmSkeleton","import axios from '../helpers/axios'\r\nimport authHeader from '../helpers/authHeader'\r\n\r\n\r\nexport const me = (params) => axios.get('users/me', { params, headers: authHeader() })\r\nexport const partialUpdate = (body) => axios.patch('users', body, { headers: authHeader() })\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    register\r\n};\r\n\r\nfunction login(username, password) {\r\n\r\n    let loginHeaderMy = null\r\n\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: loginHeaderMy\r\n\r\n    };\r\n\r\n    return fetch(`${process.env.REACT_APP_API_URL}/users/auth`, requestOptions)\r\n        .then(handleResponse)\r\n        .then(user => {\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n            return user;\r\n        })\r\n}\r\n\r\nfunction logout() {\r\n    localStorage.removeItem('user');\r\n}\r\n\r\nfunction register(user) {\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(user)\r\n    };\r\n    return fetch(`${process.env.REACT_APP_API_URL}/users/`, requestOptions)\r\n        .then(handleResponse);\r\n}\r\n\r\nfunction handleResponse(response) {\r\n    return response.text().then(text => {\r\n        const data = text && JSON.parse(text);\r\n        if (!response.ok) {\r\n            if (response.status === 401) {\r\n                logout();\r\n            }\r\n            const error = (data && data.errors) || response.statusText;\r\n            return Promise.reject(error);\r\n        }\r\n        return data;\r\n    })\r\n}\r\n\r\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\nimport { useEffect, useState } from \"react\"\r\nimport * as playlistApi from '../../../services/playlistService'\r\nimport RippleButton from \"../ripple\"\r\n\r\nconst ChangePrivacyButton = ({ isPublic, id, isPlaylist, dispatchPrivacyUpdate, filmDispatch }) => {\r\n\r\n    const [isChanging, setIsChanging] = useState(false)\r\n\r\n\r\n    useEffect(() => {\r\n        async function changePrivacy() {\r\n            await playlistApi.partialUpdate(id, { is_public: !isPublic })\r\n                .then(res => {\r\n                    setIsChanging(false)\r\n\r\n                    dispatchPrivacyUpdate({\r\n                        type: 'change-playlist-privacy-success',\r\n                        payload: res.data\r\n                    })\r\n\r\n                    if (filmDispatch !== undefined) {\r\n                        filmDispatch({\r\n                            type: 'field',\r\n                            fieldName: 'reloadPlaylist',\r\n                            payload: true\r\n                        })\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.error(err)\r\n                    setIsChanging(false)\r\n                })\r\n        }\r\n        if (isChanging) changePrivacy()\r\n    }, [dispatchPrivacyUpdate, isChanging, isPublic, id, filmDispatch])\r\n\r\n    const handleChangePrivacy = (e) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        if (!isChanging) setIsChanging(true)\r\n    }\r\n\r\n\r\n    return <RippleButton\r\n        className={`button-ripple-24 p-0 ${isPlaylist ? '' : 'remove-holder'}`}\r\n        onClick={handleChangePrivacy}>\r\n        <FontAwesomeIcon icon={isPublic ? \"globe-europe\" : \"lock\"} />\r\n    </RippleButton>\r\n}\r\n\r\nexport default ChangePrivacyButton","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\nimport RippleButton from '../ripple'\r\n\r\nconst RemoveButton = ({ handleRemove }) => {\r\n    return (\r\n        <RippleButton\r\n            className=\"button-ripple-24 remove-holder p-0\"\r\n            onClick={handleRemove}>\r\n            <FontAwesomeIcon icon=\"trash-alt\" />\r\n        </RippleButton>\r\n    )\r\n}\r\n\r\nexport default RemoveButton","import React from \"react\";\r\nrequire('intersection-observer');\r\n\r\nconst useIntersectionObserver = ({\r\n  target,\r\n  onIntersect,\r\n  threshold = 0.1,\r\n  rootMargin = \"0px\"\r\n}) => {\r\n  React.useEffect(() => {\r\n    const observer = new IntersectionObserver(onIntersect, {\r\n      rootMargin,\r\n      threshold\r\n    });\r\n    const current = target.current;\r\n    observer.observe(current);\r\n    return () => {\r\n      observer.unobserve(current);\r\n    };\r\n  });\r\n};\r\nexport default useIntersectionObserver;","import React, { useState, useRef } from 'react';\r\nimport useIntersectionObserver from '../../../helpers/hooks/useIntersectionObserver';\r\nimport \"./blurred.css\";\r\n\r\nconst BlurredImage = ({ src, srcWebp, thumb, thumbWebp, isCached }) => {\r\n    const [isLoaded, setIsLoaded] = useState(isCached);\r\n\r\n    return (\r\n        <div>\r\n\r\n            <picture >\r\n                <source type=\"image/webp\" srcSet={thumbWebp} />\r\n                <source type=\"image/jpeg\" srcSet={thumb} />\r\n                <img className=\"image thumb\" alt=\"\"\r\n                    style={{ visibility: isLoaded ? \"hidden\" : \"visible\" }}\r\n                    src={thumb}\r\n                    onLoad={() => {\r\n                        setIsLoaded(true);\r\n                    }} />\r\n            </picture>\r\n\r\n            <picture >\r\n                <source type=\"image/webp\" srcSet={srcWebp} />\r\n                <source type=\"image/jpeg\" srcSet={src} />\r\n                <img className=\"image full\" alt=\"\"\r\n                    style={{ opacity: isLoaded ? 1 : 0 }}\r\n                    src={src}\r\n                    onLoad={() => {\r\n                        setIsLoaded(true);\r\n                    }} />\r\n            </picture>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction BlurredImageComponent({ image }) {\r\n    const ref = useRef();\r\n    const [isVisible, setIsVisible] = useState(false);\r\n    const [isCached, setIsCached] = useState(false);\r\n\r\n    useIntersectionObserver({\r\n        target: ref,\r\n        onIntersect: ([{ isIntersecting }], observerElement) => {\r\n            if (isIntersecting) {\r\n                let tmp = new Image();\r\n                tmp.src = image.concat('?width=poster_webp');\r\n                setIsCached(tmp.complete)\r\n                setIsVisible(true);\r\n                if (ref.current)\r\n                    observerElement.unobserve(ref.current);\r\n            }\r\n        }\r\n    });\r\n\r\n    return (\r\n        <div\r\n            ref={ref}\r\n            className=\"image-container embed-responsive embed-responsive-16by9  play-image\"\r\n        >\r\n            {isVisible && (\r\n                <BlurredImage isCached={isCached}\r\n                    src={image.concat('?width=poster')}\r\n                    srcWebp={image.concat('?width=poster_webp')}\r\n                    thumb={image.concat('?width=preview')}\r\n                    thumbWebp={image.concat('?width=preview_webp')} />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default BlurredImageComponent;","import React from 'react'\r\nimport { useHistory } from \"react-router-dom\"\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\nimport RippleButton from \"../ripple\"\r\n\r\nconst EditButton = ({ isPlaylist, id }) => {\r\n    let history = useHistory()\r\n\r\n    const handleEditClick = (e) => {\r\n        e.stopPropagation()\r\n        if (isPlaylist) {\r\n            history.push(`profile/update-playlist/${id}`)\r\n        } else {\r\n            history.push(`profile/update-film/${id}`)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <RippleButton className=\"button-ripple-24 remove-holder p-0\"\r\n            onClick={handleEditClick}>\r\n            <FontAwesomeIcon icon=\"edit\" />\r\n        </RippleButton>\r\n    )\r\n}\r\n\r\nexport default EditButton","import { playlistButtonMaxFetchCount } from \"../../../config\"\r\n\r\nexport const playlistDropdownMenuInitialState = {\r\n    playlists: [],\r\n    isLoading: true,\r\n    isAllFetched: false,\r\n    isCreating: false,\r\n    isAdding: false,\r\n    playlistToUpgrade: null,\r\n    title: '',\r\n    isPublic: false,\r\n    error: '',\r\n}\r\n\r\nexport function playlistDropdownMenuReducer(state, action) {\r\n    switch (action.type) {\r\n        case 'field': {\r\n            return {\r\n                ...state,\r\n                error: '',\r\n                [action.fieldName]: action.payload\r\n            }\r\n        }\r\n        case 'load': {\r\n            return {\r\n                ...state,\r\n                isLoading: true,\r\n                isAllFetched: false,\r\n            }\r\n        }\r\n        case 'load-success': {\r\n            return {\r\n                ...state,\r\n                playlists: [...state.playlists, ...action.payload],\r\n                isLoading: false,\r\n                isAllFetched: action.payload.length < playlistButtonMaxFetchCount,\r\n                error: '',\r\n            }\r\n        }\r\n        case 'create': {\r\n            return {\r\n                ...state,\r\n                isLoading: false,\r\n                isCreating: true\r\n            }\r\n        }\r\n        case 'create-success': {\r\n            return {\r\n                ...state,\r\n                isLoading: false,\r\n                isCreating: false\r\n            }\r\n        }\r\n        case 'add': {\r\n            return {\r\n                ...state,\r\n                isLoading: false,\r\n                isAdding: true,\r\n                playlistToUpgrade: action.payload\r\n            }\r\n        }\r\n        case 'add-update-playlist': {\r\n            return {\r\n                ...state,\r\n                playlists: state.playlists.map(playlist => {\r\n                    if (playlist.id === state.playlistToUpgrade.id) return { ...playlist, contains: !playlist.contains }\r\n                    else return playlist\r\n                }),\r\n                playlistToUpgrade: null\r\n            }\r\n        }\r\n        case 'add-success': {\r\n            return {\r\n                ...state,\r\n                isAdding: false\r\n            }\r\n        }\r\n        case 'change-playlist-privacy-success': {\r\n            return {\r\n                ...state,\r\n                playlists: state.playlists.map(playlist => {\r\n                    if (playlist.id === action.payload.id) return { ...playlist, is_public: action.payload.is_public }\r\n                    return playlist\r\n                })\r\n            }\r\n        }\r\n        case 'error':\r\n            return {\r\n                ...state,\r\n                isLoading: false,\r\n                isCreating: false,\r\n                error: action.payload,\r\n                title: ''\r\n            }\r\n        default:\r\n            return state\r\n\r\n    }\r\n}\r\n","import React, { useCallback, useEffect, useContext, useReducer, useRef } from 'react';\r\n\r\nimport * as userApi from '../../../services/userService'\r\nimport * as playlistApi from '../../../services/playlistService'\r\n\r\nimport ToastContext from '../../../helpers/contexts/toast/toastContext';\r\nimport useBottomScrollListener from '../../../helpers/hooks/useBottomScrollListener';\r\nimport { playlistDropdownMenuReducer, playlistDropdownMenuInitialState } from './reducer'\r\nimport ChangePrivacyButton from '../changePrivacy';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { playlistButtonMaxFetchCount } from '../../../config';\r\nimport RippleButton from '../ripple';\r\n\r\nfunction PlaylistDropdownMenu({ filmID, isRecommendations, filmDispatch }) {\r\n\r\n    const { createToast } = useContext(ToastContext);\r\n\r\n    const titleInputRef = useRef()\r\n\r\n    const [state, dispatch] = useReducer(playlistDropdownMenuReducer, playlistDropdownMenuInitialState);\r\n\r\n    const { playlists, title, isPublic, isLoading, isAllFetched, isCreating, isAdding, playlistToUpgrade, error } = state\r\n\r\n\r\n    const handleOnPlaylistDropdownMenuBottom = useCallback(() => {\r\n        if (!isLoading && !isAllFetched && !isCreating && !isAdding) {\r\n            dispatch({\r\n                type: 'load'\r\n            })\r\n        }\r\n    }, [isLoading, isAllFetched, isCreating, isAdding])\r\n\r\n    const scrollRef = useBottomScrollListener(handleOnPlaylistDropdownMenuBottom);\r\n\r\n    useEffect(() => {\r\n        async function getMyPlaylists() {\r\n            await userApi.me({ playlists: true, skip: playlists.length, limit: playlistButtonMaxFetchCount })\r\n                .then(res => {\r\n\r\n                    let result = res.data.playlists\r\n\r\n                    result.forEach(playlist => {\r\n                        playlist.contains = playlist.films.indexOf(filmID) > -1\r\n                    });\r\n\r\n                    dispatch({\r\n                        type: 'load-success',\r\n                        payload: result\r\n                    })\r\n                })\r\n                .catch(err => {\r\n                    console.error(err)\r\n                })\r\n        }\r\n\r\n        if (isLoading) getMyPlaylists()\r\n\r\n    }, [filmID, playlists, isLoading])\r\n\r\n    useEffect(() => {\r\n        const handlePlaylistClose = () => {\r\n            document.getElementById(`closePlaylistMenuButton${filmID}`).click()\r\n        }\r\n\r\n        async function creatPlaylist() {\r\n            const body = { title: title, is_public: isPublic, films_id: [filmID] };\r\n\r\n            await playlistApi.create(body)\r\n                .then(res => {\r\n                    dispatch({\r\n                        type: 'create-success'\r\n                    })\r\n                    createToast(`Created playlist ${title}`)\r\n                    handlePlaylistClose()\r\n                })\r\n                .catch(err => {\r\n                    console.error(err)\r\n                    let errorMessage = null\r\n\r\n                    if (err.response && err.response.data && err.response.data.error) {\r\n                        errorMessage = err.response.data.error\r\n                    } else if (err.response && err.response.data && err.response.data.errors) {\r\n                        errorMessage = err.response.data.errors[0]\r\n                    }\r\n                    titleInputRef.current.classList.add('is-invalid')\r\n                    dispatch({\r\n                        type: 'error',\r\n                        payload: errorMessage === \"Path `title` is required.\" ? 'Playlist title is required' : errorMessage\r\n                    })\r\n                })\r\n        }\r\n\r\n        if (isCreating) creatPlaylist()\r\n\r\n    }, [isCreating, title, isPublic, createToast, filmID])\r\n\r\n    useEffect(() => {\r\n        async function addToPlaylist() {\r\n\r\n            let body = { films_id: [filmID] };\r\n\r\n            body = playlistToUpgrade.contains ? { ...body, is_remove_films: true } : { ...body, is_remove_films: false }\r\n\r\n            const message = playlistToUpgrade.contains ? `Deleted from playlist ${playlistToUpgrade.title}` : `Added to playlist ${playlistToUpgrade.title}`\r\n\r\n            dispatch({\r\n                type: 'add-update-playlist',\r\n                playlist: playlistToUpgrade\r\n            })\r\n\r\n            await playlistApi.partialUpdate(playlistToUpgrade.id, body)\r\n                .then(res => {\r\n                    dispatch({\r\n                        type: 'add-success'\r\n                    })\r\n\r\n                    if (isRecommendations) {\r\n                        filmDispatch({\r\n                            type: 'field',\r\n                            fieldName: 'reloadPlaylist',\r\n                            payload: true\r\n                        })\r\n                    }\r\n                    createToast(message)\r\n                })\r\n                .catch(err => console.error(err))\r\n        }\r\n        if (isAdding && playlistToUpgrade) addToPlaylist()\r\n    }, [isAdding, playlistToUpgrade, createToast, filmDispatch, filmID, isRecommendations])\r\n\r\n    const handleAddToPlaylist = (playlist) => {\r\n        dispatch({\r\n            type: 'add',\r\n            payload: playlist\r\n        })\r\n    };\r\n\r\n    const handleChange = (fieldName, payload) => {\r\n        titleInputRef.current.classList.remove('is-invalid')\r\n        dispatch({\r\n            type: 'field',\r\n            fieldName: fieldName,\r\n            payload: payload\r\n        })\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        dispatch({\r\n            type: 'create'\r\n        })\r\n    };\r\n\r\n    return (\r\n\r\n        <>\r\n            <div className=\"row m-0 m-button button-ripple\" >\r\n                <div className=\"col playlist-add-exit-text-width px-3\">Save to...</div>\r\n                <RippleButton id={`closePlaylistMenuButton${filmID}`} className=\"button-ripple-24 playlist-add-icon-holder p-0 d-flex align-items-center text-center justify-content-center\"\r\n                    onClick={() => { }}>\r\n                    <FontAwesomeIcon icon=\"times\" />\r\n                </RippleButton>\r\n            </div>\r\n            <hr className=\"dropdown-divider\" />\r\n            <div ref={scrollRef}\r\n                style={{\r\n                    maxHeight: 100 + 'px', overflowY: 'scroll', minHeight: 3 + 'rem'\r\n                }}>\r\n                {\r\n                    playlists.map((playlist, index) => {\r\n                        return (<div className=\"row m-0 playlist-form-group form-group mb-1\" key={playlist.id} >\r\n                            <div className=\"col-10 col-sm-10 p-0\">\r\n                                <div id={playlist.id} className=\"form-check\">\r\n                                    <input type=\"checkbox\"\r\n                                        id={`formCheckAddToPlaylist${playlist.id}`}\r\n                                        className=\"form-check-input\"\r\n                                        onChange={() => handleAddToPlaylist(playlist)}\r\n                                        checked={playlist.contains} />\r\n                                    <label className=\"form-check-label w-100\"\r\n                                        htmlFor={`formCheckAddToPlaylist${playlist.id}`}>\r\n                                        <p className=\"playlist-check-label\" onClick={e => e.stopPropagation()}>\r\n                                            {playlist.title}\r\n                                        </p>\r\n                                    </label>\r\n                                </div>\r\n\r\n                            </div>\r\n                            <ChangePrivacyButton\r\n                                id={playlist.id}\r\n                                isPublic={playlist.is_public}\r\n                                isPlaylist={true}\r\n                                filmDispatch={filmDispatch}\r\n                                dispatchPrivacyUpdate={dispatch} />\r\n\r\n                        </div>)\r\n                    })\r\n                }\r\n\r\n                {\r\n                    !isAllFetched && <div style={{\r\n                        height: 3 + 'rem'\r\n                    }}\r\n                        className=\"fetch-spinner d-flex justify-content-center align-items-center\">\r\n                        {isLoading && <div className=\"spinner-border\" />}\r\n                    </div>\r\n                }\r\n            </div>\r\n            <hr className=\"dropdown-divider\" />\r\n            <div className=\"row m-0 px-3\">\r\n                <span className=\"m-0\">Create a new playlist</span>\r\n            </div>\r\n            <div className=\"row m-0 px-3\">\r\n                <form onSubmit={handleSubmit}>\r\n                    <div className=\"form-group mb-2 mt-2\" >\r\n                        <input type=\"text\" className=\"form-control\" aria-label=\"playlistNameInput\"\r\n                            placeholder=\"Enter playlist title...\" ref={titleInputRef}\r\n                            onChange={(e) => handleChange('title', e.target.value)}\r\n                        />\r\n                        <div className=\"invalid-feedback\">\r\n                            {error}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group mb-2 mt-2\">\r\n                        <select className=\"form-control\"\r\n                            onChange={(e) => handleChange('isPublic', e.target.value === 'public')}>\r\n                            <option value=\"private\">Private</option>\r\n                            <option value=\"public\">Public</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className=\"d-flex align-items-center mt-2\">\r\n                        <button type=\"submit\" className=\"btn btn-primary\" disabled={isCreating}>\r\n                            Create\r\n                        </button>\r\n\r\n                        {\r\n                            isCreating &&\r\n                            <div className=\"spinner-grow ml-2\" />\r\n                        }\r\n                    </div>\r\n\r\n                </form>\r\n\r\n            </div>\r\n\r\n        </>\r\n\r\n\r\n    )\r\n}\r\n\r\nexport default PlaylistDropdownMenu\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nimport PlaylistDropdownMenu from './menu'\r\nimport useRipple from \"useripple\"\r\n\r\nimport { faEllipsisV } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport './playlistAdd.css'\r\n\r\nfunction PlaylistAddButton({ isRecommendations, filmDispatch, filmID }) {\r\n\r\n    const menuRef = useRef()\r\n\r\n    const [addRipple, ripples] = useRipple({ background: \"black\" })\r\n\r\n    const [isOpen, setIsOpen] = useState(false)\r\n\r\n    const handleOpenMenu = () => {\r\n        setIsOpen(true)\r\n    }\r\n\r\n    const handleCloseMenu = () => {\r\n        setIsOpen(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        let ref = menuRef.current\r\n\r\n        if (ref) {\r\n\r\n            const element = window.$(`#playlistDropdown${filmID}`)\r\n\r\n            element.on('show.bs.dropdown', handleOpenMenu)\r\n            element.on('hide.bs.dropdown', handleCloseMenu)\r\n\r\n            return () => {\r\n                element.off('show.bs.dropdown', handleOpenMenu)\r\n                element.off('hide.bs.dropdown', handleCloseMenu)\r\n            }\r\n\r\n        }\r\n    }, [menuRef, filmID])\r\n\r\n    return (\r\n\r\n        <div ref={menuRef}\r\n            id={`playlistDropdown${filmID}`}\r\n            className=\"p-0 dropdown dropdown-sizes\" >\r\n\r\n            <button\r\n                onMouseDown={addRipple}\r\n                id={`playlistAddButtonLabel${filmID}`}\r\n                type=\"button\"\r\n                data-toggle=\"dropdown\"\r\n                data-boundary=\"window\"\r\n                className=\"btn btn-link button-ripple dropdown-toggle p-0 text-dark\">\r\n                <div\r\n                    className=\"col playlist-add-icon-holder p-0 button-ripple button-ripple-24\">\r\n                    <FontAwesomeIcon style={{ opacity: (isOpen ? 1 : \"\") }}\r\n                        className=\"playlist-add-icon\" icon={faEllipsisV} />\r\n                    {ripples}\r\n                </div>\r\n            </button>\r\n\r\n            <div className=\"dropdown-menu playlist-dropdown-menu\"\r\n                id={`playlistDropdownMenu${filmID}`}\r\n                aria-labelledby={`playlistAddButtonLabel${filmID}`}\r\n               >\r\n                {isOpen && <PlaylistDropdownMenu\r\n                    isRecommendations={isRecommendations}\r\n                    filmDispatch={filmDispatch}\r\n                    filmID={filmID} />\r\n                }\r\n            </div>\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default PlaylistAddButton\r\n","const recommendationsNormal = [\r\n    'col-12 mb-4 container-px',\r\n    'row p-0 m-0 play-outer-container remove-container p-0',\r\n    'col-6 m-0 p-0',\r\n    'col-6 col-sm-6',\r\n    'row mx-0 mb-0',\r\n    'mb-1 title'\r\n]\r\n\r\nconst recommendationsSmall = [\r\n    'col-12 col-md-3 col-lg-2 mb-4 container-px',\r\n    'col play-outer-container remove-container p-0',\r\n    'col-12 col-sm-12 p-0',\r\n    'col-12 col-sm-12 p-0',\r\n    'row mx-0 mb-0 mt-1',\r\n    'mb-1 mt-1 title'\r\n]\r\n\r\nconst searchNormal = [\r\n    'col-12 col-lg-8 mx-0 mb-4 container-px',\r\n    'row p-0 m-0 play-outer-container remove-container p-0',\r\n    'col-6 col-sm-4 p-0',\r\n    'col-6 col-sm-8',\r\n    'row mx-0 mb-0',\r\n    'mb-1 title'\r\n]\r\n\r\nconst searchSmall = [\r\n    'col-12 col-sm-12 col-md-3 col-lg-2 mb-4 container-px',\r\n    'col play-outer-container remove-container p-0',\r\n    'col-12 col-sm-12 p-0',\r\n    'col-12 col-sm-12 p-0',\r\n    'row mx-0 mb-0 mt-1',\r\n    'mb-1 mt-1 title'\r\n]\r\n\r\nconst all = [\r\n    'col-12 col-sm-6 col-md-3 col-lg-2 mb-4 container-px',\r\n    'col play-outer-container remove-container p-0',\r\n    'col-12 col-sm-12 p-0',\r\n    'col-12 col-sm-12 p-0',\r\n    'row mx-0 mb-0 mt-1',\r\n    'mb-1 mt-1 title'\r\n]\r\n\r\nconst getFilmClass = (isRecommendations, isSearch, isSmallScreen) => {\r\n    if (isRecommendations) {\r\n        return isSmallScreen ?\r\n            recommendationsSmall :\r\n            recommendationsNormal\r\n    } else if (isSearch) {\r\n        return isSmallScreen ?\r\n            searchSmall :\r\n            searchNormal\r\n    } else {\r\n        return all\r\n    }\r\n}\r\n\r\nexport default getFilmClass","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport TextTruncate from \"react-text-truncate\";\r\n\r\nimport BlurredImageComponent from \"../blurredImage\";\r\nimport PlaylistAddButtonComponent from \"../../buttons/updatePlaylist\";\r\n\r\nimport RemoveButton from '../../buttons/remove';\r\n\r\nimport '../../pages/film/film.css'\r\nimport useWindowsWidth from '../../../helpers/hooks/useWindowsWidth';\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport UserContext from '../../../helpers/contexts/user/userContext';\r\n\r\nimport getFilmClass from './helper'\r\nimport EditButton from '../../buttons/edit';\r\n\r\nconst Film = ({ film, index, handleRedirect, handleRemove, isProfile, isRecommendations, isSearch, filmDispatch, children }) => {\r\n    const isSmallScreen = useWindowsWidth((isRecommendations ? 768 : 576))\r\n\r\n    const [filmCSS, setFilmCSS] = useState(getFilmClass(isRecommendations, isSearch, isSmallScreen))\r\n\r\n    const { user } = useContext(UserContext);\r\n\r\n\r\n    useEffect(() => {\r\n        setFilmCSS(getFilmClass(isRecommendations, isSearch, isSmallScreen))\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [isSmallScreen])\r\n\r\n\r\n    return (\r\n        <div className={filmCSS[0]}>\r\n\r\n            <div className={filmCSS[1]}>\r\n\r\n                <div className={filmCSS[2]}\r\n                    onClick={() => handleRedirect(film.id)}>\r\n                    <div className=\"play-container\">\r\n                        <BlurredImageComponent\r\n                            image={film.img} />\r\n                        <FontAwesomeIcon className=\"play-middle\" icon=\"play\" />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className={filmCSS[3]}>\r\n\r\n                    <div className={filmCSS[4]}>\r\n                        <div className={`${user.auth ? `${isProfile ? 'button-ripple-div-next-width-2x' : 'button-ripple-div-next-width'}` : 'col-12'} col p-0 pr-2 cursor-pointer`}\r\n                            onClick={() => handleRedirect(film.id)}>\r\n\r\n                            <TextTruncate line={1} text={film.title}\r\n                                className={filmCSS[5]} />\r\n\r\n                            {children ? children : <div className=\"mb-0 author-nick\">\r\n                                <span>{film.author_name}&nbsp;</span>\r\n                                <span>&nbsp;</span>\r\n                                <span>{film.views} views</span>\r\n                            </div>\r\n                            }\r\n                        </div>\r\n\r\n                        {\r\n                            isProfile ? <>\r\n                                <RemoveButton handleRemove={handleRemove} />\r\n                                <EditButton id={film.id} />\r\n                            </>\r\n                                : user.auth ?\r\n                                    <PlaylistAddButtonComponent\r\n                                        isRecommendations={isRecommendations}\r\n                                        filmDispatch={filmDispatch}\r\n                                        index={index}\r\n                                        filmID={film.id} /> : null\r\n                        }\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default Film"],"sourceRoot":""}