{"version":3,"sources":["components/dialogs/update-user.js","pages/update-user.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","helpers/index.js","components/input.js","services/userService.js","reducers/update-reducer.js"],"names":["Settings","useContext","UserContext","user","clearUser","updateUser","history","useHistory","useReducer","updateReducer","updateInitialState","update","email","name","password","initial","isSubmitted","isSending","isInitialLoaded","success","isSuccess","error","dispatch","useEffect","auth","replace","process","push","a","userApi","then","res","type","payload","data","catch","err","console","getUser","onSubmit","event","preventDefault","length","toUpdate","setTimeout","handleCloseModalWindow","accessToken","response","className","htmlFor","value","isInvalid","onChange","e","fieldName","target","disabled","id","title","onClose","module","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","done","Promise","_asyncToGenerator","fn","self","this","args","arguments","apply","undefined","displayCommentDate","comment","date","Date","parse","createdAt","getDate","slice","getMonth","getFullYear","getHours","getMinutes","parseSearchDate","film","today","time","Math","abs","floor","UTC","toSplit","pathname","location","split","historyObject","search","state","Input","placeholder","inputRef","useRef","current","classList","add","remove","ref","rows","me","params","axios","get","headers","authHeader","partialUpdate","body","patch","isSumbitted","isError","action"],"mappings":"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","file":"static/js/13.327fedcf.chunk.js","sourcesContent":["import React, { useEffect, useReducer, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport UserContext from \"../../contexts/user/userContext\";\nimport { updateInitialState, updateReducer } from \"../../reducers/update-reducer\";\nimport * as userApi from '../../services/userService'\nimport Input from \"../input\";\nimport { handleCloseModalWindow } from \"../../helpers\";\n\nconst Settings = () => {\n\n    const { user, clearUser, updateUser } = useContext(UserContext)\n\n    let history = useHistory()\n\n    const [{\n        update,\n        initial,\n        isSubmitted,\n        isSending,\n        isInitialLoaded,\n        success,\n        isSuccess,\n        error }, dispatch] = useReducer(updateReducer,\n            {\n                ...updateInitialState,\n                update: { email: '', name: '', password: '' },\n                initial: { email: '', name: '', password: '' }\n            })\n\n\n    useEffect(() => {\n        if (!user.auth && user.isInitialLoaded) {\n            history.replace(`${process.env.REACT_APP_PATH_NAME}`)\n            history.push(`${process.env.REACT_APP_PATH_NAME}login`)\n            clearUser()\n        }\n    }, [user, history, clearUser])\n\n    useEffect(() => {\n        async function getUser() {\n            await userApi.me()\n                .then(res => {\n                    dispatch({\n                        type: 'initial-success',\n                        payload: { name: res.data.name, email: res.data.email, password: '' }\n                    })\n                })\n                .catch(err => {\n                    console.error(err)\n                    dispatch({ type: 'error' })\n                })\n        }\n        getUser()\n    }, [])\n\n\n    const handleSubmit = (event) => {\n        event.preventDefault()\n\n        dispatch({ type: 'submit' })\n\n        if ((update.password && update.password.length >= 6) ||\n            update.email ||\n            update.name) {\n            dispatch({ type: 'send' })\n\n            let toUpdate = {}\n            if (update.password && update.password.length > 6) toUpdate = { password: update.password }\n            if (update.email) toUpdate = { ...toUpdate, email: update.email }\n            if (update.name) toUpdate = { ...toUpdate, name: update.name }\n\n            return userApi.partialUpdate(toUpdate)\n                .then(res => {\n                    dispatch({ type: 'success' })\n\n                    setTimeout(() => {\n                        handleCloseModalWindow(history, '/settings')\n                        updateUser(res.data.accessToken)\n                    }, 500)\n                })\n                .catch(err => {\n                    console.error(err)\n                    dispatch({\n                        type: 'error',\n                        payload: err.response && err.response.data && err.response.data.error ? err.response.data.error : 'Something went wrong!'\n                    })\n                })\n        }\n    }\n\n\n    return (\n        <>\n            <form onSubmit={isSending ? null : handleSubmit}>\n                <div>\n                    <label className=\"form-label\" htmlFor=\"name\">Name</label>\n                    <Input type=\"text\" name=\"name\"\n                        value={update.name}\n                        isInvalid={isSubmitted && !update.name}\n                        onChange={e => dispatch({ type: 'update', fieldName: 'name', payload: e.target.value })} />\n                    <div className=\"invalid-feedback\">\n                        Name cannot be empty\n                    </div>\n                </div>\n                <div className=\"mt-2 form-group\">\n                    <label className=\"form-label\" htmlFor=\"email\">Email</label>\n                    <Input type=\"email\" name=\"email\"\n                        value={update.email}\n                        isInvalid={isSubmitted && !update.email}\n                        onChange={e => dispatch({ type: 'update', fieldName: 'email', payload: e.target.value })} />\n                    <div className=\"invalid-feedback\">\n                        Email cannot be empty\n                    </div>\n                </div>\n                <div className=\"mt-2 form-group\">\n                    <label className=\"form-label\" htmlFor=\"password\">Password</label>\n                    <Input type=\"password\" name=\"password\" isInvalid={isSubmitted && (update.password && update.password.length < 6)}\n                        value={update.password} onChange={e => dispatch({ type: 'update', fieldName: 'password', payload: e.target.value })} />\n                    <div className=\"invalid-feedback\">\n                        Password must be at least 6 characters long!\n                    </div>\n                </div>\n                <div className=\"d-flex align-items-center mt-2\">\n                    <button type=\"submit\" className=\"btn btn-primary\"\n                        disabled={isSending || !isInitialLoaded ||\n                            (isInitialLoaded && update.email === initial.email && update.name === initial.name &&\n                                (!update.password || (update.password && update.password.length < 6)))}\n                    >\n                        Change\n                    </button>\n\n                    {\n                        isSending &&\n                        <div className=\"ml-2 spinner-grow\" />\n                    }\n                </div>\n            </form>\n            {\n                error &&\n                <div className=\"alert alert-danger mt-2 mb-0\">\n                    {error ? error : 'Error while logging in.'}\n                </div>\n            }\n            {\n                isSuccess &&\n                <div className=\"alert alert-success mt-2 mb-0\">\n                    {success}\n                </div>\n            }\n        </>\n    )\n}\n\nexport default Settings","import { useHistory } from \"react-router-dom\";\nimport Modal from \"../components/modal\";\nimport SettingsComponent from '../components/dialogs/update-user'\n\nimport { handleCloseModalWindow } from \"../helpers\";\n\nexport default function Settings() {\n\n    let history = useHistory()\n\n    const modalClose = () => {\n        handleCloseModalWindow(history, '/settings')\n    }\n\n    return (\n        <Modal id=\"settingsModal\" title=\"Settings\" onClose={modalClose}>\n            <SettingsComponent />\n        </Modal>\n    )\n}","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export const displayCommentDate = (comment) => {\n    let date = new Date(Date.parse(comment.createdAt));\n    let time = (('0' + date.getDate()).slice(-2) + '-' + ('0' + (date.getMonth() + 1)).slice(-2) + '-'\n        + ('0' + date.getFullYear()).slice(-2)\n        + ' o ' + ('0' + date.getHours()).slice(-2) + ':' + ('0' + date.getMinutes()).slice(-2))\n    return time;\n};\n\nexport const parseSearchDate = (film) => {\n\n    let date = new Date(Date.parse(film.createdAt));\n    let today = new Date();\n\n\n    let time = Math.abs(Math.floor((\n        Date.UTC(\n            date.getFullYear(),\n            date.getMonth(),\n            date.getDate(),\n            date.getHours(),\n            date.getMinutes()) -\n        Date.UTC(\n            today.getFullYear(),\n            today.getMonth(),\n            today.getDate(),\n            today.getHours(),\n            today.getMinutes()))\n        / (1000 * 60)));\n\n    if (time / 60 >= 1) {\n        time /= 60;\n\n        if (time / 24 >= 1) {\n\n            time /= 24;\n\n            if (time / 30 >= 1) {\n\n                time /= 30;\n\n                if (time / 12 >= 1) {\n\n                    time = time / 12;\n                    time = Math.floor(time) + ' years ';\n\n                } else {\n                    time = Math.floor(time) + ' months ';\n                }\n\n            } else {\n                time = Math.floor(time) + ' days ';\n            }\n\n        } else {\n            time = Math.floor(time) + ' hours ';\n        }\n    } else {\n        time = Math.floor(time) + ' minutes ';\n    }\n\n    time = time + 'ago';\n\n    return time;\n};\n\nexport const handleCloseModalWindow = (history, toSplit, replace = false) => {\n\n    let pathname = history.location.pathname.split(toSplit)[0]\n\n    const historyObject = {\n        pathname: pathname === '' ? process.env.REACT_APP_PATH_NAME : pathname,\n        search: history.location.search,\n        state: history.location.state\n    }\n\n    if (replace) {\n        history.replace(historyObject)\n    }\n    else {\n        history.push(historyObject)\n    }\n\n}","import { useEffect, useRef } from \"react\"\n\nconst Input = ({ isInvalid, onChange, type, name, value, placeholder = '' }) => {\n\n    const inputRef = useRef(null)\n\n    useEffect(() => {\n        let ref = inputRef.current\n        if (ref) {\n            if (isInvalid) inputRef.current.classList.add('is-invalid')\n            else inputRef.current.classList.remove('is-invalid')\n        }\n    }, [isInvalid])\n\n    return type === 'textarea' ?\n        <textarea ref={inputRef} className=\"form-control\"\n            placeholder={placeholder}\n            type={type} name={name}\n            value={value} onChange={onChange} rows={8}/> :\n        <input ref={inputRef} className=\"form-control\"\n            placeholder={placeholder}\n            type={type} name={name}\n            value={value} onChange={onChange} />\n\n\n}\n\nexport default Input","import axios from '../helpers/axios'\nimport authHeader from '../helpers/auth-header'\n\n\nexport const me = (params) => axios.get('users/me', { params, headers: authHeader() })\nexport const partialUpdate = (body) => axios.patch('users', body, { headers: authHeader() })\n\nexport const userService = {\n    login,\n    logout,\n    register\n};\n\nfunction login(username, password) {\n\n    let loginHeaderMy = null\n\n    const requestOptions = {\n        method: 'POST',\n        headers: loginHeaderMy\n\n    };\n\n    return fetch(`${process.env.REACT_APP_API_URL}/users/auth`, requestOptions)\n        .then(handleResponse)\n        .then(user => {\n            localStorage.setItem('user', JSON.stringify(user));\n            return user;\n        })\n}\n\nfunction logout() {\n    localStorage.removeItem('user');\n}\n\nfunction register(user) {\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(user)\n    };\n    return fetch(`${process.env.REACT_APP_API_URL}/users/`, requestOptions)\n        .then(handleResponse);\n}\n\nfunction handleResponse(response) {\n    return response.text().then(text => {\n        const data = text && JSON.parse(text);\n        if (!response.ok) {\n            if (response.status === 401) {\n                logout();\n            }\n            const error = (data && data.errors) || response.statusText;\n            return Promise.reject(error);\n        }\n        return data;\n    })\n}\n\n","export const updateInitialState = {\n    update: {},\n    initial: {},\n    isInitialLoaded: false,\n    isSumbitted: false,\n    isSending: false,\n    isSuccess: false,\n    isError: false,\n    error: '',\n}\n\nexport const updateReducer = (state, action) => {\n    switch (action.type) {\n        case 'update': {\n            return {\n                ...state,\n                error: '',\n                isError: false,\n                update: { ...state.update, [action.fieldName]: action.payload }\n            }\n        }\n        case 'initial-success': {\n            return {\n                ...state,\n                isInitialLoaded: true,\n                update: action.payload,\n                initial: action.payload\n            }\n        }\n        case 'submit': {\n            return {\n                ...state,\n                isSumbitted: true,\n                isError: false,\n                error: ''\n            }\n        }\n        case 'send': {\n            return {\n                ...state,\n                isSending: true\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                isSuccess: true,\n                isSending: false,\n                isSumbitted: false,\n                isError: false,\n                error: ''\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isSuccess: false,\n                isSending: false,\n                isSumbitted: false,\n                isError: true,\n                error: action.payload ? action.payload : ''\n            }\n        }\n        default: {\n            return state\n        }\n    }\n}"],"sourceRoot":""}