{"version":3,"sources":["config/index.js","helpers/hooks/useBottomScrollListener.js","services/filmService.js","components/helpers/rippleButton.js","services/playlistService.js","helpers/hooks/useWindowsWidth.js","components/helpers/film/skeleton.js","services/userService.js","components/helpers/changePrivacyButton.js","components/helpers/removeButton.js","helpers/hooks/useIntersectionObserver.js","components/helpers/blurredImage/index.js","components/helpers/playlistAdd/reducer.js","components/helpers/playlistAdd/menu.js","components/helpers/playlistAdd/index.js","components/helpers/film/helper.js","components/helpers/film/index.js"],"names":["commentsMaxFetchCount","recommendationsMaxFetchCount","playlistButtonMaxFetchCount","pageInitialMaxFetchCount","pageMaxFetchCount","createCallback","debounce","handleOnScroll","options","lodashDebounce","useBottomScrollListener","onBottom","useMemo","offset","debounceOptions","leading","triggerOnNoScroll","id","debouncedOnBottom","containerRef","useRef","useCallback","current","scrollNode","scrollContainerBottomPosition","Math","round","scrollTop","clientHeight","scrollHeight","document","getElementById","scrollingElement","documentElement","window","innerHeight","useEffect","ref","node","addEventListener","removeEventListener","all","params","axios","get","index","search","view","patch","create","form","post","headers","authHeader","like","remove","delete","RippleButton","onClick","children","className","useRipple","background","addRipple","ripples","style","color","e","onMouseDown","body","show","partialUpdate","useWindowsWidth","width","useState","innerWidth","isScreenSmall","setIsScreenSmall","checkScreenSize","FilmSkeleton","isRecommendations","lineHeight","me","ChangePrivacyButton","isPublic","isProfile","dispatchPrivacyUpdate","filmDispatch","isChanging","setIsChanging","a","playlistApi","is_public","then","res","type","payload","data","undefined","fieldName","catch","err","console","error","changePrivacy","privacyButton","stopPropagation","icon","height","RemoveButton","handleRemove","require","useIntersectionObserver","target","onIntersect","threshold","rootMargin","React","observer","IntersectionObserver","observe","unobserve","BlurredImage","src","srcWebp","thumb","thumbWebp","isCached","isLoaded","setIsLoaded","srcSet","alt","visibility","onLoad","opacity","BlurredImageComponent","image","isVisible","setIsVisible","setIsCached","observerElement","isIntersecting","tmp","Image","concat","complete","playlistDropdownMenuInitialState","playlists","isLoading","isAllFetched","isCreating","isAdding","playlistToUpgrade","title","playlistDropdownMenuReducer","state","action","length","map","playlist","contains","PlaylistDropdownMenu","filmID","handlePlaylistClose","createToast","useContext","ToastContext","titleInputRef","useReducer","dispatch","handleOnPlaylistDropdownMenuBottom","scrollRef","userApi","skip","limit","result","forEach","films","indexOf","getMyPlaylists","films_id","errorMessage","response","errors","classList","add","creatPlaylist","is_remove_films","message","addToPlaylist","handleChange","left","setTimeout","maxHeight","overflowY","minHeight","onChange","handleAddToPlaylist","checked","htmlFor","onSubmit","preventDefault","placeholder","value","disabled","PlaylistAddButton","menuRef","isOpen","setIsOpen","dropdownMenu","setDropdownMenu","handleOpenMenu","log","handleCloseMenu","Dropdown","hide","display","faEllipsisV","recommendationsNormal","recommendationsSmall","searchNormal","searchSmall","getFilmClass","isSearch","isSmallScreen","Film","film","handleRedirect","filmCSS","setFilmCSS","user","UserContext","img","auth","line","text","author_name","views"],"mappings":"wHAAA,0KAAO,IAAMA,EAAwB,GACxBC,EAA+B,GAE/BC,EAA8B,GAE9BC,EAA2B,GAC3BC,EAAoB,I,iCCNjC,6BAGMC,EAAiB,SAACC,EAAUC,EAAgBC,GAChD,OAAIF,EACKG,IAAeF,EAAgBD,EAAUE,GAEzCD,GAiFIG,IA7Ef,WAGG,IAFDC,EAEA,uDAFW,aACXH,EACA,uDADU,GAEV,EAAqEI,mBACnE,+BAAO,CACLC,OAAM,iBAAEL,QAAF,IAAEA,OAAF,EAAEA,EAASK,cAAX,QAAqB,GAC3BP,SAAQ,iBAAEE,QAAF,IAAEA,OAAF,EAAEA,EAASF,gBAAX,QAAuB,IAC/BQ,gBAAe,iBAAEN,QAAF,IAAEA,OAAF,EAAEA,EAASM,uBAAX,QAA8B,CAAEC,SAAS,GACxDC,kBAAiB,iBAAER,QAAF,IAAEA,OAAF,EAAEA,EAASQ,yBAAX,SACjBC,GAAE,iBAAET,QAAF,IAAEA,OAAF,EAAEA,EAASS,UAAX,QAAiB,QAErB,QAACT,QAAD,IAACA,OAAD,EAACA,EAASK,OAAV,OAAkBL,QAAlB,IAAkBA,OAAlB,EAAkBA,EAASF,SAA3B,OAAqCE,QAArC,IAAqCA,OAArC,EAAqCA,EAASM,gBAA9C,OAA+DN,QAA/D,IAA+DA,OAA/D,EAA+DA,EAASQ,kBAAxE,OAA2FR,QAA3F,IAA2FA,OAA3F,EAA2FA,EAASS,KAR9FJ,EAAR,EAAQA,OAAQG,EAAhB,EAAgBA,kBAAmBV,EAAnC,EAAmCA,SAAUQ,EAA7C,EAA6CA,gBAAiBG,EAA9D,EAA8DA,GAWxDC,EAAoBN,mBAAQ,kBAAMP,EAAeC,EAAUK,EAAUG,KAAkB,CAACH,EAAUL,EAAUQ,IAC5GK,EAAeC,iBAAO,MACtBb,EAAiBc,uBAAY,WAEjC,GAA4B,MAAxBF,EAAaG,QAAiB,CAChC,IAAMC,EAAaJ,EAAaG,QAC1BE,EAAgCC,KAAKC,MAAMH,EAAWI,UAAYJ,EAAWK,cAC5DH,KAAKC,MAAMH,EAAWM,aAAehB,IAEtCW,GACpBN,SAEG,GAAW,OAAPD,EAAa,CACtB,IAAMM,EAAaO,SAASC,eAAed,GAC3C,GAAIM,EAAY,CACd,IAAMC,EAAgCC,KAAKC,MAAMH,EAAWI,UAAYJ,EAAWK,cAC5DH,KAAKC,MAAMH,EAAWM,aAAehB,IACtCW,GACpBN,SAGC,CACL,IAAMK,EAAaO,SAASE,kBAAoBF,SAASG,gBACnDT,EAAgCC,KAAKC,MAAMH,EAAWI,UAAYO,OAAOC,aACxDV,KAAKC,MAAMH,EAAWM,aAAehB,IAEtCW,GACpBN,OAGH,CAACA,EAAmBL,EAAQI,IA6B/B,OA3BAmB,qBAAU,WACR,IAAMC,EAAMlB,EAAaG,QACnBgB,EAAOR,SAASC,eAAed,GAcrC,OAZW,MAAPoB,EACFA,EAAIE,iBAAiB,SAAUhC,GACb,OAAT+B,EACTA,EAAKC,iBAAiB,SAAUhC,GAEhC2B,OAAOK,iBAAiB,SAAUhC,GAGhCS,GACFT,IAGK,WACM,MAAP8B,EACFA,EAAIG,oBAAoB,SAAUjC,GAChB,OAAT+B,EACTA,EAAKC,iBAAiB,SAAUhC,GAEhC2B,OAAOM,oBAAoB,SAAUjC,MAGxC,CAACA,EAAgBS,EAAmBC,IAEhCE,I,iCCrFT,kQAIasB,EAAM,SAACC,GAAD,OAAYC,IAAMC,IAAI,SAAU,CAACF,YACvCG,EAAQ,SAAC5B,GAAD,OAAQ0B,IAAMC,IAAN,gBAAmB3B,KACnC6B,EAAS,SAACJ,GAAD,OAAYC,IAAMC,IAAI,eAAgB,CAACF,YAEhDK,EAAO,SAAC9B,GAAD,OAAQ0B,IAAMK,MAAN,gBAAqB/B,EAArB,WAKfgC,EAAS,SAACC,GAAD,OAAUP,IAAMQ,KAAN,QAAoBD,EAAM,CAACE,QAASC,iBAKvDC,EAAO,SAACrC,EAAIiC,GAAL,OAAcP,IAAMK,MAAN,gBAAqB/B,EAArB,WAAkCiC,EAAM,CAACE,QAASC,iBAEvEE,EAAS,SAACtC,GAAD,OAAQ0B,IAAMa,OAAN,gBAAsBvC,GAAM,CAAEmC,QAASC,kB,sECFtDI,IAhBM,SAAC,GAAsC,IAApCC,EAAmC,EAAnCA,QAASC,EAA0B,EAA1BA,SAAUC,EAAgB,EAAhBA,UAEvC,EAA6BC,IAAU,CAAEC,WAAY,UAArD,mBAAOC,EAAP,KAAkBC,EAAlB,KAEA,OACI,yBAAQC,MAAO,CAAEC,MAAO,SAAWR,QAAS,SAACS,GACzCT,EAAQS,IAERC,YAAaL,EACbH,UAAS,qCAAgCA,GAJ7C,UAKKD,EACAK,O,iCCbb,8LAIaf,EAAS,SAACoB,GAAD,OAAU1B,IAAMQ,KAAK,YAAakB,EAAM,CAAEjB,QAASC,iBAC5DR,EAAQ,SAAC5B,GAAD,OAAQ0B,IAAMC,IAAN,oBAAuB3B,GAAM,CAAEmC,QAASC,iBACxDiB,EAAO,SAAC5B,GAAD,OAAYC,IAAMC,IAAN,YAAuB,CAAEF,SAAQU,QAASC,iBAC7DkB,EAAgB,SAACtD,EAAIoD,GAAL,OAAc1B,IAAMK,MAAN,oBAAyB/B,GAAMoD,EAAM,CAAEjB,QAASC,iBAG9EE,EAAS,SAACtC,GAAD,OAAQ0B,IAAMa,OAAN,oBAA0BvC,GAAM,CAAEmC,QAASC,kB,oDCS1DmB,IAjBS,WAAkB,IAAjBC,EAAgB,uDAAR,IAC/B,EAA0CC,mBAASxC,OAAOyC,WAAaF,GAAvE,mBAAOG,EAAP,KAAsBC,EAAtB,KAEIC,EAAkB,WACpBD,EAAiB3C,OAAOyC,WAAaF,IAUvC,OARArC,qBAAU,WAIR,OAHA0C,IACA5C,OAAOK,iBAAiB,SAAUuC,GAE3B,kBAAM5C,OAAOM,oBAAoB,SAAUsC,MAEjD,IAEIF,I,iCChBT,sCA4BeG,IAxBM,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,kBAEpB,OACI,sBAAKpB,UAAS,UAAKoB,EAAoB,YAAc,WAAvC,mDAAd,UACI,qBAAKpB,UAAU,mBAAf,SACI,qBAAKA,UAAU,wEAAf,SACI,qBAAKA,UAAU,mBAAf,SACI,cAAC,IAAD,CAAUA,UAAU,cAAcK,MAAO,CAAEgB,WAAY,eAInE,sBAAKrB,UAAU,wBAAf,UACI,qBAAKA,UAAU,UAAf,SACI,cAAC,IAAD,CAAUA,UAAU,gBAGxB,qBAAKA,UAAU,UAAf,SACI,cAAC,IAAD,CAAUA,UAAU,oB,iCCrBxC,wFAIasB,EAAK,SAACxC,GAAD,OAAYC,IAAMC,IAAI,WAAY,CAAEF,SAAQU,QAASC,iBAC1DkB,EAAgB,SAACF,GAAD,OAAU1B,IAAMK,MAAM,QAASqB,EAAM,CAAEjB,QAASC,kB,iHC2D9D8B,IA3Da,SAAC,GAAsE,IAApEC,EAAmE,EAAnEA,SAAUnE,EAAyD,EAAzDA,GAAIoE,EAAqD,EAArDA,UAAWC,EAA0C,EAA1CA,sBAAuBC,EAAmB,EAAnBA,aAE3E,EAAoCb,oBAAS,GAA7C,mBAAOc,EAAP,KAAmBC,EAAnB,KAGArD,qBAAU,WAAM,4CACZ,sBAAAsD,EAAA,sEACUC,IAA0B1E,EAAI,CAAE2E,WAAYR,IAC7CS,MAAK,SAAAC,GACFL,GAAc,GAEdH,EAAsB,CAClBS,KAAM,kCACNC,QAASF,EAAIG,YAGIC,IAAjBX,GACAA,EAAa,CACTQ,KAAM,QACNI,UAAW,iBACXH,SAAS,OAIpBI,OAAM,SAAAC,GACHC,QAAQC,MAAMF,GACdZ,GAAc,MApB1B,4CADY,sBAwBRD,GAxBS,WAAD,wBAwBIgB,KACjB,CAAClB,EAAuBE,EAAYJ,EAAUnE,EAAIsE,IAErD,IAKMkB,EACF,cAAC,IAAD,CACI7C,UAAU,uBACVF,QARoB,SAACS,GACzBA,EAAEuC,kBACGlB,GAAYC,GAAc,IAI/B,SAGI,cAAC,IAAD,CAAiBkB,KAAMvB,EAAW,eAAiB,WAI3D,OAAOC,EAEC,qBAAKzB,UAAU,mFAAf,SAEI,qBACIA,UAAU,wCACVK,MAAO,CAAE2C,OAAQ,OAAQnC,MAAO,MAFpC,SAGKgC,MAIbA,I,iCC7DR,6BAaeI,IAVM,SAAC,GAAsB,IAApBC,EAAmB,EAAnBA,aACpB,OACI,cAAC,IAAD,CACIlD,UAAU,qCACVF,QAASoD,EAFb,SAGI,cAAC,IAAD,CAAiBH,KAAK,kB,mFCPlCI,EAAQ,KAER,IAkBeC,EAlBiB,SAAC,GAK1B,IAJLC,EAII,EAJJA,OACAC,EAGI,EAHJA,YAGI,IAFJC,iBAEI,MAFQ,GAER,MADJC,kBACI,MADS,MACT,EACJC,IAAMjF,WAAU,WACd,IAAMkF,EAAW,IAAIC,qBAAqBL,EAAa,CACrDE,aACAD,cAEI7F,EAAU2F,EAAO3F,QAEvB,OADAgG,EAASE,QAAQlG,GACV,WACLgG,EAASG,UAAUnG,Q,gBCbnBoG,EAAe,SAAC,GAAkD,IAAhDC,EAA+C,EAA/CA,IAAKC,EAA0C,EAA1CA,QAASC,EAAiC,EAAjCA,MAAOC,EAA0B,EAA1BA,UAAWC,EAAe,EAAfA,SACpD,EAAgCrD,mBAASqD,GAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KAEA,OACI,sBAAKrE,UAAU,mBAAf,UAEI,oCACI,wBAAQmC,KAAK,aAAamC,OAAQJ,IAClC,wBAAQ/B,KAAK,aAAamC,OAAQL,IAClC,qBAAKjE,UAAU,cAAcuE,IAAI,GAC7BlE,MAAO,CAAEmE,WAAYJ,EAAW,SAAW,WAC3CL,IAAKE,EACLQ,OAAQ,WACJJ,GAAY,SAIxB,oCACI,wBAAQlC,KAAK,aAAamC,OAAQN,IAClC,wBAAQ7B,KAAK,aAAamC,OAAQP,IAClC,qBAAK/D,UAAU,aAAauE,IAAI,GAC5BlE,MAAO,CAAEqE,QAASN,EAAW,EAAI,GACjCL,IAAKA,EACLU,OAAQ,WACJJ,GAAY,aA0CrBM,IAnCf,YAA2C,IAAVC,EAAS,EAATA,MACvBnG,EAAMjB,mBACZ,EAAkCsD,oBAAS,GAA3C,mBAAO+D,EAAP,KAAkBC,EAAlB,KACA,EAAgChE,oBAAS,GAAzC,mBAAOqD,EAAP,KAAiBY,EAAjB,KAgBA,OAdA3B,EAAwB,CACpBC,OAAQ5E,EACR6E,YAAa,WAAuB0B,GAChC,GADoD,oBAAvCC,eACO,CAChB,IAAIC,EAAM,IAAIC,MACdD,EAAInB,IAAMa,EAAMQ,OAAO,sBACvBL,EAAYG,EAAIG,UAChBP,GAAa,GACTrG,EAAIf,SACJsH,EAAgBnB,UAAUpF,EAAIf,aAM1C,qBACIe,IAAKA,EACLuB,UAAU,8CAFd,SAIK6E,GACG,cAAC,EAAD,CAAcV,SAAUA,EACpBJ,IAAKa,EAAMQ,OAAO,iBAClBpB,QAASY,EAAMQ,OAAO,sBACtBnB,MAAOW,EAAMQ,OAAO,kBACpBlB,UAAWU,EAAMQ,OAAO,6B,sLC9D/BE,EAAmC,CAC5CC,UAAW,GACXC,WAAW,EACXC,cAAc,EACdC,YAAY,EACZC,UAAU,EACVC,kBAAmB,KACnBC,MAAO,GACPrE,UAAU,EACVmB,MAAO,IAGJ,SAASmD,EAA4BC,EAAOC,GAC/C,OAAQA,EAAO7D,MACX,IAAK,QACD,OAAO,2BACA4D,GADP,gBAEIpD,MAAO,IACNqD,EAAOzD,UAAYyD,EAAO5D,UAGnC,IAAK,OACD,OAAO,2BACA2D,GADP,IAEIP,WAAW,EACXC,cAAc,IAGtB,IAAK,eACD,OAAO,2BACAM,GADP,IAEIR,UAAU,GAAD,mBAAMQ,EAAMR,WAAZ,YAA0BS,EAAO5D,UAC1CoD,WAAW,EACXC,aAAcO,EAAO5D,QAAQ6D,OAAS3J,IACtCqG,MAAO,KAGf,IAAK,SACD,OAAO,2BACAoD,GADP,IAEIP,WAAW,EACXE,YAAY,IAGpB,IAAK,iBACD,OAAO,2BACAK,GADP,IAEIP,WAAW,EACXE,YAAY,IAGpB,IAAK,MACD,OAAO,2BACAK,GADP,IAEIP,WAAW,EACXG,UAAU,EACVC,kBAAmBI,EAAO5D,UAGlC,IAAK,sBACD,OAAO,2BACA2D,GADP,IAEIR,UAAWQ,EAAMR,UAAUW,KAAI,SAAAC,GAC3B,OAAIA,EAAS9I,KAAO0I,EAAMH,kBAAkBvI,GAAW,2BAAK8I,GAAZ,IAAsBC,UAAWD,EAASC,WAC9ED,KAEhBP,kBAAmB,OAG3B,IAAK,cACD,OAAO,2BACAG,GADP,IAEIJ,UAAU,IAGlB,IAAK,kCACD,OAAO,2BACAI,GADP,IAEIR,UAAWQ,EAAMR,UAAUW,KAAI,SAAAC,GAC3B,OAAIA,EAAS9I,KAAO2I,EAAO5D,QAAQ/E,GAAW,2BAAK8I,GAAZ,IAAsBnE,UAAWgE,EAAO5D,QAAQJ,YAChFmE,OAInB,IAAK,QACD,OAAO,2BACAJ,GADP,IAEIP,WAAW,EACXE,YAAY,EACZ/C,MAAOqD,EAAO5D,QACdyD,MAAO,KAEf,QACI,OAAOE,G,6BC4JJM,MA9Of,YAAiG,IAAjEC,EAAgE,EAAhEA,OAAQC,EAAwD,EAAxDA,oBAAqBnF,EAAmC,EAAnCA,kBAAmBO,EAAgB,EAAhBA,aAGpE6E,EAAgBC,qBAAWC,KAA3BF,YAEFG,EAAgBnJ,mBAEtB,EAA0BoJ,qBAAWd,EAA6BR,GAAlE,mBAAOS,EAAP,KAAcc,EAAd,KAEQtB,EAAwGQ,EAAxGR,UAAWM,EAA6FE,EAA7FF,MAAOrE,EAAsFuE,EAAtFvE,SAAUgE,EAA4EO,EAA5EP,UAAWC,EAAiEM,EAAjEN,aAAcC,EAAmDK,EAAnDL,WAAYC,EAAuCI,EAAvCJ,SAAUC,EAA6BG,EAA7BH,kBAAmBjD,EAAUoD,EAAVpD,MAEhGmE,EAAqCrJ,uBAAY,WAC9C+H,GAAcC,GAAiBC,GAAeC,GAC/CkB,EAAS,CACL1E,KAAM,WAGf,CAACqD,EAAWC,EAAcC,EAAYC,IAEnCoB,EAAYjK,YAAwBgK,GAE1CtI,qBAAU,WAAM,4CACZ,sBAAAsD,EAAA,sEACUkF,IAAW,CAAEzB,WAAW,EAAM0B,KAAM1B,EAAUU,OAAQiB,MAAO5K,MAC9D2F,MAAK,SAAAC,GAEF,IAAIiF,EAASjF,EAAIG,KAAKkD,UAEtB4B,EAAOC,SAAQ,SAAAjB,GACXA,EAASC,SAAWD,EAASkB,MAAMC,QAAQhB,IAAW,KAG1DO,EAAS,CACL1E,KAAM,eACNC,QAAS+E,OAGhB3E,OAAM,SAAAC,GACHC,QAAQC,MAAMF,MAhB1B,4CADY,sBAqBR+C,GArBS,WAAD,wBAqBG+B,KAEhB,CAACjB,EAAQf,EAAWC,IAEvBhH,qBAAU,WAAM,4CAEZ,4BAAAsD,EAAA,6DACUrB,EAAO,CAAEoF,MAAOA,EAAO7D,UAAWR,EAAUgG,SAAU,CAAClB,IADjE,SAGUvE,IAAmBtB,GACpBwB,MAAK,SAAAC,GACF2E,EAAS,CACL1E,KAAM,mBAEVqE,EAAY,oBAAD,OAAqBX,IAChCU,OAGH/D,OAAM,SAAAC,GACHC,QAAQC,MAAMF,GACd,IAAIgF,EAAe,KAEfhF,EAAIiF,UAAYjF,EAAIiF,SAASrF,MAAQI,EAAIiF,SAASrF,KAAKM,MACvD8E,EAAehF,EAAIiF,SAASrF,KAAKM,MAC1BF,EAAIiF,UAAYjF,EAAIiF,SAASrF,MAAQI,EAAIiF,SAASrF,KAAKsF,SAC9DF,EAAehF,EAAIiF,SAASrF,KAAKsF,OAAO,IAE5ChB,EAAcjJ,QAAQkK,UAAUC,IAAI,cACpChB,EAAS,CACL1E,KAAM,QACNC,QAA0B,8BAAjBqF,EAA+C,6BAA+BA,OAxBvG,4CAFY,sBA+BR/B,GA/BS,WAAD,wBA+BIoC,KAEjB,CAACpC,EAAYG,EAAOrE,EAAUgF,EAAaD,EAAqBD,IAEnE9H,qBAAU,WAAM,4CACZ,8BAAAsD,EAAA,6DAEQrB,EAAO,CAAE+G,SAAU,CAAClB,IAExB7F,EAAOmF,EAAkBQ,SAAlB,2BAAkC3F,GAAlC,IAAwCsH,iBAAiB,IAAzD,2BAAuEtH,GAAvE,IAA6EsH,iBAAiB,IAE/FC,EAAUpC,EAAkBQ,SAAlB,gCAAsDR,EAAkBC,OAAxE,4BAAuGD,EAAkBC,OAEzIgB,EAAS,CACL1E,KAAM,sBACNgE,SAAUP,IAVlB,SAaU7D,IAA0B6D,EAAkBvI,GAAIoD,GACjDwB,MAAK,SAAAC,GACF2E,EAAS,CACL1E,KAAM,gBAGNf,GACAO,EAAa,CACTQ,KAAM,QACNI,UAAW,iBACXH,SAAS,IAGjBoE,EAAYwB,MAEfxF,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAMF,MA5BpC,4CADY,sBA+BRkD,GAAYC,GA/BH,WAAD,wBA+BuBqC,KACpC,CAACtC,EAAUC,EAAmBY,EAAa7E,EAAc2E,EAAQlF,IAEpE,IAOM8G,EAAe,SAAC3F,EAAWH,GAC7BuE,EAAcjJ,QAAQkK,UAAUjI,OAAO,cACvCkH,EAAS,CACL1E,KAAM,QACNI,UAAWA,EACXH,QAASA,KAajB,OAEI,sBAAKtC,QAAS,SAAAS,GAAC,OAAIA,EAAEuC,mBACjBzC,MAAO,CAAEQ,MAAO,QAAYsH,KAAM,mBADtC,UAEI,sBAAKnI,UAAU,iCAAf,UACI,qBAAKA,UAAU,mCAAf,wBACA,cAAC,IAAD,CAAcA,UAAU,6GACpBF,QAAS,kBAAMsI,WAAW7B,EAAqB,MADnD,SAEI,cAAC,IAAD,CAAiBxD,KAAK,eAG9B,oBAAI/C,UAAU,qBACd,sBAAKvB,IAAKsI,EACN1G,MAAO,CACHgI,UAAW,QAAYC,UAAW,SAAUC,UAAW,QAF/D,UAKQhD,EAAUW,KAAI,SAACC,EAAUlH,GACrB,OAAQ,sBAAKe,UAAU,8BAAf,UACJ,qBAAKA,UAAU,uBAAf,SACI,sBAAK3C,GAAI8I,EAAS9I,GAAI2C,UAAU,aAAhC,UACI,uBAAOmC,KAAK,WACR9E,GAAE,uBAAkB8I,EAAS9I,IAC7B2C,UAAU,mBACVwI,SAAU,kBAjDlB,SAACrC,GACzBU,EAAS,CACL1E,KAAM,MACNC,QAAS+D,IA8CmCsC,CAAoBtC,IACpCuC,QAASvC,EAASC,WACtB,uBAAOpG,UAAU,mBAAmB2I,QAAO,uBAAkBxC,EAAS9I,IAAtE,SACI,mBAAG2C,UAAU,uBAAb,SACKmG,EAASN,eAM1B,cAAC,IAAD,CACIxI,GAAI8I,EAAS9I,GACbmE,SAAU2E,EAASnE,UACnBP,WAAW,EACXE,aAAcA,EACdD,sBAAuBmF,MArB2BV,EAAS9I,QA4BtEoI,GAAgB,qBAAKpF,MAAO,CACzB2C,OAAQ,QAERhD,UAAU,iEAHG,SAIZwF,GAAa,qBAAKxF,UAAU,wBAIzC,oBAAIA,UAAU,qBACd,qBAAKA,UAAU,cAAf,SACI,sBAAMA,UAAU,MAAhB,qCAEJ,qBAAKA,UAAU,cAAf,SACI,uBAAM4I,SApEG,SAACrI,GAClBA,EAAEsI,iBACFtI,EAAEuC,kBAEF+D,EAAS,CACL1E,KAAM,YA+DF,UACI,sBAAKnC,UAAU,wBAAf,UACI,uBAAOmC,KAAK,OAAOnC,UAAU,eAAe,aAAW,oBACnD8I,YAAY,0BAA0BrK,IAAKkI,EAC3C6B,SAAU,SAACjI,GAAD,OAAO2H,EAAa,QAAS3H,EAAE8C,OAAO0F,UAEpD,qBAAK/I,UAAU,mBAAf,SACK2C,OAGT,qBAAK3C,UAAU,YAAf,SACI,yBAAQA,UAAU,cACdwI,SAAU,SAACjI,GAAD,OAAO2H,EAAa,WAA+B,WAAnB3H,EAAE8C,OAAO0F,QADvD,UAEI,wBAAQA,MAAM,UAAd,qBACA,wBAAQA,MAAM,SAAd,yBAIR,sBAAK/I,UAAU,iCAAf,UACI,wBAAQmC,KAAK,SAASnC,UAAU,kBAAkBgJ,SAAUtD,EAA5D,oBAKIA,GACA,qBAAK1F,UAAU,kC,yCClJ5BiJ,MAhFf,YAAyE,IAA5C7H,EAA2C,EAA3CA,kBAAmBO,EAAwB,EAAxBA,aAAc2E,EAAU,EAAVA,OAEpD4C,EAAU1L,mBAEhB,EAA6ByC,IAAU,CAAEC,WAAY,UAArD,mBAAOC,EAAP,KAAkBC,EAAlB,KAEA,EAA4BU,oBAAS,GAArC,mBAAOqI,EAAP,KAAeC,EAAf,KAEA,EAAwCtI,mBAAS,MAAjD,mBAAOuI,EAAP,KAAqBC,EAArB,KAOMC,EAAiB,WACnB7G,QAAQ8G,IAAI,QACZJ,GAAU,IAIRK,EAAkB,WACpB/G,QAAQ8G,IAAI,SACZJ,GAAU,IAqBd,OAlBA5K,qBAAU,WACN,IAAMC,EAAMyK,EAAQxL,QAEpB,GAAIe,EAOA,OALAA,EAAIE,iBAAiB,mBAAoB4K,GACzC9K,EAAIE,iBAAiB,mBAAoB8K,GAEzCH,EAAgB,IAAII,IAAJ,6BAAmCpD,KAE5C,WACH7H,EAAIG,oBAAoB,mBAAoB2K,GAC5C9K,EAAIG,oBAAoB,mBAAoB6K,MAIrD,CAACnD,EAAQ4C,IAIJ,sBAAKzK,IAAKyK,EAENlJ,UAAU,eAAeK,MAAO,CAAEQ,MAAO,QAF7C,UAGI,wBAAQf,QAAS,WACTuJ,IACIF,EAAQE,EAAa3I,OACpB2I,EAAaM,SAGtB3J,UAAU,0DACVmC,KAAK,SAAS9E,GAAE,4BAAuBiJ,GACvC,iBAAe,WAAW,gBAAc,QACxCjG,MAAO,CAAEC,MAAO,SATpB,SAUI,qBAAKD,MAAO,CAAEuJ,QAAS,eAAgB/I,MAAO,OAAQmC,OAAQ,QAA9D,SACI,sBAAKlD,QAASK,EACVH,UAAU,kEADd,UAEI,cAAC,IAAD,CAAiBK,MAAO,CAAEqE,QAAUyE,EAAS,EAAI,IAC7CnJ,UAAU,oBAAoB+C,KAAM8G,MACvCzJ,SAIb,qBAAKJ,UAAU,gBAAgB,8CAAsCsG,GAArE,SACK6C,GAAU,cAAC,EAAD,CACP/H,kBAAmBA,EACnBO,aAAcA,EACd2E,OAAQA,EACRC,oBA/DQ,WACxB6C,GAAU,GACVC,EAAaM,gB,mCCvBfG,EAAwB,CAC1B,6BACA,oDACA,gBACA,iBACA,gBACA,cAGEC,EAAuB,CACzB,6CACA,4CACA,mBACA,mBACA,qBACA,mBAGEC,EAAe,CACjB,yCACA,oDACA,qBACA,iBACA,gBACA,cAGEC,EAAc,CAChB,uDACA,4CACA,oBACA,mBACA,qBACA,mBAGEpL,EAAM,CACR,sDACA,4CACA,mBACA,mBACA,qBACA,mBAiBWqL,EAdM,SAAC9I,EAAmB+I,EAAUC,GAC/C,OAAIhJ,EACOgJ,EACHL,EACAD,EACGK,EACAC,EACHH,EACAD,EAEGnL,GCuBAwL,IA/DF,SAAC,GAAmH,IAAjHC,EAAgH,EAAhHA,KAAMrL,EAA0G,EAA1GA,MAAOsL,EAAmG,EAAnGA,eAAgBrH,EAAmF,EAAnFA,aAAczB,EAAqE,EAArEA,UAAWL,EAA0D,EAA1DA,kBAAmB+I,EAAuC,EAAvCA,SAAUxI,EAA6B,EAA7BA,aAAc5B,EAAe,EAAfA,SACvGqK,EAAgBxJ,YAAiBQ,EAAoB,IAAM,KAEjE,EAA8BN,mBAASoJ,EAAa9I,EAAmB+I,EAAUC,IAAjF,mBAAOI,EAAP,KAAgBC,EAAhB,KAEQC,EAASjE,qBAAWkE,KAApBD,KASR,OANAlM,qBAAU,WACNiM,EAAWP,EAAa9I,EAAmB+I,EAAUC,MAEtD,CAACA,IAIA,qBAAKpK,UAAWwK,EAAQ,GAAxB,SAEI,sBAAKxK,UAAWwK,EAAQ,GAAxB,UAEI,qBAAKxK,UAAWwK,EAAQ,GACpB1K,QAAS,kBAAMyK,EAAeD,EAAKjN,KADvC,SAEI,sBAAK2C,UAAU,iBAAf,UACI,cAAC,IAAD,CACI4E,MAAO0F,EAAKM,MAChB,cAAC,IAAD,CAAiB5K,UAAU,cAAc+C,KAAK,cAItD,qBAAK/C,UAAWwK,EAAQ,GAAxB,SAEI,sBAAKxK,UAAWwK,EAAQ,GAAxB,UACI,sBAAKxK,UAAS,UAAK0K,EAAKG,KAAO,+BAAiC,SAAlD,gCACV/K,QAAS,kBAAMyK,EAAeD,EAAKjN,KADvC,UAGI,cAAC,IAAD,CAAcyN,KAAM,EAAGC,KAAMT,EAAKzE,MAC9B7F,UAAWwK,EAAQ,KAEtBzK,GAAsB,sBAAKC,UAAU,mBAAf,UACnB,iCAAOsK,EAAKU,YAAZ,UACA,8CACA,iCAAOV,EAAKW,MAAZ,kBAMJxJ,EACI,cAAC,IAAD,CAAcyB,aAAcA,IAC5BwH,EAAKG,KACD,cAAC,EAAD,CACIzJ,kBAAmBA,EACnBO,aAAcA,EACd1C,MAAOA,EACPqH,OAAQgE,EAAKjN,KAAS,iB","file":"static/js/2.7495d910.chunk.js","sourcesContent":["export const commentsMaxFetchCount = 10\nexport const recommendationsMaxFetchCount = 12\n\nexport const playlistButtonMaxFetchCount = 10\n\nexport const pageInitialMaxFetchCount = 40\nexport const pageMaxFetchCount = 20\n","import { useCallback, useEffect, useRef, useMemo } from 'react';\nimport lodashDebounce from 'lodash.debounce';\n\nconst createCallback = (debounce, handleOnScroll, options) => {\n  if (debounce) {\n    return lodashDebounce(handleOnScroll, debounce, options);\n  } else {\n    return handleOnScroll;\n  }\n};\n\nfunction useBottomScrollListener(\n  onBottom = () => { },\n  options = {},\n) {\n  const { offset, triggerOnNoScroll, debounce, debounceOptions, id } = useMemo(\n    () => ({\n      offset: options?.offset ?? 20,\n      debounce: options?.debounce ?? 200,\n      debounceOptions: options?.debounceOptions ?? { leading: true },\n      triggerOnNoScroll: options?.triggerOnNoScroll ?? false,\n      id: options?.id ?? null\n    }),\n    [options?.offset, options?.debounce, options?.debounceOptions, options?.triggerOnNoScroll, options?.id],\n  );\n\n  const debouncedOnBottom = useMemo(() => createCallback(debounce, onBottom, debounceOptions), [onBottom, debounce, debounceOptions]);\n  const containerRef = useRef(null);\n  const handleOnScroll = useCallback(() => {\n\n    if (containerRef.current != null) {\n      const scrollNode = containerRef.current;\n      const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + scrollNode.clientHeight);\n      const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\n\n      if (scrollPosition <= scrollContainerBottomPosition) {\n        debouncedOnBottom();\n      }\n    } else if (id !== null) {\n      const scrollNode = document.getElementById(id);\n      if (scrollNode) {\n        const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + scrollNode.clientHeight);\n        const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\n        if (scrollPosition <= scrollContainerBottomPosition) {\n          debouncedOnBottom();\n        }\n      }\n    } else {\n      const scrollNode = document.scrollingElement || document.documentElement;\n      const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + window.innerHeight);\n      const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\n\n      if (scrollPosition <= scrollContainerBottomPosition) {\n        debouncedOnBottom();\n      }\n    }\n  }, [debouncedOnBottom, offset, id]);\n\n  useEffect(() => {\n    const ref = containerRef.current;\n    const node = document.getElementById(id)\n\n    if (ref != null) {\n      ref.addEventListener('scroll', handleOnScroll);\n    } else if (node !== null) {\n      node.addEventListener('scroll', handleOnScroll);\n    } else {\n      window.addEventListener('scroll', handleOnScroll);\n    }\n\n    if (triggerOnNoScroll) {\n      handleOnScroll();\n    }\n\n    return () => {\n      if (ref != null) {\n        ref.removeEventListener('scroll', handleOnScroll);\n      } else if (node !== null) {\n        node.addEventListener('scroll', handleOnScroll);\n      } else {\n        window.removeEventListener('scroll', handleOnScroll);\n      }\n    };\n  }, [handleOnScroll, triggerOnNoScroll, id]);\n\n  return containerRef;\n}\n\nexport default useBottomScrollListener;\n","import axios from '../helpers/axios'\nimport authHeader from '../helpers/authHeader'\n\n\nexport const all = (params) => axios.get('films/', {params})\nexport const index = (id) => axios.get(`films/${id}`)\nexport const search = (params) => axios.get('films/search', {params})\n\nexport const view = (id) => axios.patch(`films/${id}/view`)\n\nexport const video = (id) => axios.get(`films/${id}/video`)\nexport const thumbnail = (id, params) => axios.get(`films/${id}/thumbnail`, {params})\n\nexport const create = (form) => axios.post(`films`, form, {headers: authHeader()})\n\nexport const update = (id, form) => axios.put(`films/${id}`, form, {headers: authHeader()})\nexport const partialUpdate = (id, form) => axios.patch(`films/${id}`, form, {headers: authHeader()})\n\nexport const like = (id, form) => axios.patch(`films/${id}/action`, form, {headers: authHeader()})\n\nexport const remove = (id) => axios.delete(`films/${id}`, { headers: authHeader() })\n\n\n\n","import useRipple from 'useripple'\n\nconst RippleButton = ({ onClick, children, className }) => {\n\n    const [addRipple, ripples] = useRipple({ background: 'black' })\n\n    return (\n        <button style={{ color: 'black' }} onClick={(e) => {\n            onClick(e)\n        }}\n            onMouseDown={addRipple}\n            className={`btn btn-link button-ripple ${className}`}>\n            {children}\n            {ripples}\n        </button>\n    )\n}\n\nexport default RippleButton","import axios from '../helpers/axios'\nimport authHeader from '../helpers/authHeader'\n\n\nexport const create = (body) => axios.post('playlists', body, { headers: authHeader() })\nexport const index = (id) => axios.get(`playlists/${id}`, { headers: authHeader() })\nexport const show = (params) => axios.get(`playlists`, { params, headers: authHeader() })\nexport const partialUpdate = (id, body) => axios.patch(`playlists/${id}`, body, { headers: authHeader() })\n\n\nexport const remove = (id) => axios.delete(`playlists/${id}`, { headers: authHeader() })\n\n","import { useState, useEffect } from \"react\";\n\nconst useWindowsWidth = (width = 600) => {\n  const [isScreenSmall, setIsScreenSmall] = useState(window.innerWidth < width);\n\n  let checkScreenSize = () => {\n    setIsScreenSmall(window.innerWidth < width);\n  };\n  useEffect(() => {\n    checkScreenSize();\n    window.addEventListener(\"resize\", checkScreenSize);\n\n    return () => window.removeEventListener(\"resize\", checkScreenSize);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return isScreenSmall;\n};\n\nexport default useWindowsWidth;\n","import Skeleton from 'react-loading-skeleton';\n\nimport '../../pages/film/film.css'\n\nconst FilmSkeleton = ({ isRecommendations }) => {\n\n    return (\n        <div className={`${isRecommendations ? 'col-sm-12' : 'col-sm-6'} mb-5 col col-12 col-md-3 col-lg-2 container-px`}>\n            <div className=\"col-12 col-sm-12\">\n                <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\n                    <div className=\"ratio ratio-16x9\">\n                        <Skeleton className=\"w-100 h-100\" style={{ lineHeight: '1.5' }} />\n                    </div>\n                </div>\n            </div>\n            <div className=\"col-12 col-sm-12 mt-2\">\n                <div className=\"col p-0\">\n                    <Skeleton className=\"col w-100\" />\n                </div>\n\n                <div className=\"col p-0\">\n                    <Skeleton className=\"w-100\" />\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default FilmSkeleton","import axios from '../helpers/axios'\nimport authHeader from '../helpers/authHeader'\n\n\nexport const me = (params) => axios.get('users/me', { params, headers: authHeader() })\nexport const partialUpdate = (body) => axios.patch('users', body, { headers: authHeader() })\n\nexport const userService = {\n    login,\n    logout,\n    register\n};\n\nfunction login(username, password) {\n\n    let loginHeaderMy = null\n\n    const requestOptions = {\n        method: 'POST',\n        headers: loginHeaderMy\n\n    };\n\n    return fetch(`${process.env.REACT_APP_API_URL}/users/auth`, requestOptions)\n        .then(handleResponse)\n        .then(user => {\n            localStorage.setItem('user', JSON.stringify(user));\n            return user;\n        })\n}\n\nfunction logout() {\n    localStorage.removeItem('user');\n}\n\nfunction register(user) {\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(user)\n    };\n    return fetch(`${process.env.REACT_APP_API_URL}/users/`, requestOptions)\n        .then(handleResponse);\n}\n\nfunction handleResponse(response) {\n    return response.text().then(text => {\n        const data = text && JSON.parse(text);\n        if (!response.ok) {\n            if (response.status === 401) {\n                logout();\n            }\n            const error = (data && data.errors) || response.statusText;\n            return Promise.reject(error);\n        }\n        return data;\n    })\n}\n\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { useEffect, useState } from \"react\"\nimport * as playlistApi from '../../services/playlistService'\nimport RippleButton from \"./rippleButton\"\n\nconst ChangePrivacyButton = ({ isPublic, id, isProfile, dispatchPrivacyUpdate, filmDispatch }) => {\n\n    const [isChanging, setIsChanging] = useState(false)\n\n\n    useEffect(() => {\n        async function changePrivacy() {\n            await playlistApi.partialUpdate(id, { is_public: !isPublic })\n                .then(res => {\n                    setIsChanging(false)\n\n                    dispatchPrivacyUpdate({\n                        type: 'change-playlist-privacy-success',\n                        payload: res.data\n                    })\n\n                    if (filmDispatch !== undefined) {\n                        filmDispatch({\n                            type: 'field',\n                            fieldName: 'reloadPlaylist',\n                            payload: true\n                        })\n                    }\n                })\n                .catch(err => {\n                    console.error(err)\n                    setIsChanging(false)\n                })\n        }\n        if (isChanging) changePrivacy()\n    }, [dispatchPrivacyUpdate, isChanging, isPublic, id, filmDispatch])\n\n    const handleChangePrivacy = (e) => {\n        e.stopPropagation()\n        if (!isChanging) setIsChanging(true)\n    }\n\n    const privacyButton = (\n        <RippleButton\n            className=\"button-ripple-24 p-0\"\n            onClick={handleChangePrivacy}>\n            <FontAwesomeIcon icon={isPublic ? \"globe-europe\" : \"lock\"} />\n        </RippleButton>\n    )\n\n    return isProfile ?\n        (\n            <div className=\"col text-center justify-content-center d-flex align-items-center p-0 flex-grow-0\"\n            >\n                <div\n                    className=\"col remove-holder p-0 m-0 flex-grow-0\"\n                    style={{ height: '24px', width: '24' }}>\n                    {privacyButton}\n                </div>\n            </div>\n        ) :\n        privacyButton\n}\n\nexport default ChangePrivacyButton","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport RippleButton from './rippleButton'\n\nconst RemoveButton = ({ handleRemove }) => {\n    return (\n        <RippleButton\n            className=\"button-ripple-24 remove-holder p-0\"\n            onClick={handleRemove}>\n            <FontAwesomeIcon icon=\"trash-alt\" />\n        </RippleButton>\n    )\n}\n\nexport default RemoveButton","import React from \"react\";\nrequire('intersection-observer');\n\nconst useIntersectionObserver = ({\n  target,\n  onIntersect,\n  threshold = 0.1,\n  rootMargin = \"0px\"\n}) => {\n  React.useEffect(() => {\n    const observer = new IntersectionObserver(onIntersect, {\n      rootMargin,\n      threshold\n    });\n    const current = target.current;\n    observer.observe(current);\n    return () => {\n      observer.unobserve(current);\n    };\n  });\n};\nexport default useIntersectionObserver;","import React, { useState, useRef } from 'react';\nimport useIntersectionObserver from '../../../helpers/hooks/useIntersectionObserver';\nimport \"./blurred.css\";\n\nconst BlurredImage = ({ src, srcWebp, thumb, thumbWebp, isCached }) => {\n    const [isLoaded, setIsLoaded] = useState(isCached);\n\n    return (\n        <div className=\"ratio ratio-16x9\">\n\n            <picture>\n                <source type=\"image/webp\" srcSet={thumbWebp} />\n                <source type=\"image/jpeg\" srcSet={thumb} />\n                <img className=\"image thumb\" alt=\"\"\n                    style={{ visibility: isLoaded ? \"hidden\" : \"visible\" }}\n                    src={thumb}\n                    onLoad={() => {\n                        setIsLoaded(true);\n                    }} />\n            </picture>\n\n            <picture>\n                <source type=\"image/webp\" srcSet={srcWebp} />\n                <source type=\"image/jpeg\" srcSet={src} />\n                <img className=\"image full\" alt=\"\"\n                    style={{ opacity: isLoaded ? 1 : 0 }}\n                    src={src}\n                    onLoad={() => {\n                        setIsLoaded(true);\n                    }} />\n            </picture>\n        </div>\n    );\n}\n\nfunction BlurredImageComponent({ image }) {\n    const ref = useRef();\n    const [isVisible, setIsVisible] = useState(false);\n    const [isCached, setIsCached] = useState(false);\n\n    useIntersectionObserver({\n        target: ref,\n        onIntersect: ([{ isIntersecting }], observerElement) => {\n            if (isIntersecting) {\n                let tmp = new Image();\n                tmp.src = image.concat('?width=poster_webp');\n                setIsCached(tmp.complete)\n                setIsVisible(true);\n                if (ref.current)\n                    observerElement.unobserve(ref.current);\n            }\n        }\n    });\n\n    return (\n        <div\n            ref={ref}\n            className=\"image-container ratio ratio-16x9 play-image\"\n        >\n            {isVisible && (\n                <BlurredImage isCached={isCached}\n                    src={image.concat('?width=poster')}\n                    srcWebp={image.concat('?width=poster_webp')}\n                    thumb={image.concat('?width=preview')}\n                    thumbWebp={image.concat('?width=preview_webp')} />\n            )}\n        </div>\n    );\n}\n\nexport default BlurredImageComponent;","import { playlistButtonMaxFetchCount } from \"../../../config\"\n\nexport const playlistDropdownMenuInitialState = {\n    playlists: [],\n    isLoading: true,\n    isAllFetched: false,\n    isCreating: false,\n    isAdding: false,\n    playlistToUpgrade: null,\n    title: '',\n    isPublic: false,\n    error: '',\n}\n\nexport function playlistDropdownMenuReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                error: '',\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'load': {\n            return {\n                ...state,\n                isLoading: true,\n                isAllFetched: false,\n            }\n        }\n        case 'load-success': {\n            return {\n                ...state,\n                playlists: [...state.playlists, ...action.payload],\n                isLoading: false,\n                isAllFetched: action.payload.length < playlistButtonMaxFetchCount,\n                error: '',\n            }\n        }\n        case 'create': {\n            return {\n                ...state,\n                isLoading: false,\n                isCreating: true\n            }\n        }\n        case 'create-success': {\n            return {\n                ...state,\n                isLoading: false,\n                isCreating: false\n            }\n        }\n        case 'add': {\n            return {\n                ...state,\n                isLoading: false,\n                isAdding: true,\n                playlistToUpgrade: action.payload\n            }\n        }\n        case 'add-update-playlist': {\n            return {\n                ...state,\n                playlists: state.playlists.map(playlist => {\n                    if (playlist.id === state.playlistToUpgrade.id) return { ...playlist, contains: !playlist.contains }\n                    else return playlist\n                }),\n                playlistToUpgrade: null\n            }\n        }\n        case 'add-success': {\n            return {\n                ...state,\n                isAdding: false\n            }\n        }\n        case 'change-playlist-privacy-success': {\n            return {\n                ...state,\n                playlists: state.playlists.map(playlist => {\n                    if (playlist.id === action.payload.id) return { ...playlist, is_public: action.payload.is_public }\n                    return playlist\n                })\n            }\n        }\n        case 'error':\n            return {\n                ...state,\n                isLoading: false,\n                isCreating: false,\n                error: action.payload,\n                title: ''\n            }\n        default:\n            return state\n\n    }\n}\n","import React, { useCallback, useEffect, useContext, useReducer, useRef } from 'react';\n\nimport * as userApi from '../../../services/userService'\nimport * as playlistApi from '../../../services/playlistService'\n\nimport ToastContext from '../../../helpers/contexts/toast/toastContext';\nimport useBottomScrollListener from '../../../helpers/hooks/useBottomScrollListener';\nimport { playlistDropdownMenuReducer, playlistDropdownMenuInitialState } from './reducer'\nimport ChangePrivacyButton from '../changePrivacyButton';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { playlistButtonMaxFetchCount } from '../../../config';\nimport RippleButton from '../rippleButton';\n\nfunction PlaylistDropdownMenu({ filmID, handlePlaylistClose, isRecommendations, filmDispatch }) {\n\n\n    const { createToast } = useContext(ToastContext);\n\n    const titleInputRef = useRef()\n\n    const [state, dispatch] = useReducer(playlistDropdownMenuReducer, playlistDropdownMenuInitialState);\n\n    const { playlists, title, isPublic, isLoading, isAllFetched, isCreating, isAdding, playlistToUpgrade, error } = state\n\n    const handleOnPlaylistDropdownMenuBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && !isCreating && !isAdding) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isLoading, isAllFetched, isCreating, isAdding])\n\n    const scrollRef = useBottomScrollListener(handleOnPlaylistDropdownMenuBottom);\n\n    useEffect(() => {\n        async function getMyPlaylists() {\n            await userApi.me({ playlists: true, skip: playlists.length, limit: playlistButtonMaxFetchCount })\n                .then(res => {\n\n                    let result = res.data.playlists\n\n                    result.forEach(playlist => {\n                        playlist.contains = playlist.films.indexOf(filmID) > -1\n                    });\n\n                    dispatch({\n                        type: 'load-success',\n                        payload: result\n                    })\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (isLoading) getMyPlaylists()\n\n    }, [filmID, playlists, isLoading])\n\n    useEffect(() => {\n\n        async function creatPlaylist() {\n            const body = { title: title, is_public: isPublic, films_id: [filmID] };\n\n            await playlistApi.create(body)\n                .then(res => {\n                    dispatch({\n                        type: 'create-success'\n                    })\n                    createToast(`Created playlist ${title}`)\n                    handlePlaylistClose()\n\n                })\n                .catch(err => {\n                    console.error(err)\n                    let errorMessage = null\n\n                    if (err.response && err.response.data && err.response.data.error) {\n                        errorMessage = err.response.data.error\n                    } else if (err.response && err.response.data && err.response.data.errors) {\n                        errorMessage = err.response.data.errors[0]\n                    }\n                    titleInputRef.current.classList.add('is-invalid')\n                    dispatch({\n                        type: 'error',\n                        payload: errorMessage === \"Path `title` is required.\" ? 'Playlist title is required' : errorMessage\n                    })\n                })\n        }\n\n        if (isCreating) creatPlaylist()\n\n    }, [isCreating, title, isPublic, createToast, handlePlaylistClose, filmID,])\n\n    useEffect(() => {\n        async function addToPlaylist() {\n\n            let body = { films_id: [filmID] };\n\n            body = playlistToUpgrade.contains ? { ...body, is_remove_films: true } : { ...body, is_remove_films: false }\n\n            const message = playlistToUpgrade.contains ? `Deleted from playlist ${playlistToUpgrade.title}` : `Added to playlist ${playlistToUpgrade.title}`\n\n            dispatch({\n                type: 'add-update-playlist',\n                playlist: playlistToUpgrade\n            })\n\n            await playlistApi.partialUpdate(playlistToUpgrade.id, body)\n                .then(res => {\n                    dispatch({\n                        type: 'add-success'\n                    })\n\n                    if (isRecommendations) {\n                        filmDispatch({\n                            type: 'field',\n                            fieldName: 'reloadPlaylist',\n                            payload: true\n                        })\n                    }\n                    createToast(message)\n                })\n                .catch(err => console.error(err))\n        }\n        if (isAdding && playlistToUpgrade) addToPlaylist()\n    }, [isAdding, playlistToUpgrade, createToast, filmDispatch, filmID, isRecommendations])\n\n    const handleAddToPlaylist = (playlist) => {\n        dispatch({\n            type: 'add',\n            payload: playlist\n        })\n    };\n\n    const handleChange = (fieldName, payload) => {\n        titleInputRef.current.classList.remove('is-invalid')\n        dispatch({\n            type: 'field',\n            fieldName: fieldName,\n            payload: payload\n        })\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault()\n        e.stopPropagation()\n\n        dispatch({\n            type: 'create'\n        })\n    };\n\n    return (\n\n        <div onClick={e => e.stopPropagation()}\n            style={{ width: 240 + \"px\", left: '50px !important' }}>\n            <div className=\"row m-0 m-button button-ripple\" >\n                <div className=\"col playlist-add-exit-text-width\">Save to...</div>\n                <RippleButton className=\"button-ripple-24 playlist-add-icon-holder p-0 d-flex align-items-center text-center justify-content-center\"\n                    onClick={() => setTimeout(handlePlaylistClose, 150)}>\n                    <FontAwesomeIcon icon=\"times\" />\n                </RippleButton>\n            </div>\n            <hr className=\"dropdown-divider\" />\n            <div ref={scrollRef}\n                style={{\n                    maxHeight: 100 + 'px', overflowY: 'scroll', minHeight: 3 + 'rem'\n                }}>\n                {\n                    playlists.map((playlist, index) => {\n                        return (<div className=\"row m-0 playlist-form-group\" key={playlist.id} >\n                            <div className=\"col-10 col-sm-10 p-0\">\n                                <div id={playlist.id} className=\"form-check\">\n                                    <input type=\"checkbox\"\n                                        id={`add-playlist-${playlist.id}`}\n                                        className=\"form-check-input\"\n                                        onChange={() => handleAddToPlaylist(playlist)}\n                                        checked={playlist.contains} />\n                                    <label className=\"form-check-label\" htmlFor={`add-playlist-${playlist.id}`}>\n                                        <p className=\"playlist-check-label\">\n                                            {playlist.title}\n                                        </p>\n                                    </label>\n                                </div>\n\n                            </div>\n                            <ChangePrivacyButton\n                                id={playlist.id}\n                                isPublic={playlist.is_public}\n                                isProfile={false}\n                                filmDispatch={filmDispatch}\n                                dispatchPrivacyUpdate={dispatch} />\n\n                        </div>)\n                    })\n                }\n\n                {\n                    !isAllFetched && <div style={{\n                        height: 3 + 'rem'\n                    }}\n                        className=\"fetch-spinner d-flex justify-content-center align-items-center\">\n                        {isLoading && <div className=\"spinner-border\" />}\n                    </div>\n                }\n            </div>\n            <hr className=\"dropdown-divider\" />\n            <div className=\"row m-0 p-0\">\n                <span className=\"m-0\">Create a new playlist</span>\n            </div>\n            <div className=\"row m-0 p-0\">\n                <form onSubmit={handleSubmit}>\n                    <div className=\"input-group mb-2 mt-2\" >\n                        <input type=\"text\" className=\"form-control\" aria-label=\"playlistNameInput\"\n                            placeholder=\"Enter playlist title...\" ref={titleInputRef}\n                            onChange={(e) => handleChange('title', e.target.value)}\n                        />\n                        <div className=\"invalid-feedback\">\n                            {error}\n                        </div>\n                    </div>\n                    <div className=\"mb-2 mt-2\">\n                        <select className=\"form-select\"\n                            onChange={(e) => handleChange('isPublic', e.target.value === 'public')}>\n                            <option value=\"private\">Private</option>\n                            <option value=\"public\">Public</option>\n                        </select>\n                    </div>\n\n                    <div className=\"d-flex align-items-center mt-2\">\n                        <button type=\"submit\" className=\"btn btn-primary\" disabled={isCreating}>\n                            Create\n                        </button>\n\n                        {\n                            isCreating &&\n                            <div className=\"spinner-grow ms-2\" />\n                        }\n                    </div>\n\n                </form>\n\n            </div>\n\n        </div >\n\n\n    )\n}\n\nexport default PlaylistDropdownMenu\n","import React, { useState, useRef, useEffect } from 'react';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport PlaylistDropdownMenu from './menu'\nimport useRipple from \"useripple\"\n\nimport { faEllipsisV } from '@fortawesome/free-solid-svg-icons'\nimport { Dropdown } from 'bootstrap'\n\nimport './playlistAdd.css'\n\nfunction PlaylistAddButton({ isRecommendations, filmDispatch, filmID }) {\n\n    const menuRef = useRef()\n\n    const [addRipple, ripples] = useRipple({ background: \"black\" })\n\n    const [isOpen, setIsOpen] = useState(false)\n\n    const [dropdownMenu, setDropdownMenu] = useState(null)\n\n    const handlePlaylistClose = () => {\n        setIsOpen(false)\n        dropdownMenu.hide()\n    }\n\n    const handleOpenMenu = () => {\n        console.log('open')\n        setIsOpen(true)\n\n    }\n\n    const handleCloseMenu = () => {\n        console.log('close')\n        setIsOpen(false)\n    }\n\n    useEffect(() => {\n        const ref = menuRef.current;\n\n        if (ref) {\n\n            ref.addEventListener('show.bs.dropdown', handleOpenMenu)\n            ref.addEventListener('hide.bs.dropdown', handleCloseMenu)\n\n            setDropdownMenu(new Dropdown(`#playlist-dropdown-${filmID}`))\n\n            return () => {\n                ref.removeEventListener('show.bs.dropdown', handleOpenMenu)\n                ref.removeEventListener('hide.bs.dropdown', handleCloseMenu)\n            }\n        }\n\n    }, [filmID, menuRef])\n\n    return (\n\n            <div ref={menuRef}\n\n                className=\"p-0 dropdown\" style={{ width: '26px' }} >\n                <button onClick={() => {\n                    if (dropdownMenu) {\n                        if (isOpen) dropdownMenu.show()\n                        else dropdownMenu.hide()\n                    }\n                }}\n                    className=\"btn btn-link m-button button-ripple dropdown-toggle p-0\"\n                    type=\"button\" id={`playlist-dropdown-${filmID}`}\n                    data-bs-toggle=\"dropdown\" aria-expanded=\"false\"\n                    style={{ color: \"black\" }}>\n                    <div style={{ display: 'inline-block', width: '100%', height: '100%' }}>\n                        <div onClick={addRipple}\n                            className=\"col playlist-add-icon-holder p-0 button-ripple button-ripple-24\">\n                            <FontAwesomeIcon style={{ opacity: (isOpen ? 1 : \"\") }}\n                                className=\"playlist-add-icon\" icon={faEllipsisV} />\n                            {ripples}\n                        </div>\n                    </div>\n                </button>\n                <div className=\"dropdown-menu\" aria-labelledby={`playlist-dropdown-${filmID}`}>\n                    {isOpen && <PlaylistDropdownMenu\n                        isRecommendations={isRecommendations}\n                        filmDispatch={filmDispatch}\n                        filmID={filmID}\n                        handlePlaylistClose={handlePlaylistClose} />\n                    }\n                </div>\n            </div >\n    )\n}\n\nexport default PlaylistAddButton\n","const recommendationsNormal = [\n    'row mx-0 mb-4 container-px',\n    'row p-0 m-0 play-outer-container remove-container',\n    'col-6 m-0 p-0',\n    'col-6 col-sm-6',\n    'row mx-0 mb-0',\n    'mb-1 title'\n]\n\nconst recommendationsSmall = [\n    'col-12 col-md-3 col-lg-2 mb-4 container-px',\n    'col play-outer-container remove-container',\n    'col-12 col-sm-12',\n    'col-12 col-sm-12',\n    'row mx-0 mb-0 mt-1',\n    'mb-1 mt-1 title'\n]\n\nconst searchNormal = [\n    'col-12 col-lg-8 mx-0 mb-4 container-px',\n    'row p-0 m-0 play-outer-container remove-container',\n    'col-6 col-sm-4 p-0',\n    'col-6 col-sm-8',\n    'row mx-0 mb-0',\n    'mb-1 title'\n]\n\nconst searchSmall = [\n    'col-12 col-sm-12 col-md-3 col-lg-2 mb-4 container-px',\n    'col play-outer-container remove-container',\n    'col-12 col-sm-12 ',\n    'col-12 col-sm-12',\n    'row mx-0 mb-0 mt-1',\n    'mb-1 mt-1 title'\n]\n\nconst all = [\n    'col-12 col-sm-6 col-md-3 col-lg-2 mb-4 container-px',\n    'col play-outer-container remove-container',\n    'col-12 col-sm-12',\n    'col-12 col-sm-12',\n    'row mx-0 mb-0 mt-1',\n    'mb-1 mt-1 title'\n]\n\nconst getFilmClass = (isRecommendations, isSearch, isSmallScreen) => {\n    if (isRecommendations) {\n        return isSmallScreen ?\n            recommendationsSmall :\n            recommendationsNormal\n    } else if (isSearch) {\n        return isSmallScreen ?\n            searchSmall :\n            searchNormal\n    } else {\n        return all\n    }\n}\n\nexport default getFilmClass","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport TextTruncate from \"react-text-truncate\";\n\nimport BlurredImageComponent from \"../blurredImage\";\nimport PlaylistAddButtonComponent from \"../playlistAdd\";\n\nimport RemoveButton from '../../helpers/removeButton';\n\nimport '../../pages/film/film.css'\nimport useWindowsWidth from '../../../helpers/hooks/useWindowsWidth';\nimport { useContext, useEffect, useState } from 'react';\nimport UserContext from '../../../helpers/contexts/user/userContext';\n\nimport getFilmClass from './helper'\n\nconst Film = ({ film, index, handleRedirect, handleRemove, isProfile, isRecommendations, isSearch, filmDispatch, children }) => {\n    const isSmallScreen = useWindowsWidth((isRecommendations ? 768 : 576))\n\n    const [filmCSS, setFilmCSS] = useState(getFilmClass(isRecommendations, isSearch, isSmallScreen))\n\n    const { user } = useContext(UserContext);\n\n\n    useEffect(() => {\n        setFilmCSS(getFilmClass(isRecommendations, isSearch, isSmallScreen))\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isSmallScreen])\n\n\n    return (\n        <div className={filmCSS[0]}>\n\n            <div className={filmCSS[1]}>\n\n                <div className={filmCSS[2]}\n                    onClick={() => handleRedirect(film.id)}>\n                    <div className=\"play-container\">\n                        <BlurredImageComponent\n                            image={film.img} />\n                        <FontAwesomeIcon className=\"play-middle\" icon=\"play\" />\n                    </div>\n                </div>\n\n                <div className={filmCSS[3]}>\n\n                    <div className={filmCSS[4]}>\n                        <div className={`${user.auth ? 'button-ripple-div-next-width' : 'col-12'} col p-0 pe-2 cursor-pointer`}\n                            onClick={() => handleRedirect(film.id)}>\n\n                            <TextTruncate line={1} text={film.title}\n                                className={filmCSS[5]} />\n\n                            {children ? children : <div className=\"mb-0 author-nick\">\n                                <span>{film.author_name}&nbsp;</span>\n                                <span>•&nbsp;</span>\n                                <span>{film.views} views</span>\n                            </div>\n                            }\n                        </div>\n\n                        {\n                            isProfile ?\n                                <RemoveButton handleRemove={handleRemove} /> :\n                                user.auth ?\n                                    <PlaylistAddButtonComponent\n                                        isRecommendations={isRecommendations}\n                                        filmDispatch={filmDispatch}\n                                        index={index}\n                                        filmID={film.id} /> : null\n                        }\n                    </div>\n\n                </div>\n            </div>\n        </div >\n    )\n}\n\nexport default Film"],"sourceRoot":""}