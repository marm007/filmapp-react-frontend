{"version":3,"sources":["helpers/axios.js","helpers/authHeader.js","services/filmService.js","helpers/contexts/user/userContext.js","components/navbar/reducer.js","helpers/hooks/useBottomScrollListener.js","components/navbar/index.js","images/header.png","helpers/contexts/removeModal/removeModalContext.js","helpers/components/removeModal.js","components/homePage/reducer.js","components/blurredImage/index.js","services/userService.js","services/playlistService.js","helpers/contexts/toast/toastContext.js","components/add/reducers/playlistDropdownMenuReducer.js","helpers/components/changePrivacyButton.js","components/add/playlistDropdownMenu.js","components/add/playlistAddButton.js","helpers/index.js","helpers/components/removeButton.js","helpers/components/film.js","components/homePage/index.js","helpers/contexts/film/filmContext.js","components/filmPage/reducers/previewReducer.js","components/filmPage/preview.js","config/index.js","components/filmPage/reducers/recommendationsReducer.js","components/filmPage/recommendations.js","services/commentService.js","components/filmPage/reducers/commentsReducer.js","components/filmPage/comments.js","images/image_not_found.png","components/filmPage/reducers/playlistReducer.js","components/filmPage/playlist.js","helpers/hooks/useWindowsWidth.js","helpers/contexts/film/filmProvider.js","components/filmPage/index.js","services/authService.js","components/auth/reducer.js","components/auth/login.js","components/auth/register.js","components/searchPage/reducer.js","components/searchPage/index.js","components/playlistsPage/reducer.js","helpers/components/playlist.js","components/playlistsPage/index.js","components/add/reducers/filmAddReducer.js","components/add/filmAdd.js","images/page-not-found.svg","components/notFound/index.js","components/settings/reducer.js","components/settings/index.js","components/auth/resetPassword.js","components/auth/forgotPassword.js","helpers/components/privateRoute.js","components/profilePage/reducer.js","components/profilePage/index.js","helpers/components/withAxios.js","helpers/contexts/user/userProvider.js","App.js","serviceWorker.js","helpers/contexts/toast/toastProvider.js","helpers/contexts/removeModal/removeModalProvider.js","index.js"],"names":["instance","axios","create","baseURL","process","authHeader","token","JSON","parse","localStorage","getItem","all","params","get","index","id","search","view","patch","form","post","headers","like","remove","delete","UserContext","createContext","name","auth","isInitialLoaded","initialSearchState","options","isLoading","isAllFetched","isSearching","isOpen","selected","title","searchReducer","state","action","type","fieldName","payload","length","createCallback","debounce","handleOnScroll","lodashDebounce","useBottomScrollListener","onBottom","useMemo","offset","debounceOptions","leading","triggerOnNoScroll","debouncedOnBottom","containerRef","useRef","useCallback","current","scrollNode","scrollContainerBottomPosition","Math","round","scrollTop","clientHeight","scrollHeight","document","getElementById","scrollingElement","documentElement","window","innerHeight","useEffect","ref","node","addEventListener","removeEventListener","NavbarComponent","props","history","useHistory","location","useLocation","useContext","user","logout","useReducer","dispatch","useState","isExpanded","setIsExpanded","handleSearchOnBottom","typeaheadRef","anchorEl","setAnchorEl","handleKeyDown","a","filmApi","skip","then","data","map","film","img","catch","err","console","error","getAllSearchedFilms","event","target","className","keyCode","charCode","handleSearchSubmit","isMobile","e","preventDefault","reset","clear","push","pathname","films","handleSearch","query","Navbar","expanded","expand","bg","variant","onToggle","onSelect","eventKey","handleSelect","Col","xs","span","order","sm","md","Brand","style","cursor","onClick","alt","src","width","height","Toggle","Form","inline","Row","useCache","filterBy","open","placeholder","labelKey","minLength","onSearch","onBlur","onFocus","onKeyDown","onMenuToggle","onInputChange","text","onChange","renderMenu","results","menuProps","result","option","position","stopPropagation","marginRight","role","href","Spinner","animation","Button","icon","Collapse","Nav","activeKey","Link","Avatar","currentTarget","toUpperCase","charAt","handleLogin","keepMounted","Boolean","onClose","RemoveModalContext","show","isRemoving","RemoveModal","removeModalData","handleClose","Modal","onHide","centered","Header","Title","Body","Footer","initialState","homePageReducer","Set","BlurredImageComponent","image","setImage","Ratio","aspectRatio","onLoad","replace","me","partialUpdate","body","ToastContext","playlistDropdownMenuInitialState","playlists","isCreating","isAdding","playlistToUpgrade","isPublic","playlistDropdownMenuReducer","playlist","contains","is_public","ChangePrivacyButton","isProfile","dispatchPrivacyUpdate","filmDispatch","isChanging","setIsChanging","playlistApi","res","undefined","changePrivacy","privacyButton","ButtonBase","marginLeft","borderRadius","PlaylistDropdownMenu","filmID","handlePlaylistClose","isPreview","useRipple","background","addRipple","ripples","createToast","handleOnPlaylistDropdownMenuBottom","scrollRef","userApi","limit","forEach","indexOf","getMyPlaylists","films_id","errorMessage","response","errors","creatPlaylist","is_remove_films","message","addToPlaylist","Dropdown","Menu","setTimeout","Divider","maxHeight","overflowY","minHeight","Check","FormCheck","Input","handleAddToPlaylist","checked","Label","ItemText","FormControl","isInvalid","value","Feedback","Select","Group","disabled","PlaylistAddButton","setIsOpen","metadata","bsPrefix","color","display","verticalAlign","opacity","checkIfPlaylistButtonClick","tagName","parentNode","animVal","includes","displayCommentDate","comment","date","Date","createdAt","getDate","slice","getMonth","getFullYear","getHours","getMinutes","RemoveButton","handleRemove","Film","handleRedirect","isRecommendations","concat","line","author_name","views","Home","handleOnHomePageData","fetchData","getAllFilms","FilmContext","initialPreviewState","video","likes","dislikes","description","isLiked","isDisliked","isLikeButtonClicked","likeAction","isDescExpanded","previewReducer","FilmPreview","playerRef","getBoundingClientRect","setPlayerNode","playerNode","measure","requests","match","details","Promise","allSettled","filmResponse","filmViewResponse","userResponse","status","filmData","comments","commentsCount","comments_count","liked","disliked","handleGetFilm","likeResult","likeData","userResult","handleLike","handleTruncate","TruncateButton","playsInline","poster","Fragment","whiteSpace","textAlign","truncateText","textTruncateChild","commentsMaxFetchCount","recommendationsInitialState","recommendationsReducer","FilmsRecommendations","filmState","handleRecommendationsOnBottom","exclude","isPreviewLoaded","initialLoad","film_id","sort","commentsInitialState","toRemove","isSorting","sorts","dir","commentsReducer","filter","sortToChange","Comments","showModal","handleOnCommentsBottom","commentApi","loadSortedComments","loadComments","addComment","substring","removeComment","sortParams","sortComments","DropdownButton","tmpSort","handleSortComments","sortTmp","Item","active","TextField","label","multiline","fullWidth","maxrow","author_id","handleRemoveComment","filmPlaylistInitialState","currentFilm","currentFilmIndex","isRemovingPlaylist","isRemovingFilm","removingFilmId","headerHeight","playerHeight","filmPlaylistReducer","filtered","findIndex","Playlist","clearPlaylist","headerRef","filmIndex","filmId","Array","prototype","call","reloadPlaylist","handleReloadPlaylist","parsed","queryString","list","handleGetPlaylist","removePlaylist","removeFilm","handleRemoveFromPlaylist","onYReachEnd","onScrollY","isNonExisting","fontWeight","justifyContent","alignItems","image_not_found","useWindowsWidth","isScreenSmall","setIsScreenSmall","checkScreenSize","innerWidth","filmInitialState","filmReducer","FilmProvider","children","Provider","onSmallScreen","useWindowWidth","historyObject","login","username","email","password","register","forget","authInitialState","nick","isSubmitted","isSending","isSuccess","isError","authReducer","Login","setShow","authApi","refreshToken","sendData","modalClose","goBack","size","closeButton","onSubmit","htmlFor","Control","Alert","Register","submitData","maxLength","searchInitialState","resetSort","filters","Search","searchParams","getFilms","handleOnclick","filterClick","sortClick","dirClick","tmpType","in","filterTmp","fontSize","time","today","abs","floor","UTC","parseSearchDate","lg","flex","Truncate","lines","playlistsCount","playlistsPageReducer","responseCount","colWidth","setStyle","margin","PlaylistsPage","handleOnPlaylistsBottom","fetchInitialPlaylists","fetchPlaylists","setRedirect","playlistID","setFileInitialState","isFilm","file","CHOOSE_FILM","CHOOSE_THUMBNAIL","preview","alertInitialState","filmAddInitialState","thumbnail","filmAddReducer","alert","fileName","FilmAdd","clearUser","filmInputRef","thumbnailInputRef","FormData","set","handleFileChoose","files","URL","createObjectURL","muted","autoPlay","loop","accept","as","NotFound","error_404","userInitialState","settingsInitialState","initialUser","success","settingsReducer","Settings","updateUser","getUser","toUpdate","accessToken","updateUserData","ResetPassword","ForgotPassword","PrivateRoute","Component","component","rest","render","to","from","initialProfileState","filmsCount","profileReducer","resource","isPlaylist","Profile","handleProfileOnBottom","skipFilms","skipPlaylists","fetchInitialData","record","handleRedirectPlaylist","WithAxios","interceptors","use","isAuth","originalRequest","config","_retry","url","reject","setItem","stringify","UserProvider","setUser","scrollTo","decoded","jwt_decode","getMe","removeItem","reload","library","add","faSearch","faPlus","faThumbsUp","faThumbsDown","faEye","faPlay","faFilter","faCaretUp","faCaretDown","faEllipsisV","faSortDown","faSortUp","faTrashAlt","faTimes","faGlobeEurope","faLock","pathName","App","toast","clearToast","Toast","autohide","exact","path","SettingsComponent","LoginComponent","RegisterComponent","ResetPasswordComponent","ForgotPasswordComponent","FilmComponent","HomeComponent","SearchComponent","AddFilmComponent","ProfileComponent","NotFoundComponent","hostname","ToastProvider","isPrevoius","setToast","RemoveModalProvider","setRemoveModalData","prevState","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2fc84b2b.chunk.js","sourcesContent":["import axios from 'axios'\nconst instance = axios.create({\n    baseURL: process.env.REACT_APP_API_URL\n})\nexport default instance","const authHeader = () => {\n\n    let token = JSON.parse(localStorage.getItem('accessToken'));\n\n    if(token){\n        return { 'Authorization' : 'Bearer ' + token};\n    } else{\n        return {};\n    }\n}\n\nexport default authHeader","import axios from '../helpers/axios'\nimport authHeader from '../helpers/authHeader'\n\n\nexport const all = (params) => axios.get('films/', {params})\nexport const index = (id) => axios.get(`films/${id}`)\nexport const search = (params) => axios.get('films/search', {params})\n\nexport const view = (id) => axios.patch(`films/${id}/view`)\n\nexport const video = (id) => axios.get(`films/${id}/video`)\nexport const thumbnail = (id, params) => axios.get(`films/${id}/thumbnail`, {params})\n\nexport const create = (form) => axios.post(`films`, form, {headers: authHeader()})\n\nexport const update = (id, form) => axios.put(`films/${id}`, form, {headers: authHeader()})\nexport const partialUpdate = (id, form) => axios.patch(`films/${id}`, form, {headers: authHeader()})\n\nexport const like = (id, form) => axios.patch(`films/${id}/action`, form, {headers: authHeader()})\n\nexport const remove = (id) => axios.delete(`films/${id}`, { headers: authHeader() })\n\n\n\n","import { createContext } from 'react';\nconst UserContext = createContext({ name: '', id: null, auth: false, isInitialLoaded: false });\nexport default UserContext","export const initialSearchState = {\n    options: [],\n    isLoading: false,\n    isAllFetched: false,\n    isSearching: false,\n    isOpen: false,\n    selected: null,\n    title: ''\n}\n\nexport function searchReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                selected: null,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'pick-option': {\n            return {\n                ...state,\n                title: action.title,\n                selected: action.selected\n            }\n        }\n        case 'success-load': {\n            return {\n                ...state,\n                isLoading: false,\n                isSearching: false,\n                isAllFetched: action.payload.length < 10,\n                options: [...state.options, ...action.payload]\n            }\n        }\n        case 'success-search': {\n            return {\n                ...state,\n                isLoading: false,\n                isSearching: false,\n                isAllFetched: action.payload.length < 10,\n                options: action.payload\n            }\n        }\n        case 'clear': {\n            return initialSearchState\n        }\n        case 'load': {\n            return !state.isLoading && !state.isAllFetched ? {\n                ...state,\n                isLoading: true,\n                isAllFetched: false,\n                isSearching: false,\n            } : state\n        }\n        case 'search': {\n            return {\n                ...state,\n                options: [],\n                isSearching: true,\n                isLoading: false,\n                isAllFetched: false\n            }\n        }\n        default: return state\n    }\n}","import { useCallback, useEffect, useRef, useMemo } from 'react';\nimport { debounce as lodashDebounce } from 'lodash'\n\n\nconst createCallback = (debounce, handleOnScroll, options) => {\n  if (debounce) {\n    return lodashDebounce(handleOnScroll, debounce, options);\n  } else {\n    return handleOnScroll;\n  }\n};\n\nfunction useBottomScrollListener(\n  onBottom = () => { },\n  options = {},\n) {\n  const { offset, triggerOnNoScroll, debounce, debounceOptions, id } = useMemo(\n    () => ({\n      offset: options?.offset ?? 20,\n      debounce: options?.debounce ?? 200,\n      debounceOptions: options?.debounceOptions ?? { leading: true },\n      triggerOnNoScroll: options?.triggerOnNoScroll ?? false,\n      id: options?.id ?? null\n    }),\n    [options?.offset, options?.debounce, options?.debounceOptions, options?.triggerOnNoScroll, options?.id],\n  );\n\n  const debouncedOnBottom = useMemo(() => createCallback(debounce, onBottom, debounceOptions), [onBottom, debounce, debounceOptions]);\n  const containerRef = useRef(null);\n  const handleOnScroll = useCallback(() => {\n\n    if (containerRef.current != null) {\n      const scrollNode = containerRef.current;\n      const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + scrollNode.clientHeight);\n      const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\n\n      if (scrollPosition <= scrollContainerBottomPosition) {\n        debouncedOnBottom();\n      }\n    } else if (id !== null) {\n      const scrollNode = document.getElementById(id);\n      if (scrollNode) {\n        const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + scrollNode.clientHeight);\n        const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\n        if (scrollPosition <= scrollContainerBottomPosition) {\n          debouncedOnBottom();\n        }\n      }\n    } else {\n      const scrollNode = document.scrollingElement || document.documentElement;\n      const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + window.innerHeight);\n      const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\n\n      if (scrollPosition <= scrollContainerBottomPosition) {\n        debouncedOnBottom();\n      }\n    }\n  }, [debouncedOnBottom, offset, id]);\n\n  useEffect(() => {\n    const ref = containerRef.current;\n    const node = document.getElementById(id)\n\n    if (ref != null) {\n      ref.addEventListener('scroll', handleOnScroll);\n    } else if (node !== null) {\n      node.addEventListener('scroll', handleOnScroll);\n    } else {\n      window.addEventListener('scroll', handleOnScroll);\n    }\n\n    if (triggerOnNoScroll) {\n      handleOnScroll();\n    }\n\n    return () => {\n      if (ref != null) {\n        ref.removeEventListener('scroll', handleOnScroll);\n      } else if (node !== null) {\n        node.addEventListener('scroll', handleOnScroll);\n      } else {\n        window.removeEventListener('scroll', handleOnScroll);\n      }\n    };\n  }, [handleOnScroll, triggerOnNoScroll, id]);\n\n  return containerRef;\n}\n\nexport default useBottomScrollListener;\n","/* eslint-disable jsx-a11y/role-has-required-aria-props */\n/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { useState, useEffect, useCallback, useContext, useReducer, useRef } from 'react';\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Avatar from '@material-ui/core/Avatar';\n\nimport { Button, Col, Row, Form, Nav, Navbar, Spinner } from 'react-bootstrap';\n\nimport Menu from \"@material-ui/core/Menu/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem/MenuItem\";\n\nimport headerIcon from '../../images/header.png';\nimport * as filmApi from '../../services/filmService'\n\nimport { AsyncTypeahead, Menu as AsyncMenu, MenuItem as AsyncMenuItem } from 'react-bootstrap-typeahead';\nimport { isMobile } from \"react-device-detect\";\n\nimport UserContext from '../../helpers/contexts/user/userContext'\n\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\nimport './navbar.css';\nimport { initialSearchState, searchReducer } from './reducer';\n\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\n\nfunction NavbarComponent(props) {\n\n    let history = useHistory();\n    let location = useLocation();\n\n    const { user, logout } = useContext(UserContext);\n\n    const [state, dispatch] = useReducer(searchReducer, initialSearchState)\n\n    const [isExpanded, setIsExpanded] = useState(false)\n\n    const { options, title, isLoading, isAllFetched, isSearching, isOpen, selected } = state\n\n    const handleSearchOnBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && !isSearching && isOpen) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isLoading, isAllFetched, isSearching, isOpen])\n\n    useBottomScrollListener(handleSearchOnBottom, { id: 'typeahead-navbar' })\n\n    const typeaheadRef = useRef(null)\n\n    const [anchorEl, setAnchorEl] = useState(null)\n\n    const filterBy = () => true;\n\n    useEffect(() => {\n        document.addEventListener(\"keydown\", handleKeyDown);\n\n        return function cleanup() {\n            document.removeEventListener(\"keydown\", handleKeyDown);\n        }\n    })\n\n    useEffect(() => {\n        setIsExpanded(false)\n    }, [location])\n\n    useEffect(() => {\n        async function getAllSearchedFilms() {\n            await filmApi.search({ search: title, skip: options.length })\n                .then(({ data }) => {\n                    const options = data.map((film) => ({\n                        ...film,\n                        img: `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=small`\n                    }));\n\n                    dispatch({\n                        type: 'success-load',\n                        payload: options\n                    })\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (isLoading) getAllSearchedFilms()\n    }, [isLoading, title, options.length])\n\n    useEffect(() => {\n        async function getAllSearchedFilms() {\n            await filmApi.search({ search: title })\n                .then(({ data }) => {\n                    const options = data.map((film) => ({\n                        ...film,\n                        img: `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=small`\n                    }));\n                    dispatch({\n                        type: 'success-search',\n                        payload: options\n                    })\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (isSearching) getAllSearchedFilms()\n    }, [isSearching, title])\n\n    const handleKeyDown = (event) => {\n        if (event && event.target && event.target.className &&\n            event.target.className === \"rbt-input-main form-control rbt-input  focus\") {\n            let keyCode = event.keyCode || event.charCode;\n            switch (keyCode) {\n                case 13:\n                    handleSearchSubmit(event);\n                    break;\n                case 9:\n                    if (isMobile)\n                        handleSearchSubmit(event);\n                    break;\n                default:\n                    break;\n            }\n        }\n    };\n\n    const handleSelect = (eventKey) => {\n\n        switch (eventKey) {\n            case 'add_film': {\n                history.push(`${process.env.REACT_APP_PATH_NAME}add`);\n                break;\n            }\n            case 'playlists':\n                history.push(`${process.env.REACT_APP_PATH_NAME}playlists`)\n                break;\n            default: break;\n        }\n    }\n\n    const handleSearchSubmit = (e) => {\n        e.preventDefault();\n\n        document.getElementById(\"search-form\").reset();\n        if (typeaheadRef) typeaheadRef.current.clear();\n\n        if (selected) {\n            history.push({\n                pathname: `${process.env.REACT_APP_PATH_NAME}film/${selected.id}`,\n                search: '',\n                state: {}\n            });\n        }\n        else if (title === '') {\n            history.push({\n                pathname: `${process.env.REACT_APP_PATH_NAME}search`,\n                search: `?title=${title}`,\n                state: {}\n            });\n        }\n        else if (options.length === 1) {\n            history.push({\n                pathname: `${process.env.REACT_APP_PATH_NAME}film/${options[0].id}`,\n                search: '',\n                state: {}\n            });\n        } else {\n            history.push({\n                pathname: `${process.env.REACT_APP_PATH_NAME}search`,\n                search: `?title=${title}`,\n                state: { films: options }\n            });\n        }\n\n        dispatch({\n            type: 'clear'\n        })\n    }\n\n    const handleProfileMenuOpen = event => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleProfileMenuClose = () => {\n        setAnchorEl(null);\n    };\n\n    const handleLogoutClick = () => {\n        setAnchorEl(null);\n        logout()\n    };\n\n    const handleProfileClick = () => {\n        setAnchorEl(null);\n        history.push(`${process.env.REACT_APP_PATH_NAME}profile`)\n    };\n\n    const handleSettingsClick = () => {\n        setAnchorEl(null);\n        let pathname = location.pathname\n        if (pathname === '/') pathname = ''\n        history.push({\n            pathname: `${pathname}/settings`,\n            search: location.search,\n            state: location.state\n        });\n    }\n\n    const handleToggle = (expanded) => {\n        setIsExpanded(expanded)\n    }\n    const handleSearch = useCallback((query) => {\n        dispatch({\n            type: 'search',\n            payload: query\n        })\n    }, []);\n\n    const handleLogin = () => {\n        let pathname = location.pathname\n        if (pathname === '/') pathname = ''\n        history.push({\n            pathname: `${pathname}/login`,\n            search: location.search,\n            state: location.state\n        });\n    }\n\n    return (\n\n        <Navbar\n            expanded={isExpanded}\n            className=\"py-2 px-4\"\n            expand=\"md\" bg=\"light\" variant=\"light\"\n            onToggle={handleToggle}\n            onSelect={e => handleSelect(e)}>\n\n            <Col className=\"pb-2\"\n                xs={{ span: 5, order: 'first' }}\n                sm={{ span: 2, order: 'first' }}\n                md={{ span: 4, order: 'first' }}>\n                <Navbar.Brand style={{ cursor: 'pointer' }}\n                    className=\"d-flex align-items-center\"\n                    onClick={() => history.push(process.env.REACT_APP_PATH_NAME)}>\n                    <Navbar.Brand>\n                        {\n                            <img alt=\"\"\n                                src={headerIcon} width=\"30\"\n                                height=\"30\" />\n                        }\n                    </Navbar.Brand>\n                    {<p className=\"d-none d-md-inline m-0\">FilmApp</p>}\n                </Navbar.Brand>\n            </Col>\n\n            <Col className=\"text-right d-md-none m-button pb-2 \"\n                xs={{ span: 6, order: 2 }}\n                sm={{ span: 2, order: 'last' }}>\n                <Navbar.Toggle className=\"m-button\" aria-controls=\"responsive-navbar-nav\" />\n            </Col>\n\n            <Col xs={{ span: 12, order: 3 }}\n                sm={{ span: 8, order: 2 }}\n                md={{ span: 5, order: 2 }}>\n                <Form id=\"search-form\" inline=\"true\">\n                    <Row className=\"m-0\" style={{ width: 100 + '%' }}>\n                        <Col xs={12} sm={10} className=\"p-0\">\n                            <AsyncTypeahead\n                                ref={typeaheadRef}\n                                className=\"search-bar\"\n                                useCache={false}\n                                filterBy={filterBy}\n                                id=\"typeahead-navbar\"\n                                isLoading={true}\n                                open={isOpen}\n                                placeholder=\"Search\"\n                                labelKey=\"title\"\n                                minLength={1}\n                                options={options}\n                                onSearch={handleSearch}\n                                onBlur={(event) => dispatch({ type: 'field', fieldName: 'isOpen', payload: false })}\n                                onFocus={(event) => {\n                                    if (title !== '')\n                                        dispatch({ type: 'field', fieldName: 'isOpen', payload: true })\n                                }}\n                                onKeyDown={(event) => dispatch({ type: 'field', fieldName: 'isOpen', payload: true })}\n                                onMenuToggle={(isOpen) => dispatch({ type: 'field', fieldName: 'isOpen', payload: isOpen })}\n                                onInputChange={(text, event) => {\n                                    dispatch({\n                                        type: 'field',\n                                        fieldName: 'title',\n                                        payload: text\n                                    })\n                                    if (text === '')\n                                        dispatch({\n                                            type: 'field',\n                                            fieldName: 'options',\n                                            payload: []\n                                        })\n                                }}\n                                onChange={(selected) => {\n                                    const title = selected.length > 0 ? selected[0].title : '';\n                                    dispatch({\n                                        type: 'pick-option',\n                                        title: title,\n                                        selected: selected.length > 0 ? selected[0] : null\n                                    })\n                                }}\n                                renderMenu={(results, menuProps) => (\n                                    <AsyncMenu {...menuProps} className=\"pt-4 pb-4\">\n                                        {results.map((result, index) => (\n                                            <AsyncMenuItem key={result.id} option={result} position={index}>\n                                                <Row className=\"p-0 m-0 entry__inner\" onClick={(e) => {\n                                                    e.stopPropagation()\n                                                    e.preventDefault()\n                                                    dispatch({\n                                                        type: 'clear'\n                                                    })\n                                                    document.getElementById(\"search-form\").reset();\n                                                    if (typeaheadRef) typeaheadRef.current.clear();\n\n                                                    history.push({\n                                                        pathname: `${process.env.REACT_APP_PATH_NAME}film/${result.id}`,\n                                                        search: '',\n                                                        state: {}\n                                                    });\n\n                                                }}>\n                                                    <img\n                                                        className=\"p-0\"\n                                                        alt=\"\"\n                                                        src={result.img}\n                                                        style={{\n                                                            height: '24px',\n                                                            marginRight: '10px',\n                                                            width: '24px',\n                                                        }}\n                                                    />\n                                                    <span className=\"entry__text\">{result.title}</span>\n                                                </Row>\n                                            </AsyncMenuItem>\n                                        ))}\n\n\n\n                                        {!isLoading && !isSearching && results.length === 0 && <a role=\"option\" className=\"dropdown-item disabled\" href=\"#\">No matches found.</a>}\n                                        {isSearching && <a role=\"option\" className=\"dropdown-item disabled\" href=\"#\">Searching...</a>}\n                                        {\n                                            <div style={{ height: 8 + 'px' }} className=\"d-flex justify-content-center\">\n                                                {isLoading && !isAllFetched && <Spinner animation=\"border\" />}\n                                            </div>\n                                        }\n                                    </AsyncMenu>\n                                )}\n\n                            />\n                        </Col>\n                        <Col sm={2}>\n                            <Button onClick={handleSearchSubmit}\n                                className=\"d-none d-sm-inline\"\n                                variant=\"light\">\n                                <FontAwesomeIcon icon=\"search\" />\n                            </Button>\n                        </Col>\n                    </Row>\n                </Form>\n            </Col>\n\n\n            <Col xs={{ span: 12, order: 'last' }}\n                sm={{ span: 12, order: 'last' }}\n                md={{ span: 3, order: 'last' }}>\n\n                <Navbar.Collapse className=\"justify-content-end\" id=\"responsive-navbar-nav\">\n\n                    <Nav activeKey=\"\" className=\"d-block d-sm-block d-md-flex  align-items-center\">\n                        <Nav.Link className=\"px-2\" eventKey=\"playlists\">Playlists</Nav.Link>\n                        {user.auth && <Nav.Link className=\"px-2\" eventKey=\"add_film\">Add</Nav.Link>}\n\n                        {\n                            user.auth ?\n                                (\n                                    <Avatar onClick={handleProfileMenuOpen}\n                                        className=\"pe-2 ps-2 custom-avatar m-button\">\n                                        {user.name.toUpperCase().charAt(0)}\n                                    </Avatar>\n\n                                ) :\n                                (\n                                    <Nav.Link className=\"pe-2 ps-2\" eventKey=\"login \"\n                                        onClick={() => handleLogin()}>\n                                        Login\n                                    </Nav.Link>\n                                )\n                        }\n                    </Nav>\n\n                </Navbar.Collapse>\n\n            </Col>\n\n            <Menu\n                id=\"film-navbar-menu\"\n                anchorEl={anchorEl}\n                keepMounted\n                open={Boolean(anchorEl)}\n                onClose={handleProfileMenuClose}\n            >\n                <MenuItem onClick={handleProfileClick}>Profile</MenuItem>\n                <MenuItem onClick={handleSettingsClick}>Settings</MenuItem>\n                <MenuItem onClick={handleLogoutClick}>Logout</MenuItem>\n            </Menu>\n\n        </Navbar>\n    )\n}\n\nexport default NavbarComponent","export default \"data:image/png;base64,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\"","import { createContext } from 'react'\nconst RemoveModalContext = createContext({ show: false, isRemoving: false, id: null, type: null, title: '' })\nexport default RemoveModalContext","import { useContext } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport RemoveModalContext from \"../contexts/removeModal/removeModalContext\";\n\nconst RemoveModal = (props) => {\n    const { removeModalData, remove, clear } = useContext(RemoveModalContext)\n\n    const handleRemove = () => remove()\n\n    const handleClose = () => clear();\n\n    return (\n        <>\n            <Modal show={removeModalData.show} onHide={handleClose} centered>\n                <Modal.Header>\n                    <Modal.Title>Delete {removeModalData.type}</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>Do you really want to delete {removeModalData.type} <b>{removeModalData.title}</b>?\n                    <br />\n                    Action cannot be undone!\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={handleClose}>\n                        Cancel\n                    </Button>\n                    <Button variant=\"primary\" onClick={handleRemove}>\n                        Delete\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        </>\n    );\n}\n\nexport default RemoveModal","export const initialState = {\n    films: null,\n    isLoading: false,\n    isAllFetched: false,\n    isInitialLoaded: false,\n    error: null,\n}\n\nexport const homePageReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'load': {\n            return {\n                ...state,\n                isLoading: true,\n                isAllFetched: false,\n                error: ''\n            }\n        }\n        case 'initial-load': { \n            return {\n                ...state,\n                films: [...new Set([...action.payload])],\n                isLoading: false,\n                isInitialLoaded: true,\n                isAllFetched: action.payload.length < 12,\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                films: [...new Set([...state.films, ...action.payload])],\n                isLoading: false,\n                isAllFetched: action.payload.length < 12,\n                error: null\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isLoading: false,\n                isAllFetched: false,\n                error: action.payload\n            }\n        }\n        default:\n            return state\n    }\n}","import React, { useState, useEffect } from 'react';\nimport { Ratio } from 'react-bootstrap'\n\nfunction BlurredImageComponent(props) {\n\n    const [image, setImage] = useState(\"data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\")\n\n    useEffect(() => {\n        setImage(props.image);\n    }, [props.image])\n\n\n    return (\n        <Ratio aspectRatio=\"16x9\">\n            <img\n                onLoad={() => {\n                    setImage(image.replace(\"preview\", \"small\"));\n                }}\n                alt=\"\"\n                className=\"embed-responsive-item play-image\"\n                src={image} />\n        </Ratio>);\n}\n\nexport default BlurredImageComponent;","import axios from '../helpers/axios'\nimport authHeader from '../helpers/authHeader'\n\n\nexport const me = (params) => axios.get('users/me', { params, headers: authHeader() })\nexport const partialUpdate = (body) => axios.patch('users', body, { headers: authHeader() })\n\nexport const userService = {\n    login,\n    logout,\n    register\n};\n\nfunction login(username, password) {\n\n    let loginHeaderMy = null\n\n    const requestOptions = {\n        method: 'POST',\n        headers: loginHeaderMy\n\n    };\n\n    return fetch(`${process.env.REACT_APP_API_URL}/users/auth`, requestOptions)\n        .then(handleResponse)\n        .then(user => {\n            localStorage.setItem('user', JSON.stringify(user));\n            return user;\n        })\n}\n\nfunction logout() {\n    localStorage.removeItem('user');\n}\n\nfunction register(user) {\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(user)\n    };\n    return fetch(`${process.env.REACT_APP_API_URL}/users/`, requestOptions)\n        .then(handleResponse);\n}\n\nfunction handleResponse(response) {\n    return response.text().then(text => {\n        const data = text && JSON.parse(text);\n        if (!response.ok) {\n            if (response.status === 401) {\n                logout();\n            }\n            const error = (data && data.errors) || response.statusText;\n            return Promise.reject(error);\n        }\n        return data;\n    })\n}\n\n","import axios from '../helpers/axios'\nimport authHeader from '../helpers/authHeader'\n\n\nexport const create = (body) => axios.post('playlists', body, { headers: authHeader() })\nexport const index = (id) => axios.get(`playlists/${id}`, { headers: authHeader() })\nexport const show = (params) => axios.get(`playlists`, { params, headers: authHeader() })\nexport const partialUpdate = (id, body) => axios.patch(`playlists/${id}`, body, { headers: authHeader() })\n\n\nexport const remove = (id) => axios.delete(`playlists/${id}`, { headers: authHeader() })\n\n","import { createContext } from \"react\";\nconst ToastContext = createContext('')\nexport default ToastContext","\nexport const playlistDropdownMenuInitialState = {\n    playlists: [],\n    isLoading: true,\n    isAllFetched: false,\n    isCreating: false,\n    isAdding: false,\n    playlistToUpgrade: null,\n    title: '',\n    isPublic: false,\n    error: '',\n}\n\nexport function playlistDropdownMenuReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                error: '',\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'load': {\n            return {\n                ...state,\n                isLoading: true,\n                isAllFetched: false,\n            }\n        }\n        case 'load-success': {\n            return {\n                ...state,\n                playlists: [...state.playlists, ...action.payload],\n                isLoading: false,\n                isAllFetched: action.payload < 10,\n                error: '',\n            }\n        }\n        case 'create': {\n            return {\n                ...state,\n                isLoading: false,\n                isCreating: true\n            }\n        }\n        case 'create-success': {\n            return {\n                ...state,\n                isLoading: false,\n                isCreating: false\n            }\n        }\n        case 'add': {\n            return {\n                ...state,\n                isLoading: false,\n                isAdding: true,\n                playlistToUpgrade: action.payload\n            }\n        }\n        case 'add-update-playlist': {\n            return {\n                ...state,\n                playlists: state.playlists.map(playlist => {\n                    if (playlist.id === state.playlistToUpgrade.id) return { ...playlist, contains: !playlist.contains }\n                    else return playlist\n                }),\n                playlistToUpgrade: null\n            }\n        }\n        case 'add-success': {\n            return {\n                ...state,\n                isAdding: false\n            }\n        }\n        case 'change-playlist-privacy-success': {\n            return {\n                ...state,\n                playlists: state.playlists.map(playlist => {\n                    if (playlist.id === action.payload.id) return { ...playlist, is_public: action.payload.is_public }\n                    return playlist\n                })\n            }\n        }\n        case 'error':\n            return {\n                ...state,\n                isLoading: false,\n                isAllFetched: false,\n                isCreating: false,\n                error: action.payload,\n                title: ''\n            }\n        default:\n            return state\n\n    }\n}\n","import { Col } from \"react-bootstrap\"\nimport { ButtonBase } from \"@material-ui/core\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { useEffect, useState } from \"react\"\nimport * as playlistApi from '../../services/playlistService'\n\nconst ChangePrivacyButton = ({ isPublic, id, isProfile, dispatchPrivacyUpdate, filmDispatch }) => {\n\n    const [isChanging, setIsChanging] = useState(false)\n\n\n    useEffect(() => {\n        async function changePrivacy() {\n            await playlistApi.partialUpdate(id, { is_public: !isPublic })\n                .then(res => {\n                    setIsChanging(false)\n\n                    dispatchPrivacyUpdate({\n                        type: 'change-playlist-privacy-success',\n                        payload: res.data\n                    })\n\n                    if (filmDispatch !== undefined) {\n                        filmDispatch({\n                            type: 'field',\n                            fieldName: 'reloadPlaylist',\n                            payload: true\n                        })\n                    }\n                })\n                .catch(err => {\n                    console.error(err)\n                    setIsChanging(false)\n                })\n        }\n        if (isChanging) changePrivacy()\n    }, [dispatchPrivacyUpdate, isChanging, isPublic, id, filmDispatch])\n\n    const handleChangePrivacy = (e) => {\n        e.stopPropagation()\n        if (!isChanging) setIsChanging(true)\n    }\n\n    const privacyButton = (\n        <ButtonBase\n            style={{ marginLeft: 'auto', borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\" }}\n            className=\"m-button\"\n            onClick={handleChangePrivacy}>\n            <FontAwesomeIcon icon={isPublic ? \"globe-europe\" : \"lock\"} />\n        </ButtonBase>\n    )\n\n    return isProfile ?\n        (\n            <Col className=\"text-center justify-content-center d-flex align-items-center p-0 flex-grow-0\"\n            >\n                <Col\n                    className=\"remove-holder p-0 m-0 flex-grow-0\"\n                    style={{ height: '24px', width: '24' }}>\n                    {privacyButton}\n                </Col>\n            </Col>\n        ) :\n        privacyButton\n}\n\nexport default ChangePrivacyButton","import React, { useCallback, useEffect, useContext, useReducer } from 'react';\nimport { Button, Col, Dropdown, Form, FormCheck, FormControl, Row, Spinner } from \"react-bootstrap\";\n\nimport * as userApi from '../../services/userService'\nimport * as playlistApi from '../../services/playlistService'\n\nimport ToastContext from '../../helpers/contexts/toast/toastContext';\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\nimport { playlistDropdownMenuReducer, playlistDropdownMenuInitialState } from './reducers/playlistDropdownMenuReducer'\nimport ChangePrivacyButton from '../../helpers/components/changePrivacyButton';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport useRipple from \"useripple\"\n\nfunction PlaylistDropdownMenu({ filmID, handlePlaylistClose, isPreview, filmDispatch }) {\n\n    const [addRipple, ripples] = useRipple({ background: \"black\" })\n\n    const { createToast } = useContext(ToastContext);\n    const [state, dispatch] = useReducer(playlistDropdownMenuReducer, playlistDropdownMenuInitialState);\n\n    const { playlists, title, isPublic, isLoading, isAllFetched, isCreating, isAdding, playlistToUpgrade, error } = state\n\n    const handleOnPlaylistDropdownMenuBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && !isCreating && !isAdding) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isLoading, isAllFetched, isCreating, isAdding])\n\n    const scrollRef = useBottomScrollListener(handleOnPlaylistDropdownMenuBottom);\n\n    useEffect(() => {\n        async function getMyPlaylists() {\n            await userApi.me({ playlists: true, skip: playlists.length, limit: 10 })\n                .then(res => {\n\n                    let result = res.data.playlists\n\n                    result.forEach(playlist => {\n                        playlist.contains = playlist.films.indexOf(filmID) > -1\n                    });\n\n                    dispatch({\n                        type: 'load-success',\n                        payload: result\n                    })\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (isLoading) getMyPlaylists()\n\n    }, [filmID, playlists, isLoading])\n\n    useEffect(() => {\n\n        async function creatPlaylist() {\n            const body = { title: title, is_public: isPublic, films_id: [filmID] };\n\n            await playlistApi.create(body)\n                .then(res => {\n                    dispatch({\n                        type: 'create-success'\n                    })\n                    createToast(`Created playlist ${title}`)\n                    handlePlaylistClose()\n\n                })\n                .catch(err => {\n                    console.error(err)\n                    let errorMessage = null\n\n                    if (err.response && err.response.data && err.response.data.error) {\n                        errorMessage = err.response.data.error\n                    } else if (err.response && err.response.data && err.response.data.errors) {\n                        errorMessage = err.response.data.errors[0]\n                    }\n\n                    dispatch({\n                        type: 'error',\n                        payload: errorMessage === \"Path `title` is required.\" ? 'Playlist title is required' : errorMessage\n                    })\n                })\n        }\n\n        if (isCreating) creatPlaylist()\n\n    }, [isCreating, title, isPublic, createToast, handlePlaylistClose, filmID,])\n\n    useEffect(() => {\n        async function addToPlaylist() {\n\n            let body = { films_id: [filmID] };\n\n            body = playlistToUpgrade.contains ? { ...body, is_remove_films: true } : { ...body, is_remove_films: false }\n\n            const message = playlistToUpgrade.contains ? `Deleted from playlist ${playlistToUpgrade.title}` : `Added to playlist ${playlistToUpgrade.title}`\n\n            dispatch({\n                type: 'add-update-playlist',\n                playlist: playlistToUpgrade\n            })\n\n            await playlistApi.partialUpdate(playlistToUpgrade.id, body)\n                .then(res => {\n                    dispatch({\n                        type: 'add-success'\n                    })\n\n                    if (isPreview) {\n                        filmDispatch({\n                            type: 'field',\n                            fieldName: 'reloadPlaylist',\n                            payload: true\n                        })\n                    }\n                    createToast(message)\n                })\n                .catch(err => console.error(err))\n        }\n        if (isAdding && playlistToUpgrade) addToPlaylist()\n    }, [isAdding, playlistToUpgrade, createToast, filmDispatch, filmID, isPreview])\n\n    const handleAddToPlaylist = (playlist) => {\n        dispatch({\n            type: 'add',\n            payload: playlist\n        })\n    };\n\n    const handleCreatePlaylist = (e) => {\n        e.stopPropagation()\n        dispatch({\n            type: 'create'\n        })\n    };\n\n    return (\n\n        <Dropdown.Menu\n            onClick={e => e.stopPropagation()}\n            style={{ width: 240 + \"px\" }}>\n            <Row className=\"m-0 m-button playlist-add-button-ripple\" >\n                <Col className=\"playlist-add-exit-text-width\">Save to...</Col>\n                <Col xs={2} sm={2}\n                    onClick={(e) => {\n                        addRipple(e)\n                        setTimeout(handlePlaylistClose, 150)\n                    }}\n                    style={{ borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\" }}\n                    className=\"playlist-add-icon-holder p-0 playlist-add-button-ripple d-flex align-items-center text-center justify-content-center\">\n                    <FontAwesomeIcon icon=\"times\" />\n                    {ripples}\n                </Col>\n            </Row>\n            <Dropdown.Divider />\n            <div\n                ref={scrollRef}\n                style={{\n                    maxHeight: 100 + 'px', overflowY: 'scroll', minHeight: 3 + 'rem'\n                }}>\n\n                {\n                    playlists.map((playlist, index) => {\n                        return (<Row className=\"m-0 playlist-form-group\" key={playlist.id} >\n                            <Col xs={10} sm={10} className=\"p-0\">\n                                <Form.Check id={playlist.id} className=\"form-check\">\n                                    <FormCheck.Input type=\"checkbox\"\n                                        onChange={() => handleAddToPlaylist(playlist)}\n                                        checked={playlist.contains} />\n                                    <FormCheck.Label>\n                                        <p className=\"playlist-check-label\">\n                                            {playlist.title}\n                                        </p>\n                                    </FormCheck.Label>\n                                </Form.Check>\n\n                            </Col>\n                            <ChangePrivacyButton\n                                id={playlist.id}\n                                isPublic={playlist.is_public}\n                                isProfile={false}\n                                filmDispatch={filmDispatch}\n                                dispatchPrivacyUpdate={dispatch} />\n\n                        </Row>)\n                    })\n                }\n\n                {\n                    !isAllFetched && <div style={{ height: 32 + 'px' }} className=\"d-flex justify-content-center\">\n                        {isLoading && <Spinner animation=\"border\" />}\n                    </div>\n                }\n            </div>\n            <Dropdown.Divider />\n            <Dropdown.ItemText>Create a new playlist</Dropdown.ItemText>\n            <Row className=\"m-0 p-0\">\n                <Form>\n                    <FormControl\n                        isInvalid={error !== ''}\n                        onChange={(e) => dispatch({ type: 'field', fieldName: 'title', payload: e.target.value })}\n                        className=\"mb-2 mt-2\"\n                        placeholder=\"Enter playlist title...\" />\n\n                    <FormControl.Feedback type=\"invalid\"\n                        className=\"mb-2 mt-2\">\n                        {error}\n                    </FormControl.Feedback>\n                    <Form.Select aria-label=\"Privacy\" className=\"mb-2 mt-2\"\n                        onChange={(e) => dispatch({ type: 'field', fieldName: 'isPublic', payload: e.target.value === 'public' })}>\n                        <option value=\"private\">Private</option>\n                        <option value=\"public\">Public</option>\n                    </Form.Select>\n\n                    <Form.Group className=\"d-flex align-items-center mt-2\">\n                        <Button disabled={isCreating}\n                            onClick={isCreating ? null : handleCreatePlaylist}>Create</Button>\n\n                        {\n                            isCreating &&\n                            <Spinner className=\"ms-2\" animation=\"grow\" />\n                        }\n                    </Form.Group>\n\n                </Form>\n\n            </Row>\n\n        </Dropdown.Menu>\n\n\n    )\n}\n\nexport default PlaylistDropdownMenu\n","import React, { useState, useContext } from 'react';\nimport { Col, Dropdown } from \"react-bootstrap\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport PlaylistDropdownMenu from './playlistDropdownMenu'\nimport UserContext from '../../helpers/contexts/user/userContext';\nimport useRipple from \"useripple\"\n\nimport './playlistAdd.css'\n\nfunction PlaylistAddButton(props) {\n\n    const { user } = useContext(UserContext);\n\n    const [addRipple, ripples] = useRipple({ background: \"black\" })\n\n    const [isOpen, setIsOpen] = useState(false)\n\n    const handlePlaylistClose = () => {\n        setIsOpen(false)\n    }\n\n    const allClass = \"\"\n    const previewClass = \"col-sm-2 col-2 p-0\"\n\n    return (\n\n        user.auth ?\n            <Dropdown show={isOpen}\n                onToggle={(isOpen, event, metadata) => {\n                    setIsOpen(isOpen)\n                }} className={props.isPreview ? previewClass : allClass} >\n                <Dropdown.Toggle variant=\"link\" bsPrefix=\"p-0\"\n                    className=\"m-button playlist-add-button-ripple\"\n                    style={{ color: \"black\" }}>\n                    <div style={{ display: 'inline-block', width: '100%', height: '100%' }}>\n                        <Col\n                            onClick={addRipple}\n                            style={{ verticalAlign: 'top', borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\" }}\n                            className=\"playlist-add-icon-holder p-0 playlist-add-button-ripple\">\n                            <FontAwesomeIcon style={{ opacity: (isOpen ? 1 : \"\") }}\n                                className=\"playlist-add-icon\" icon=\"ellipsis-v\" />\n                            {ripples}\n                        </Col>\n                    </div>\n                </Dropdown.Toggle>\n                {isOpen && <PlaylistDropdownMenu\n                    isPreview={props.isPreview}\n                    filmDispatch={props.filmDispatch}\n                    isOpen={isOpen}\n                    filmID={props.filmID}\n                    handlePlaylistClose={handlePlaylistClose} />}\n            </Dropdown>\n            :\n            null\n\n    )\n}\n\nexport default PlaylistAddButton\n","export const checkIfPlaylistButtonClick = (target) => {\n    if ((target.tagName === 'path' && target.parentNode.className.animVal && target.parentNode.className.animVal.includes('playlist-add-icon')) ||\n        (target.tagName === 'svg' && target.className.animVal && target.className.animVal.includes('playlist-add-icon')) ||\n        (target.className && typeof target.className === 'string' && target.className.includes('playlist-add-icon-holder')))\n        return true\n    return false\n}\n\nexport const displayCommentDate = (comment) => {\n    let date = new Date(Date.parse(comment.createdAt));\n    let time = (('0' + date.getDate()).slice(-2) + '-' + ('0' + (date.getMonth() + 1)).slice(-2) + '-'\n        + ('0' + date.getFullYear()).slice(-2)\n        + ' o ' + ('0' + date.getHours()).slice(-2) + ':' + ('0' + date.getMinutes()).slice(-2))\n    return time;\n};\n\nexport const parseSearchDate = (film) => {\n\n    let date = new Date(Date.parse(film.createdAt));\n    let today = new Date();\n\n\n    let time = Math.abs(Math.floor((\n        Date.UTC(\n            date.getFullYear(),\n            date.getMonth(),\n            date.getDate(),\n            date.getHours(),\n            date.getMinutes()) -\n        Date.UTC(\n            today.getFullYear(),\n            today.getMonth(),\n            today.getDate(),\n            today.getHours(),\n            today.getMinutes()))\n        / (1000 * 60)));\n\n    if (time / 60 >= 1) {\n        time /= 60;\n\n        if (time / 24 >= 1) {\n\n            time /= 24;\n\n            if (time / 30 >= 1) {\n\n                time /= 30;\n\n                if (time / 12 >= 1) {\n\n                    time = time / 12;\n                    time = Math.floor(time) + ' years ';\n\n                } else {\n                    time = Math.floor(time) + ' months ';\n                }\n\n            } else {\n                time = Math.floor(time) + ' days ';\n            }\n\n        } else {\n            time = Math.floor(time) + ' hours ';\n        }\n    } else {\n        time = Math.floor(time) + ' minutes ';\n    }\n\n    time = time + 'ago';\n\n    return time;\n};\n","import { Col } from \"react-bootstrap\"\nimport { ButtonBase } from \"@material-ui/core\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\n\nconst RemoveButton = ({ handleRemove }) => {\n    return (\n        <Col\n            className=\"text-center justify-content-center d-flex align-items-center p-0 flex-grow-0\">\n            <Col\n                className=\"remove-holder p-0 m-0 flex-grow-0\"\n                style={{ height: '24px', width: '24px' }}>\n                <ButtonBase\n                    style={{ marginLeft: 'auto', borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\" }}\n                    className=\"m-button \"\n                    onClick={handleRemove}>\n                    <FontAwesomeIcon icon=\"trash-alt\" />\n                </ButtonBase>\n            </Col>\n        </Col>\n    )\n}\n\nexport default RemoveButton","import React from 'react';\nimport { Col, Row } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport TextTruncate from \"react-text-truncate\";\n\nimport BlurredImageComponent from \"../../components/blurredImage\";\nimport PlaylistAddButtonComponent from \"../../components/add/playlistAddButton\";\n\nimport { checkIfPlaylistButtonClick } from '../index'\nimport RemoveButton from './removeButton';\nimport '../../components/filmPage/film.css'\n\nconst Film = ({ film, index, handleRedirect, handleRemove, isProfile, isRecommendations }) => {\n\n    const recommendationsClass = \"row mx-0 mb-4\"\n    const normalClass = \"col mb-5 col-12 col-sm-6 col-md-3 col-lg-2\"\n\n    return (\n        <div className={isRecommendations ? recommendationsClass : normalClass}>\n            <div className={(isRecommendations ? \"row p-0 m-0\" : \"col\").concat(\" play-outer-container remove-container\")}\n                onClick={(e) => {\n                    const isPlaylistButton = checkIfPlaylistButtonClick(e.target)\n                    if (!isPlaylistButton) handleRedirect(film.id)\n                }}>\n                <Col xs={isRecommendations ? 6 : 12} sm={isRecommendations ? 6 : 12}\n                    className=\"m-0 p-0\">\n                    <div\n                        className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\n                        <BlurredImageComponent\n                            image={film.img} />\n                        <FontAwesomeIcon className=\"play-middle\" icon=\"play\" />\n                    </div>\n                </Col>\n                <Col xs={isRecommendations ? 6 : 12} sm={isRecommendations ? 6 : 12}\n                    className={isRecommendations ? \"m-0\" : \"m-0 p-0\"}>\n                    <Row className=\"m-0 mt-1\">\n                        <Col className=\"film-preview-playlist-title-width p-0\">\n                            <TextTruncate line={1} text={film.title}\n                                className=\"mb-1 mt-1 title \" />\n                        </Col>\n\n                        <Col className=\"p-0 d-flex justify-content-end\">\n                            {\n                                isProfile ?\n                                    <RemoveButton handleRemove={handleRemove} /> :\n                                    <PlaylistAddButtonComponent\n                                        index={index}\n                                        filmID={film.id} />\n                            }\n                        </Col>\n                    </Row>\n                    <p className=\"mb-0 author-nick-color\">\n                        <small>{film.author_name}</small>\n                    </p>\n                    <p className=\"mb-0 film-views\">\n                        <small>{film.views} views</small>\n                    </p>\n                </Col>\n            </div>\n        </div>\n    )\n}\n\nexport default Film","import React, { useEffect, useReducer, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Row, Spinner } from 'react-bootstrap';\n\n\nimport * as filmApi from '../../services/filmService'\nimport { homePageReducer, initialState } from './reducer';\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\n\nimport Film from '../../helpers/components/film'\n\nfunction Home(props) {\n\n    let history = useHistory()\n\n    const [state, dispatch] = useReducer(homePageReducer, initialState)\n    const { films, isLoading, isAllFetched, isInitialLoaded } = state\n\n\n    const handleOnHomePageData = useCallback(() => {\n        if (!isLoading && !isAllFetched && isInitialLoaded) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isLoading, isAllFetched, isInitialLoaded])\n\n    useBottomScrollListener(handleOnHomePageData, { triggerOnNoScroll: true })\n\n    useEffect(() => {\n        async function fetchData() {\n            await filmApi.all({ limit: 12 }).then(res => {\n                let response = res.data;\n\n                response.forEach(film => {\n                    film.img = `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=preview`\n\n                });\n\n                dispatch({\n                    type: 'initial-load',\n                    payload: response\n                })\n            })\n        }\n        fetchData()\n\n    }, [])\n\n    useEffect(() => {\n        async function getAllFilms() {\n            await filmApi.all({ skip: films.length, limit: 12 })\n                .then(res => {\n                    let response = res.data;\n\n                    response.forEach(film => {\n                        film.img = `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=preview`\n\n                    });\n\n                    dispatch({\n                        type: 'success',\n                        payload: response\n                    })\n                }).catch(err => console.error(err))\n        }\n        if (isLoading && isInitialLoaded && films) getAllFilms()\n    }, [isLoading, isInitialLoaded, films])\n\n    const handleRedirect = (id) => {\n        history.push({ pathname: `${process.env.REACT_APP_PATH_NAME}film/` + id });\n    };\n\n    return (\n        <Row className=\"mt-5 mx-2\">\n            {\n                films && films.map((film, index) => <Film key={film.id} film={film} index={index} handleRedirect={handleRedirect} />)\n            }\n\n            {\n                !isAllFetched && <div style={{ height: 32 + 'px', width: '100%' }} className=\"d-flex justify-content-center\">\n                    {(isLoading || !isInitialLoaded) && <Spinner animation=\"border\" />}\n                </div>\n            }\n\n        </Row>\n    )\n}\n\nexport default Home;\n","import { createContext } from 'react'\nconst FilmContext = createContext();\nexport default FilmContext","const initialFilm = {\n    img: '',\n    video: '',\n    film: '',\n    title: '',\n    views: '',\n    likes: '',\n    dislikes: '',\n    description: `\\r\\n\\n\\n`,\n}\n\nexport const initialPreviewState = {\n    film: initialFilm,\n    isLiked: false,\n    isDisliked: false,\n    isLikeButtonClicked: false,\n    likeAction: null,\n    isDescExpanded: false\n}\n\nexport function previewReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'like': {\n            return {\n                ...state,\n                isLikeButtonClicked: true,\n                likeAction: action.payload\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                film: action.film,\n                isLiked: action.isLiked,\n                isDisliked: action.isDisliked,\n                isLikeButtonClicked: false,\n                likeAction: null,\n                isDescExpanded: false\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isLikeButtonClicked: false,\n                likeAction: null\n            }\n        }\n        default: return state\n    }\n}","import React, { useState, useEffect, useCallback, useContext, useReducer } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom'\n\nimport { Button, Col, Row } from \"react-bootstrap\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport * as filmApi from '../../services/filmService'\nimport * as userApi from '../../services/userService'\n\nimport { Player } from 'video-react';\nimport TextTruncate from 'react-text-truncate';\n\nimport FilmContext from '../../helpers/contexts/film/filmContext'\n\nimport \"../../../node_modules/video-react/dist/video-react.css\";\nimport { initialPreviewState, previewReducer } from './reducers/previewReducer';\nimport UserContext from '../../helpers/contexts/user/userContext';\n\n\nfunction FilmPreview(props) {\n\n    let history = useHistory()\n    let location = useLocation()\n\n    const { user } = useContext(UserContext)\n\n    // eslint-disable-next-line no-unused-vars\n    const [filmState, filmDispatch] = useContext(FilmContext)\n\n    const playerRef = useCallback(node => {\n        if (node !== null) {\n            filmDispatch({\n                type: 'field',\n                fieldName: 'playerHeight',\n                payload: node.getBoundingClientRect().height\n            })\n            setPlayerNode(node)\n        }\n    }, [filmDispatch])\n\n    const [state, dispatch] = useReducer(previewReducer, initialPreviewState)\n\n    const { film, isLiked, isDisliked, isLikeButtonClicked, likeAction, isDescExpanded } = state\n\n    const [playerNode, setPlayerNode] = useState(null);\n\n\n    useEffect(() => {\n        if (playerNode) {\n\n            const measure = () => {\n                filmDispatch({\n                    type: 'field',\n                    fieldName: 'playerHeight',\n                    payload: playerNode.getBoundingClientRect().height\n                })\n            }\n\n            window.addEventListener(\"resize\", measure);\n\n            return () => window.removeEventListener(\"resize\", measure);\n        }\n    }, [playerNode, filmDispatch]);\n\n    useEffect(() => {\n        async function handleGetFilm() {\n            let requests = [filmApi.index(props.match.params.id), filmApi.view(props.match.params.id)]\n            if (user.auth) requests.push(userApi.me({ details: true }))\n\n            const [filmResponse, filmViewResponse, userResponse] = await Promise.allSettled(requests);\n\n            if (filmResponse.status === \"rejected\" || filmViewResponse.status === \"rejected\") {\n                filmDispatch({\n                    type: 'field',\n                    fieldName: 'error',\n                    payload: true\n                })\n                return\n            }\n\n\n            const filmData = filmResponse.value.data\n\n            filmDispatch({\n                type: 'success',\n                comments: filmData.comments,\n                commentsCount: filmData.comments_count\n            })\n\n            const film = {\n                ...filmData,\n                img: `${process.env.REACT_APP_API_URL}films/${filmData.id}/thumbnail?width=poster`,\n                video: `${process.env.REACT_APP_API_URL}films/${filmData.id}/video`,\n                views: filmViewResponse.value.data.views\n            }\n            let isLiked = false\n            let isDisliked = false\n\n\n            if (userResponse && userResponse.status === \"fulfilled\") {\n                const details = userResponse.value.data.details\n                isLiked = details.liked.indexOf(props.match.params.id) > -1\n                isDisliked = details.disliked.indexOf(props.match.params.id) > -1\n            }\n\n            dispatch({\n                type: 'success',\n                film: film,\n                isLiked: isLiked,\n                isDisliked: isDisliked\n            })\n\n        }\n        handleGetFilm()\n    }, [props.match.params.id, filmDispatch, user.auth])\n\n    useEffect(() => {\n        async function handleLike() {\n            if (likeAction === null) return\n\n            try {\n                const likeResult = await filmApi.like(film.id, { action: likeAction })\n\n                let likeData = likeResult.data\n                likeData.img = `${process.env.REACT_APP_API_URL}films/${likeData.id}/thumbnail?width=poster`\n                likeData.video = `${process.env.REACT_APP_API_URL}films/${likeData.id}/video`\n\n                const userResult = await userApi.me({ details: true })\n                const details = userResult.data.details\n                const isLiked = details.liked.indexOf(likeData.id) > -1\n                const isDisliked = details.disliked.indexOf(likeData.id) > -1\n\n                dispatch({\n                    type: 'success',\n                    film: likeData,\n                    isLiked: isLiked,\n                    isDisliked: isDisliked\n                })\n\n            } catch (err) {\n                console.error(err)\n                dispatch({\n                    type: 'error'\n                })\n                if (err.response && err.response.status === 401) {\n                    history.push(`${location.pathname}/login`);\n                }\n            }\n        }\n\n        if (isLikeButtonClicked) handleLike()\n    }, [film.id, isLikeButtonClicked, likeAction, history, location])\n\n    const handleTruncate = (e) => {\n        e.preventDefault();\n        dispatch({\n            type: 'field',\n            fieldName: 'isDescExpanded',\n            payload: !isDescExpanded\n        })\n    }\n\n    const handleLike = (action) => {\n        if (isLikeButtonClicked) return\n        dispatch({\n            type: 'like',\n            payload: action\n        })\n\n    };\n\n    const TruncateButton = (title) => {\n        return (<span>\n            <Button variant=\"link\"\n                className=\"p-0 m-0 mb-1 title fw-bold\"\n                onClick={handleTruncate}>{title}</Button>\n        </span>)\n    }\n    return (\n\n        <Col>\n            <Col sm={12}>\n                <div ref={playerRef}>\n                    <Player\n                        playsInline\n                        poster={film.img}\n                        src={film.video} />\n                </div>\n            </Col>\n            {\n                film &&\n                <React.Fragment>\n                    <Col className=\"mt-4\" sm={12}>\n                        <Row className=\"p-0 m-0\">\n                            <Col sm={12} className=\"p-0\">\n                                {!film.title && <p className=\"fw-bold\"><br /></p>}\n                                <p className=\"fw-bold\">{film.title}</p>\n                            </Col>\n                            <Col xs={4} sm={4} className=\"p-0\">\n                                <p><FontAwesomeIcon icon=\"eye\" /> &ensp;{film.views}</p>\n                            </Col>\n                            <Col xs={4} sm={4} className=\"text-right d-flex justify-content-end\">\n                                <p style={{ cursor: \"pointer\" }}\n                                    className={isLiked ? 'film-picked-thumb-color' : ''}\n                                    onClick={() => handleLike('like')}>\n                                    <FontAwesomeIcon icon=\"thumbs-up\" />\n                                    &ensp;{film.likes}\n                                </p>\n                            </Col>\n                            <Col xs={4} sm={4}>\n                                <p style={{ cursor: \"pointer\" }} className={isDisliked ? 'film-picked-thumb-color' : ''}\n                                    onClick={() => handleLike('dislike')}>\n                                    <FontAwesomeIcon icon=\"thumbs-down\" />\n                                    &ensp;{film.dislikes}\n                                </p>\n                            </Col>\n                            <Col sm={12} className=\"mt-4 mb-4 divider\" />\n\n                            <Col sm={12} className=\"p-0\" style={{ whiteSpace: 'pre-line', textAlign: 'justify' }}>\n                                <TextTruncate line={!isDescExpanded && 2}\n                                    truncateText=\"…\"\n                                    text={film.description}\n                                    textTruncateChild={TruncateButton('Show more')} />\n\n                                {isDescExpanded && TruncateButton('Show less')}\n                            </Col>\n                        </Row>\n                    </Col>\n                    <Col sm={12} className=\"mt-4 mb-2 divider\" />\n                </React.Fragment>\n            }\n        </Col>\n\n\n    )\n}\n\n\nexport default FilmPreview\n","export const commentsMaxFetchCount = 10\nexport const recommendationsMaxFetchCount = 12\nexport const filmsMaxFetchCount = 12\nexport const playlistsMaxFetchCount = 12\nexport const config = {}","import { recommendationsMaxFetchCount } from \"../../../config\"\n\nexport const recommendationsInitialState = {\n    films: null,\n    id: null,\n    isLoading: false,\n    isAllFetched: false,\n    isInitialLoaded: false,\n    error: null,\n}\n\nexport function recommendationsReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'clear': {\n            return recommendationsInitialState\n        }\n        case 'initial-success': {\n            return {\n                ...recommendationsInitialState,\n                films: action.films,\n                id: action.id,\n                isInitialLoaded: true\n            }\n        }\n        case 'load': {\n\n            return {\n                ...state,\n                isLoading: true,\n                isAllFetched: false\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                films: [...state.films, ...action.payload],\n                isLoading: false,\n                isAllFetched: action.payload.length < recommendationsMaxFetchCount\n            }\n        }\n        case 'error': {\n            return {\n                ...recommendationsInitialState,\n                error: action.payload\n            }\n        }\n        default: return state\n    }\n}\n","import React, { useEffect, useReducer, useCallback, useContext } from 'react';\n\nimport { Col, Spinner } from \"react-bootstrap\";\n\nimport * as filmApi from '../../services/filmService'\n\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\nimport Film from '../../helpers/components/film';\nimport { recommendationsReducer, recommendationsInitialState } from './reducers/recommendationsReducer'\nimport { recommendationsMaxFetchCount } from \"../../config\"\nimport FilmContext from '../../helpers/contexts/film/filmContext';\n\nfunction FilmsRecommendations(props) {\n\n    // eslint-disable-next-line no-unused-vars\n    const [filmState, filmDispatch] = useContext(FilmContext)\n\n    const [state, dispatch] = useReducer(recommendationsReducer, recommendationsInitialState)\n\n    const { films, isLoading, isAllFetched, isInitialLoaded, id, error } = state\n\n    const handleRecommendationsOnBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && isInitialLoaded && !error && id) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isLoading, isAllFetched, isInitialLoaded, error, id])\n\n    useBottomScrollListener(handleRecommendationsOnBottom)\n\n    useEffect(() => {\n        async function initialLoad() {\n            await filmApi.all({ exclude: props.match.params.id, limit: recommendationsMaxFetchCount })\n                .then(res => {\n                    let films = res.data;\n\n                    films.forEach(film => {\n                        film.img = `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=small`\n\n                    });\n\n                    dispatch({\n                        type: 'initial-success',\n                        films: films,\n                        id: props.match.params.id\n                    })\n\n\n                })\n                .catch(err => console.error(err))\n        }\n\n        dispatch({\n            type: 'clear'\n        })\n\n        if (filmState.isPreviewLoaded) {\n            initialLoad()\n        }\n    }, [props.match.params.id, filmState.isPreviewLoaded])\n\n    useEffect(() => {\n        if (filmState.error) {\n            dispatch({\n                type: 'error',\n                payload: filmState.error\n            })\n        }\n    }, [filmState.error])\n\n    useEffect(() => {\n        async function fetchData() {\n            await filmApi.all({ exclude: id, skip: films.length, limit: recommendationsMaxFetchCount }).then(res => {\n                let films = res.data;\n\n                films.forEach(film => {\n                    film.img = `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=small`\n\n                });\n\n                dispatch({\n                    type: 'success',\n                    payload: films\n                })\n            })\n        }\n        if (isLoading && films && id) fetchData()\n    }, [isLoading, id, films])\n\n    return (\n\n        <Col>\n\n            {\n                films && films.map((film, index) => <Film key={film.id} film={film} index={index} isRecommendations={true} handleRedirect={() => props.handleRedirect(film.id)} />)\n            }\n\n\n            {\n                !isAllFetched && <div style={{ height: 32 + 'px' }} className=\"d-flex justify-content-center\">\n                    {(isLoading || !isInitialLoaded) && !error && <Spinner animation=\"border\" />}\n                </div>\n            }\n        </Col>\n    )\n}\n\nexport default FilmsRecommendations\n","import axios from '../helpers/axios'\nimport authHeader from '../helpers/authHeader'\n\n\nexport const all = (film_id, params) => axios.get(`films/${film_id}/comments`, { params })\n\nexport const create = (film_id, form) => axios.post(`films/${film_id}/comments`, form, { headers: authHeader() })\n\nexport const update = (id, update) => axios.put(`comments/${id}`, update, { headers: authHeader() })\n\nexport const remove = (id) => axios.delete(`comments/${id}`, { headers: authHeader() })\n\nexport const sort = (film_id, params) => axios.get(`films/${film_id}/comments/sort`, { params, headers: authHeader() })\n\n\n","import { commentsMaxFetchCount } from \"../../../config\"\n\nexport const commentsInitialState = {\n    comments: null,\n    commentsCount: null,\n    text: '',\n    id: null,\n    isLoading: false,\n    isAllFetched: false,\n    isInitialLoaded: false,\n    isAdding: false,\n    isRemoving: false,\n    toRemove: null,\n    isSorting: false,\n    sort: null,\n    sorts: [\n        { id: 'created_at', title: 'By date', dir: 1 },\n        { id: 'author_name', title: 'By author name', dir: 1 }\n    ],\n    error: null\n}\n\nexport function commentsReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'clear': {\n            return {\n                ...commentsInitialState,\n                id: action.id\n            }\n        }\n        case 'load': {\n            return !state.isLoading && !state.isAllFetched && state.isInitialLoaded && !state.isAdding &&\n                !state.error && state.id && !state.isSorting ?\n                {\n                    ...state,\n                    isLoading: true\n                } : state\n        }\n        case 'initial-success': {\n            return {\n                ...state,\n                comments: action.comments,\n                commentsCount: action.commentsCount,\n                isAllFetched: action.comments.length < commentsMaxFetchCount,\n                isInitialLoaded: true,\n                error: null,\n            }\n        }\n        case 'load-success': {\n            return {\n                ...state,\n                comments: [...state.comments, ...action.payload],\n                isLoading: false,\n                isAllFetched: action.payload.length < commentsMaxFetchCount\n            }\n        }\n        case 'add': {\n            return {\n                ...state,\n                isAdding: true,\n                error: null\n            }\n        }\n        case 'add-success': {\n            return {\n                ...state,\n                text: '',\n                commentsCount: state.commentsCount + 1,\n                comments: [action.payload, ...state.comments],\n                isAdding: false\n            }\n        }\n        case 'remove': {\n            return {\n                ...state,\n                isRemoving: true,\n                toRemove: action.payload\n            }\n        }\n        case 'remove-success': {\n            return {\n                ...state,\n                isRemoving: false,\n                toRemove: null,\n                commentsCount: state.commentsCount - 1,\n                comments: state.toRemove ? state.comments.filter(comment => comment.id !== state.toRemove.id) : state.data\n            }\n        }\n        case 'sort': {\n            return {\n                ...state,\n                comments: null,\n                isAllFetched: false,\n                sorts: state.sorts.map(sort => {\n                    if (sort.id === action.sortToChange.id) return action.sortToChange\n                    else return sort\n                }),\n                sort: action.sort,\n                isSorting: true,\n            }\n        }\n        case 'sort-success': {\n            return {\n                ...state,\n                isSorting: false,\n                comments: action.payload,\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isAdding: false,\n                isLoading: false,\n                isSorting: false,\n                error: action.payload,\n            }\n        }\n        default: return state\n    }\n}","import React, { useContext, useEffect, useReducer, useCallback } from 'react';\n\nimport { Button, Col, Dropdown, DropdownButton, Row, Spinner } from \"react-bootstrap\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport TextField from '@material-ui/core/TextField';\nimport ButtonBase from \"@material-ui/core/ButtonBase/ButtonBase\";\n\nimport * as commentApi from '../../services/commentService'\n\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\nimport { commentsReducer, commentsInitialState } from './reducers/commentsReducer';\nimport { commentsMaxFetchCount } from \"../../config\"\nimport UserContext from '../../helpers/contexts/user/userContext';\nimport FilmContext from '../../helpers/contexts/film/filmContext';\nimport { displayCommentDate } from '../../helpers';\nimport RemoveModalContext from '../../helpers/contexts/removeModal/removeModalContext';\n\nfunction Comments(props) {\n\n    const { showModal, clear, removeModalData } = useContext(RemoveModalContext)\n\n    const { user } = useContext(UserContext);\n\n    const [filmState, filmDispatch] = useContext(FilmContext)\n\n    const [state, dispatch] = useReducer(commentsReducer, commentsInitialState)\n    const {\n        comments,\n        commentsCount,\n        text,\n        isInitialLoaded,\n        isLoading,\n        isAllFetched,\n        isAdding,\n        id,\n        isRemoving,\n        toRemove,\n        isSorting,\n        sort,\n        sorts,\n        error\n    } = state\n\n    const handleOnCommentsBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && isInitialLoaded && !isAdding && !error && id && !isSorting) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isLoading, isAllFetched, isInitialLoaded, isAdding, error, id, isSorting])\n\n    useBottomScrollListener(handleOnCommentsBottom)\n\n    useEffect(() => {\n        dispatch({\n            type: 'clear',\n            id: props.match.params.id\n        })\n    }, [props.match.params.id])\n\n    useEffect(() => {\n        if (filmState.error) {\n            dispatch({\n                type: 'error',\n                payload: filmState.error\n            })\n        }\n    }, [filmState.error])\n\n    useEffect(() => {\n        function getCommentsFromContext() {\n            dispatch({\n                type: 'initial-success',\n                comments: filmState.comments,\n                commentsCount: filmState.commentsCount,\n            })\n        }\n\n        if (filmState.comments && filmState.commentsCount !== null) getCommentsFromContext()\n    }, [filmState.comments, filmState.commentsCount, filmDispatch])\n\n    useEffect(() => {\n        async function loadComments() {\n            await commentApi.all(id, { skip: comments.length, limit: commentsMaxFetchCount })\n                .then(res => {\n                    dispatch({\n                        type: 'load-success',\n                        payload: res.data\n                    })\n                })\n                .catch(err => {\n                    dispatch({\n                        type: 'error'\n                    })\n                })\n        }\n        async function loadSortedComments() {\n            await commentApi.sort(id, { [sort.id]: sort.dir, skip: comments.length, limit: commentsMaxFetchCount })\n                .then(res => {\n                    dispatch({\n                        type: 'load-success',\n                        payload: res.data\n                    })\n                })\n                .catch(err => {\n                    dispatch({\n                        type: 'error'\n                    })\n                })\n        }\n        if (isLoading && isInitialLoaded && !isAdding &&\n            comments && id && !isSorting) {\n            if (!sort)\n                loadComments()\n            else\n                loadSortedComments()\n        }\n    }, [isLoading, isAdding, id, comments, isInitialLoaded, isSorting, sort])\n\n\n    useEffect(() => {\n        const addComment = async () => {\n            const comment = { text: text }\n\n            await commentApi.create(id, comment)\n                .then(res => {\n                    dispatch({\n                        type: 'add-success',\n                        payload: res.data\n                    })\n                })\n                .catch(err => {\n                    dispatch({\n                        type: 'error',\n                        payload: err.response.status\n                    })\n                })\n        };\n        if (isAdding && !isLoading && id) addComment()\n    }, [isAdding, isLoading, id, text])\n\n    useEffect(() => {\n        async function removeComment() {\n            await commentApi.remove(toRemove.id)\n                .then(res => {\n                    dispatch({ type: 'remove-success' })\n                    clear()\n                })\n                .catch(err => {\n                    clear()\n                    console.error(err)\n                })\n        }\n\n        if (isRemoving && toRemove && removeModalData.isRemoving &&\n            removeModalData.id === toRemove.id && removeModalData.type === 'comment' &&\n            removeModalData.title === toRemove.text.substring(0, 10).concat('...')) removeComment()\n    }, [isRemoving, toRemove, clear, removeModalData])\n\n    useEffect(() => {\n        async function sortComments() {\n            const sortParams = sort ? { [sort.id]: sort.dir, limit: commentsMaxFetchCount } : {}\n\n            await commentApi.sort(id, sortParams)\n                .then(res => {\n                    dispatch({ type: 'sort-success', payload: res.data })\n                })\n                .catch(err => {\n                    dispatch({ type: 'error', payload: 'Sort error.' })\n                    console.error(err)\n                })\n        }\n        if (isSorting) sortComments()\n    }, [isSorting, sort, id])\n\n    const handleAddComment = () => {\n        dispatch({\n            type: 'add'\n        })\n    }\n\n    const handleRemoveComment = (comment) => {\n        if (removeModalData.isRemoving) return\n        dispatch({ type: 'remove', payload: comment })\n        showModal(comment.id, 'comment', comment.text.substring(0, 10).concat('...'))\n    }\n\n    const handleSortComments = (e) => {\n\n        let sortToChange = null\n\n        switch (e) {\n            case 'created_at':\n                sortToChange = sorts[0]\n\n                break;\n            case 'author_name':\n                sortToChange = sorts[1]\n                break;\n            default:\n                return;\n        }\n\n        let tmpSort = null\n\n        if (sort && sort.id === sortToChange.id) {\n            sortToChange.dir *= -1\n            tmpSort = sortToChange\n            if (sortToChange.dir === 1) {\n                tmpSort = null\n            }\n        } else {\n            tmpSort = sortToChange\n        }\n\n        dispatch({\n            type: 'sort',\n            sortToChange: sortToChange,\n            sort: tmpSort\n        })\n\n    };\n\n\n    return (\n\n        <Col>\n            <Row className=\"p-0 mt-4 mb-4\">\n                <Col xs={7} sm={5} md={4} className=\"d-flex align-items-center \">\n                    {commentsCount !== null && <span>{commentsCount}{commentsCount === 1 ? ' comment' : ' comments'} </span>}\n                </Col>\n                <Col xs={2} sm={2}>\n                    <DropdownButton\n                        variant=\"secondary\"\n                        title=\"Sort\"\n                        id=\"dropdown-button-drop-down\"\n                        onSelect={e => handleSortComments(e)}>\n                        {\n                            sorts.map(sortTmp => (\n                                <Dropdown.Item key={sortTmp.id} eventKey={sortTmp.id} active={sort && sortTmp.id === sort.id}>\n                                    {sortTmp.title}\n                                    {sort && sort.id === sortTmp.id && sortTmp.dir === 1 ?\n                                        <FontAwesomeIcon className=\"ms-2\" icon=\"sort-up\" /> :\n                                        sort && sort.id === sortTmp.id && sortTmp.dir === -1 ?\n                                            <FontAwesomeIcon className=\"ms-2\" icon=\"sort-down\" /> : \"\"}\n                                </Dropdown.Item>)\n                            )\n                        }\n                    </DropdownButton>\n                </Col>\n            </Row>\n            <TextField\n                value={text}\n                onChange={e => dispatch({ type: 'field', fieldName: 'text', payload: e.target.value })}\n                type=\"text\"\n                id=\"standard-multiline-flexible\"\n                label=\"Comment\"\n                multiline\n                fullWidth\n                maxrow=\"4\" />\n            <Col className=\"d-flex justify-content-end\" >\n                <Button disabled={isAdding || !text}\n                    className=\"mt-3\" variant=\"primary\"\n                    onClick={(text && !isAdding) ? handleAddComment : null}>\n                    Submit\n                </Button>\n            </Col>\n\n            {\n                isAdding && <div style={{ height: 32 + 'px' }} className=\"d-flex justify-content-center\">\n                    <Spinner animation=\"border\" />\n                </div>\n            }\n            {\n                comments && comments.map(comment => {\n                    return (\n                        <Col className=\"p-0 mt-4 remove-container\" sm={12} key={comment.id}>\n                            <div className=\"d-flex\">\n                                <p className=\"m-0 fw-bold\">\n                                    <small className=\"m-0 fw-bold\">{comment.author_name}&nbsp;</small>\n                                </p>\n                                <p >\n                                    <small className=\"m-0\">{displayCommentDate(comment)}</small>\n                                </p>\n                                {\n                                    user.id === comment.author_id &&\n                                    <Col\n                                        xs={2} sm={2}\n                                        className=\"d-flex justify-content-center align-items-center remove-holder p-0 m-0 ms-auto\"\n                                        style={{ height: 24 + 'px', width: 24 + \"px\" }}>\n                                        <ButtonBase\n                                            style={{ borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\" }}\n                                            className=\"m-button cursor-pointer\"\n                                            onClick={() => handleRemoveComment(comment)}>\n                                            <FontAwesomeIcon icon=\"trash-alt\" />\n                                        </ButtonBase>\n                                    </Col>\n                                }\n                            </div>\n                            <p className=\"d-block d-sm-block\">\n                                <small>{comment.text}</small>\n                            </p>\n                        </Col>\n                    )\n                })\n            }\n\n            {\n                !isAllFetched && <div style={{ height: 32 + 'px' }} className=\"d-flex justify-content-center\">\n                    {(isLoading || !isInitialLoaded || isSorting) && !error && <Spinner animation=\"border\" />}\n                </div>\n            }\n\n        </Col>\n\n    )\n}\n\nexport default Comments","export default __webpack_public_path__ + \"static/media/image_not_found.c4ba1e76.png\";","\nexport const filmPlaylistInitialState = {\n    playlist: null,\n    currentFilm: null,\n    currentFilmIndex: 0,\n    isLoading: false,\n    isRemovingPlaylist: false,\n    isRemovingFilm: false,\n    removingFilmId: null,\n    headerHeight: null,\n    playerHeight: null\n}\n\nexport const filmPlaylistReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                isLoading: false,\n                playlist: action.playlist,\n                currentFilm: action.currentFilm,\n                currentFilmIndex: action.currentFilmIndex\n            }\n        }\n        case 'clear': {\n            return filmPlaylistInitialState\n        }\n        case 'remove-film': {\n            return {\n                ...state,\n                removingFilmId: action.payload,\n                isRemovingFilm: true\n            }\n        }\n        case 'remove-film-success': {\n\n            if (!state.removingFilmId)\n                return {\n                    ...state,\n                    isRemovingFilm: false\n                }\n\n            const filtered = state.playlist.films.filter(film => film.id !== state.removingFilmId)\n            return {\n                ...state,\n                currentFilm: state.removingFilmId === state.currentFilm ? null : state.currentFilm,\n                currentFilmIndex: state.removingFilmId === state.currentFilm ? 0 : filtered.findIndex(film => film.id === state.currentFilm) + 1,\n                playlist: {\n                    ...state.playlist,\n                    films: filtered\n                },\n                isRemovingFilm: false,\n            }\n        }\n        case 'change-playlist-privacy-success': {\n            return {\n                ...state,\n                playlist: { ...state.playlist, is_public: action.payload.is_public }\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isLoading: false,\n                error: action.payload\n            }\n        }\n        default:\n            return state\n    }\n}","import React, { useContext, useEffect, useCallback, useReducer } from 'react';\nimport { useLocation } from 'react-router-dom'\nimport { Col, Row } from \"react-bootstrap\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport queryString from \"query-string\";\n\nimport TextTruncate from \"react-text-truncate\";\nimport image_not_found from '../../images/image_not_found.png'; // Tell Webpack this JS file uses this image\n\nimport 'react-perfect-scrollbar/dist/css/styles.css';\nimport PerfectScrollbar from 'react-perfect-scrollbar'\n\nimport * as playlistApi from '../../services/playlistService'\nimport FilmContext from '../../helpers/contexts/film/filmContext';\n\nimport { filmPlaylistInitialState, filmPlaylistReducer } from './reducers/playlistReducer';\n\nimport UserContext from '../../helpers/contexts/user/userContext';\nimport RemoveButton from '../../helpers/components/removeButton';\nimport ChangePrivacyButton from '../../helpers/components/changePrivacyButton';\nimport RemoveModalContext from '../../helpers/contexts/removeModal/removeModalContext';\n\nfunction Playlist(props) {\n\n    const { showModal, clear, removeModalData } = useContext(RemoveModalContext)\n\n    let location = useLocation()\n\n    const { user } = useContext(UserContext)\n    const [filmState, filmDispatch] = useContext(FilmContext)\n\n    const [state, dispatch] = useReducer(filmPlaylistReducer, filmPlaylistInitialState)\n\n    const {\n        playlist,\n        isRemovingPlaylist,\n        isRemovingFilm,\n        removingFilmId,\n        currentFilm,\n        currentFilmIndex,\n        headerHeight,\n        playerHeight,\n        error\n    } = state\n\n    const clearPlaylist = () => {\n        dispatch({ type: 'clear' })\n    }\n\n    const headerRef = useCallback(node => {\n        if (node !== null) {\n            dispatch({\n                type: 'field',\n                fieldName: 'headerHeight',\n                payload: node.getBoundingClientRect().height\n            });\n        }\n    }, [])\n\n    useEffect(() => {\n        dispatch({\n            type: 'field',\n            fieldName: 'playerHeight',\n            payload: filmState.playerHeight\n        });\n    }, [filmState.playerHeight])\n\n    useEffect(() => {\n        dispatch({\n            type: 'error',\n            payload: filmState.error\n        });\n    }, [filmState.error])\n\n\n    useEffect(() => {\n        async function handleReloadPlaylist() {\n            await playlistApi.index(playlist.id)\n                .then(res => {\n\n                    let filmIndex = 0\n                    let filmId = null\n\n                    Array.prototype.forEach.call(res.data.films, (film, index) => {\n                        if (film && film.id === props.match.params.id) {\n                            filmIndex = index + 1\n                            filmId = film.id\n                        }\n                    })\n\n                    dispatch({\n                        type: 'success',\n                        playlist: res.data,\n                        currentFilm: filmId,\n                        currentFilmIndex: filmIndex\n                    })\n\n                    filmDispatch({\n                        type: 'field',\n                        fieldName: 'reloadPlaylist',\n                        payload: false\n                    })\n\n                    return res.data\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (filmState.reloadPlaylist && playlist) handleReloadPlaylist()\n\n    }, [filmState.reloadPlaylist, playlist, filmDispatch, props.match.params.id])\n\n\n\n    useEffect(() => {\n        const parsed = queryString.parse(location.search);\n        if (!parsed.list) {\n            clearPlaylist()\n            return\n        }\n\n        async function handleGetPlaylist() {\n            await playlistApi.index(parsed.list).then(res => {\n\n                let filmIndex = 0\n                let filmId = null\n\n                Array.prototype.forEach.call(res.data.films, (film, index) => {\n                    if (film && film.id === props.match.params.id) {\n                        filmIndex = index + 1\n                        filmId = film.id\n                    }\n                })\n\n                dispatch({\n                    type: 'success',\n                    playlist: res.data,\n                    currentFilm: filmId,\n                    currentFilmIndex: filmIndex\n                })\n                return res.data\n            }).catch(err => {\n                console.error(err)\n                clearPlaylist()\n            })\n        }\n        if (!error && filmState.isPreviewLoaded) handleGetPlaylist()\n    }, [props.match.params.id, location.search, error, filmState.isPreviewLoaded])\n\n\n    useEffect(() => {\n        async function removePlaylist() {\n            await playlistApi.remove(playlist.id)\n                .then(res => {\n                    clearPlaylist()\n                    clear()\n                })\n                .catch(err => {\n                    console.error(err)\n                    clear()\n                })\n        }\n        if (isRemovingPlaylist && removeModalData.isRemoving &&\n            removeModalData.id === playlist.id && removeModalData.type === 'playlist' &&\n            removeModalData.title === playlist.title) removePlaylist()\n    }, [clear, isRemovingPlaylist, playlist, removeModalData])\n\n\n    useEffect(() => {\n        async function removeFilm() {\n            await playlistApi.partialUpdate(playlist.id, { films_id: [removingFilmId], is_remove_films: true })\n                .then(res => {\n                    dispatch({\n                        type: 'remove-film-success'\n                    })\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (isRemovingFilm) removeFilm()\n    }, [isRemovingFilm, playlist, removingFilmId])\n\n    const handleRemovePlaylist = () => {\n\n        if (removeModalData.isRemoving) return\n\n        dispatch({\n            type: 'field',\n            fieldName: 'isRemovingPlaylist',\n            payload: true\n        })\n\n        showModal(playlist.id, 'playlist', playlist.title)\n    }\n\n    const handleRemoveFromPlaylist = (id) => {\n        if (isRemovingFilm) return\n\n        dispatch({\n            type: 'remove-film',\n            payload: id\n        })\n    }\n\n\n    return (\n\n        playlist && playerHeight && !error &&\n        <Col className='mb-4'>\n            <Col className='p-0 border'>\n                <Col ref={headerRef}\n                    style={{ height: headerHeight + 'px' }}\n                    className=\"remove-container pt-2 pb-2 film-preview-playlist-header\" sm={12}>\n                    <Row className=\"m-0 px-2\">\n                        <Col className=\"film-preview-playlist-title-width\">\n                            <p className=\"mb-1 fw-bold film-preview-playlist-text-truncate\">{playlist.title}</p>\n                        </Col>\n                        <Col className=\"justify-content-end d-flex\">\n                            {\n                                user.id === playlist.author_id &&\n                                <RemoveButton handleRemove={() => handleRemovePlaylist()} />\n                            }\n                        </Col>\n                        <Col xs={12} sm={12}>\n                            {\n                                user.id === playlist.author_id &&\n                                <ChangePrivacyButton\n                                    id={playlist.id}\n                                    isPublic={playlist.is_public}\n                                    isProfile={false}\n                                    dispatchPrivacyUpdate={dispatch} />\n                            }\n                            {\n                                user.id === playlist.author_id && <small>&nbsp;</small>\n\n                            }\n                            <small>{playlist.author_name}&nbsp;</small>\n                            <small\n                                className=\"film-preview-playlist-index\">\n                                - {currentFilmIndex}/{playlist.films.length}\n                            </small>\n                        </Col>\n                    </Row>\n                </Col>\n                <Col style={{ height: playerHeight - headerHeight + 'px' }}\n                    className=\"p-0 film-preview-playlist-container\" xs={12} sm={12}>\n                    <PerfectScrollbar\n                        onYReachEnd={() => { }}\n                        onScrollY={() => { }}>\n                        {\n                            playlist.films.map((film, index) => {\n                                return film && !film.isNonExisting ? (\n                                    <Row xs={12} sm={12} className=\"m-0 p-0 remove-container\" key={film.id}>\n                                        <Col xs={9} sm={9}\n                                            className={index === playlist.films.length - 1 ?\n                                                \"mt-3 mb-3 \" :\n                                                \"mt-3\"}\n                                            onClick={() => props.handleRedirect(film.id)} >\n                                            <Row className=\"m-0 p-0 play-outer-container\">\n                                                <Col xs={1} sm={1}\n                                                    className=\"text-center justify-content-center d-flex align-items-center p-0 ps-1\" >\n                                                    {\n                                                        (currentFilm === film.id) ?\n                                                            <small>\n                                                                <FontAwesomeIcon style={{ fontWeight: 300 }}\n                                                                    icon=\"play\" />\n                                                            </small>\n                                                            :\n                                                            <small>{index + 1}</small>\n\n                                                    }\n                                                </Col>\n                                                <Col xs={6} sm={6} className=\"pe-2 ps-2\"\n                                                    style={{\n                                                        display: 'flex',\n                                                        justifyContent: 'center',\n                                                        alignItems: 'center'\n                                                    }}>\n                                                    <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\n                                                        <img alt=\"\" className=\"embed-responsive-item play-image\"\n                                                            src={`${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=small`} />\n                                                    </div>\n                                                </Col>\n                                                <Col xs={5} sm={5} className=\"p-0\">\n                                                    <TextTruncate line={1} text={film.title}\n                                                        className=\"mb-0 title fw-bold\" />\n                                                    <p className=\"mb-1 author-nick-color\">\n                                                        <small>{film.author_name}</small>\n                                                    </p>\n                                                </Col>\n                                            </Row>\n                                        </Col>\n                                        {\n                                            user.id === playlist.author_id &&\n                                            <RemoveButton handleRemove={() => handleRemoveFromPlaylist(film.id)} />\n                                        }\n\n                                    </Row>\n                                ) : (\n                                    <Row xs={12} sm={12} className=\"m-0 p-0 remove-container\" key={film.id}>\n                                        <Col xs={9} sm={9}\n                                            className={index === playlist.films.length - 1 ?\n                                                \"mt-3 mb-3 \" :\n                                                \"mt-3\"} >\n                                            <Row className=\"m-0 p-0\">\n                                                <Col xs={1} sm={1}\n                                                    className=\"text-center justify-content-center d-flex align-items-center p-0 ps-1\" >\n                                                    <small>{index + 1}</small>\n                                                </Col>\n                                                <Col xs={6} sm={6} className=\"pe-2 ps-2\"\n                                                    style={{\n                                                        display: 'flex',\n                                                        justifyContent: 'center',\n                                                        alignItems: 'center'\n                                                    }}>\n                                                    <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\n                                                        <img alt=\"\" className=\"embed-responsive-item play-image\"\n                                                            src={image_not_found} />\n                                                    </div>\n                                                </Col>\n                                                <Col xs={5} sm={5} className=\"p-0\">\n                                                    <TextTruncate line={2} text=\"Not found\"\n                                                        className=\"mb-0 title fw-bold\" />\n                                                </Col>\n                                            </Row>\n                                        </Col>\n                                        {\n                                            user.id === playlist.author_id &&\n                                            <RemoveButton handleRemove={() => handleRemoveFromPlaylist(film.id)} />\n                                        }\n\n                                    </Row>\n                                )\n                            })\n                        }\n                    </PerfectScrollbar>\n\n                </Col>\n            </Col>\n        </Col >\n\n\n    )\n}\n\n\nexport default Playlist\n","import { useState, useEffect } from \"react\";\n\nconst useWindowsWidth = () => {\n  const [isScreenSmall, setIsScreenSmall] = useState(false);\n\n  let checkScreenSize = () => {\n    setIsScreenSmall(window.innerWidth < 600);\n  };\n  useEffect(() => {\n    checkScreenSize();\n    window.addEventListener(\"resize\", checkScreenSize);\n\n    return () => window.removeEventListener(\"resize\", checkScreenSize);\n  }, []);\n\n  return isScreenSmall;\n};\n\nexport default useWindowsWidth;\n","import { useReducer } from \"react\"\nimport FilmContext from \"./filmContext\"\n\nconst filmInitialState = {\n    isPreviewLoaded: false,\n    comments: null,\n    commentsCount: null,\n    playerHeight: null,\n    reloadPlaylist: false,\n    error: null\n}\n\nconst filmReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                isPreviewLoaded: true,\n                comments: action.comments,\n                commentsCount: action.commentsCount,\n                error: null\n            }\n        }\n        case 'reset-comments': {\n            return {\n                ...state,\n                comments: null,\n                commentsCount: null\n            }\n        }\n        default:\n            return state\n    }\n}\n\nconst FilmProvider = ({ children }) => {\n    const [filmState, filmDispatch] = useReducer(filmReducer, filmInitialState)\n\n\n    return (\n        <FilmContext.Provider value={[filmState, filmDispatch]}>\n            {children}\n        </FilmContext.Provider>\n    );\n}\n\nexport default FilmProvider","import React from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\n\nimport queryString from \"query-string\";\n\nimport FilmPreview from './preview'\nimport { Row, Col } from \"react-bootstrap\";\nimport FilmsRecommendations from './recommendations';\nimport Comments from './comments';\nimport Playlist from './playlist';\nimport useWindowWidth from '../../helpers/hooks/useWindowsWidth'\n\nimport FilmProvider from '../../helpers/contexts/film/filmProvider'\nimport './film.css'\n\n\nfunction Film(props) {\n\n    let history = useHistory()\n    let location = useLocation()\n\n    const onSmallScreen = useWindowWidth();\n\n    const handleRedirect = (id) => {\n        const parsed = queryString.parse(location.search);\n        let historyObject = { pathname: `${process.env.REACT_APP_PATH_NAME}film/` + id }\n        if (parsed.list) historyObject = { ...historyObject, search: `?list=${parsed.list}` }\n        history.push(historyObject);\n    };\n\n    return (\n        <FilmProvider>\n            <Row className=\"p-0 m-0 mt-4 mx-2\">\n                <Col xs={{ span: 12, order: 'first' }} sm={8}>\n                    <FilmPreview {...props} />\n                    {!onSmallScreen && <Comments {...props} />}\n                </Col>\n                <Col xs={{ span: 12, order: 2 }} sm={4}>\n                    <Playlist handleRedirect={handleRedirect} {...props} />\n                    <FilmsRecommendations handleRedirect={handleRedirect} {...props} />\n                </Col>\n                {onSmallScreen &&\n                    <Col xs={{ span: 12, order: 'last' }} sm={8}>\n                        <Comments {...props} />\n                    </Col>\n                }\n            </Row>\n\n        </FilmProvider>\n    )\n}\n\nexport default Film","import authHeader from '../helpers/authHeader'\nimport axios from '../helpers/axios'\n\nexport const login = (data) => axios.post('auth', {}, {\n    auth: {\n        username: data.email,\n        password: data.password\n    }\n})\nexport const register = (form) => axios.post('users', form)\n\nexport const refresh = (data) => axios.post('auth/refresh', data, {headers: authHeader()})\nexport const forget = (form) => axios.post('auth/password/forgot', form)\nexport const reset = (token, form) => axios.post(`auth/password/reset/${token}`, form)","\nexport const authInitialState = {\n    email: '',\n    nick: '',\n    password: '',\n    isSubmitted: false,\n    isSending: false,\n    isSuccess: false,\n    isError: false,\n    error: null\n}\n\nexport const authReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                isSubmitted: false,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'submit': {\n            return {\n                ...state,\n                isError: false,\n                error: null,\n                isSubmitted: true\n            }\n        }\n        case 'send': {\n            return {\n                ...state,\n                isSending: true\n            }\n        }\n        case 'success': {\n            return {\n\n                ...state,\n                isError: false,\n                error: null,\n                isSending: false,\n                isSuccess: true\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isSending: false,\n                isError: true,\n                error: action.payload\n            }\n        }\n        default: return state\n    }\n}","import React, { useState, useEffect, useContext, useReducer } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom'\n\nimport { Alert, Button, Col, Form, Modal, Spinner } from 'react-bootstrap';\n\nimport * as authApi from '../../services/authService'\n\nimport UserContext from '../../helpers/contexts/user/userContext'\nimport { authInitialState, authReducer } from './reducer';\n\nfunction Login(props) {\n\n    const { login } = useContext(UserContext);\n\n    let history = useHistory()\n    let location = useLocation()\n\n    const [state, dispatch] = useReducer(authReducer, authInitialState)\n    const { email, password, isSubmitted, isSending, isError, error } = state\n    const [show, setShow] = useState(true)\n\n    useEffect(() => {\n        async function sendData() {\n            await authApi.login({ email, password })\n                .then(res => {\n                    login(res.data.user.name, res.data.user.id, res.data.token, res.data.refreshToken)\n                    //history.replace(location.pathname.slice(0, -6))\n\n                    let pathname = location.pathname.slice(0, -6)\n                    if (pathname === '') pathname = process.env.REACT_APP_PATH_NAME\n\n                    history.replace({\n                        pathname: pathname,\n                        search: location.search,\n                        state: location.state\n                    })\n\n                    //if (!location.state) {\n                    // history.goBack();\n                    //} else {\n                    //   history.replace(location.state.from)\n                    //}\n                })\n                .catch(err => {\n                    let errorMessage = null;\n\n                    if (err.response && err.response.data && err.response.data.errors)\n                        errorMessage = err.response.data.errors;\n\n                    dispatch({\n                        type: 'error',\n                        payload: errorMessage\n                    })\n\n                    console.error(err)\n                })\n        }\n        if (isSending) sendData()\n    }, [isSending, email, password, history, location, login])\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        dispatch({ type: 'submit' })\n\n        if (email && password) {\n            dispatch({ type: 'send' })\n        }\n    }\n\n    const handleForgotPassword = () => {\n        history.goBack();\n\n        setTimeout(function () {\n            history.push(`${location.pathname.slice(0, -5)}forgot${location.search}`);\n        }, 500);\n    };\n\n    const modalClose = () => {\n        setShow(false)\n        if (!location.state) {\n            history.goBack();\n        } else {\n            history.push(process.env.REACT_APP_PATH_NAME)\n        }\n    };\n\n    const handleRegister = () => {\n        history.goBack();\n\n        setTimeout(function () {\n            history.push(`${location.pathname.slice(0, -5)}register${location.search}`);\n        }, 500);\n    };\n\n\n\n    return (\n\n        <Modal\n            onHide={modalClose}\n            show={show}\n            size=\"lg\"\n            aria-labelledby=\"contained-modal-title-vcenter\"\n            centered>\n            <Modal.Header closeButton>\n                <Modal.Title id=\"contained-modal-title-vcenter\">\n                    Login\n                </Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <Form onSubmit={isSending ? null : handleSubmit}>\n\n                    <Form.Group>\n                        <Form.Label htmlFor=\"email\">Email</Form.Label>\n                        <Form.Control isInvalid={isSubmitted && !email} type=\"email\" name=\"email\" value={email}\n                            onChange={e => dispatch({ type: 'field', fieldName: 'email', payload: e.target.value })}>\n                        </Form.Control>\n                        <Form.Control.Feedback type=\"invalid\">\n                            Email is required\n                        </Form.Control.Feedback>\n                    </Form.Group>\n\n                    <Form.Group className=\"mt-2\">\n                        <Form.Label htmlFor=\"password\">Password</Form.Label>\n                        <Form.Control isInvalid={isSubmitted && !password} type=\"password\" name=\"password\"\n                            value={password} onChange={e => dispatch({ type: 'field', fieldName: 'password', payload: e.target.value })}>\n                        </Form.Control>\n                        <Form.Control.Feedback type=\"invalid\">\n                            Password is required\n                        </Form.Control.Feedback>\n                    </Form.Group>\n\n                    <Form.Group className=\"d-flex align-items-center mt-2\">\n                        <Button  disabled={isSending} type=\"submit\" className=\"btn-primary\">\n                            Login\n                        </Button>\n\n                        {\n                            isSending &&\n                            <Spinner className=\"ms-2\" animation=\"grow\" />\n                        }\n                    </Form.Group>\n\n                </Form>\n\n                {\n                    isError &&\n                    <Alert variant=\"danger\" className=\"mt-2 mb-0\">\n                        {error ? error : 'Error while logging in.'}\n                    </Alert>\n                }\n\n                <Button variant=\"link\" onClick={handleRegister} className=\"p-0 mt-2 btn btn-link\">Register</Button>\n\n                <Col className=\"p-0 m-0 \" xs={12} sm={12}>\n                    <Button variant=\"link\" onClick={handleForgotPassword} className=\"p-0 mt-2 btn btn-link\">Forgot password?</Button>\n                </Col>\n\n            </Modal.Body>\n\n            <Modal.Footer>\n                <Button onClick={modalClose}>Close</Button>\n            </Modal.Footer>\n\n\n        </Modal>\n\n\n    );\n}\n\nexport default Login","import React, { useState, useReducer, useEffect, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Alert, Button, Form, Modal, Spinner } from 'react-bootstrap';\nimport * as authApi from '../../services/authService'\nimport { authInitialState, authReducer } from './reducer';\nimport UserContext from '../../helpers/contexts/user/userContext'\n\nfunction Register(props) {\n\n    let history = useHistory()\n\n    const { login } = useContext(UserContext)\n    const [state, dispatch] = useReducer(authReducer, authInitialState)\n    const { email, nick, password, isSubmitted, isSuccess, isSending, isError, error } = state\n\n    const [show, setShow] = useState(true)\n\n    useEffect(() => {\n        async function submitData() {\n\n            await authApi.register({ email: email, password: password, name: nick })\n                .then(res => {\n                    dispatch({\n                        type: 'success'\n                    })\n                    setTimeout(() => {\n                        login(res.data.user.name, res.data.user.id, res.data.token, res.data.refreshToken)\n                        history.goBack()\n                    }, 1500)\n                })\n                .catch(err => {\n                    let errorMessage = null;\n\n                    if (err.response && err.response.data && err.response.data.errors)\n                        errorMessage = err.response.data.errors;\n                    else if (err.response && err.response.data && err.response.data.error)\n                        errorMessage = err.response.data.error\n\n                    dispatch({\n                        type: 'error',\n                        payload: errorMessage\n                    })\n                    console.error(err)\n                })\n        }\n\n        if (isSending) submitData()\n\n    }, [isSending, email, nick, password, history, login])\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n\n        dispatch({\n            type: 'submit'\n        })\n\n        if (email && nick && password && password.length >= 6) {\n            dispatch({\n                type: 'send'\n            })\n        }\n    }\n\n    const modalClose = () => {\n        setShow(false)\n        history.goBack();\n    };\n\n\n    return (\n\n        <Modal\n            onHide={modalClose}\n            show={show}\n            size=\"lg\"\n            aria-labelledby=\"contained-modal-title-vcenter\"\n            centered>\n            <Modal.Header closeButton>\n                <Modal.Title id=\"contained-modal-title-vcenter\">\n                    Register\n                </Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <Form onSubmit={handleSubmit}>\n                    <Form.Group>\n                        <Form.Label htmlFor=\"nick\">Nick</Form.Label>\n                        <Form.Control isInvalid={isSubmitted && !nick} type=\"text\" name=\"nick\" value={nick}\n                            onChange={e => dispatch({ type: 'field', fieldName: 'nick', payload: e.target.value })} >\n                        </Form.Control>\n                        <Form.Control.Feedback type=\"invalid\">\n                            Nick is required\n                        </Form.Control.Feedback>\n                    </Form.Group>\n\n                    <Form.Group className=\"mt-2\">\n                        <Form.Label htmlFor=\"email\">Email</Form.Label>\n                        <Form.Control\n                            isInvalid={(isSubmitted && !email)}\n                            type=\"email\" name=\"email\" value={email} onChange={e => dispatch({ type: 'field', fieldName: 'email', payload: e.target.value })} >\n                        </Form.Control>\n                        <Form.Control.Feedback type=\"invalid\">\n                            Email is required\n                        </Form.Control.Feedback>\n                    </Form.Group>\n\n                    <Form.Group className=\"mt-2\">\n                        <Form.Label htmlFor=\"password\">Password</Form.Label>\n                        <Form.Control isInvalid={isSubmitted && (password.length < 6)} type=\"password\"\n                            name=\"password\" value={password} maxLength=\"11\"\n                            onChange={e => dispatch({ type: 'field', fieldName: 'password', payload: e.target.value })}>\n                        </Form.Control>\n                        <Form.Control.Feedback type=\"invalid\">\n                            {\n                                password.length === 0 ? \"Password is required\" : \"Password too short (min 6 chars)\"\n                            }\n\n                        </Form.Control.Feedback>\n                    </Form.Group>\n\n                    {\n                        isSuccess &&\n                        <Alert variant=\"success\" className=\"mt-2\">\n                            You have successfully registered and logged in.\n                        </Alert>\n                    }\n\n                    {\n                        isError &&\n                        <Alert variant=\"danger\" className=\"mt-2\">\n                            {error ? error : 'Error while registtering.'}\n                        </Alert>\n                    }\n\n                    <Form.Group className=\"d-flex align-items-center mt-2\">\n                        <Button type=\"submit\" className=\"btn-primary\">\n                            Register\n                        </Button>\n\n                        {\n                            isSending &&\n                            <Spinner className=\"ms-2\" animation=\"grow\" />\n                        }\n                    </Form.Group>\n\n                </Form>\n\n            </Modal.Body>\n\n            <Modal.Footer>\n                <Button onClick={modalClose}>Close</Button>\n            </Modal.Footer>\n\n\n        </Modal>\n    );\n}\n\nexport default Register","\nexport const searchInitialState = {\n    films: [],\n    isLoading: false,\n    isAllFetched: false,\n    isInitialLoaded: false,\n    error: null,\n    search: '',\n    filter: '',\n    sort: '',\n    dir: 1,\n    sorts: [\n        { id: 'upload_date', title: 'Upload date', dir: 1 },\n        { id: 'view_count', title: 'View count', dir: 1 },\n        { id: 'rating', title: 'Rating', dir: 1 },\n    ]\n\n}\n\nexport const searchReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'initial-success': {\n            return {\n                ...state,\n                isLoading: false,\n                isInitialLoaded: true,\n                error: null,\n                isAllFetched: action.payload.films.length < 12,\n                films: action.payload.films,\n                search: action.payload.params.search,\n                sort: action.payload.params.sort,\n                filter: action.payload.params.filter,\n                dir: action.payload.params.dir,\n\n            }\n        }\n        case 'load': {\n            return !state.isLoading && !state.isAllFetched && state.isInitialLoaded && !state.error ? {\n                ...state,\n                isLoading: true,\n            } : state\n        }\n        case 'load-success': {\n            return {\n                ...state,\n                isLoading: false,\n                error: null,\n                isAllFetched: action.payload.length < 12,\n                films: [...state.films, ...action.payload],\n            }\n        }\n        case 'sorts-change': {\n            return {\n                ...state,\n                sort: action.resetSort ? '' : state.sort,\n                sorts: state.sorts.map(sort => {\n                    if (sort.id === action.payload.id) return action.payload\n                    else return sort\n                })\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isLoading: false,\n                error: true,\n            }\n        }\n        default: return state\n    }\n}\n","import React, { useEffect, useReducer, useState, useCallback } from 'react';\nimport { useLocation, useHistory } from 'react-router-dom'\nimport { Col, Collapse, Row, Spinner } from 'react-bootstrap';\n\nimport \"./search.css\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Button from '@material-ui/core/Button';\n\nimport queryString from 'query-string';\n\nimport TextTruncate from \"react-text-truncate\";\nimport Truncate from \"react-truncate\";\n\nimport PlaylistAddButtonComponent from '../add/playlistAddButton';\n\n\nimport { parseSearchDate, checkIfPlaylistButtonClick } from '../../helpers'\nimport * as filmApi from '../../services/filmService'\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\n\nimport BlurredImageComponent from '../blurredImage'\n\nimport { searchReducer, searchInitialState } from './reducer'\n\nlet filters = [\n    { id: 'last_hour', title: 'Last hour' },\n    { id: 'today', title: 'Today' },\n    { id: 'this_week', title: 'This week' },\n    { id: 'this_month', title: 'This month' },\n    { id: 'this_year', title: 'This year' },\n];\n\nconst Search = (props) => {\n\n    const history = useHistory();\n    const location = useLocation();\n\n    const [state, dispatch] = useReducer(searchReducer, searchInitialState)\n\n    const { films, isLoading, isAllFetched, search, sort, filter, dir, sorts, error, isInitialLoaded } = state\n\n    const [isOpen, setIsOpen] = useState(false)\n\n    const handleSearchOnBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && !error && isInitialLoaded) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [error, isAllFetched, isInitialLoaded, isLoading])\n\n    useBottomScrollListener(handleSearchOnBottom)\n\n    useEffect(() => {\n\n        let searchParams = queryString.parse(location.search);\n\n        const params = {\n            search: searchParams.title,\n            sort: searchParams.sort ?? '',\n            filter: searchParams.filter ?? '',\n            dir: searchParams.dir ?? 1\n        }\n\n        function getSearchedFilms() {\n            dispatch({\n                type: 'initial-success',\n                payload: { films: location.state.films, params: params }\n            })\n        }\n\n        async function getFilms() {\n            await filmApi.search({ ...params, limit: 12 })\n                .then(res => {\n                    dispatch({\n                        type: 'initial-success',\n                        payload: { films: res.data, params: params }\n                    })\n                })\n                .catch(err => {\n                    dispatch({\n                        type: 'error'\n                    })\n                    console.error(err)\n                })\n        }\n\n        if (location.state && location.state.films) getSearchedFilms()\n        else getFilms()\n\n    }, [location])\n\n    useEffect(() => {\n        async function getFilms() {\n            await filmApi.search({\n                search: search,\n                sort: sort,\n                filter: filter,\n                dir: dir,\n                skip: films.length,\n                limit: 12\n            })\n                .then(res => {\n                    dispatch({\n                        type: 'load-success',\n                        payload: res.data\n                    })\n                })\n                .catch(err => {\n                    dispatch({\n                        type: 'error'\n                    })\n                    console.error(err)\n                })\n        }\n\n        if (isLoading) getFilms()\n\n    }, [dir, films.length, filter, isLoading, search, sort])\n\n    const setRedirect = (e, filmID) => {\n        history.push(`${process.env.REACT_APP_PATH_NAME}film/` + filmID);\n    };\n\n\n    const handleOnclick = (state, type) => {\n\n        let filterClick = filter;\n        let sortClick = sort;\n        let dirClick = dir;\n\n\n        if (state === 'filter') {\n            if (filterClick === type.id) {\n                filterClick = '';\n            } else {\n                filterClick = type.id;\n            }\n        } else {\n            let tmpType = type;\n\n            if (sortClick === type.id) {\n                sortClick = type.id;\n\n\n                if (tmpType.dir === 1) {\n                    tmpType.dir = -1;\n                    dirClick = type.dir;\n                } else if (tmpType.dir === -1) {\n                    tmpType.dir = 1;\n                    sortClick = '';\n                }\n\n                dispatch({\n                    type: 'sorts-change',\n                    payload: tmpType,\n                    resetSort: sortClick === ''\n                })\n\n                dirClick = type.dir\n\n            } else {\n                sortClick = type.id;\n                dirClick = type.dir;\n            }\n\n        }\n\n\n        if (sortClick !== '' && filterClick !== '') {\n            history.push({\n                search: `?title=${search}&sort=${sortClick}&dir=${dirClick}&filter=${filterClick}`,\n            });\n\n        } else if (sortClick === '' && filterClick !== '') {\n            history.push({\n                search: `?title=${search}&filter=${filterClick}`,\n            });\n        } else if (sortClick !== '' && filterClick === '') {\n            history.push({\n                search: `?title=${search}&sort=${sortClick}&dir=${dirClick}`,\n            });\n        } else if (sortClick === '' && filterClick === '') {\n            history.push({\n                search: `?title=${search}`,\n            });\n        }\n\n    };\n\n    return (\n        <>\n            <Button\n                onClick={() => setIsOpen(!isOpen)}\n                aria-controls=\"filter-collapse\"\n                aria-expanded={isOpen}\n                className=\"mt-3 mx-3 p-2 m-button\">\n                <FontAwesomeIcon style={{ cursor: \"pointer\" }} icon=\"filter\" />\n            </Button>\n\n            <Collapse in={isOpen}>\n                <Row id=\"filter-collapse\" className=\"mx-2\">\n                    <Col className=\"mt-4\" sm={4}>\n                        <p style={{ 'fontWeight': 500 }}>UPLOAD DATE</p>\n\n                        <Col sm={8} className=\"mt-3 mb-3 divider\" />\n\n\n                        {\n                            filters.map((filterTmp) => {\n                                return (<p key={filterTmp.id} style={filter === filterTmp.id ?\n                                    { fontWeight: 700, fontSize: 80 + '%' } :\n                                    { fontWeight: 400, fontSize: 80 + '%' }}\n                                    onClick={() => handleOnclick('filter', filterTmp)}\n                                    className=\"search-filter\">{filterTmp.title}</p>)\n                            })\n                        }\n\n                    </Col>\n\n                    <Col className=\"mt-4\" sm={4}>\n                        <p style={{ 'fontWeight': 500 }}>SORT BY</p>\n\n                        <Col sm={8} className=\"mt-3 mb-3 divider\" />\n\n                        {\n                            sorts.map((sortTmp) => {\n                                return (<Col key={sortTmp.id} className=\"d-flex\">\n                                    <p style={sort === sortTmp.id ?\n                                        { fontWeight: 700, fontSize: 80 + '%' } :\n                                        { fontWeight: 400, fontSize: 80 + '%' }}\n                                        onClick={() => handleOnclick('sort', sortTmp)}\n                                        className=\"search-filter\">{sortTmp.title}\n                                    </p>\n                                    {sort === sortTmp.id && sortTmp.dir === 1 ?\n                                        <FontAwesomeIcon className=\"ms-2\" icon=\"sort-up\" /> :\n                                        sort === sortTmp.id && sortTmp.dir === -1 ?\n                                            <FontAwesomeIcon className=\"ms-2\" icon=\"sort-down\" /> : \"\"}\n                                </Col>)\n                            })\n                        }\n\n                    </Col>\n\n                </Row>\n            </Collapse>\n\n            <Col sm={12} className=\"mt-2 mb-3 divider\" />\n\n            <Row className=\"mx-2 mt-4\">\n                {\n                    films.map((film, index) => {\n                        const time = parseSearchDate(film);\n\n                        return <Col xs={12} sm={12} lg={8}\n                            key={film.id}>\n                            <Col className=\"play-outer-container m-0 mb-1\"\n                                onClick={(e) => {\n                                    const isPlaylistButton = checkIfPlaylistButtonClick(e.target)\n                                    if (!isPlaylistButton) setRedirect(e, film.id)\n\n\n                                }} >\n                                <Row className=\"search-style mb-4 m-0\">\n                                    <Col xs={8} sm={4} className=\"p-0\">\n                                        <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\n                                            <BlurredImageComponent\n                                                image={`${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=preview`} />\n                                            <FontAwesomeIcon className=\"play-middle\" icon=\"play\" />\n                                        </div>\n                                    </Col>\n                                    <Col xs={4} sm={8}>\n                                        <Row className=\"m-0\">\n                                            <Col className=\"p-0 mb-1\"\n                                                style={{\n                                                    flex: '0 0 auto !important',\n                                                    width: 'calc(83.33333333% - 24px) !important'\n                                                }}>\n                                                <Truncate lines={1}\n                                                    className=\"mb-0 search-title fw-bold\">\n                                                    {film.title}\n                                                </Truncate>\n                                            </Col>\n                                            <Col className=\"d-flex justify-content-end\">\n                                                <PlaylistAddButtonComponent\n                                                    index={index}\n                                                    filmID={film.id} />\n                                            </Col>\n                                        </Row>\n                                        <p className=\"d-none d-sm-inline mb-1 author-nick-search\">\n                                            <small>{film.author_name} &#183; {film.views} views &#183; {time}</small>\n                                        </p>\n\n                                        <p className=\"d-inline d-sm-none mb-0 author-nick-color\">\n                                            <small>{film.author_name} &#183; {film.views} views</small>\n                                        </p>\n\n                                        <small className=\"d-none d-sm-inline\">\n                                            <TextTruncate className=\"mb-0 author-nick-search\"\n                                                line={2} text={film.description} />\n                                        </small>\n\n                                    </Col>\n                                </Row>\n                            </Col>\n                        </Col>\n                    })\n                }\n\n            </Row>\n\n            {\n                !isAllFetched && <div style={{ height: 32 + 'px', width: '100%' }} className=\"d-flex justify-content-center\">\n                    {(isLoading || !isInitialLoaded) && <Spinner animation=\"border\" />}\n                </div>\n            }\n        </>\n\n    )\n}\n\nexport default Search\n","import { playlistsMaxFetchCount } from '../../config'\n\n\nexport const initialState = {\n    playlists: null,\n    playlistsCount: 0,\n    isLoading: false,\n    isAllFetched: false,\n    isInitialLoaded: false,\n    error: null,\n}\n\nexport const playlistsPageReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'initial-success': {\n            return {\n                ...state,\n                playlists: [...new Set([...action.playlists])],\n                isLoading: false,\n                isInitialLoaded: true,\n                isAllFetched: action.responseCount < playlistsMaxFetchCount,\n                playlistsCount: state.playlistsCount + action.responseCount,\n            }\n        }\n        case 'load': {\n            return {\n                ...state,\n                isLoading: true,\n                isAllFetched: false,\n                error: null\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                playlists: [...new Set([...state.playlists, ...action.playlists])],\n                isLoading: false,\n                isAllFetched: action.responseCount < playlistsMaxFetchCount,\n                playlistsCount: state.playlistsCount + action.responseCount,\n                error: null\n            }\n        }\n        case 'clear': {\n            return initialState\n        }\n        case 'error': {\n            return {\n                ...state,\n                isLoading: false,\n                isAllFetched: false,\n                error: action.payload\n            }\n        }\n        default:\n            return state\n    }\n}\n","import React, { useEffect, useState } from 'react';\nimport { Col, Row } from 'react-bootstrap';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport TextTruncate from \"react-text-truncate\";\nimport BlurredImageComponent from \"../../components/blurredImage\";\nimport RemoveButton from './removeButton';\nimport ChangePrivacyButton from './changePrivacyButton';\n\nconst Playlist = ({ playlist, handleRedirect, handleRemove, isProfile, dispatchPrivacyUpdate }) => {\n\n    const colWidth = isProfile ? 8 : 10\n\n    const [style, setStyle] = useState(\"mb-5 play-outer-container remove-container\")\n\n    useEffect(() => {\n        if (!playlist.film_id) setStyle(\"mb-5 play-cursor-default remove-container\")\n    }, [playlist.film_id])\n\n\n    return (\n        <Col xs={12} sm={6} md={3} lg={2}\n            key={playlist.id}>\n            <Col className={style} onClick={() => handleRedirect(playlist.id, playlist.film_id)}>\n                <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\n                    <BlurredImageComponent\n                        image={playlist.img} />\n\n                    <Row style={{ width: '100%', margin: 0 }} className=\"play-middle\">\n                        <Col xs={5} sm={5} style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center' }}>\n                            <FontAwesomeIcon icon=\"play\" />\n                        </Col>\n                        <Col xs={7} sm={7} style={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center' }}>\n                            <small className=\"fw-bold\" >Play all</small>\n                        </Col>\n                    </Row>\n                </div>\n\n                <Row className=\"m-0\">\n                    <Col xs={colWidth} sm={colWidth} className=\"p-0\">\n                        <TextTruncate line={1} text={playlist.title}\n                            className=\"mb-1 mt-1 title \" />\n                    </Col>\n\n\n                    {\n                        isProfile && <Col xs={4} sm={4} className=\"p-0 d-flex justify-content-end\">\n                            <ChangePrivacyButton\n                                id={playlist.id}\n                                isPublic={playlist.is_public}\n                                isProfile={true}\n                                dispatchPrivacyUpdate={dispatchPrivacyUpdate} />\n                            <RemoveButton handleRemove={handleRemove} />\n                        </Col>\n                    }\n                </Row>\n                <p className=\"mb-0 author-nick-color\">\n                    <small>{playlist.author_name}</small>\n                </p>\n            </Col>\n        </Col>\n\n    )\n}\n\nexport default Playlist","import React, { useEffect, useReducer, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Row, Spinner } from 'react-bootstrap';\n\nimport * as playlistApi from '../../services/playlistService'\n\nimport { playlistsPageReducer, initialState } from './reducer'\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\nimport Playlist from '../../helpers/components/playlist';\n\nconst pathName = process.env.REACT_APP_PATH_NAME;\n\nfunction PlaylistsPage(props) {\n\n    let history = useHistory()\n\n    const [state, dispatch] = useReducer(playlistsPageReducer, initialState)\n    const { playlists, isLoading, isAllFetched, isInitialLoaded, playlistsCount } = state\n\n    const handleOnPlaylistsBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && isInitialLoaded) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isAllFetched, isLoading, isInitialLoaded])\n\n    useBottomScrollListener(handleOnPlaylistsBottom, { triggerOnNoScroll: true })\n\n    useEffect(() => {\n        async function fetchInitialPlaylists() {\n            await playlistApi.show({ limit: 12 })\n                .then(res => {\n                    const result = res.data;\n\n                    let filtered = result.filter(playlist => playlist.film_id)\n\n                    filtered.forEach(playlist => {\n                        playlist.img = `${process.env.REACT_APP_API_URL}films/${playlist.film_id}/thumbnail?width=preview`\n                    });\n\n                    dispatch({\n                        type: 'initial-success',\n                        playlists: filtered,\n                        responseCount: result.length\n                    })\n\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        dispatch({ type: 'clear' })\n        fetchInitialPlaylists()\n\n    }, [])\n\n    useEffect(() => {\n        async function fetchPlaylists() {\n            await playlistApi.show({ skip: playlistsCount, limit: 12 })\n                .then(res => {\n                    const result = res.data;\n\n                    let filtered = result.filter(playlist => playlist.film_id)\n\n                    filtered.forEach(playlist => {\n                        playlist.img = `${process.env.REACT_APP_API_URL}films/${playlist.film_id}/thumbnail?width=preview`\n                    });\n\n                    dispatch({\n                        type: 'success',\n                        playlists: filtered,\n                        responseCount: result.length\n                    })\n\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (isLoading && isInitialLoaded) fetchPlaylists()\n\n    }, [isLoading, isInitialLoaded, playlists, playlistsCount])\n\n\n    const setRedirect = (playlistID, filmID) => {\n        history.push({\n            pathname: `${pathName}film/` + filmID,\n            search: `?list=${playlistID}`\n        });\n    };\n\n\n    return (\n        <Row className=\"mt-5 mx-2\">\n            {\n                playlists && playlists.map((playlist, index) => <Playlist key={playlist.id} playlist={playlist} index={index} handleRedirect={setRedirect} />)\n            }\n            {\n                !isAllFetched && <div style={{ height: 32 + 'px', width: '100%' }} className=\"d-flex justify-content-center\">\n                    {(isLoading || !isInitialLoaded) && <Spinner animation=\"border\" />}\n                </div>\n            }\n\n        </Row>\n\n    )\n}\n\nexport default PlaylistsPage\n","const setFileInitialState = (isFilm) => {\n    return {\n        file: null,\n        name: isFilm ? CHOOSE_FILM : CHOOSE_THUMBNAIL,\n        preview: null\n    }\n}\n\nconst alertInitialState = {\n    type: '',\n    message: ''\n}\n\nexport const CHOOSE_FILM = `Choose a film `;\nexport const CHOOSE_THUMBNAIL = `Choose a thumbnail `;\n\nexport const filmAddInitialState = {\n    title: '',\n    description: '',\n    film: setFileInitialState(true),\n    thumbnail: setFileInitialState(false),\n    isSubmitted: false,\n    isSending: false,\n    isSuccess: false,\n    isError: false,\n    error: null\n}\n\nexport const filmAddReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                isError: false,\n                error: null,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'file-add': {\n            return action.isFilm === true ?\n                {\n                    ...state,\n                    isError: false,\n                    error: null,\n                    alert: alertInitialState,\n                    film: { file: action.file, name: action.fileName, preview: action.preview }\n                } : {\n                    ...state,\n                    isError: false,\n                    error: null,\n                    alert: alertInitialState,\n                    thumbnail: { file: action.file, name: action.fileName, preview: action.preview }\n                }\n        }\n        case 'file-clear': {\n            return action.isFilm === true ?\n                {\n                    ...state,\n                    isError: false,\n                    error: null,\n                    film: setFileInitialState(true)\n                } :\n                {\n                    ...state,\n                    isError: false,\n                    error: null,\n                    thumbnail: setFileInitialState(false)\n                }\n        }\n        case 'submit': {\n            return {\n                ...state,\n                isError: false,\n                error: null,\n                alert: alertInitialState,\n                isSubmitted: true\n            }\n        }\n        case 'send': {\n            return {\n                ...state,\n                isSending: true\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                isSending: false,\n                isSuccess: true\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isSending: false,\n                isSuccess: false,\n                isError: true,\n                error: action.payload\n            }\n        }\n        case 'error-422': {\n            return {\n                ...state,\n                isError: true,\n                error: action.payload,\n                film: setFileInitialState(true),\n                thumbnail: setFileInitialState(false)\n            }\n        }\n        default: return state\n    }\n}","import './filmAdd.css'\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport React, { useRef, useReducer, useEffect, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Alert, Button, Col, Form, FormControl, Row, Ratio, Spinner } from \"react-bootstrap\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { CHOOSE_FILM, CHOOSE_THUMBNAIL, filmAddInitialState, filmAddReducer } from './reducers/filmAddReducer';\n\nimport * as filmApi from '../../services/filmService'\nimport UserContext from '../../helpers/contexts/user/userContext';\n\nfunction FilmAdd() {\n\n\n    const { user, clearUser } = useContext(UserContext)\n\n    let history = useHistory()\n\n    const filmInputRef = useRef(null)\n    const thumbnailInputRef = useRef(null)\n\n    const [state, dispatch] = useReducer(filmAddReducer, filmAddInitialState)\n\n    const { title, description, film, thumbnail, isSubmitted, isSending, isError, error } = state\n\n    useEffect(() => {\n        if (!user.auth && user.isInitialLoaded) {\n            history.replace(`${process.env.REACT_APP_PATH_NAME}`)\n            history.push(`${process.env.REACT_APP_PATH_NAME}login`)\n            clearUser()\n        }\n    }, [user, history, clearUser])\n\n    useEffect(() => {\n        async function sendData() {\n\n            let filmData = new FormData();\n            filmData.set('title', title);\n            filmData.set('description', description);\n            filmData.set('film', film.file);\n            filmData.set('thumbnail', thumbnail.file);\n\n            await filmApi.create(filmData)\n                .then((res) => {\n                    dispatch({ type: 'success' })\n                    history.push(`${process.env.REACT_APP_PATH_NAME}film/${res.data.id}`);\n                })\n                .catch((error) => {\n                    let errorMessage = null\n\n                    if (error.response && error.response.data && error.response.data.error) {\n                        errorMessage = error.response.data.error\n                    } else if (error.response && error.response.data && error.response.data.errors) {\n                        if (error.response.data.errors.description)\n                            errorMessage = error.response.data.errors.description.message\n                        else if (error.response.data.errors.title)\n                            errorMessage = error.response.data.errors.title.message\n                    }\n\n                    if (error.response.status === 422) {\n                        dispatch({ type: 'error-422', payload: errorMessage })\n                    } else {\n                        dispatch({ type: 'error', payload: errorMessage })\n                    }\n                })\n        }\n\n        if (isSending) sendData()\n    }, [description, film.file, history, isSending, thumbnail.file, title])\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        dispatch({ type: 'submit' })\n\n        if (!user.auth) {\n            history.push(`${process.env.REACT_APP_PATH_NAME}add/login`);\n            return;\n        }\n\n        if (title && description) {\n            dispatch({ type: 'send' })\n        }\n    }\n\n    const handleFileChoose = (event, type) => {\n        event.preventDefault();\n\n        switch (type) {\n            case 'film':\n                dispatch({\n                    type: 'file-add',\n                    isFilm: true,\n                    file: filmInputRef.current.files[0],\n                    fileName: filmInputRef.current.files[0].name,\n                    preview: URL.createObjectURL(event.target.files[0])\n                })\n                break;\n\n            case 'thumbnail':\n                dispatch({\n                    type: 'file-add',\n                    isFilm: false,\n                    file: thumbnailInputRef.current.files[0],\n                    fileName: thumbnailInputRef.current.files[0].name,\n                    preview: URL.createObjectURL(event.target.files[0])\n                })\n                break;\n            default:\n                break;\n        }\n    }\n\n    return (\n        <Row className=\"mt-4 mx-2\" sm={12}>\n            <Col className=\"mb-4\" sm={6} lg={5}>\n\n                <Col className=\"mb-4\" xs={12} sm={12} lg={10} >\n                    <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\n                        <div\n                            className=\"position-relative justify-content-center d-flex align-items-center embed-responsive-item text-center box has-advanced-upload\">\n\n\n                            <Ratio aspectRatio=\"16x9\">\n                                <video muted={true} autoPlay={true} className=\"embed-responsive-item\" loop={true}\n                                    src={film.preview ? film.preview : \"\"}>\n                                </video>\n                            </Ratio>\n\n                            <input id=\"film\" accept=\"video/mp4, video/ogg\"\n                                onChange={event => handleFileChoose(event, 'film')}\n                                type=\"file\" ref={filmInputRef} className=\"inputfile\" />\n                            <label htmlFor=\"film\" className=\"position-absolute\">\n                                {\n                                    film.name === CHOOSE_FILM &&\n                                    <span>{film.name}</span>\n                                }\n                            </label>\n\n                            {\n                                film.preview &&\n                                <Col className=\"card-img-overlay film-add-item-opacity\" />\n                            }\n\n                            {\n                                film.preview &&\n                                <FontAwesomeIcon className=\"film-add-item-middle fa-3x\"\n                                    style={{ color: \"#ffffff\" }} icon=\"times\"\n                                    onClick={() => {\n                                        dispatch({ type: 'file-clear', isFilm: true })\n                                    }} />\n                            }\n\n                        </div>\n                    </div>\n                </Col>\n                <Col xs={12} sm={12} lg={10}>\n                    <div\n                        className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\n                        <div\n                            className=\"position-relative justify-content-center d-flex align-items-center embed-responsive-item text-center box has-advanced-upload\">\n                            <Ratio aspectRatio=\"16x9\">\n                                <img alt=\"\" src={thumbnail.preview ? thumbnail.preview : \"data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\"} />\n                            </Ratio>\n                            <input id=\"thumbnail\" accept=\"image/jpg, image/png, image/jpeg\"\n                                onChange={event => handleFileChoose(event, 'thumbnail')}\n                                type=\"file\" ref={thumbnailInputRef} className=\" inputfile position-absolute\" />\n                            <label htmlFor=\"thumbnail\" className=\"position-absolute\">\n\n                                {\n                                    thumbnail.name === CHOOSE_THUMBNAIL &&\n                                    <span>{thumbnail.name}</span>\n                                }\n                            </label>\n                            {\n                                thumbnail.preview &&\n                                <Col className=\"card-img-overlay film-add-item-opacity\" />\n                            }\n\n                            {\n                                thumbnail.preview &&\n                                <FontAwesomeIcon className=\"film-add-item-middle fa-3x\" style={{ color: \"#ffffff\" }} icon=\"times\"\n                                    onClick={() => {\n                                        dispatch({ type: 'file-clear', isFilm: false })\n                                    }} />\n                            }\n                        </div>\n                    </div>\n\n                </Col>\n            </Col>\n            <Col className=\"mb-2\" sm={6} lg={5}>\n\n                <Form.Group className=\"mb-3\" sm={12}>\n                    <FormControl\n                        placeholder=\"Title\"\n                        aria-label=\"Title\"\n                        aria-describedby=\"basic-addon1\"\n                        isInvalid={isSubmitted && !title}\n                        name=\"title\"\n                        value={title}\n                        onChange={e => dispatch({ type: 'field', fieldName: 'title', payload: e.target.value })}\n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Title is required\n                    </Form.Control.Feedback>\n                </Form.Group>\n\n                <Form.Group className=\"mb-3\" sm={12}>\n                    <FormControl\n                        placeholder=\"Description\"\n                        as=\"textarea\"\n                        aria-label=\"With textarea\"\n                        isInvalid={isSubmitted && !description}\n                        name=\"description\"\n                        value={description}\n                        onChange={e => dispatch({ type: 'field', fieldName: 'description', payload: e.target.value })}\n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Description is required\n                    </Form.Control.Feedback>\n                </Form.Group>\n\n                <Col className=\"mb-3 p-0 \" sm={12}>\n                    <Form.Group className=\"d-flex align-items-center\">\n                        <Button variant=\"primary\"\n                            disabled={isSending || !title || !description}\n                            onClick={!isSending ? handleSubmit : null}>\n                            {isSending ? 'Loading…' : 'Add'}\n                        </Button>\n\n                        {\n                            isSending &&\n                            <Spinner className=\"ms-2\" animation=\"grow\" />\n\n                        }\n                    </Form.Group>\n                </Col>\n\n                {\n                    isError &&\n                    <Alert variant=\"danger\">\n                        {error ? error : 'Error while creating film.'}\n                    </Alert>\n                }\n\n            </Col>\n\n\n        </Row>\n    )\n}\n\nexport default FilmAdd\n","export default __webpack_public_path__ + \"static/media/page-not-found.0e39e8d9.svg\";","import React, { useEffect } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { Col, Ratio } from \"react-bootstrap\";\n\nimport error_404 from '../../images/page-not-found.svg'; // Tell Webpack this JS file uses this image\n\nfunction NotFound() {\n\n    let history = useHistory()\n    let location = useLocation()\n\n    useEffect(() => {\n\n        if (location.pathname.includes('login')) history.replace(`${process.env.REACT_APP_PATH_NAME}login`)\n    }, [history, location])\n    \n    return (\n        <Col xs={12} sm={12} className=\"mt-4 px-4 embed-responsive embed-responsive-16by9\">\n            <Ratio aspectRatio=\"16x9\">\n                <img className=\"embed-responsive-item\" src={error_404} alt=\"\" />\n            </Ratio>\n        </Col>\n    )\n}\n\nexport default NotFound;","const userInitialState = {\n    name: '',\n    email: ''\n}\n\nexport const settingsInitialState = {\n    ...userInitialState,\n    password: '',\n    initialUser: userInitialState,\n    isInitialLoaded: false,\n    isSubmitted: false,\n    isSending: false,\n    error: '',\n    success: ''\n}\n\nexport const settingsReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                error: '',\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'initial-success': {\n            return {\n                ...state,\n                initialUser: {\n                    email: action.email,\n                    name: action.name\n                },\n                isInitialLoaded: true\n            }\n        }\n        case 'submit': {\n            return {\n                ...state,\n                isSubmitted: true,\n                error: null,\n            }\n        }\n        case 'send': {\n            return {\n                ...state,\n                isSending: true\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                isSubmitted: false,\n                isSending: false,\n                success: 'Changes saved successfully!',\n                error: null\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isSending: false,\n                isSubmitted: false,\n                error: action.payload\n            }\n        }\n        default: return state\n    }\n}","import { Modal, Form, Button, Spinner, Alert } from \"react-bootstrap\";\nimport { useEffect, useState, useReducer, useContext } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport UserContext from \"../../helpers/contexts/user/userContext\";\nimport { settingsInitialState, settingsReducer } from \"./reducer\";\nimport * as userApi from '../../services/userService'\n\nconst Settings = (props) => {\n\n    const { user, clearUser, updateUser } = useContext(UserContext)\n\n    let history = useHistory()\n    let location = useLocation()\n\n    const [state, dispatch] = useReducer(settingsReducer, settingsInitialState)\n    // eslint-disable-next-line no-unused-vars\n    const { email, name, password, initialUser, isSubmitted, isSending, isInitialLoaded, success, error } = state\n\n    const [show, setShow] = useState(true)\n\n    useEffect(() => {\n        if (!user.auth && user.isInitialLoaded) {\n            setShow(false)\n            history.replace(`${process.env.REACT_APP_PATH_NAME}`)\n            history.push(`${process.env.REACT_APP_PATH_NAME}login`)\n            clearUser()\n        }\n    }, [user, history, clearUser])\n\n    useEffect(() => {\n        async function getUser() {\n            await userApi.me()\n                .then(res => {\n                    dispatch({\n                        type: 'initial-success',\n                        name: res.data.name,\n                        email: res.data.email\n                    })\n                })\n                .catch(err => {\n                    console.error(err)\n                    dispatch({\n                        type: 'error',\n                        payload: true\n                    })\n                })\n        }\n        getUser()\n    }, [])\n\n    useEffect(() => {\n        async function updateUserData() {\n            let toUpdate = {}\n            if (password) toUpdate = { password: password }\n            if (email && email !== '' && email !== initialUser.email) toUpdate = { ...toUpdate, email: email }\n            if (name && name !== '' && name !== initialUser.name) toUpdate = { ...toUpdate, name: name }\n\n            await userApi.partialUpdate(toUpdate)\n                .then(res => {\n                    dispatch({\n                        type: 'success'\n                    })\n\n                    setTimeout(() => {\n                        let pathname = location.pathname.slice(0, -9)\n                        if (pathname === '') pathname = process.env.REACT_APP_PATH_NAME\n                        history.replace({\n                            pathname: pathname,\n                            search: location.search,\n                            state: location.state\n                        })\n                        updateUser(res.data.accessToken)\n                    }, 500)\n                })\n                .catch(err => {\n                    console.error(err)\n                    dispatch({\n                        type: 'error',\n                        payload: err.response && err.response.data && err.response.data.error ? err.response.data.error : 'Something went wrong!'\n                    })\n                })\n        }\n        if (isSending) updateUserData()\n    }, [email, initialUser.email, initialUser.name, isSending, name, password, history, location, updateUser])\n\n    const modalClose = () => {\n        setShow(false)\n        history.goBack();\n    };\n\n    const handleSubmit = (e) => {\n        e.preventDefault()\n\n        dispatch({\n            type: 'submit'\n        })\n\n        if (password ||\n            (email && email !== '' && email !== initialUser.email) ||\n            (name && name !== '' && name !== initialUser.name)) {\n            dispatch({\n                type: 'send'\n            })\n        }\n    }\n\n    return (\n        <Modal onHide={modalClose}\n            show={show}\n            size=\"lg\"\n            aria-labelledby=\"contained-modal-title-vcenter\"\n            centered>\n            <Modal.Header closeButton>\n                <Modal.Title>\n                    Settings\n                </Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <Form onSubmit={isSending ? null : handleSubmit}>\n                    <Form.Group>\n                        <Form.Label htmlFor=\"name\">Name</Form.Label>\n                        <Form.Control type=\"text\" name=\"email\"\n                            value={name} placeholder={initialUser.name}\n                            onChange={e => dispatch({ type: 'field', fieldName: 'name', payload: e.target.value })}>\n                        </Form.Control>\n                    </Form.Group>\n                    <Form.Group className=\"mt-2\">\n                        <Form.Label htmlFor=\"email\">Email</Form.Label>\n                        <Form.Control type=\"email\" name=\"email\"\n                            value={email} placeholder={initialUser.email}\n                            onChange={e => dispatch({ type: 'field', fieldName: 'email', payload: e.target.value })}>\n                        </Form.Control>\n                    </Form.Group>\n                    <Form.Group className=\"mt-2\">\n                        <Form.Label htmlFor=\"password\">Password</Form.Label>\n                        <Form.Control type=\"password\" name=\"password\"\n                            value={password} onChange={e => dispatch({ type: 'field', fieldName: 'password', payload: e.target.value })}>\n                        </Form.Control>\n                    </Form.Group>\n                    <Form.Group className=\"d-flex align-items-center mt-2\">\n                        <Button disabled={isSending || !isInitialLoaded} type=\"submit\" className=\"btn-primary\">\n                            Change\n                        </Button>\n\n                        {\n                            isSending &&\n                            <Spinner className=\"ms-2\" animation=\"grow\" />\n                        }\n                    </Form.Group>\n                </Form>\n                {\n                    error &&\n                    <Alert variant=\"danger\" className=\"mt-2 mb-0\">\n                        {error ? error : 'Error while logging in.'}\n                    </Alert>\n                }\n                {\n                    success &&\n                    <Alert variant=\"success\" className=\"mt-2 mb-0\">\n                        {success}\n                    </Alert>\n                }\n            </Modal.Body>\n        </Modal>\n    )\n}\n\nexport default Settings","import React, { useState, useReducer, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Alert, Button, Form, Modal, Spinner } from 'react-bootstrap';\nimport * as authApi from '../../services/authService'\nimport { authInitialState, authReducer } from './reducer';\n\nfunction ResetPassword(props) {\n\n    let history = useHistory()\n\n    const [state, dispatch] = useReducer(authReducer, authInitialState)\n\n    const { password, isSubmitted, isSending, isSuccess, isError, error } = state\n\n    const [show, setShow] = useState(true)\n\n    useEffect(() => {\n        async function sendData() {\n            await authApi.reset(props.match.params.token, { password: password })\n                .then(res => {\n                    dispatch({\n                        type: 'success'\n                    })\n\n                    setTimeout(function () {\n                        setShow(false);\n                        history.push(`${process.env.REACT_APP_PATH_NAME}`);\n                        setTimeout(function () {\n                            history.push(`${process.env.REACT_APP_PATH_NAME}login`);\n                        }, 500);\n                    }, 1500);\n\n                })\n                .catch(err => {\n                    let errorMessage = null;\n\n                    if (err.response && err.response.data && err.response.data.errors)\n                        errorMessage = err.response.data.errors;\n\n                    dispatch({\n                        type: 'error',\n                        payload: errorMessage\n                    })\n\n                })\n\n        }\n\n\n        if (isSending) sendData()\n\n    }, [isSending, history, password, props.match.params.token])\n\n    const handleSubmitPasswordChange = (e) => {\n        e.preventDefault();\n\n        dispatch({\n            type: 'submit'\n        })\n\n        if (props.match.params.token && password && password.length >= 6) {\n            dispatch({ type: 'send' })\n        }\n    }\n\n    const modalClose = () => {\n        setShow(false)\n        history.push(`${process.env.REACT_APP_PATH_NAME}`);\n    };\n\n    return (\n\n        <Modal\n            onHide={modalClose}\n            show={show}\n            size=\"lg\"\n            aria-labelledby=\"contained-modal-title-vcenter\"\n            centered\n        >\n            <Modal.Header closeButton>\n                <Modal.Title id=\"contained-modal-title-vcenter\">\n                    Reset\n                </Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <Form onSubmit={handleSubmitPasswordChange}>\n                    <Form.Group>\n                        <Form.Label htmlFor=\"password\">Password</Form.Label>\n                        <Form.Control isInvalid={isSubmitted && (password.length < 6)} type=\"password\"\n                            name=\"password\" value={password} maxLength=\"11\"\n                            onChange={e => dispatch({ type: 'field', fieldName: 'password', payload: e.target.value })}>\n                        </Form.Control>\n                        <Form.Control.Feedback type={\"invalid\"}>\n                            {\n                                password.length === 0 ? \"Password is required\" : \"Password too short (min 6 chars)\"\n                            }\n\n                        </Form.Control.Feedback>\n                    </Form.Group>\n\n                    {\n                        isSuccess &&\n                        <Alert variant=\"success\" className=\"mt-2\">\n                            Password has been reseated! Redirecting to login page.\n                        </Alert>\n                    }\n\n                    {\n                        isError &&\n                        <Alert variant=\"danger\" className=\"mt-2\">\n                            {error ? error : 'Error while resetting password.'}\n                        </Alert>\n                    }\n\n                    <Form.Group className=\"d-flex align-items-center mt-2\">\n                        <Button type=\"submit\" className=\"btn-primary\">\n                            Reset password\n                        </Button>\n\n                        {\n                            isSending &&\n                            <Spinner className=\"ms-2\" animation=\"grow\" />\n                            }\n                    </Form.Group>\n\n                </Form>\n\n            </Modal.Body>\n\n            <Modal.Footer>\n                <Button onClick={modalClose}>Close</Button>\n            </Modal.Footer>\n\n\n        </Modal>\n\n\n    );\n}\n\n\nexport default ResetPassword","import React, { useState, useReducer, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Alert, Button, Form, Modal, Spinner } from 'react-bootstrap';\nimport * as authApi from '../../services/authService'\nimport { authInitialState, authReducer } from './reducer';\n\nfunction ForgotPassword(props) {\n    let history = useHistory()\n\n    const [show, setShow] = useState(true)\n\n    const [state, dispatch] = useReducer(authReducer, authInitialState)\n\n    const { email, isSuccess, isSubmitted, isSending, isError, error } = state\n\n    useEffect(() => {\n        async function submitData() {\n\n            await authApi.forget({ email: email })\n                .then(res => {\n                    dispatch({\n                        type: 'success'\n                    })\n                })\n                .catch(err => {\n                    let errorMessage = null;\n\n                    if (err.response && err.response.data && err.response.data.errors)\n                        errorMessage = err.response.data.errors;\n\n                    dispatch({\n                        type: 'error',\n                        payload: errorMessage\n                    })\n\n                    console.error(err)\n                })\n        }\n        if (isSending) submitData()\n    }, [isSending, email])\n\n    const handleSubmitForgotRequest = (e) => {\n        e.preventDefault();\n\n        dispatch({\n            type: 'submit'\n        })\n\n        if (email) {\n            dispatch({\n                type: 'send'\n            })\n        }\n    };\n\n    const modalClose = () => {\n        setShow(false)\n        history.goBack();\n    };\n\n\n    return (\n\n        <Modal\n            onHide={modalClose}\n            show={show}\n            size=\"lg\"\n            aria-labelledby=\"contained-modal-title-vcenter\"\n            centered>\n            <Modal.Header closeButton>\n                <Modal.Title id=\"contained-modal-title-vcenter\">\n                    Forgot\n                </Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <Form onSubmit={handleSubmitForgotRequest}>\n                    <Form.Group>\n                        <Form.Label htmlFor=\"email\">Email</Form.Label>\n                        <Form.Control\n                            isInvalid={(isSubmitted && !email)}\n\n                            type=\"email\" name=\"email\" value={email} onChange={e => dispatch({ type: 'field', fieldName: 'email', payload: e.target.value })}>\n                        </Form.Control>\n                        <Form.Control.Feedback type=\"invalid\">\n                            Email is required\n                        </Form.Control.Feedback>\n                    </Form.Group>\n\n\n\n                    {\n                        isSuccess &&\n                        <Alert variant=\"success\" className=\"mt-2\">\n                            Email with link to reset password has been sent.\n                        </Alert>\n                    }\n\n                    {\n                        isError &&\n                        <Alert variant=\"danger\" className=\"mt-2\">\n                            {error ? error : \"Error while sending email.\"}\n                        </Alert>\n                    }\n\n                    <Form.Group className=\"d-flex align-items-center mt-2\">\n                        <Button type=\"submit\" className=\"btn-primary\">\n                            Reset password\n                        </Button>\n\n                        {\n                            isSending &&\n                            <Spinner className=\"ms-2\" animation=\"grow\" />\n                        }\n                    </Form.Group>\n\n                </Form>\n\n            </Modal.Body>\n\n            <Modal.Footer>\n                <Button onClick={modalClose}>Close</Button>\n            </Modal.Footer>\n\n\n        </Modal>\n\n\n    );\n}\n\nexport default ForgotPassword","import {Redirect, Route} from \"react-router\";\nimport React from \"react\";\n\nconst PrivateRoute = ({component: Component, ...rest}) => {\n    return <Route\n        {...rest}\n        render={props =>\n            localStorage.getItem('accessToken') ? (\n                <Component {...props} />\n            ) : (\n                <Redirect to={{\n                    pathname: `${process.env.REACT_APP_PATH_NAME}login`,\n                    state: {from: props.location}\n                }}/>\n            )\n        }/>\n};\n\nexport default PrivateRoute","import { filmsMaxFetchCount, playlistsMaxFetchCount } from \"../../config\"\n\nexport const initialProfileState = {\n    data: [],\n    isLoading: false,\n    isAllFetched: false,\n    isRemoving: false,\n    toRemove: null,\n    error: null,\n    filmsCount: 0,\n    playlistsCount: 0,\n}\n\nexport function profileReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'initial-success': {\n            return {\n                ...state,\n                isLoading: false,\n                isInitialLoaded: true,\n                isAllFetched: action.filmsCount < filmsMaxFetchCount && action.playlistsCount < playlistsMaxFetchCount,\n                filmsCount: state.filmsCount + action.filmsCount,\n                playlistsCount: state.playlistsCount + action.playlistsCount,\n                data: [...new Set(action.data)]\n            }\n        }\n        case 'load': {\n            return !state.isLoading && !state.isAllFetched && state.isInitialLoaded && !state.error ?\n                { ...state, isLoading: true, isAllFetched: false } :\n                state\n        }\n        case 'success': {\n            return {\n                ...state,\n                isLoading: false,\n                isAllFetched: action.filmsCount < filmsMaxFetchCount && action.playlistsCount < playlistsMaxFetchCount,\n                filmsCount: state.filmsCount + action.filmsCount,\n                playlistsCount: state.playlistsCount + action.playlistsCount,\n                data: [...new Set([...state.data, ...action.data])]\n            }\n        }\n        case 'remove': {\n            return {\n                ...state,\n                toRemove: action.payload,\n                isRemoving: true\n            }\n        }\n        case 'remove-success': {\n            return {\n                ...state,\n                isRemoving: false,\n                toRemove: null,\n                data: state.toRemove ? state.data.filter(resource => resource.id !== state.toRemove.id) : state.data\n            }\n        }\n        case 'change-playlist-privacy-success': {\n            return {\n                ...state,\n                data: state.data.map(data => {\n                    if (data.isPlaylist && data.id === action.payload.id) return { ...data, is_public: action.payload.is_public }\n                    return data\n                })\n            }\n        }\n        case 'clear': {\n            return initialProfileState\n        }\n        default: return state\n    }\n}","import React, { useEffect, useReducer, useCallback, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Row, Spinner } from 'react-bootstrap';\n\nimport { initialProfileState, profileReducer } from './reducer';\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\n\nimport Film from '../../helpers/components/film';\nimport Playlist from '../../helpers/components/playlist';\n\nimport * as userApi from '../../services/userService'\nimport * as playlistApi from '../../services/playlistService'\nimport * as filmApi from '../../services/filmService'\n\nimport image_not_found from '../../images/image_not_found.png'; // Tell Webpack this JS file uses this image\nimport RemoveModalContext from '../../helpers/contexts/removeModal/removeModalContext';\nimport UserContext from '../../helpers/contexts/user/userContext';\n\nconst Profile = (props) => {\n\n    const { user, clearUser } = useContext(UserContext)\n\n    const { showModal, clear, removeModalData } = useContext(RemoveModalContext)\n\n    let history = useHistory()\n\n    const [state, dispatch] = useReducer(profileReducer, initialProfileState)\n    const { data, isLoading, isAllFetched, isInitialLoaded, error, isRemoving, toRemove, filmsCount, playlistsCount } = state\n\n    const handleProfileOnBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && isInitialLoaded && !error) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isLoading, isAllFetched, isInitialLoaded, error])\n\n    useBottomScrollListener(handleProfileOnBottom, { triggerOnNoScroll: true })\n\n    useEffect(() => {\n        if (!user.auth && user.isInitialLoaded) {\n            history.replace(`${process.env.REACT_APP_PATH_NAME}`)\n            history.push(`${process.env.REACT_APP_PATH_NAME}login`)\n            clearUser()\n        }\n    }, [user, history, clearUser])\n    \n    useEffect(() => {\n        async function fetchInitialData() {\n\n            const [response] = await Promise.allSettled([\n                userApi.me({ skipFilms: 0, skipPlaylists: 0, limit: 12 })\n            ])\n\n            let data = []\n\n            let films = []\n            let playlists = []\n\n            if (response.status === \"fulfilled\") {\n                films = response.value.data.films.map(film => {\n                    return {\n                        ...film,\n                        img: `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=preview`,\n\n                    }\n                })\n\n                playlists = response.value.data.playlists.map(playlist => {\n                    const image = playlist.film_id ?\n                        `${process.env.REACT_APP_API_URL}films/${playlist.film_id}/thumbnail?width=preview` :\n                        image_not_found\n                    return {\n                        ...playlist,\n                        img: image,\n                        isPlaylist: true\n\n                    }\n                })\n\n                data = [...data, ...films, ...playlists]\n            }\n\n            dispatch({\n                type: 'initial-success',\n                data: data,\n                filmsCount: films.length,\n                playlistsCount: playlists.length,\n            })\n        }\n\n        dispatch({ type: 'clear' })\n        fetchInitialData()\n\n    }, [])\n\n    useEffect(() => {\n        async function fetchData() {\n            const [response] = await Promise.allSettled([\n                userApi.me({ skipFilms: filmsCount, skipPlaylists: playlistsCount, limit: 12 })\n            ])\n\n            let data = []\n\n            let films = []\n            let playlists = []\n\n            if (response.status === \"fulfilled\") {\n                films = response.value.data.films.map(film => {\n                    return {\n                        ...film,\n                        img: `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=preview`,\n\n                    }\n                })\n\n                playlists = response.value.data.playlists.map(playlist => {\n                    const image = playlist.film_id ?\n                        `${process.env.REACT_APP_API_URL}films/${playlist.film_id}/thumbnail?width=preview` :\n                        image_not_found\n                    return {\n                        ...playlist,\n                        img: image,\n                        isPlaylist: true\n\n                    }\n                })\n\n                data = [...data, ...films, ...playlists]\n            }\n\n            dispatch({\n                type: 'success',\n                data: data,\n                filmsCount: films.length,\n                playlistsCount: playlists.length,\n            })\n        }\n\n        if (isLoading && isInitialLoaded) fetchData()\n    }, [filmsCount, isLoading, playlistsCount, isInitialLoaded])\n\n    useEffect(() => {\n        async function remove() {\n\n            try {\n                if (toRemove.isPlaylist) {\n                    const resPlaylist = await playlistApi.remove(toRemove.id)\n                    if (resPlaylist.status === 204) {\n                        dispatch({\n                            type: 'remove-success'\n                        })\n                        clear()\n                    }\n                } else {\n                    const resFilm = await filmApi.remove(toRemove.id)\n                    if (resFilm.status === 204) {\n                        dispatch({\n                            type: 'remove-success'\n                        })\n                        clear()\n                    }\n                }\n            } catch (err) {\n                console.error(err)\n            }\n        }\n        if (isRemoving && removeModalData.isRemoving && toRemove &&\n            removeModalData.id === toRemove.id && removeModalData.title === toRemove.title &&\n            removeModalData.type === (toRemove.isPlaylist ? 'playlist' : 'film')) remove()\n    }, [isRemoving, removeModalData, toRemove, clear])\n\n    const handleRemove = (e, resource) => {\n        e.stopPropagation()\n        if (removeModalData.isRemoving) return\n        dispatch({\n            type: 'remove',\n            payload: resource\n        })\n        showModal(resource.id, resource.isPlaylist ? 'playlist' : 'film', resource.title)\n    };\n\n    const handleRedirectFilm = (id) => {\n        history.push({ pathname: `${process.env.REACT_APP_PATH_NAME}film/` + id });\n    }\n\n    const handleRedirectPlaylist = (record) => {\n        if (!record.film_id) return\n        history.push({\n            pathname: `${process.env.REACT_APP_PATH_NAME}film/` + record.film_id,\n            search: `?list=${record.id}`\n        });\n    }\n\n    return (\n        <Row className=\"mt-5 mx-2\">\n            {\n                data.map((record, index) => {\n                    if (record.isPlaylist) {\n                        return <Playlist key={record.id}\n                            playlist={record} index={index}\n                            isProfile={true}\n                            dispatchPrivacyUpdate={dispatch}\n                            handleRedirect={() => handleRedirectPlaylist(record)}\n                            handleRemove={(e) => handleRemove(e, record)} />\n                    } else {\n                        return <Film key={record.id} isProfile={true}\n                            film={record} index={index}\n                            handleRedirect={() => handleRedirectFilm(record.id)}\n                            handleRemove={(e) => handleRemove(e, record)} />\n                    }\n                })\n            }\n\n            {\n                !isAllFetched && <div style={{ height: 32 + 'px', width: '100%' }} className=\"d-flex justify-content-center\">\n                    {(isLoading || !isInitialLoaded) && <Spinner animation=\"border\" />}\n                </div>\n            }\n        </Row>\n    )\n}\n\n\nexport default Profile\n","import { useContext, useMemo } from 'react'\nimport { refresh } from '../../services/authService';\nimport axios from '../axios'\nimport UserContext from '../contexts/user/userContext';\n\nconst WithAxios = ({ children }) => {\n\n    const { logout } = useContext(UserContext);\n\n    useMemo(() => {\n        axios.interceptors.response.use((response) => {\n            return response\n        }, (error) => {\n            const isAuth = localStorage.getItem('accessToken')\n            const originalRequest = error.config\n\n            if (error.response && error.response.status === 401 && isAuth && !originalRequest._retry) {\n                if (error.config.url === 'auth/refresh') {\n                    logout()\n                    return Promise.reject(error)\n                }\n                originalRequest._retry = true\n                return refresh({ \"refreshToken\": JSON.parse(localStorage.getItem(\"refreshToken\")) })\n                    .then(res => {\n                        if (res.status === 201) {\n                            const accessToken = res.data.token\n                            localStorage.setItem('accessToken', JSON.stringify(accessToken))\n                            originalRequest.headers['Authorization'] = 'Bearer ' + accessToken\n                            return axios(originalRequest)\n                        }\n                    })\n            }\n            return Promise.reject(error);\n        })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    return children\n}\n\nexport default WithAxios","import { useState, useEffect } from 'react'\nimport { useLocation } from 'react-router-dom'\nimport UserContext from './userContext';\nimport jwt_decode from \"jwt-decode\";\n\nconst UserProvider = ({ children }) => {\n    let { pathname } = useLocation()\n\n    const [user, setUser] = useState({ name: '', id: null, auth: false, isInitialLoaded: false });\n\n    useEffect(() => {\n        window.scrollTo(0, 0)\n    }, [pathname])\n\n    useEffect(() => {\n        function getMe() {\n            const token = localStorage.getItem('accessToken')\n            if (!token) {\n                setUser(user => ({ ...user, isInitialLoaded: true }))\n                return\n            }\n            const decoded = jwt_decode(token);\n            setUser(() => ({\n                name: decoded.name,\n                auth: true,\n                id: decoded.id,\n                isInitialLoaded: true\n            }));\n        }\n        getMe()\n    }, [])\n\n    const login = (name, id, token, refreshToken) => {\n        localStorage.setItem('accessToken', JSON.stringify(token));\n        localStorage.setItem('refreshToken', JSON.stringify(refreshToken));\n\n        setUser(() => ({\n            name: name,\n            auth: true,\n            id: id,\n            isInitialLoaded: true\n        }));\n    };\n\n    const logout = () => {\n        localStorage.removeItem('accessToken');\n        localStorage.removeItem('refreshToken');\n\n\n        setUser((user) => ({\n            ...user,\n            name: '',\n            auth: false,\n            id: null\n        }));\n    };\n\n    const updateUser = (accessToken) => {\n        localStorage.setItem('accessToken', JSON.stringify(accessToken));\n\n        const decoded = jwt_decode(accessToken);\n        setUser((user) => ({\n            ...user,\n            name: decoded.name\n        }));\n\n        window.location.reload();\n    }\n\n    const clearUser = () => {\n        setUser((user) => ({\n            ...user,\n            isInitialLoaded: false\n        }));\n    }\n\n    return (\n        <UserContext.Provider value={{ user, login, logout, clearUser, updateUser }}>\n            {children}\n        </UserContext.Provider>\n    );\n};\n\nexport default UserProvider","import React, { useContext } from 'react';\nimport './App.css';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport NavbarComponent from './components/navbar';\n\nimport RemoveModal from './helpers/components/removeModal'\n\nimport HomeComponent from './components/homePage';\nimport FilmComponent from './components/filmPage';\nimport LoginComponent from './components/auth/login';\nimport RegisterComponent from './components/auth/register';\nimport SearchComponent from './components/searchPage';\nimport PlaylistsPage from './components/playlistsPage';\nimport AddFilmComponent from './components/add/filmAdd';\nimport NotFoundComponent from './components/notFound';\nimport SettingsComponent from './components/settings'\n\nimport { Route, BrowserRouter as Router } from 'react-router-dom';\n\n//  --------- icons ------------\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport {\n    faCaretDown,\n    faCaretUp,\n    faEllipsisV,\n    faEye,\n    faFilter,\n    faPlay,\n    faPlus,\n    faSearch,\n    faThumbsDown,\n    faThumbsUp,\n    faSortUp,\n    faSortDown,\n    faTrashAlt,\n    faTimes,\n    faGlobeEurope,\n    faLock\n} from '@fortawesome/free-solid-svg-icons'\n\nimport { Switch } from \"react-router\";\nimport ResetPasswordComponent from './components/auth/resetPassword';\nimport ForgotPasswordComponent from './components/auth/forgotPassword';\nimport PrivateRoute from './helpers/components/privateRoute';\nimport ProfileComponent from './components/profilePage';\n\nimport { Toast } from 'react-bootstrap'\nimport ToastContext from './helpers/contexts/toast/toastContext'\n\nimport WithAxios from \"./helpers/components/withAxios\";\nimport UserProvider from './helpers/contexts/user/userProvider';\n\nlibrary.add(faSearch, faPlus, faThumbsUp, faThumbsDown, faEye, faPlay, faFilter, faCaretUp, faCaretDown, faEllipsisV,\n    faSortDown, faSortUp, faTrashAlt, faTimes, faGlobeEurope, faLock);\n\nconst pathName = process.env.REACT_APP_PATH_NAME\n\nfunction App(props) {\n\n    const { toast, clearToast } = useContext(ToastContext)\n\n    return (\n        <div>\n            {\n                <div className=\"toast-root\">\n                    <Toast\n\n                        show={toast.isOpen}\n                        onClose={clearToast}\n                        autohide\n                        className=\"toast-element bg-secondary\">\n                        <Toast.Header>\n                            <strong className=\"me-auto\">Playlist</strong>\n                        </Toast.Header>\n                        <Toast.Body>{toast.message}</Toast.Body>\n                    </Toast>\n                </div>\n            }\n            <Router>\n                <UserProvider>\n                    <WithAxios>\n                        <Route component={() => <NavbarComponent />} />\n\n                        <PrivateRoute exact path={[`${pathName}settings`, `${pathName}profile/settings`, `${pathName}film/:id/settings`, `${pathName}search/settings`, `${pathName}add/settings`, `${pathName}playlists/settings`]}\n                            component={SettingsComponent} />\n\n                        <Route exact path={[`${pathName}login`, `${pathName}film/:id/login`, `${pathName}search/login`, `${pathName}add/login`, `${pathName}playlists/login`]}\n                            component={LoginComponent} />\n\n                        <Route exact path={[`${pathName}register`, `${pathName}film/:id/register`, `${pathName}search/register`, `${pathName}add/register`, `${pathName}playlists/register`]}\n                            component={RegisterComponent} />\n\n                        <Route exact path={[`${pathName}reset/:token`, `${pathName}film/:id/reset/:token`, `${pathName}search/reset/:token`, `${pathName}add/reset/:token`, `${pathName}playlists/reset/:token`]}\n                            component={ResetPasswordComponent} />\n\n                        <Route exact path={[`${pathName}forgot`, `${pathName}film/:id/forgot`, `${pathName}search/forgot`, `${pathName}add/forgot`, `${pathName}playlists/forgot`]}\n                            component={ForgotPasswordComponent} />\n\n                        <Switch>\n\n                            <Route exact path={[`${pathName}film/:id`, `${pathName}film/:id/login`, `${pathName}film/:id/register`, `${pathName}film/:id/reset/:token`,\n                            `${pathName}film/:id/forgot`, `${pathName}film/:id/settings`]} component={FilmComponent} />\n\n                            <Route exact path={[`${pathName}`, `${pathName}login`, `${pathName}register`, `${pathName}settings`,\n                            `${pathName}reset/:token`, `${pathName}forgot`]} component={HomeComponent} />\n\n                            <Route exact path={[`${pathName}search`, `${pathName}search/login`, `${pathName}search/settings`, `${pathName}search/register`, `${pathName}search/reset/:token`, `${pathName}search/forgot`]} component={SearchComponent} />\n\n                            <PrivateRoute exact path={[`${pathName}add`, `${pathName}add/settings`]} component={AddFilmComponent} />\n\n                            <Route exact path={[`${pathName}playlists`, `${pathName}playlists/login`, `${pathName}playlists/settings`, `${pathName}playlists/register`, `${pathName}playlists/reset/:token`,\n                            `${pathName}playlists/forgot`]} component={PlaylistsPage} />\n\n                            <PrivateRoute exact path={[`${pathName}profile`, `${pathName}profile/settings`]} component={ProfileComponent} />\n\n                            <Route exact path=\"*\" component={NotFoundComponent} />\n\n                        </Switch>\n                    </WithAxios>\n                </UserProvider>\n            </Router>\n            <RemoveModal />\n        </div>\n    );\n}\n\nexport default App\n\n","const isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { useState } from 'react'\nimport ToastContext from './toastContext'\n\nconst ToastProvider = ({ children }) => {\n    const [toast, setToast] = useState({ isOpen: false, message: '', isPrevoius: false })\n\n    const createToast = (message) => {\n        if (toast.isPrevoius) {\n            setToast({ isOpen: false, message: '', isPrevoius: true })\n            setTimeout(() => setToast({ isOpen: true, message: message, isPrevoius: true }), 850)\n        } else {\n            setToast({ isOpen: true, message: message, isPrevoius: true })\n        }\n    }\n\n    const clearToast = () => {\n        setToast({ isOpen: false, message: '', isPrevoius: false })\n    }\n\n    return (\n        <ToastContext.Provider value={{ toast, createToast, clearToast }}>\n            {children}\n        </ToastContext.Provider>\n    )\n}\n\nexport default ToastProvider","import { useState } from 'react'\nimport RemoveModalContext from './removeModalContext'\n\nconst RemoveModalProvider = ({ children }) => {\n\n    const [removeModalData, setRemoveModalData] = useState({ show: false, isRemoving: false, id: null, type: null, title: '' })\n\n    const showModal = (id, type, title) => {\n        setRemoveModalData({ show: true, isRemoving: false, id: id, type: type, title: title })\n    }\n\n    const remove = () => {\n        setRemoveModalData(prevState => {\n            return { ...prevState, show: false, isRemoving: true }\n        })\n    }\n\n    const clear = () => {\n        setRemoveModalData({ show: false, isRemoving: false, id: null, type: null, title: '' })\n    }\n\n    return (\n        <RemoveModalContext.Provider value={{ showModal, removeModalData, remove, clear }} >\n            {children}\n        </RemoveModalContext.Provider>\n    )\n}\n\nexport default RemoveModalProvider","import \"es6-promise\";\nimport \"isomorphic-fetch\";\n\nimport 'react-app-polyfill/ie9';\nimport 'react-app-polyfill/ie11';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport ToastProvider from \"./helpers/contexts/toast/toastProvider\";\nimport RemoveModalProvider from \"./helpers/contexts/removeModal/removeModalProvider\";\n\nReactDOM.render(\n    <ToastProvider>\n        <RemoveModalProvider>\n            <App />\n        </RemoveModalProvider>\n    </ToastProvider>\n    ,\n    document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}