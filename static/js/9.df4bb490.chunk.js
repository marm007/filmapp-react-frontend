(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[9],{508:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return me}));var n=c(47),a=c(136),i=c(15),s=c(1),r=Object(s.createContext)(),l=c(2),o={isPreviewLoaded:!1,playerHeight:null,reloadPlaylist:!1,error:null},d=function(e,t){switch(t.type){case"field":return Object(i.a)(Object(i.a)({},e),{},Object(a.a)({},t.fieldName,t.payload));case"success":return Object(i.a)(Object(i.a)({},e),{},{isPreviewLoaded:!0,error:null});default:return e}},u=function(e){var t=e.children,c=Object(s.useReducer)(d,o),a=Object(n.a)(c,2),i=a[0],u=a[1];return Object(l.jsx)(r.Provider,{value:[i,u],children:t})},j=c(8),m=c(560),b=c.n(m),p=c(531),f=c.n(p),h=c(532),O=c(533),x=c(46),v=c(670),y=c(542),g=c(549),w=c(83);function N(e){var t=e.filmId,c=e.data,a=Object(j.g)(),i=Object(s.useState)(!1),r=Object(n.a)(i,2),o=r[0],d=r[1],u=Object(s.useState)({likes:"",dislikes:"",isLiked:!1,isDisliked:!1}),m=Object(n.a)(u,2),b=m[0],p=m[1];function v(e){return w.apply(this,arguments)}function w(){return(w=Object(h.a)(f.a.mark((function e(c){var n,i,s,r,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==c&&!o){e.next=2;break}return e.abrupt("return");case 2:return d(!0),e.prev=3,e.next=6,Object(y.e)(t,{action:c});case 6:return n=e.sent,e.next=9,Object(g.a)({details:!0});case 9:i=e.sent,s=i.data.details,r=s.liked.indexOf(t)>-1,l=s.disliked.indexOf(t)>-1,p({isLiked:r,isDisliked:l,likes:n.data.likes,dislikes:n.data.dislikes}),d(!1),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(3),console.error(e.t0),d(!1),e.t0.response&&401===e.t0.response.status&&a.push("".concat(a.location.pathname,"/login"));case 22:case"end":return e.stop()}}),e,null,[[3,17]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){p(c)}),[c]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"col-4 col-sm-4 text-right d-flex justify-content-end",children:Object(l.jsxs)("p",{className:"".concat(b.isLiked?"film-picked-thumb-color":""," cursor-pointer noselect"),onClick:function(){return v("like")},children:[Object(l.jsx)(O.a,{icon:x.l}),"\u2002",b.likes]})}),Object(l.jsx)("div",{className:"col-4 col-sm-4 d-flex justify-content-start",children:Object(l.jsxs)("p",{className:"".concat(b.isDisliked?"film-picked-thumb-color":""," cursor-pointer noselect"),onClick:function(){return v("dislike")},children:[Object(l.jsx)(O.a,{icon:x.k}),"\u2002",b.dislikes]})})]})}var k=c(548),L=c.n(k);function C(e){var t=e.description,c=Object(j.i)().id,a=Object(s.useState)(!1),i=Object(n.a)(a,2),r=i[0],o=i[1];Object(s.useEffect)((function(){o(!1)}),[c]);var d=function(e){e.preventDefault(),o(!r)},u=function(e){return Object(l.jsx)("span",{children:Object(l.jsx)("button",{className:"btn btn-link p-0 m-0 mb-1 title font-weight-bold",onClick:d,children:e})})};return Object(l.jsxs)("div",{className:"col-12 col-sm-12 p-0",style:{whiteSpace:"pre-line",textAlign:"justify"},children:[Object(l.jsx)(L.a,{line:!r&&2,truncateText:"\u2026",text:t,textTruncateChild:u("Show more")}),r&&u("Show less")]})}c(687),c(581);var S=function(){var e=Object(j.g)(),t=Object(j.i)().id,c=Object(s.useContext)(w.a).user,a=Object(s.useContext)(r),o=Object(n.a)(a,2),d=(o[0],o[1]),u=Object(s.useState)({img:"",video:"",film:"",title:"",views:"",description:"\r\n\n\n"}),m=Object(n.a)(u,2),b=m[0],p=m[1],k=Object(s.useState)({likes:"",dislikes:"",isLiked:!1,isDisliked:!1}),L=Object(n.a)(k,2),S=L[0],R=L[1],F=Object(s.useCallback)((function(e){null!==e&&(d({type:"field",fieldName:"playerHeight",payload:e.getBoundingClientRect().height}),_(e))}),[d]),E=Object(s.useState)(null),D=Object(n.a)(E,2),I=D[0],_=D[1];return Object(s.useEffect)((function(){if(I){var e=function(){d({type:"field",fieldName:"playerHeight",payload:I.getBoundingClientRect().height})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}}),[I,d]),Object(s.useEffect)((function(){function e(){return(e=Object(h.a)(f.a.mark((function e(){var a,s,r,l,o,u,j,m,b,h,O;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[Object(y.i)(t),Object(y.c)(t)],c.auth&&a.push(Object(g.a)({details:!0})),e.next=4,Promise.allSettled(a);case 4:if(s=e.sent,r=Object(n.a)(s,3),l=r[0],o=r[1],u=r[2],"rejected"!==o.status&&"rejected"!==l.status){e.next=13;break}return d({type:"field",fieldName:"error",payload:!0}),document.title="FilmApp",e.abrupt("return");case 13:j=o.value.data,d({type:"success"}),m=Object(i.a)(Object(i.a)({},j),{},{img:"".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(j.id,"/thumbnail?width=poster"),video:"".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(j.id,"/video"),views:l.value.data.views}),b=!1,h=!1,u&&"fulfilled"===u.status&&(O=u.value.data.details,b=O.liked.indexOf(t)>-1,h=O.disliked.indexOf(t)>-1),R({isLiked:b,isDisliked:h,likes:m.likes,dislikes:m.dislikes}),p(m),document.title="".concat(m.title," - FilmApp");case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,d,c.auth,e.location.state]),Object(l.jsxs)("div",{className:"p-0",children:[Object(l.jsx)("div",{className:"col-12 col-sm-12 preview-margins p-0",children:Object(l.jsx)("div",{ref:F,children:Object(l.jsx)(v.Player,{playsInline:!0,poster:b.img,src:b.video})})}),b&&Object(l.jsxs)("div",{className:"px-0",children:[Object(l.jsx)("div",{className:"col-12 col-sm-12 mt-4 p-0",children:Object(l.jsxs)("div",{className:"row p-0 m-0",children:[Object(l.jsxs)("div",{className:"col-12 col-sm-12 p-0",children:[!b.title&&Object(l.jsx)("p",{className:"font-weight-bold",children:Object(l.jsx)("br",{})}),Object(l.jsx)("p",{className:"font-weight-bold",children:b.title})]}),Object(l.jsx)("div",{className:"col-4 col-sm-4 p-0",children:Object(l.jsxs)("p",{children:[Object(l.jsx)(O.a,{icon:x.c})," \u2002",b.views]})}),Object(l.jsx)(N,{filmId:t,data:S}),Object(l.jsx)("div",{className:"col-12 col-sm-12 mt-4 mb-4 divider"}),Object(l.jsx)(C,{description:b.description})]})}),Object(l.jsx)("div",{className:"col-12 col-sm-12 mt-4 mb-2 divider p-0"})]})]})},R=c(541),F=c(539),E={films:null,isLoading:!1,isAllLoaded:!1,isInitialLoaded:!1,error:null};function D(e,t){switch(t.type){case"field":return Object(i.a)(Object(i.a)({},e),{},Object(a.a)({},t.fieldName,t.payload));case"clear":return E;case"initial-success":return Object(i.a)(Object(i.a)({},E),{},{isInitialLoaded:!0,films:t.payload});case"load":return e.isLoading||e.isAllLoaded||!e.isInitialLoaded||e.error?e:Object(i.a)(Object(i.a)({},e),{},{isLoading:!0,isAllLoaded:!1});case"success":return Object(i.a)(Object(i.a)({},e),{},{films:[].concat(Object(R.a)(e.films),Object(R.a)(t.payload)),isLoading:!1,isAllLoaded:t.payload.length<F.e});case"error":return Object(i.a)(Object(i.a)({},E),{},{error:t.payload});default:return e}}var I=c(603),_=c(555),A=c(569),P=c.n(A),M=function(){return Object(l.jsx)("div",{className:"col-12 mx-0 mb-4 container-px",children:Object(l.jsxs)("div",{className:"row p-0 m-0",children:[Object(l.jsx)("div",{className:"col-6 col-sm-6 m-0 p-0",children:Object(l.jsx)("div",{className:"embed-responsive embed-responsive-16by9 p-0",children:Object(l.jsx)(P.a,{className:"embed-responsive-item w-100 h-100 p-0"})})}),Object(l.jsxs)("div",{className:"col-6 col-sm-6 m-0",children:[Object(l.jsx)("div",{className:"row m-0 h-25",children:Object(l.jsx)("div",{className:"col p-0 w-100 h-100",children:Object(l.jsx)(P.a,{className:"w-100 h-100 line-height-unset"})})}),Object(l.jsx)("div",{className:"pt-2 h-75",children:Object(l.jsx)(P.a,{className:"w-100 h-100 line-height-unset"})})]})]})})},H=c(544),B=c(547),Y=function(e){var t=e.handleRedirect,c=Object(j.i)().id,a=Object(B.a)(768),i=Object(s.useContext)(r),o=Object(n.a)(i,2),d=o[0],u=o[1],m=Object(s.useReducer)(D,E),b=Object(n.a)(m,2),p=b[0],O=p.films,x=p.isLoading,v=p.isAllLoaded,g=p.error,w=b[1],N=Object(s.useCallback)((function(){w({type:"load"})}),[]);return Object(H.a)(N),Object(s.useEffect)((function(){function e(){return(e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a({exclude:c,limit:F.e,preview:!0}).then((function(e){var t=e.data;t.forEach((function(e){e.img="".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail")})),w({type:"initial-success",payload:t})})).catch((function(e){return console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}w({type:"clear"}),d.isPreviewLoaded&&function(){e.apply(this,arguments)}()}),[c,d.isPreviewLoaded]),Object(s.useEffect)((function(){d.error&&w({type:"error",payload:d.error})}),[d.error]),Object(s.useEffect)((function(){function e(){return(e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a({exclude:c,skip:O.length,limit:F.e,preview:!0}).then((function(e){var t=e.data;t.forEach((function(e){e.img="".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail")})),w({type:"success",payload:t})})).catch((function(e){return console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}x&&O&&c&&function(){e.apply(this,arguments)}()}),[x,c,O]),Object(l.jsxs)("div",{className:"row m-0",children:[O?O.map((function(e,c){return Object(l.jsx)(I.a,{film:e,index:c,isRecommendations:!0,filmDispatch:u,handleRedirect:function(){return t(e)}},e.id)})):Object(R.a)(Array(24)).map((function(e,t){return a?Object(l.jsx)(_.a,{isRecommendations:!0},t):Object(l.jsx)(M,{},t)})),!v&&Object(l.jsx)("div",{className:"fetch-loader d-flex justify-content-center",children:x&&!g&&Object(l.jsx)("div",{className:"spinner-border"})})]})},z={comments:null,commentsCount:null,currentSort:null,isLoading:!1,isAllLoaded:!1,isInitialLoaded:!1,isAdding:!1,isSorting:!1,isRemoving:!1,error:null};function T(e,t){switch(t.type){case"field":return Object(i.a)(Object(i.a)({},e),{},Object(a.a)({},t.fieldName,t.payload));case"clear":return Object(i.a)({},z);case"initial-success":return Object(i.a)(Object(i.a)({},e),{},{comments:t.payload.comments,commentsCount:t.payload.comments_count,isAllLoaded:t.payload.comments.length<F.a,isInitialLoaded:!0,error:null});case"load":return!e.isInitialLoaded||e.isLoading||e.isAllLoaded||e.isAdding||e.isSorting||e.isRemoving||e.error?e:Object(i.a)(Object(i.a)({},e),{},{isLoading:!0});case"load-success":return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1,comments:[].concat(Object(R.a)(e.comments),Object(R.a)(t.payload)),isAllLoaded:t.payload.length<F.a});case"add":return Object(i.a)(Object(i.a)({},e),{},{isAdding:!0,error:null});case"add-success":return Object(i.a)(Object(i.a)({},e),{},{isAdding:!1,comments:[t.payload].concat(Object(R.a)(e.comments)),commentsCount:e.commentsCount+1});case"remove":return Object(i.a)(Object(i.a)({},e),{},{isRemoving:!0});case"remove-success":return Object(i.a)(Object(i.a)({},e),{},{isRemoving:!1,commentsCount:e.commentsCount-1,comments:e.comments.filter((function(e){return e.id!==t.payload}))});case"sort":return Object(i.a)(Object(i.a)({},e),{},{comments:null,isSorting:!0});case"sort-success":return Object(i.a)(Object(i.a)({},e),{},{isSorting:!1,currentSort:t.payload.currentSort,comments:t.payload.comments});case"error":return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1,isAdding:!1,isSorting:!1,error:t.payload});default:return e}}var U=c(43),W=c(137),J=function(e,t){return U.a.get("films/".concat(e,"/comments"),{params:t})},q=function(e){return U.a.delete("comments/".concat(e),{headers:Object(W.a)()})},G=c(536);function K(e){var t=e.filmId,c=e.dispatch,a=Object(s.useState)(""),i=Object(n.a)(a,2),r=i[0],o=i[1],d=Object(s.useState)(!1),u=Object(n.a)(d,2),j=u[0],m=u[1],b=function(e){return e.preventDefault(),m(!0),c({type:"add"}),(n=t,a={text:r},U.a.post("films/".concat(n,"/comments"),a,{headers:Object(W.a)()})).then((function(e){o(""),m(!1),c({type:"add-success",payload:e.data})})).catch((function(e){o(""),m(!1),c({type:"error",payload:e.response.status})}));var n,a};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("form",{onSubmit:function(e){return r&&!j?b(e):null},children:[Object(l.jsx)("div",{id:"fiordur",children:Object(l.jsx)("input",{type:"text",placeholder:"Comment",value:r,onChange:function(e){var t=e.target;return o(t.value)}})}),Object(l.jsx)("div",{className:"col d-flex justify-content-end",children:Object(l.jsx)("button",{disabled:j||!r,type:"submit",className:"btn btn-primary mt-3",children:"Submit"})})]}),j&&Object(l.jsx)("div",{style:{height:"32px"},className:"d-flex justify-content-center",children:Object(l.jsx)("div",{className:"spinner-border"})})]})}function Q(e){var t=e.filmId,c=e.dispatch,r=Object(s.useState)(!1),o=Object(n.a)(r,2),d=o[0],u=o[1],j=Object(s.useState)(null),m=Object(n.a)(j,2),b=m[0],p=m[1],f=Object(s.useState)([{id:"created_at",title:"By date",dir:1},{id:"author_name",title:"By author name",dir:1}]),h=Object(n.a)(f,2),x=h[0],v=h[1],y=function(e,n){e.preventDefault();var s="created_at"===n?x[0]:"author_name"===n?x[1]:null;if(s){u(!0),b&&b.id===s.id?(s.dir*=-1,1===s.dir?p(null):p(s)):p(s),v(x.map((function(e){return e.id===s.id?s:e}))),c({type:"sort"});var r={limit:F.a};return r=s?Object(i.a)(Object(i.a)({},r),{},Object(a.a)({},s.id,s.dir)):r,function(e,t){return U.a.get("films/".concat(e,"/comments/sort"),{params:t,headers:Object(W.a)()})}(t,r).then((function(e){u(!1),c({type:"sort-success",payload:{comments:e.data,currentSort:b}})})).catch((function(e){u(!1),c({type:"error",payload:"Sort error."}),console.error(e)}))}};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"dropdown col-2 col-sm-2",children:[Object(l.jsx)("button",{className:"btn btn-secondary dropdown-toggle",id:"sortDropDown","data-toggle":"dropdown","aria-expanded":"false",children:"Sort"}),Object(l.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"#sortDropDown",children:x.map((function(e){return Object(l.jsx)("li",{onClick:function(t){return y(t,e.id)},children:Object(l.jsxs)("a",{className:"dropdown-item".concat(b&&e.id===b.id?" active":""),href:"#",role:"button",children:[e.title,b?b.id===e.id&&1===e.dir?Object(l.jsx)(O.a,{className:"ml-2",icon:"sort-up"}):b.id===e.id&&-1===e.dir?Object(l.jsx)(O.a,{className:"ml-2",icon:"sort-down"}):"":""]})},e.id)}))})]}),d&&Object(l.jsx)("div",{style:{height:"32px"},className:"d-flex justify-content-center",children:Object(l.jsx)("div",{className:"spinner-border"})})]})}var V=c(545),X=c(84);function Z(e){var t=e.id,c=e.text,a=e.dispatch,i=Object(s.useContext)(X.a),r=i.showModal,o=i.clear,d=i.removeModalData,u=Object(s.useState)(!1),j=Object(n.a)(u,2),m=j[0],b=j[1];Object(s.useEffect)((function(){function e(){return(e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t).then((function(e){b(!1),a({type:"remove-success",payload:t}),o()})).catch((function(e){b(!1),o(),console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}m&&d.isRemoving&&"comment"===d.type&&d.id===t&&function(){e.apply(this,arguments)}()}),[m,o,d,t,a]);return Object(l.jsx)(V.a,{className:"m-button cursor-pointer button-ripple-24 d-flex justify-content-center align-items-center remove-holder p-0 m-0 ml-auto",onClick:function(){d.isRemoving||(b(!0),a({type:"remove"}),r(t,"comment",c.substring(0,10).concat("...")))},children:Object(l.jsx)(O.a,{icon:"trash-alt"})})}var $=function(){var e=Object(j.i)().id,t=Object(s.useContext)(w.a).user,c=Object(s.useContext)(r),o=Object(n.a)(c,2),d=o[0],u=(o[1],Object(s.useReducer)(T,z)),m=Object(n.a)(u,2),b=m[0],p=b.comments,O=b.commentsCount,x=b.isLoading,v=b.isAllLoaded,g=b.currentSort,N=b.error,k=m[1],L=Object(s.useCallback)((function(){k({type:"load"})}),[]);return Object(H.a)(L),Object(s.useEffect)((function(){d.error&&k({type:"error",payload:d.error})}),[d.error]),Object(s.useEffect)((function(){var t=function(){var t=Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.d(e).then((function(e){k({type:"initial-success",payload:e.data})})).catch((function(e){console.error(e),k({type:"error",payload:"Something went wrong!"})}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();d.isPreviewLoaded&&t()}),[e,d.isPreviewLoaded]),Object(s.useEffect)((function(){function t(){return(t=Object(h.a)(f.a.mark((function t(){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={skip:p.length,limit:F.a},c=g?Object(i.a)(Object(i.a)({},c),{},Object(a.a)({},g.id,g.dir)):c,t.next=4,J(e,c).then((function(e){k({type:"load-success",payload:e.data})})).catch((function(e){k({type:"error"})}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}x&&e&&function(){t.apply(this,arguments)}()}),[x,p,g,e]),Object(l.jsxs)("div",{className:"col p-0",children:[Object(l.jsxs)("div",{className:"row p-0 mt-4 mb-4",children:[Object(l.jsx)("div",{className:"col-7 col-sm-5 col-md-4 d-flex align-items-center ",children:null!==O&&Object(l.jsxs)("span",{children:[O,1===O?" comment":" comments"," "]})}),Object(l.jsx)(Q,{filmId:e,dispatch:k})]}),Object(l.jsx)(K,{filmId:e,dispatch:k}),p&&p.map((function(e){return Object(l.jsxs)("div",{className:"col col-sm-12 p-0 mt-4 remove-container",children:[Object(l.jsxs)("div",{className:"d-flex",children:[Object(l.jsx)("p",{className:"m-0 font-weight-bold",children:Object(l.jsxs)("small",{className:"m-0 font-weight-bold",children:[e.author_name,"\xa0"]})}),Object(l.jsx)("p",{children:Object(l.jsx)("small",{className:"m-0",children:Object(G.a)(e)})}),t.id===e.author_id&&Object(l.jsx)(Z,{id:e.id,text:e.text,dispatch:k})]}),Object(l.jsx)("p",{className:"d-block d-sm-block",children:Object(l.jsx)("small",{children:e.text})})]},e.id)})),!v&&Object(l.jsx)("div",{className:"fetch-loader d-flex justify-content-center",children:x&&!N&&Object(l.jsx)("div",{className:"spinner-border"})})]})},ee=c(688),te=c.n(ee),ce={playlist:null,currentFilm:null,currentFilmIndex:0,isLoading:!1,headerHeight:null,playerHeight:null},ne=function(e,t){switch(t.type){case"field":return Object(i.a)(Object(i.a)({},e),{},Object(a.a)({},t.fieldName,t.payload));case"success":return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1,playlist:t.playlist,currentFilm:t.currentFilm,currentFilmIndex:t.currentFilmIndex});case"clear":return ce;case"remove-film":return Object(i.a)(Object(i.a)({},e),{},{removingFilmId:t.payload,isRemovingFilm:!0});case"remove-film-success":var c=e.playlist.films.filter((function(e){return e.id!==t.payload}));return Object(i.a)(Object(i.a)({},e),{},{currentFilm:t.payload===e.currentFilm?null:e.currentFilm,currentFilmIndex:t.payload===e.currentFilm?0:c.findIndex((function(t){return t.id===e.currentFilm}))+1,playlist:Object(i.a)(Object(i.a)({},e.playlist),{},{films:c}),isRemovingFilm:!1});case"change-playlist-privacy-success":return Object(i.a)(Object(i.a)({},e),{},{playlist:Object(i.a)(Object(i.a)({},e.playlist),{},{is_public:t.payload.is_public})});case"error":return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1,error:t.payload});default:return e}},ae=c(553),ie=c(543),se=c(559),re=c(580),le=c(554);function oe(e){var t=e.playlist,c=e.dispatch,a=Object(s.useContext)(X.a),i=a.showModal,r=a.clear,o=a.removeModalData,d=Object(s.useContext)(w.a).user,u=Object(s.useState)(!1),j=Object(n.a)(u,2),m=j[0],b=j[1];Object(s.useEffect)((function(){function e(){return(e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,Object(ie.d)(t.id).then((function(e){b(!1),c({type:"clear"}),r()})).catch((function(e){b(!1),console.error(e),r()}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}m&&o.isRemoving&&o.id===t.id&&"playlist"===o.type&&function(){e.apply(this,arguments)}()}),[m,r,c,t,o]);return Object(l.jsx)("div",{style:{width:"24px"},className:"p-0 justify-content-end d-flex",children:d.id===t.author_id&&Object(l.jsx)(le.a,{handleRemove:function(){o.isRemoving||(b(!0),i(t.id,"playlist",t.title))}})})}function de(e){var t=e.playlist,c=e.filmId,n=e.dispatch;function a(){return(a=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ie.c)(t.id,{films_id:[c],is_remove_films:!0}).then((function(e){n({type:"remove-film-success",payload:c})})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useContext)(w.a).user.id===t.author_id?Object(l.jsx)("div",{style:{width:"24px"},className:"p-0 d-flex align-items-center justify-content-center",children:Object(l.jsx)(le.a,{handleRemove:function(){return a.apply(this,arguments)}})}):null}c(691);var ue=function(e){var t=e.handleRedirect,c=Object(j.h)(),a=Object(j.i)().id,i=Object(s.useContext)(w.a).user,o=Object(s.useContext)(r),d=Object(n.a)(o,2),u=d[0],m=d[1],p=Object(s.useReducer)(ne,ce),x=Object(n.a)(p,2),v=x[0],y=v.playlist,g=v.currentFilm,N=v.currentFilmIndex,k=v.headerHeight,C=v.playerHeight,S=v.error,R=x[1],F=Object(s.useCallback)((function(e){null!==e&&R({type:"field",fieldName:"headerHeight",payload:e.getBoundingClientRect().height})}),[]);return Object(s.useEffect)((function(){R({type:"field",fieldName:"playerHeight",payload:u.playerHeight})}),[u.playerHeight]),Object(s.useEffect)((function(){R({type:"error",payload:u.error})}),[u.error]),Object(s.useEffect)((function(){function e(){return(e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.b(y.id).then((function(e){var t=0,c=null;return Array.prototype.forEach.call(e.data.films,(function(e,n){e&&e.id===a&&(t=n+1,c=e.id)})),R({type:"success",playlist:e.data,currentFilm:c,currentFilmIndex:t}),m({type:"field",fieldName:"reloadPlaylist",payload:!1}),e.data})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.reloadPlaylist&&y&&function(){e.apply(this,arguments)}()}),[u.reloadPlaylist,y,m,a]),Object(s.useEffect)((function(){var e=b.a.parse(c.search);function t(){return(t=Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie.b(e.list).then((function(e){var t=0,c=null;return Array.prototype.forEach.call(e.data.films,(function(e,n){e&&e.id===a&&(t=n+1,c=e.id)})),R({type:"success",playlist:e.data,currentFilm:c,currentFilmIndex:t}),e.data})).catch((function(e){console.error(e),R({type:"clear"})}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.list?!S&&u.isPreviewLoaded&&function(){t.apply(this,arguments)}():R({type:"clear"})}),[a,c.search,S,u.isPreviewLoaded]),y&&C&&!S&&Object(l.jsx)("div",{className:"col mb-4",children:Object(l.jsxs)("div",{className:"col p-0 border",children:[Object(l.jsx)("div",{ref:F,style:{height:k+"px"},className:"col remove-container pt-2 pb-2 film-preview-playlist-header",sm:12,children:Object(l.jsxs)("div",{className:"row m-0 px-2",children:[Object(l.jsx)("div",{className:"button-ripple-div-next-width colbutton-ripple-div-next-width",children:Object(l.jsx)("p",{className:"mb-1 font-weight-bold film-preview-playlist-text-truncate",children:y.title})}),Object(l.jsx)(oe,{playlist:y,dispatch:R}),Object(l.jsxs)("div",{className:"col-12 col-sm-12 p-0",children:[i.id===y.author_id&&Object(l.jsx)(se.a,{id:y.id,isPublic:y.is_public,isPlaylist:!0,dispatchPrivacyUpdate:R}),i.id===y.author_id&&Object(l.jsx)("small",{children:"\xa0"}),Object(l.jsxs)("small",{children:[y.author_name,"\xa0"]}),Object(l.jsxs)("small",{className:"film-preview-playlist-index",children:["- ",N,"/",y.films.length]})]})]})}),Object(l.jsx)("div",{style:{height:C-k+"px"},className:"col-12 col-sm-12 p-0 film-preview-playlist-container",children:Object(l.jsx)(te.a,{onYReachEnd:function(){},onScrollY:function(){},children:y.films.map((function(e,c){return Object(l.jsxs)("div",{className:"row m-0 p-0 pr-2 remove-container",children:[Object(l.jsx)("div",{className:"".concat(c===y.films.length-1?"mt-3 mb-3 ":"mt-3"," button-ripple-div-next-width col"),onClick:function(){e.isNonExisting||t(e)},children:Object(l.jsxs)("div",{className:"row m-0 p-0 play-outer-container",children:[Object(l.jsx)("div",{className:"col-1 col-sm-1 text-center justify-content-center d-flex align-items-center p-0 pl-1",children:g===e.id?Object(l.jsx)("small",{children:Object(l.jsx)(O.a,{style:{fontWeight:300},icon:"play"})}):Object(l.jsx)("small",{children:c+1})}),Object(l.jsx)("div",{className:"col-6 col-sm-6 pr-2 pl-2",children:Object(l.jsx)("div",{className:"w-100 play-container",children:e.isNonExisting?Object(l.jsx)("img",{alt:"",className:"embed-responsive-item play-image",src:re.a}):Object(l.jsx)(ae.a,{image:"".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail")})})}),Object(l.jsx)("div",{className:"col-5 col-sm-5 p-0",children:e.isNonExisting?Object(l.jsx)(L.a,{line:2,text:"Not found",className:"mb-0 title font-weight-bold"}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(L.a,{line:1,text:e.title,className:"mb-0 title font-weight-bold"}),Object(l.jsx)("p",{className:"mb-1 author-nick",children:Object(l.jsx)("span",{children:e.author_name})})]})})]})}),Object(l.jsx)(de,{playlist:y,filmId:e.id,dispatch:R})]},e.id)}))})})]})})},je=(c(692),function(){var e=Object(j.g)(),t=Object(j.h)(),c=Object(B.a)(768),n=function(c){var n=b.a.parse(t.search),a={pathname:"".concat("/filmapp-react-frontend/","film/")+c.id,state:{film:c}};n.list&&(a=Object(i.a)(Object(i.a)({},a),{},{search:"?list=".concat(n.list)})),e.push(a)};return Object(l.jsxs)("div",{className:"row p-0 m-0 mt-4 mx-2",children:[Object(l.jsxs)("div",{className:"col-12 order-first col-sm-12 order-first col-md-8 film-preview-container-px",children:[Object(l.jsx)(S,{}),!c&&Object(l.jsx)($,{})]}),Object(l.jsxs)("div",{className:"col-12 order-2 col-sm-12 order-2 col-md-4 p-0",children:[Object(l.jsx)(ue,{handleRedirect:n}),Object(l.jsx)(Y,{handleRedirect:n})]}),c&&Object(l.jsx)("div",{className:"col-12 order-last col-sm-12 order-sm-last col-md-8 pb-5 container-px",children:Object(l.jsx)($,{})})]})});function me(){return Object(l.jsx)(u,{children:Object(l.jsx)(je,{})})}},536:function(e,t,c){"use strict";c.d(t,"a",(function(){return n})),c.d(t,"c",(function(){return a})),c.d(t,"b",(function(){return i}));var n=function(e){var t=new Date(Date.parse(e.createdAt));return("0"+t.getDate()).slice(-2)+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getFullYear()).slice(-2)+" o "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)},a=function(e){var t=new Date(Date.parse(e.createdAt)),c=new Date,n=Math.abs(Math.floor((Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())-Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes()))/6e4));return n/60>=1?(n/=60)/24>=1?(n/=24)/30>=1?(n/=30)/12>=1?(n/=12,n=Math.floor(n)+" years "):n=Math.floor(n)+" months ":n=Math.floor(n)+" days ":n=Math.floor(n)+" hours ":n=Math.floor(n)+" minutes ",n+="ago"},i=function(e,t){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.location.pathname.split(t)[0],a={pathname:""===n?"/filmapp-react-frontend/":n,search:e.location.search,state:e.location.state};c?e.replace(a):e.push(a)}},547:function(e,t,c){"use strict";var n=c(47),a=c(1);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600,t=Object(a.useState)(window.innerWidth<e),c=Object(n.a)(t,2),i=c[0],s=c[1],r=function(){s(window.innerWidth<e)};return Object(a.useEffect)((function(){return r(),window.addEventListener("resize",r),function(){return window.removeEventListener("resize",r)}}),[]),i}},580:function(e,t,c){"use strict";t.a=c.p+"static/media/image_not_found.c4ba1e76.png"},601:function(e,t,c){},603:function(e,t,c){"use strict";var n=c(15),a=c(547),i=c(567),s=c(1),r=c(533),l=c(548),o=c.n(l),d=c(553),u=c(602),j=c(83),m=(c(601),c(2)),b=function(e){var t=e.film,c=e.index,n=e.handleRedirect,a=e.isRecommendations,i=e.isSearch,l=e.filmDispatch,b=e.children,p=Object(s.useContext)(j.a).user;return Object(m.jsx)("div",{className:"col-12  ".concat(i?"col-lg-8":""," mb-4 container-px"),children:Object(m.jsxs)("div",{className:"row p-0 m-0 play-outer-container remove-container p-0",children:[Object(m.jsx)("div",{className:"col-6 ".concat(i?"col-sm-4":""," m-0 p-0"),onClick:function(){return n()},children:Object(m.jsxs)("div",{className:"play-container",children:[Object(m.jsx)(d.a,{image:t.img}),Object(m.jsx)(r.a,{className:"play-middle",icon:"play"})]})}),Object(m.jsx)("div",{className:"col-6 ".concat(i?"col-sm-8":"col-sm-6"," pr-0"),children:Object(m.jsxs)("div",{className:"row mx-0 mb-0 h-100",children:[Object(m.jsxs)("div",{className:"".concat(p.auth?"button-ripple-div-next-width":"col-12"," col p-0 pr-2 cursor-pointer"),onClick:function(){return n()},children:[Object(m.jsx)(o.a,{line:1,text:t.title,className:"mb-1 title"}),b||Object(m.jsxs)("div",{className:"mb-0 author-nick",children:[Object(m.jsxs)("span",{children:[t.author_name,"\xa0"]}),Object(m.jsx)("span",{children:"\u2022\xa0"}),Object(m.jsxs)("span",{children:[t.views," views"]})]})]}),Object(m.jsxs)("div",{className:"".concat((p.auth,"click-under-buttons-container")),children:[p.auth?Object(m.jsx)(u.a,{isRecommendations:a,filmDispatch:l,index:c,filmID:t.id}):null,Object(m.jsx)("div",{className:"col col-12 m-0 p-0 click-under-buttons",onClick:function(){return n()}})]})]})})]})})};t.a=function(e){return Object(a.a)(e.isRecommendations?768:576)?Object(m.jsx)(i.a,Object(n.a)({},e)):Object(m.jsx)(b,Object(n.a)({},e))}},692:function(e,t,c){}}]);
//# sourceMappingURL=9.df4bb490.chunk.js.map