{"version":3,"sources":["images/ico.png","images/error-404.png","constants/alert_constants.js","constants/user_constants.js","actions/alert_actions.js","config/index.js","helpers/auth-headers.js","helpers/history.js","reducers/auth_reducer.js","reducers/index.js","reducers/registration_reducer.js","reducers/alert_reducer.js","reducers/playlist_film_reducer.js","helpers/store.js","services/user_service.js","actions/user_actions.js","components/Navbar/NavbarComponent.js","components/Playlist/PlaylistAddComponent.js","components/Playlist/PlaylistAddButtonComponent.js","components/ImageBlurred/ImageBlurredComponent.js","components/Home/HomeComponent.js","components/Film/FilmsPreviewComponent.js","components/Playlist/PlaylistComponent.js","components/Comments/CommentsComponent.js","components/Film/FilmComponent.js","components/Login/LoginComponent.js","components/Register/RegisterComponent.js","components/Search/SearchComponent.js","components/Playlist/AllPlaylistsComponent.js","components/AddFilm/AddFilmComponent.js","components/NotFound/NotFoundComponent.js","components/ResetPassword/ResetPasswordComponent.js","components/ResetPassword/ForgotPasswordComponent.js","helpers/PrivateRoute.js","components/Profile/ProfileComponent.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","alertConstants","SUCCESS","ERROR","CLEAR","userConstants","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILURE","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT","PLAYLIST_FILM_ACTION","alertActions","success","message","type","error","clear","config","apiUrl","pathName","authHeader","user","JSON","parse","localStorage","getItem","token","Authorization","loginHeader","username","password","window","btoa","history","createBrowserHistory","initialState","loggedIn","reducer","combineReducers","auth","state","arguments","length","undefined","action","loggingIn","registration","registering","alert","playlistFilm","operation","store","createLogger","createStore","applyMiddleware","thunkMiddleware","userService","login","requestOptions","method","headers","fetch","concat","then","handleResponse","setItem","stringify","logout","register","Content-Type","body","removeItem","response","text","data","ok","status","errors","statusText","Promise","reject","userActions","dispatch","goBack","failure","toString","request","NavbarComponent","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","_handleKeyDown","event","target","className","keyCode","charCode","handleSearchSubmit","isMobile","handleProfileMenuOpen","setState","anchorEl","currentTarget","handleProfileMenuClose","handleLogoutClick","handleProfileClick","push","title","films","isLoading","options","selected","bind","assertThisInitialized","document","addEventListener","removeEventListener","eventKey","e","_this2","preventDefault","search","getElementById","reset","typeahead","getInstance","axios","get","result","pathname","id","catch","err","_this3","isProfileMenuOpen","Boolean","renderProfileMenu","react_default","a","createElement","Menu_default","anchorOrigin","vertical","horizontal","transformOrigin","open","onClose","MenuItem_default","key","style","display","onClick","Navbar","expand","bg","variant","onSelect","k","handleSelect","Col","xs","span","order","sm","md","Brand","href","alt","src","ico","width","height","Form","inline","react_bootstrap_typeahead_es","ref","placeholder","labelKey","minLength","onChange","onSearch","query","res","Button","index_es","icon","Toggle","aria-controls","onToggle","handleToggle","Collapse","Nav","activeKey","Link","Avatar_default","nick","toUpperCase","charAt","location","Component","connectedCustomNavbar","connect","enhanceWithClickOutside","require","PlaylistAddComponent","handleClick","requestParams","filmID","post","handlePlaylistOperation","errorMessage","loadPlaylist","playlists","forEach","playlist","indexOf","contains","loaded","show","values","playlistID","menuRef","React","createRef","handleChange","index","playlisID","playlistTitle","array","put","console","log","prevProps","prevState","snapshot","handleClickOutside","parentName","innerWidth","innerHeight","drop","contentHeight","current","tmpHeightBottom","getBoundingClientRect","top","tmpHeightTop","alignRight","alignCenter","Dropdown","Menu","overflowY","cursor","Divider","map","Row","Check","custom","checked","label","FormControl","isInvalid","value","Control","Feedback","connectedPlaylistAddComponent","PlaylistAddButtonComponent","size","ButtonBase_default","borderRadius","handleAddPlaylistButtonClick","opacity","filmTitle","connectedPlaylistAddButtonComponent","ImageBlurredComponent","image","onLoad","replace","setRedirect","HomeComponent","handleScroll","addOpenedIndex","add","scroll","scrollTop","pageYOffset","offsetHeight","documentElement","_assertThisInitialize","loadData","_assertThisInitialize2","hasMore","handleResize","windowWidth","film","openSnackbar","note","handleCreatePlaylistClick","handleClose","reason","params","start","limit","img","thumbnail","_id","toConsumableArray","isMounted","filmsPreviewLoaded","Math","ceil","assign","lg","ImageBlurred_ImageBlurredComponent","lib_default","line","position","right","author_name","views","Button_default","disabled","Spinner","animation","Snackbar_default","autoHideDuration","ContentProps","aria-describedby","connectedHomePage","source","CancelToken","FilmsPreviewComponent","loadFilms","cancel","handleLoading","cancelToken","exclude","maxSize","isLoaded","localName","parentElement","handleThumbnail","handleCloseSnackbar","isCancel","Snackbar_Snackbar_default","connectedFilmPage","PlaylistComponent","handleSubmit","playlistHeight","filmElement","clientHeight","playlistHeaderHeight","playlistHeader","loadFilm","playlistFilms","requests","currentFilm","all","isPlaylistLoaded","checkOwnerOfPlaylist","ownerOfPlaylist","handleRemoveFromPlaylist","filmsTmp","splice","handleRemovePlaylist","delete","handleDeletePlaylist","findIndex","_this4","lines","playlistHeightMultiplayer","react_perfect_scrollbar_lib_default","onYReachEnd","onScrollY","fontWeight","connectedPlaylistPage","CommentsComponent","loadComments","comments","addComment","comment","author_id","unshift","author","createdAt","addedCount","sortComments","path","dir","commentsLength","TextField_default","multiline","fullWidth","rowsMax","DropdownButton","Item","date","Date","getDate","slice","getMonth","getFullYear","getHours","getMinutes","displayDate","windowBreakpoint","FilmComponent","isLoadingFilms","hasMoreFilms","isLoadingComments","queryString","list","updateMeta","meta","rate","defineProperty","objectSpread","dislikes","thumbsDown","likes","thumbsUp","handleSetThumbnail","poster","scrollTo","handleSetThumbnailPlaylist","match","handleLoadingFilms","_State","handleLoadingComments","displayPlaylist","expanded","truncated","handleTruncate","toggleLines","liked","disliked","description","videoSrc","_this$state","video_react_lib","playsInline","truncateText","textTruncateChild","CommentsComponent_connectedFilmPage","LoginComponent","handleForgotPassword","setTimeout","email","submitted","_e$target","name","modalClose","_this$state2","Modal","onHide","aria-labelledby","centered","Header","closeButton","Title","Body","onSubmit","Group","Label","htmlFor","Footer","connectedLoginPage","RegisterComponent","maxLength","connectedRegisterPage","filters","SearchComponent","sort","filter","parseDate","today","time","abs","floor","UTC","handleOnclick","click","sorts","onresize","prevParams","_","isEqual","parseInt","aria-expanded","in","fontSize","Truncate","connectedSearchPage","AllPlaylistsComponent","playlistsPreviewLoaded","authorName","connectedAllPlaylistsComponent","CHOOSE_FILM","CHOOSE_THUMBNAIL","AddFilmComponent","handleDropFilm","files","filmName","filmPreview","URL","createObjectURL","handleDropThumbnail","thumbnailName","thumbnailPreview","filmInput","thumbnailInput","handleFileChoose","FormData","set","FileDrop","onDrop","accept","muted","autoPlay","loop","left","color","aria-label","as","connectedAddPage","NotFoundComponent","error_404","ResetPasswordComponent","resetRequested","resetSuccessful","resetError","handleSubmitPasswordChange","Alert","connectedResetPasswordComponent","ForgotPasswordComponent","emailSending","emailSend","emailError","handleSubmitForgotRequest","connectedForgotPasswordComponent","PrivateRoute","_ref","component","rest","objectWithoutProperties","react_router","render","to","from","ProfileComponent","handleRemoveFilm","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","stop","connectedProfileComponent","library","faSearch","faPlus","faThumbsUp","faThumbsDown","faEye","faPlay","faFilter","faCaretUp","faCaretDown","faEllipsisV","faSortDown","faSortUp","faTrashAlt","faTimes","App","listen","exact","PrivateRoute_PrivateRoute","connectedApp","hostname","ReactDOM","react_redux_es","navigator","serviceWorker","ready","unregister"],"mappings":"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","file":"static/js/main.d22c80cc.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/ico.f5c2ef23.png\";","module.exports = __webpack_public_path__ + \"static/media/error-404.edab0e16.png\";","export const alertConstants = {\r\n\r\n    SUCCESS: 'ALERT_SUCCESS',\r\n    ERROR: 'ALERT_ERROR',\r\n    CLEAR: 'ALERT_CLEAR'\r\n    \r\n};","export const userConstants = {\r\n\r\n    REGISTER_REQUEST: 'USER_REGISTER_REQUEST',\r\n    REGISTER_SUCCESS: 'USER_REGISTER_SUCCESS',\r\n    REGISTER_FAILURE: 'USER_REGISTER_FAILURE',\r\n\r\n    LOGIN_REQUEST: 'USER_LOGIN_REQUEST',\r\n    LOGIN_SUCCESS: 'USER_LOGIN_SUCCESS',\r\n    LOGIN_FAILURE: 'USER_LOGIN_FAILURE',\r\n\r\n    LOGOUT: 'USER_LOGOUT',\r\n\r\n    PLAYLIST_FILM_ACTION: 'USER_PLAYLIST_FILM_ACTION'\r\n\r\n};","import { alertConstants } from \"../constants\";\r\n\r\n\r\nexport const alertActions = {\r\n    success,\r\n    error,\r\n    clear\r\n};\r\n\r\nfunction success(message) {\r\n    return { type: alertConstants.SUCCESS, message };\r\n}\r\n\r\nfunction error(message) {\r\n    return { type: alertConstants.ERROR, message };\r\n}\r\n\r\nfunction clear() {\r\n    return { type: alertConstants.CLEAR };\r\n}","export const config = {\r\n    apiUrl: 'https://marm007-film-app.herokuapp.com/api/',\r\n    pathName: '/filmapp_frontend/'\r\n};","export function authHeader() {\r\n\r\n    let user = JSON.parse(localStorage.getItem('user'));\r\n\r\n    if(user && user.token){\r\n        return { 'Authorization' : 'Bearer ' + user.token};\r\n    } else{\r\n        return {};\r\n    }\r\n}\r\n\r\nexport function loginHeader(username, password){\r\n    let loginToken = window.btoa(username + ':' + password);\r\n    return { 'Authorization':  'Basic ' +  loginToken };\r\n\r\n}","import { createBrowserHistory } from 'history';\r\n\r\nexport  const history = createBrowserHistory();","import { userConstants} from \"../constants\";\r\n\r\nlet user = JSON.parse(localStorage.getItem('user'));\r\nconst initialState = user ? { loggedIn: true, user } : {};\r\n\r\nexport function auth(state = initialState, action) {\r\n    switch (action.type) {\r\n        case userConstants.LOGIN_REQUEST:\r\n            return {\r\n                loggingIn: true,\r\n                user: action.user\r\n            };\r\n        case userConstants.LOGIN_SUCCESS:\r\n            return {\r\n                loggedIn: true,\r\n                user: action.user\r\n            };\r\n        case userConstants.LOGIN_FAILURE:\r\n            return {};\r\n        case userConstants.LOGOUT:\r\n            return {};\r\n        default:\r\n            return state\r\n    }\r\n\r\n}","import { combineReducers } from \"redux\";\r\n\r\nimport { auth} from \"./auth_reducer\";\r\nimport { registration} from \"./registration_reducer\";\r\nimport { alert } from \"./alert_reducer\";\r\nimport { playlistFilm } from \"./playlist_film_reducer\";\r\n\r\nconst reducer = combineReducers({\r\n    auth,\r\n    registration,\r\n    alert,\r\n    playlistFilm\r\n});\r\n\r\nexport default reducer;","import { userConstants} from \"../constants\";\r\n\r\nexport function registration(state = {}, action){\r\n    switch (action.type) {\r\n        case userConstants.REGISTER_REQUEST:\r\n            return { registering: true };\r\n        case userConstants.REGISTER_SUCCESS:\r\n            return {};\r\n        case userConstants.REGISTER_FAILURE:\r\n            return {};\r\n        default:\r\n            return state\r\n    }\r\n}","import { alertConstants } from '../constants';\r\n\r\nexport function alert(state = {}, action) {\r\n    switch (action.type) {\r\n        case alertConstants.SUCCESS:\r\n            return{\r\n                type: 'alert-reducer',\r\n                message: action.message\r\n            };\r\n        case alertConstants.ERROR:\r\n            return{\r\n                type: 'alert-danger',\r\n                message: action.message\r\n            };\r\n        case alertConstants.CLEAR:\r\n            return {};\r\n        default:\r\n            return state\r\n    }\r\n}","import { userConstants } from \"../constants\";\r\n\r\nexport function playlistFilm(state = {}, action) {\r\n\r\n    switch (action.type) {\r\n        case userConstants.PLAYLIST_FILM_ACTION:\r\n            return { playlistFilm: action.operation};\r\n        default:\r\n            return state\r\n    }\r\n}","import { createStore, applyMiddleware } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport { createLogger } from 'redux-logger';\r\nimport reducer from '../reducers'\r\n\r\n// eslint-disable-next-line\r\nconst loggerMiddleware = createLogger();\r\n\r\nexport const store = createStore(\r\n    reducer,\r\n    applyMiddleware(\r\n        thunkMiddleware\r\n    )\r\n);","import { config } from '../config'\r\nimport { loginHeader } from '../helpers';\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    register\r\n};\r\n\r\nfunction login(username, password) {\r\n\r\n    let loginHeaderMy =  loginHeader(username, password);\r\n\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: loginHeaderMy\r\n\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users/auth`, requestOptions)\r\n        .then(handleResponse)\r\n        .then(user => {\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n            return user;\r\n        })\r\n}\r\n\r\nfunction logout(){\r\n    localStorage.removeItem('user');\r\n}\r\n\r\nfunction register(user) {\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(user)\r\n    };\r\n    return fetch(`${config.apiUrl}/users/`, requestOptions)\r\n        .then(handleResponse);\r\n}\r\n\r\nfunction handleResponse(response) {\r\n    return response.text().then(text => {\r\n        const data = text && JSON.parse(text);\r\n        if(!response.ok){\r\n            if(response.status === 401){\r\n                logout();\r\n            }\r\n            const error = (data && data.errors) || response.statusText;\r\n            return Promise.reject(error);\r\n        }\r\n        return data;\r\n    })\r\n}\r\n\r\n","import { userConstants } from \"../constants\";\r\nimport { userService } from \"../services/user_service\";\r\nimport { alertActions } from \"./alert_actions\";\r\nimport { history } from \"../helpers\";\r\n\r\nexport const userActions = {\r\n    login,\r\n    logout,\r\n    register,\r\n    playlistFilm\r\n};\r\n\r\nfunction login(username, password) {\r\n    return dispatch => {\r\n        dispatch(request({username}));\r\n\r\n        userService.login(username, password)\r\n            .then(user => {\r\n                dispatch(success(user));\r\n                history.goBack();\r\n            },\r\n            error =>{\r\n                dispatch(failure(error.toString()));\r\n                dispatch(alertActions.error(error.toString()));\r\n            }\r\n        );\r\n    };\r\n\r\n    function request(user) { return { type: userConstants.LOGIN_REQUEST, user}}\r\n    function success(user) { return { type: userConstants.LOGIN_SUCCESS, user }}\r\n    function failure(error) {return { type: userConstants.LOGIN_FAILURE, error }}\r\n}\r\n\r\nfunction logout() {\r\n    userService.logout();\r\n    return { type: userConstants.LOGOUT }\r\n}\r\n\r\nfunction register(user) {\r\n    return dispatch => {\r\n        dispatch(request(user));\r\n\r\n        userService.register(user)\r\n            .then(\r\n\r\n                user => {\r\n                    dispatch(success());\r\n                    dispatch(alertActions.success('Registration successful'));\r\n                    history.goBack();\r\n                },\r\n                error => {\r\n                    dispatch(failure(error.toString()));\r\n                    dispatch(alertActions.error(error.toString()));\r\n                }\r\n            )\r\n    };\r\n\r\n    function request(user) { return { type: userConstants.REGISTER_REQUEST, user } }\r\n    function success(user) { return { type: userConstants.REGISTER_SUCCESS, user } }\r\n    function failure(error) { return { type: userConstants.REGISTER_FAILURE, error } }\r\n\r\n}\r\n\r\n\r\nfunction playlistFilm(action) {\r\n\r\n    return dispatch => {\r\n        dispatch(operation(action));\r\n    };\r\n\r\n    function operation(operation) { return { type: userConstants.PLAYLIST_FILM_ACTION, operation } }\r\n}\r\n\r\n","import React, {Component} from 'react';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport Avatar from '@material-ui/core/Avatar';\r\n\r\nimport {Button, Col, Form, Nav, Navbar} from 'react-bootstrap';\r\nimport {userActions} from \"../../actions\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport axios from 'axios'\r\n\r\nimport {config} from \"../../config\";\r\n\r\nimport './NavbarComponent.css';\r\nimport Menu from \"@material-ui/core/Menu/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem/MenuItem\";\r\n\r\nimport ico from '../../images/ico.png';\r\n\r\nimport {AsyncTypeahead } from 'react-bootstrap-typeahead';\r\nimport {isMobile} from \"react-device-detect\";\r\n\r\nconst pathName = config.pathName;\r\n\r\n\r\n\r\nclass NavbarComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            title: '',\r\n            anchorEl: null,\r\n            films: [],\r\n            isLoading: false,\r\n            options: [],\r\n            selected: ''\r\n        };\r\n\r\n        this.handleSearchSubmit = this.handleSearchSubmit.bind(this);\r\n\r\n    }\r\n\r\n    _handleKeyDown = (event) => {\r\n        if(event && event.target && event.target.className &&\r\n            event.target.className === \"rbt-input-main form-control rbt-input  focus\") {\r\n            let keyCode = event.keyCode || event.charCode;\r\n\r\n            switch (keyCode) {\r\n                case 13:\r\n                        this.handleSearchSubmit(event);\r\n                    break;\r\n                case 9:\r\n                    if(isMobile)\r\n                        this.handleSearchSubmit(event);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n\r\n    componentDidMount(){\r\n        document.addEventListener(\"keydown\", this._handleKeyDown);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener(\"keydown\", this._handleKeyDown);\r\n    }\r\n\r\n    handleSelect(eventKey) {\r\n        if (eventKey === 'login') {\r\n            if (this.props.loggedIn) {\r\n                this.props.dispatch(userActions.logout());\r\n            }\r\n        } else if (eventKey === 'add_film') {\r\n            this.props.history.push(`${pathName}add`);\r\n\r\n        }else if (eventKey === 'playlists'){\r\n            this.props.history.push(`${pathName}playlists`)\r\n        }\r\n    }\r\n\r\n\r\n    handleSearchSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        const search = this.state.title;\r\n        this.setState({title: ''});\r\n\r\n        document.getElementById(\"search-form\").reset();\r\n        this.typeahead.getInstance().clear();\r\n\r\n        axios.get(`${config.apiUrl}films/filter/title?search=${search}`)\r\n            .then(result => {\r\n\r\n                const films = result.data;\r\n                if (films.length === 0) {\r\n\r\n                    this.props.history.push({\r\n                        pathname: `${pathName}search`,\r\n                        search: `?search=${search}`,\r\n                        state: {films: films}\r\n                    });\r\n\r\n                } else if (films.length === 1) {\r\n                    this.props.history.push(`${pathName}film/${films[0].id}`);\r\n\r\n                } else {\r\n\r\n\r\n                    this.props.history.push({\r\n                        pathname: `${pathName}search`,\r\n                        search: `?search=${search}`,\r\n                        state: {films: films}\r\n                    });\r\n\r\n\r\n                }\r\n\r\n\r\n            }).catch(err => {\r\n\r\n        });\r\n\r\n    }\r\n\r\n    handleProfileMenuOpen = event => {\r\n        this.setState({ anchorEl: event.currentTarget });\r\n    };\r\n\r\n    handleProfileMenuClose = () => {\r\n        this.setState({ anchorEl: null });\r\n    };\r\n\r\n    handleLogoutClick = () => {\r\n        this.setState({ anchorEl: null });\r\n\r\n        this.props.dispatch(userActions.logout());\r\n    };\r\n\r\n    handleProfileClick = () => {\r\n        this.setState({ anchorEl: null });\r\n        this.props.history.push(`${pathName}profile`);\r\n    };\r\n\r\n\r\n    render() {\r\n\r\n        const {loggedIn} = this.props;\r\n        const {anchorEl} = this.state;\r\n        const isProfileMenuOpen = Boolean(anchorEl);\r\n\r\n        const renderProfileMenu = (\r\n            <Menu\r\n                anchorEl={anchorEl}\r\n                anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n                transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n                open={isProfileMenuOpen}\r\n                onClose={this.handleProfileMenuClose}\r\n            >\r\n                <MenuItem key=\"placeholder\" style={{display: \"none\"}}/>\r\n                <MenuItem onClick={this.handleProfileClick}>Profile</MenuItem>\r\n                <MenuItem onClick={this.handleLogoutClick}>Logout</MenuItem>\r\n            </Menu>\r\n        );\r\n\r\n        return (\r\n\r\n            <Navbar\r\n                    expand=\"md\" bg=\"light\" variant=\"light\"\r\n                    onSelect={k => this.handleSelect(k)}>\r\n\r\n                <Col xs={{span: 6, order: 1}} sm={{span: 2, order: 1}} md={{span: 4, order: 1}}>\r\n                    <Navbar.Brand href={pathName}>\r\n                        <Navbar.Brand>\r\n                            {\r\n                                <img alt=\"\"\r\n                                     src={ico} width=\"30\"\r\n                                     height=\"30\"/>\r\n                            }\r\n                        </Navbar.Brand>\r\n                        {<p className=\"d-none d-md-inline\">FilmApp</p>}\r\n                    </Navbar.Brand>\r\n                </Col>\r\n\r\n                <Col xs={{span: 12, order: 12}} sm={{span: 8, order: 2}} md={{span: 5, order: 5}}>\r\n                    <Form id=\"search-form\" inline>\r\n\r\n\r\n                        <AsyncTypeahead\r\n                            type=\"search\"\r\n                            ref={(typeahead) => this.typeahead = typeahead}\r\n                            id=\"async_typeahead\"\r\n                            placeholder=\"Search\"\r\n                            labelKey=\"title\"\r\n                            minLength={1}\r\n                            className=\"search-bar\"\r\n                            onChange={(selected) => {\r\n                                const title = selected.length > 0 ? selected[0].title : '';\r\n                                this.setState({ title : title});\r\n                            }}\r\n                            isLoading={this.state.isLoading}\r\n                            onSearch={query => {\r\n                               this.setState({isLoading: true, title: query});\r\n                                axios.get(`${config.apiUrl}films/titles?search=${query}`)\r\n                                    .then(res => this.setState({\r\n                                        options: res.data,\r\n                                    }, () => {\r\n                                        this.setState({isLoading: false})\r\n                                    }));\r\n                            }}\r\n                            options={this.state.options}\r\n                        />\r\n\r\n                        <Button onClick={this.handleSearchSubmit} className=\"d-none d-sm-inline ml-1\"\r\n                                variant=\"light\"><FontAwesomeIcon icon=\"search\"/></Button>\r\n                    </Form>\r\n                </Col>\r\n\r\n                <Col className=\"text-right d-md-none \" xs={{span: 6, order: 7}} sm={{span: 2, order: 10}}>\r\n                    <Navbar.Toggle className=\"button-my\" aria-controls=\"responsive-navbar-nav\" onToggle={this.handleToggle}/>\r\n                </Col>\r\n\r\n                <Col xs={{span: 12, order: 12}} sm={{span: 12, order: 12}} md={{span: 3, order: 9}}>\r\n\r\n                    <Navbar.Collapse className=\"justify-content-end\" id=\"responsive-navbar-nav\">\r\n\r\n                        <Nav activeKey=\"\">\r\n                            <Nav.Link className=\"pr-2 pl-2\" eventKey=\"playlists\">Playlists</Nav.Link>\r\n                            <Nav.Link className=\"pr-2 pl-2\" eventKey=\"add_film\">Add</Nav.Link>\r\n\r\n\r\n                            {\r\n                                loggedIn ?\r\n                                    (\r\n\r\n                                        <Avatar onClick={this.handleProfileMenuOpen}\r\n                                                className=\"pr-2 pl-2 custom-avatar button-my\">{\r\n                                            JSON.parse(localStorage.getItem('user')).user.nick.toUpperCase().charAt(0)}</Avatar>\r\n\r\n                                        ) :\r\n                                    (<Nav.Link onClick={() => {\r\n                                        if (this.props.location.pathname === '/filmapp_frontend/')\r\n                                            this.props.history.push(`${pathName}login`);\r\n                                        else\r\n                                            this.props.history.push(`${this.props.location.pathname}/login${this.props.location.search}`)\r\n                                    }\r\n                                    } className=\"pr-2 pl-2\" eventKey=\"login\">Login</Nav.Link>)\r\n                            }\r\n                        </Nav>\r\n\r\n                    </Navbar.Collapse>\r\n\r\n                </Col>\r\n\r\n                {renderProfileMenu}\r\n\r\n            </Navbar>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    return {\r\n        loggedIn\r\n    };\r\n}\r\n\r\nconst connectedCustomNavbar = connect(mapStateToProps)(NavbarComponent);\r\nexport {connectedCustomNavbar as NavbarComponent};","import React, {Component} from 'react';\r\nimport {Button, Col, Dropdown, Form, FormControl, Row} from \"react-bootstrap\";\r\nimport axios from \"axios\";\r\nimport {config} from \"../../config\";\r\nimport {authHeader} from \"../../helpers\";\r\nimport {userActions} from \"../../actions\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\n\r\nconst enhanceWithClickOutside = require('react-click-outside');\r\n\r\nclass PlaylistAddComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n\r\n            show: false,\r\n\r\n            isLoading: true,\r\n            loaded: false,\r\n\r\n            playlists: [],\r\n\r\n            values: [],\r\n            title: '',\r\n\r\n            error: false,\r\n            errorMessage: '',\r\n\r\n            playlistID: null\r\n        };\r\n        this.menuRef = React.createRef();\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n    handleChange(event, index, playlisID, playlistTitle) {\r\n        let array = this.state.playlists;\r\n        array[index].contains = !array[index].contains;\r\n\r\n        this.setState({playlists: array});\r\n\r\n        const requestParams = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        const body = {films: [this.props.filmID]};\r\n\r\n        let message = \"\";\r\n\r\n        if (array[index].contains === false) {\r\n            axios.put(`${config.apiUrl}playlists/${playlisID}/films/delete/`, body, requestParams)\r\n                .then(res => {\r\n                    message = `Deleted from playlist ${playlistTitle}`;\r\n                    if(this.state.playlistID && this.state.playlistID === playlisID)\r\n                        this.props.dispatch(userActions.playlistFilm('DELETED'));\r\n                    this.props.handlePlaylistOperation(message);\r\n\r\n\r\n                }).catch(err => {\r\n                console.log(err);\r\n            })\r\n        } else {\r\n            axios.put(`${config.apiUrl}playlists/${playlisID}/films/`, body, requestParams)\r\n                .then(res => {\r\n                    message = `Added to playlist ${playlistTitle}`;\r\n                    if(this.state.playlistID && this.state.playlistID === playlisID)\r\n                        this.props.dispatch(userActions.playlistFilm('ADDED'));\r\n                    this.props.handlePlaylistOperation(message);\r\n\r\n\r\n                }).catch(err => {\r\n                console.log(err);\r\n            })\r\n        }\r\n\r\n\r\n    };\r\n\r\n    handleClick = () => {\r\n        const requestParams = {\r\n            headers: authHeader()\r\n        };\r\n        const title = this.state.title;\r\n\r\n        const body = {title: title, films: [this.props.filmID]};\r\n\r\n\r\n        axios.post(`${config.apiUrl}playlists`, body, requestParams)\r\n            .then(res => {\r\n                let message = `Added to playlist ${title}`;\r\n                this.props.handlePlaylistOperation(message);\r\n\r\n\r\n            }).catch(err => {\r\n            this.setState({error: true, errorMessage: err.response.data.errors[0]});\r\n        })\r\n    };\r\n\r\n    componentDidMount() {\r\n\r\n        if(this.props.playlistID)\r\n            this.setState({playlistID: this.props.playlistID});\r\n\r\n        this.setState({show: true});\r\n        this.loadPlaylist()\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n\r\n        if (prevProps.show !== this.props.show) {\r\n            this.setState({show: this.props.show});\r\n        }\r\n    }\r\n\r\n    handleClickOutside() {\r\n        this.setState({show: false});\r\n        this.props.handleClickOutside(this.props.index);\r\n    };\r\n\r\n    loadPlaylist = () => {\r\n\r\n        const requestOptions = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        this.setState({isLoading: true}, () => {\r\n            axios.get(`${config.apiUrl}users/me/playlists`, requestOptions)\r\n                .then(response => {\r\n\r\n                    let playlists = response.data;\r\n\r\n                    playlists.forEach(playlist => {\r\n                        if (playlist.films.indexOf(this.props.filmID) > -1) {\r\n                            playlist.contains = true;\r\n                        } else {\r\n                            playlist.contains = false;\r\n                        }\r\n                    });\r\n\r\n                    this.setState({\r\n                        isLoading: false,\r\n                        loaded: true,\r\n                        playlists: playlists\r\n                    })\r\n\r\n                })\r\n                .catch((err) => {\r\n                    this.setState({\r\n                        error: true,\r\n                        errorMessage: err.response.data.errors[0],\r\n                        isLoading: false,\r\n                        loaded: true,\r\n                    })\r\n                });\r\n        })\r\n    };\r\n\r\n    render() {\r\n        const {index} = this.props;\r\n        const {parentName} = this.props;\r\n        const width = window.innerWidth;\r\n        const height = window.innerHeight;\r\n\r\n        let drop = 'down';\r\n\r\n        let contentHeight = 240;\r\n\r\n        if(this.menuRef && this.menuRef.current){\r\n\r\n            let tmpHeightBottom = height - (this.menuRef.current.getBoundingClientRect().top  +\r\n                this.menuRef.current.getBoundingClientRect().height) ;\r\n\r\n            let tmpHeightTop = (this.menuRef.current.getBoundingClientRect().top );\r\n\r\n            if(tmpHeightBottom < contentHeight){\r\n                if(tmpHeightBottom > tmpHeightTop)\r\n                    contentHeight = tmpHeightBottom;\r\n                else{\r\n                    drop = 'up';\r\n                    if(tmpHeightTop < contentHeight)\r\n                        contentHeight = tmpHeightTop\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        let alignRight = false;\r\n        let alignCenter = \"\";\r\n\r\n        if(parentName === \"search\"){\r\n            alignRight = true;\r\n        }else if(parentName === \"home\" || parentName === \"profile\"){\r\n            if (width >= 992) {\r\n                if (index % 6 === 5 || index % 6 === 4) {\r\n                    alignRight = true;\r\n                }\r\n            } else if (width >= 768) {\r\n                if (index % 4 === 3 || index % 4 === 2) {\r\n                    alignRight = true;\r\n\r\n                }\r\n            } else if (width >= 576) {\r\n                if (index % 3 === 2 || index % 3 === 1) {\r\n                    alignRight = true;\r\n                }\r\n            } else {\r\n                if (index % 2 === 1) {\r\n                    alignRight = true;\r\n                }else if(index % 2 === 0){\r\n                    alignCenter = \"dropdown-center-playlist\"\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        return (\r\n\r\n            <Dropdown ref={this.menuRef} drop={drop} >\r\n                {\r\n                    this.state.loaded &&\r\n                    <Dropdown.Menu\r\n                            className={`${alignCenter} dropdown-bar`}\r\n                            alignRight={alignRight}\r\n                            style={{ height: contentHeight + \"px\", width: 240 + \"px\", overflowY: \"scroll\", cursor: 'context-menu'}}\r\n                            show={this.state.show}>\r\n                        {this.state.playlists.length > 0 &&\r\n                        <p className=\"dropdown-item-my pl-4 pr-4\">Save to...</p>}\r\n                        {this.state.playlists.length > 0 && <Dropdown.Divider/>}\r\n\r\n                        {\r\n                            this.state.playlists.map((playlist, index) => {\r\n                                return (<Col xs={12} sm={12} key={playlist.id} >\r\n                                    <Row className=\"pl-4 pr-4\" >\r\n                                        <Col xs={12} sm={12} className=\"p-0 mb-2\" >\r\n                                            <Form.Check\r\n                                                onChange={(e) => this.handleChange(e, index, playlist.id, playlist.title)}\r\n                                                custom\r\n                                                inline\r\n                                                checked={playlist.contains}\r\n                                                label={playlist.title}\r\n                                                type=\"checkbox\"\r\n                                                id={playlist.id}\r\n\r\n                                            />\r\n                                        </Col>\r\n\r\n                                    </Row>\r\n                                </Col>)\r\n                            })\r\n                        }\r\n\r\n                        {this.state.playlists.length > 0 && <Dropdown.Divider/>}\r\n                        <p className=\"dropdown-item-my pl-4 pr-4\">Create a new playlist</p>\r\n                        <FormControl\r\n                            isInvalid={this.state.error}\r\n                            onChange={(e) => {\r\n                                this.setState({error: false, title: e.target.value})\r\n                            }}\r\n                            className=\"dropdown-item-my w-75 ml-auto mr-auto mb-2 mt-2\"\r\n                            placeholder=\"Enter playlist name...\"\r\n\r\n                        />\r\n                        <Form.Control.Feedback type=\"invalid\"\r\n                                               className=\"dropdown-item-my w-75 ml-auto mr-auto mb-2 mt-2\">\r\n                            {this.state.errorMessage}\r\n                        </Form.Control.Feedback>\r\n                        <Col className=\"mb-1 text-right justify-content-end\">\r\n                            <Button onClick={this.handleClick}>Create</Button>\r\n                        </Col>\r\n\r\n\r\n                    </Dropdown.Menu>}\r\n\r\n            </Dropdown>\r\n\r\n\r\n        )\r\n\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {alert} = state;\r\n    return {\r\n        alert\r\n    }\r\n}\r\n\r\nconst connectedPlaylistAddComponent = connect(mapStateToProps)(enhanceWithClickOutside(PlaylistAddComponent));\r\nexport {connectedPlaylistAddComponent as PlaylistAddComponent};\r\n","import React, {Component} from 'react';\r\nimport {Col} from \"react-bootstrap\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {PlaylistAddComponent} from './PlaylistAddComponent'\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport ButtonBase from \"@material-ui/core/ButtonBase/ButtonBase\";\r\n\r\nclass PlaylistAddButtonComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            show: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({show: true});\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (prevProps.show !== this.props.show) {\r\n            this.setState({show: this.props.show});\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {index} = this.props;\r\n        const {show} = this.props;\r\n        const {loggedIn} = this.props;\r\n\r\n        const {parentName} = this.props;\r\n\r\n        const size = parentName !== \"home\" ? (parentName !== \"profile\" ? 2 : 12) : 8;\r\n\r\n        return (\r\n\r\n            loggedIn ?\r\n            <Col id=\"a-b-1\" xs={size} sm={size}\r\n                 className=\"p-0 text-center justify-content-center d-flex playlist-add-home \">\r\n                <ButtonBase  style={{borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\"}} className=\"button-my\" >\r\n                    {\r\n                        <Col id=\"a-b-2\"\r\n                             style={{width: 30 + \"px\", height: 24 + \"px\"}}\r\n                             className=\"playlist-add-icon-holder p-0\"\r\n                             onClick={() => {\r\n                                 this.props.handleAddPlaylistButtonClick(index)\r\n                             }}>\r\n                            <FontAwesomeIcon id=\"a-b-3\" style={{opacity: (show ? 1 : \"\")}}\r\n                                             className=\"playlist-add-icon\" icon=\"ellipsis-v\">\r\n\r\n                            </FontAwesomeIcon>\r\n                        </Col>\r\n                    }\r\n                </ButtonBase>\r\n                {\r\n                    show && <PlaylistAddComponent parentName={this.props.parentName}\r\n                                                  filmID={this.props.filmID}\r\n                                                  filmTitle={this.props.filmTitle}\r\n                                                  show={show} index={index}\r\n                                                  playlistID = {this.props.playlistID}\r\n\r\n                                                  handleClick={this.props.handleClick}\r\n                                                  handleClickOutside={this.props.handleClickOutside}\r\n                                                  handlePlaylistOperation={this.props.handlePlaylistOperation}/>\r\n\r\n                }\r\n            </Col>\r\n                :\r\n                null\r\n\r\n        )\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n\r\n    return {\r\n        loggedIn,\r\n    };\r\n}\r\n\r\n\r\nconst connectedPlaylistAddButtonComponent = connect(mapStateToProps)(PlaylistAddButtonComponent);\r\n\r\nexport { connectedPlaylistAddButtonComponent as PlaylistAddButtonComponent };\r\n","import React, {Component} from 'react';\r\n\r\nclass ImageBlurredComponent extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {image : ''}\r\n\r\n\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        const {image} = this.props;\r\n        this.setState({image: image});\r\n    }\r\n\r\n    render() {\r\n\r\n\r\n       return (\r\n\r\n           <img\r\n           onLoad={ () => {\r\n               let {image} = this.state;\r\n               image = image.replace(\"preview\", \"small\");\r\n               this.setState({image: image});\r\n           }}\r\n           alt=\"\"\r\n           className=\"embed-responsive-item image\"\r\n           src={this.state.image}\r\n           onClick={() => this.props.setRedirect()}/>);\r\n   }\r\n}\r\n\r\nexport default ImageBlurredComponent;","import React, {Component} from 'react';\r\nimport axios from 'axios'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {Col, Row, Spinner} from 'react-bootstrap';\r\n\r\nimport {config} from \"../../config\";\r\n\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport Button from '@material-ui/core/Button';\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport {PlaylistAddButtonComponent} from \"../Playlist/PlaylistAddButtonComponent\";\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport TextTruncate from \"react-text-truncate\";\r\nimport {isMobile} from 'react-device-detect'\r\nimport ImageBlurredComponent from \"../ImageBlurred/ImageBlurredComponent\";\r\n\r\nconst pathName = config.pathName;\r\n\r\nclass HomeComponent extends Component {\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            films: [],\r\n            addOpenedIndex: -1,\r\n\r\n            error: false,\r\n            hasMore: true,\r\n            isLoading: true,\r\n            isMounted: false,\r\n\r\n            filmsPreviewLoaded: 0,\r\n\r\n            scroll: {},\r\n            windowWidth: window.innerWidth,\r\n\r\n            openSnackbar: false,\r\n            note: ''\r\n        };\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        window.addEventListener('scroll', this.handleScroll);\r\n        window.addEventListener('resize', this.handleResize);\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: window.pageYOffset,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n\r\n\r\n        this.setState({isLoading: true}, () => {\r\n            let limit = 3;\r\n            const {windowWidth} = this.state;\r\n\r\n            if (windowWidth <= 576)\r\n                limit = 1.3;\r\n            else if (windowWidth > 1920)\r\n                limit = 6;\r\n            else if (windowWidth > 1422)\r\n                limit = 5;\r\n\r\n            axios.get(`${config.apiUrl}films`, {params: {start: 0, limit: Math.ceil(6 * limit)}})\r\n                .then(response => {\r\n\r\n                    let films = response.data;\r\n\r\n                    films.forEach(film => {\r\n                        film.add = false;\r\n                        film.img = `${config.apiUrl}films/${film.id}/thumbnail/${film.thumbnail._id}?width=preview`\r\n\r\n                    });\r\n                    this.setState({\r\n                        hasMore: films.length >= Math.ceil(6 * limit),\r\n                        films: films,\r\n                        isLoading: false,\r\n                        isMounted: true\r\n                    });\r\n                });\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n        window.removeEventListener('resize', this.handleResize);\r\n    }\r\n\r\n\r\n    handleScroll = () => {\r\n        if (this.state.addOpenedIndex >= 0 && !isMobile) {\r\n            let array = this.state.films;\r\n            array[this.state.addOpenedIndex].add = false;\r\n\r\n            this.setState({films: array, addOpenedIndex: -1});\r\n        }\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: window.pageYOffset,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n\r\n        const {\r\n            loadData,\r\n            state: {\r\n                error,\r\n                isLoading,\r\n                hasMore\r\n            }\r\n        } = this;\r\n\r\n        if (error || isLoading || !hasMore) return;\r\n        // alert(\"innerHeight = \" + window.innerHeight + \" scrollTop = \" +\r\n        //     document.documentElement.scrollTop + \" offsetHeight = \" + document.body.offsetHeight\r\n        // + \" pageOffset \" + window.pageYOffset);\r\n        // alert(\"innerHeight = \" + window.innerHeight + \" scrollTop = \" + document.documentElement.scrollTop + \" documentElementoffsetHeight = \" + document.documentElement.offsetHeight);\r\n        if ((window.innerHeight +  window.pageYOffset) >= (document.body.offsetHeight - 400)) {\r\n            loadData();\r\n        }\r\n    };\r\n\r\n    handleResize = () => {\r\n        this.setState({windowWidth: window.innerWidth});\r\n    };\r\n\r\n    handlePlaylistOperation = (message) => {\r\n        if (this.state.addOpenedIndex >= 0) {\r\n            let array = this.state.films;\r\n            array.forEach((film) => {\r\n                film.add = false;\r\n\r\n            });\r\n            this.setState({films: array, addOpenedIndex: -1})\r\n        }\r\n\r\n        this.setState({openSnackbar: true, note: message});\r\n    };\r\n\r\n    handleClickOutside = (index) => {\r\n        if (this.state.addOpenedIndex >= 0) {\r\n            let array = this.state.films;\r\n            array.forEach((film) => {\r\n                film.add = false;\r\n            });\r\n            this.setState({films: array, addOpenedIndex: index})\r\n        }\r\n    };\r\n\r\n    handleCreatePlaylistClick = () => {\r\n        this.setState({addOpenedIndex: -1});\r\n    };\r\n\r\n    handleAddPlaylistButtonClick = (index) => {\r\n        let array = this.state.films;\r\n        array[index].add = !array[index].add;\r\n\r\n        this.setState({films: array, addOpenedIndex: index})\r\n\r\n    };\r\n\r\n    handleClose = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n\r\n        this.setState({openSnackbar: false});\r\n    };\r\n\r\n\r\n    loadData = () => {\r\n        this.setState({isLoading: true}, () => {\r\n            axios.get(`${config.apiUrl}films`, {params: {start: this.state.films.length, limit: 6}})\r\n                .then(response => {\r\n\r\n                    let films = response.data;\r\n\r\n                    films.forEach(film => {\r\n                        film.add = false;\r\n                        film.img = `${config.apiUrl}films/${film.id}/thumbnail/${film.thumbnail._id}?width=preview`\r\n                    });\r\n\r\n                    this.setState({\r\n                        hasMore: (films.length === 6),\r\n                        isLoading: false,\r\n                        films: [\r\n                            ...this.state.films,\r\n                            ...films]\r\n                    });\r\n\r\n                })\r\n                .catch((err) => {\r\n                    this.setState({\r\n                        error: err.message,\r\n                        isLoading: false\r\n                    })\r\n                });\r\n        })\r\n    };\r\n\r\n    setRedirect = (filmID) => {\r\n        this.props.history.push(`${pathName}film/` + filmID);\r\n    };\r\n\r\n\r\n    render() {\r\n        const {isLoading} = this.state;\r\n        const {scroll} = this.state;\r\n        let films = this.state.films.map(a => Object.assign({}, a));\r\n\r\n        return (\r\n            <Col>\r\n\r\n\r\n                <Row className=\"mt-5\">\r\n\r\n                    {\r\n\r\n                        films.map((film, index) => {\r\n\r\n                            const filmID = film.id;\r\n\r\n\r\n                            return <Col className=\"mb-5 film-preview-holder\" xs={6} sm={4} md={3} lg={2} key={film.id}>\r\n                                <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half container\">\r\n                                    {\r\n\r\n                                        <ImageBlurredComponent\r\n                                            image={film.img}\r\n                                            setRedirect={() => this.setRedirect(filmID)}/>\r\n                                    }\r\n                                    <FontAwesomeIcon className=\"middle\" icon=\"play\"\r\n                                                     onClick={() => this.setRedirect(filmID)}/>\r\n\r\n                                </div>\r\n\r\n                                <Row className=\"m-0 mt-1\">\r\n                                    <Col xs={10} sm={10} className=\"p-0\">\r\n\r\n                                        <TextTruncate line={2} text={film.title}\r\n                                                      id=\"s-c-2\"\r\n                                                      className=\"mb-1 mt-1 title \"/>\r\n\r\n                                    </Col>\r\n                                    <Col xs={2} sm={2} className=\"p-0\" style={{position: 'absolute', right: 0}}>\r\n                                        <PlaylistAddButtonComponent\r\n                                            parentName=\"home\"\r\n                                            filmID={film.id}\r\n                                            show={film.add} index={index}\r\n                                            handleAddPlaylistButtonClick={this.handleAddPlaylistButtonClick}\r\n                                            handleClick={this.handleCreatePlaylistClick}\r\n                                            handleClickOutside={this.handleClickOutside}\r\n                                            handlePlaylistOperation={this.handlePlaylistOperation}/>\r\n                                    </Col>\r\n                                </Row>\r\n                                <p className=\"mb-0 author-nick\">\r\n                                    <small>{film.author_name}</small>\r\n                                </p>\r\n                                <p className=\"mb-0 film-views\">\r\n                                    <small>{film.views} views</small>\r\n                                </p>\r\n\r\n                            </Col>\r\n\r\n                        })\r\n\r\n                    }\r\n\r\n                </Row>\r\n                {\r\n                    ((scroll.scrollTop === 0 || scroll.offsetHeight <= scroll.innerHeight) && this.state.hasMore && this.state.isMounted) &&\r\n                    <Col sm={12} className=\"text-center\">\r\n                        <Button\r\n                            className=\"button-my\"\r\n                            variant=\"contained\"\r\n                            disabled={isLoading}\r\n                            onClick={!isLoading ? this.loadData : null}\r\n                        >\r\n                            {isLoading ? 'Loading' : 'Click to load'}\r\n                        </Button>\r\n                    </Col>\r\n\r\n\r\n                }\r\n                {\r\n\r\n                    this.state.hasMore &&\r\n                    <Col style={{height: 40}} sm={12} className=\"text-center\">\r\n                        {(!(scroll.scrollTop === 0 || scroll.offsetHeight <= scroll.innerHeight) || !this.state.isMounted) &&\r\n                        this.state.isLoading &&\r\n                        <Spinner animation=\"border\"/>\r\n                        }\r\n                    </Col>\r\n                }\r\n\r\n                <Snackbar\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={this.state.openSnackbar}\r\n                    autoHideDuration={1500}\r\n                    onClose={this.handleClose}\r\n                    ContentProps={{\r\n                        'aria-describedby': 'message-id',\r\n                    }}\r\n                    message={<span id=\"message-id\">{this.state.note}</span>}\r\n                />\r\n            </Col>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    return {\r\n        loggedIn\r\n    };\r\n}\r\n\r\nconst connectedHomePage = connect(mapStateToProps)(HomeComponent);\r\n\r\n\r\nexport {connectedHomePage as HomeComponent};\r\n","import React, {Component} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport {Col, Row, Spinner} from \"react-bootstrap\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\n\r\nimport './FilmComponent.css';\r\nimport {config} from \"../../config\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport \"../../../node_modules/video-react/dist/video-react.css\";\r\nimport {PlaylistAddButtonComponent} from \"../Playlist/PlaylistAddButtonComponent\";\r\nimport Snackbar from \"@material-ui/core/Snackbar/Snackbar\";\r\nimport TextTruncate from 'react-text-truncate';\r\n\r\nimport {isMobile} from 'react-device-detect'\r\n\r\nconst CancelToken = axios.CancelToken;\r\nlet source = CancelToken.source();\r\n\r\nclass FilmsPreviewComponent extends Component {\r\n\r\n    loadFilms = () => {\r\n\r\n        source.cancel();\r\n        source = axios.CancelToken.source();\r\n\r\n        this.setState({isLoading: true}, () => {\r\n\r\n            this.props.handleLoading(this.state);\r\n\r\n            axios.get(`${config.apiUrl}films`, {\r\n                cancelToken: source.token,\r\n                params: {\r\n                    exclude: this.state.filmID,\r\n                    start: this.state.films.length,\r\n                    limit: 8\r\n                }\r\n            })\r\n                .then(res => {\r\n\r\n                    let films = res.data;\r\n\r\n\r\n                    const maxSize = films.length === 0 && this.state.films.length < 20 ? this.state.films.length : 20;\r\n\r\n                    films.forEach(film => {\r\n                        film.add = false;\r\n                    });\r\n                    this.setState({\r\n                        hasMore: (this.state.films.length + films.length < maxSize),\r\n                        isLoading: false,\r\n                        films: [\r\n                            ...this.state.films,\r\n                            ...films], isLoaded: true\r\n                    }, () => {\r\n                        this.props.handleLoading(this.state);\r\n                    });\r\n                })\r\n                .catch((err) => {\r\n                    this.setState({\r\n                        error: err.message,\r\n                        isLoading: false, isLoaded: true\r\n                    }, () => {\r\n                        this.props.handleLoading(this.state);\r\n                    })\r\n                })\r\n        })\r\n\r\n    };\r\n\r\n\r\n    setRedirect = (e, filmID) => {\r\n        if (e && e.target && (e.target.id === \"s-c-1\"\r\n            || e.target.id === \"s-c-2\" || e.target.id === \"s-c-3\" || e.target.id === \"s-c-4\"\r\n            || (e.target.localName === \"path\" && e.target.parentElement && e.target.parentElement.parentElement\r\n                && e.target.parentElement.parentElement.id !== \"a-b-2\")))\r\n            this.props.handleThumbnail(filmID);\r\n    };\r\n\r\n    handleScroll = () => {\r\n\r\n        if (this.state.addOpenedIndex >= 0 && !isMobile) {\r\n            let array = this.state.films;\r\n            array[this.state.addOpenedIndex].add = false;\r\n\r\n            this.setState({films: array, addOpenedIndex: -1});\r\n        }\r\n    };\r\n\r\n    handleResize = () => {\r\n    };\r\n\r\n    handlePlaylistOperation = (message) => {\r\n        if (this.state.addOpenedIndex >= 0) {\r\n            let array = this.state.films;\r\n            array.forEach((film) => {\r\n                film.add = false;\r\n            });\r\n            this.setState({films: array, addOpenedIndex: -1})\r\n        }\r\n\r\n        this.setState({openSnackbar: true, note: message});\r\n    };\r\n\r\n    handleClickOutside = (index) => {\r\n        if (this.state.addOpenedIndex >= 0) {\r\n            let array = this.state.films;\r\n            array.forEach((film) => {\r\n                film.add = false;\r\n            });\r\n            this.setState({films: array, addOpenedIndex: index})\r\n        }\r\n    };\r\n\r\n    handleCreatePlaylistClick = () => {\r\n        this.setState({addOpenedIndex: -1});\r\n    };\r\n\r\n    handleAddPlaylistButtonClick = (index) => {\r\n        let array = this.state.films;\r\n        array[index].add = !array[index].add;\r\n\r\n        this.setState({films: array, addOpenedIndex: index})\r\n\r\n    };\r\n\r\n    handleCloseSnackbar = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n\r\n        this.setState({openSnackbar: false});\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n            filmID: '',\r\n\r\n            error: false,\r\n            hasMore: true,\r\n            isLoading: false,\r\n\r\n            isLoaded: false,\r\n\r\n            films: [],\r\n            addOpenedIndex: -1,\r\n            openSnackbar: false,\r\n            note: ''\r\n\r\n        };\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n        window.removeEventListener('resize', this.handleResize);\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('scroll', this.handleScroll);\r\n        window.addEventListener('resize', this.handleResize);\r\n\r\n        this.setState({filmID: this.props.filmID});\r\n        this.loadFilms();\r\n    }\r\n\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n\r\n        if (prevProps.isLoading !== this.props.isLoading) {\r\n            if (this.props.isLoading && !(this.state.error || this.state.isLoading || !this.state.hasMore)) {\r\n                this.loadFilms();\r\n            }\r\n        }\r\n        if (prevProps.filmID !== this.props.filmID) {\r\n\r\n            source.cancel();\r\n            source = axios.CancelToken.source();\r\n\r\n            this.setState({\r\n                isLoading: true,\r\n                isLoaded: false,\r\n                filmID: this.props.filmID,\r\n                error: false,\r\n                hasMore: true,\r\n                films: [],\r\n                addOpenedIndex: -1,\r\n                openSnackbar: false\r\n            }, () => {\r\n\r\n                this.props.handleLoading(this.state);\r\n\r\n                axios.get(`${config.apiUrl}films`, {\r\n                    cancelToken: source.token,\r\n                    params: {\r\n                        exclude: this.state.filmID,\r\n                        start: 0,\r\n                        limit: 8\r\n                    }\r\n                })\r\n                    .then(res => {\r\n\r\n                        let films = res.data;\r\n\r\n                        films.forEach(film => {\r\n                            film.add = false;\r\n                        });\r\n\r\n                        this.setState({\r\n                            isLoaded: true,\r\n                            hasMore: films.length < 20,\r\n                            isLoading: false,\r\n                            films: films\r\n                        }, () => {\r\n                            this.props.handleLoading(this.state);\r\n                        });\r\n                    })\r\n                    .catch((err) => {\r\n                        if (axios.isCancel(err)) {\r\n                            console.log('Request canceled', err.message);\r\n                        } else {\r\n                            this.setState({\r\n                                error: err.message,\r\n                                isLoading: false\r\n                            }, () => {\r\n                                this.props.handleLoading(this.state);\r\n                            })\r\n                        }\r\n                    })\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n\r\n        return (\r\n\r\n            <Col className=\"p-0\">\r\n\r\n                {\r\n                    this.state.films.map((film, index) => {\r\n\r\n\r\n                        return (\r\n                            <Col className=\"film-preview-holder p-0 mb-4 container\" onClick={(e) => this.setRedirect(e, film.id)}\r\n                                 key={film.id}>\r\n                                <Row>\r\n                                    <Col xs={7} sm={7}>\r\n                                        <div\r\n                                            className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n                                            <img alt=\"\" id=\"s-c-1\" className=\"image embed-responsive-item\"\r\n                                                 src={`${config.apiUrl}films/${film.id}/thumbnail/${film.thumbnail._id}?width=small`}/>\r\n                                            <FontAwesomeIcon className=\"middle\" icon=\"play\"/>\r\n                                        </div>\r\n                                    </Col>\r\n                                    <Col xs={5} sm={5} className=\"p-0 \">\r\n                                        <Row className=\"m-0\">\r\n                                            <Col xs={10} sm={10} className=\"p-0\">\r\n                                                <TextTruncate line={2} text={film.title}\r\n                                                              id=\"s-c-2\" className=\"mb-1 title\"/>\r\n\r\n                                            </Col>\r\n                                            <PlaylistAddButtonComponent parentName=\"search\"\r\n                                                                        filmID={film.id}\r\n                                                                        show={film.add} index={index}\r\n                                                                        playlistID={this.props.playlistID}\r\n\r\n                                                                        handleAddPlaylistButtonClick={this.handleAddPlaylistButtonClick}\r\n                                                                        handleClick={this.handleCreatePlaylistClick}\r\n                                                                        handleClickOutside={this.handleClickOutside}\r\n                                                                        handlePlaylistOperation={this.handlePlaylistOperation}/>\r\n\r\n                                        </Row>\r\n                                        <p id=\"s-c-3\" className=\"mb-0 author-nick\">\r\n                                            <small>{film.author_name}</small>\r\n                                        </p>\r\n                                        <p id=\"s-c-4\" className=\"film-views\">\r\n                                            <small>{film.views} views</small>\r\n                                        </p>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        )\r\n                    })\r\n                }\r\n                {\r\n                    this.state.hasMore &&\r\n                    <Col style={{height: 40}} sm={12} className=\"mb-2 text-center\">\r\n                        {\r\n                            this.state.isLoading &&\r\n                            <Spinner animation=\"border\"/>\r\n                        }\r\n                    </Col>\r\n                }\r\n                <Snackbar\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={this.state.openSnackbar}\r\n                    autoHideDuration={1500}\r\n                    onClose={this.handleCloseSnackbar}\r\n                    ContentProps={{\r\n                        'aria-describedby': 'message-id',\r\n                    }}\r\n                    message={<span id=\"message-id\">{this.state.note}</span>}\r\n                />\r\n\r\n            </Col>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n\r\n    return {\r\n        loggedIn,\r\n    };\r\n}\r\n\r\n\r\nconst connectedFilmPage = connect(mapStateToProps)(FilmsPreviewComponent);\r\n\r\nexport {connectedFilmPage as FilmsPreviewComponent};\r\n","import React, {Component} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\n\r\nimport './PlaylistComponent.css';\r\nimport {config} from \"../../config\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport \"../../../node_modules/video-react/dist/video-react.css\";\r\n\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\n\r\nimport PerfectScrollbar from 'react-perfect-scrollbar'\r\nimport {userActions} from \"../../actions\";\r\nimport {authHeader} from \"../../helpers\";\r\nimport Snackbar from \"@material-ui/core/Snackbar/Snackbar\";\r\nimport TextTruncate from \"react-text-truncate\";\r\nimport ButtonBase from \"@material-ui/core/ButtonBase/ButtonBase\";\r\n\r\nconst pathName = config.pathName;\r\n\r\nclass PlaylistComponent extends Component {\r\n\r\n\r\n    setRedirect = (filmID) => {\r\n        this.props.history.push(\r\n            {\r\n                pathname: `${pathName}film/` + filmID,\r\n                search: `?list=${this.state.playlist.id}`\r\n            });\r\n        this.props.handleSubmit(filmID);\r\n\r\n    };\r\n\r\n    handleResize = () => {\r\n        this.setState({\r\n            playlistHeight: this.props.filmElement.clientHeight,\r\n\r\n            playlistHeaderHeight: (this.playlistHeader !== null &&\r\n                this.playlistHeader.current !== null && this.playlistHeader.current.clientHeight != null) ?\r\n                this.playlistHeader.current.clientHeight : this.state.playlistHeaderHeight\r\n        });\r\n    };\r\n\r\n    loadFilm = () => {\r\n\r\n        axios.get(`${config.apiUrl}playlists/${this.props.id}`)\r\n            .then(res => {\r\n                this.setState({playlist: res.data});\r\n                const playlistFilms = res.data.films;\r\n                const requests = [];\r\n\r\n                playlistFilms.forEach((film, index) => {\r\n\r\n                    if (film === this.state.currentFilm)\r\n                        this.setState({index: index + 1});\r\n\r\n                    requests.push(axios.get(`${config.apiUrl}films/${film}/desc/no`)\r\n                        .then(res => {\r\n                            let film = res.data;\r\n                            return film;\r\n                        })\r\n                        .catch((err) => {\r\n                            this.setState({\r\n                                error: err.message,\r\n                            })\r\n                        }));\r\n\r\n\r\n                });\r\n\r\n                Promise.all(requests).then((films) => {\r\n                    this.setState({\r\n                        films: films,\r\n                        playlistHeight: this.props.filmElement.clientHeight,\r\n                        isPlaylistLoaded: true\r\n                    }, () => {\r\n                        this.setState({\r\n                            playlistHeaderHeight: (this.playlistHeader !== null &&\r\n                                this.playlistHeader.current !== null && this.playlistHeader.current.clientHeight != null) ?\r\n                                this.playlistHeader.current.clientHeight : this.state.playlistHeaderHeight\r\n                        });\r\n                    });\r\n                });\r\n\r\n            }).catch((error) => {\r\n            console.log(error)\r\n        });\r\n    };\r\n\r\n    checkOwnerOfPlaylist = (playlistID) => {\r\n        if (localStorage.getItem('user')) {\r\n            const requestOptions = {\r\n                headers: authHeader()\r\n            };\r\n\r\n            this.setState({isLoading: true}, () => {\r\n                axios.get(`${config.apiUrl}users/me`, requestOptions)\r\n                    .then(response => {\r\n\r\n                        let playlists = response.data.playlists;\r\n                        if (playlists.indexOf(playlistID) > -1)\r\n                            this.setState({ownerOfPlaylist: true});\r\n\r\n                        this.setState({\r\n                            isLoading: false,\r\n                            loaded: true,\r\n                            playlists: playlists\r\n                        })\r\n\r\n                    })\r\n                    .catch((err) => {\r\n                        this.setState({\r\n                            error: err.message,\r\n                            isLoading: false,\r\n                            loaded: true,\r\n                        })\r\n                    });\r\n            })\r\n        }\r\n    };\r\n\r\n    handleRemoveFromPlaylist = (index, filmID) => {\r\n        const requestParams = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        const body = {films: [filmID]};\r\n\r\n        axios.put(`${config.apiUrl}playlists/${this.state.id}/films/delete/`, body, requestParams)\r\n            .then(res => {\r\n\r\n                let filmsTmp = this.state.films;\r\n\r\n                filmsTmp.splice(index, 1);\r\n\r\n                this.setState({films: filmsTmp}, () => {\r\n                    this.setState({openSnackbar: true, note: \"Deleted from playlist!\"})});\r\n\r\n            }).catch(err => {\r\n            console.log(err);\r\n        })\r\n    };\r\n\r\n    handleRemovePlaylist = () => {\r\n\r\n        const requestParams = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        axios.delete(`${config.apiUrl}playlists/${this.state.id}`, requestParams)\r\n            .then(res => {\r\n                this.setState({openSnackbar: true, note: \"Playlist deleted!\"});\r\n                this.props.handleDeletePlaylist();\r\n            }).catch(err => {\r\n            console.log(err);\r\n        })\r\n    };\r\n\r\n    handleCloseSnackbar = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n\r\n        this.setState({openSnackbar: false});\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.playlistHeader = React.createRef();\r\n\r\n        this.state = {\r\n\r\n            currentFilm: null,\r\n            id: null,\r\n\r\n            error: false,\r\n            hasMore: true,\r\n            isLoading: false,\r\n\r\n            films: [],\r\n            playlist: '',\r\n            playlistHeight: 300,\r\n            playlistHeaderHeight: 50,\r\n\r\n            index: 1,\r\n\r\n            isPlaylistLoaded: false,\r\n            ownerOfPlaylist: false,\r\n            openSnackbar: false,\r\n            note: ''\r\n\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!this.props.id) {\r\n            console.log(\"Error loading playlist...\");\r\n            return;\r\n        }\r\n\r\n        window.addEventListener('resize', this.handleResize);\r\n\r\n        this.setState({id: this.props.id, currentFilm: this.props.filmID}, () => {\r\n            this.checkOwnerOfPlaylist(this.state.id)\r\n        });\r\n\r\n        this.loadFilm();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('resize', this.handleResize);\r\n\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (prevProps.filmID !== this.props.filmID) {\r\n            this.setState({\r\n                currentFilm: this.props.filmID,\r\n                index: this.state.films.findIndex((film => film !== null && film !== undefined && film.id === this.props.filmID)) + 1\r\n            });\r\n        }\r\n\r\n\r\n        if (this.props.playlistFilm !== '' && prevProps.playlistFilm !== this.props.playlistFilm) {\r\n            if (this.props.playlistFilm === 'ADDED' || this.props.playlistFilm === 'DELETED') {\r\n                this.loadFilm();\r\n            }\r\n\r\n            this.props.dispatch(userActions.playlistFilm(''));\r\n\r\n        }\r\n\r\n        if (this.props.loggedIn !== prevProps.loggedIn) {\r\n            if (this.props.loggedIn) {\r\n                this.checkOwnerOfPlaylist(this.state.id)\r\n\r\n            } else {\r\n                this.setState({ownerOfPlaylist: false});\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        const {windowWidth} = this.props;\r\n\r\n        const lines = windowWidth > 768 && windowWidth < 1024 ? 1 : 2;\r\n        const playlistHeightMultiplayer = windowWidth < 768 ? 0 : 1;\r\n\r\n        return (\r\n\r\n            (this.state.isPlaylistLoaded) &&\r\n            <Col className=\"p-0  mt-4 mb-5\">\r\n                <Col  className=\"playlist-remove-container pt-2 pb-2 playlist-header\" sm={12} ref={this.playlistHeader}>\r\n                    <Row className=\"m-0 p-0\">\r\n                        <Col className=\"m-0 p-0\" xs={10} sm={10}>\r\n                            <p className=\"mb-1\">{this.state.playlist.title}</p>\r\n                            <small>{this.state.playlist.author_name}</small>\r\n                            <small\r\n                                className=\"playlist-index\">- {this.state.films.length > 0 ? this.state.index : 0}/{this.state.films.length}</small>\r\n                        </Col>\r\n                        {\r\n                            this.state.ownerOfPlaylist &&\r\n                            <Col\r\n                                 style={{height: 24 + 'px', width: 24 + \"px\"}}\r\n                                 xs={2} sm={2} className={\r\n                                \"playlist-remove-holder m-0 p-0 text-center justify-content-center d-flex align-items-center center-vertically my-center-vertically\"}\r\n                                 onClick={() => this.handleRemovePlaylist()}>\r\n                                <ButtonBase\r\n                                            style={{borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\"}}\r\n                                            className=\"button-my\" >\r\n                                    {\r\n                                        <FontAwesomeIcon  icon=\"trash-alt\"/>\r\n                                    }\r\n                                </ButtonBase>\r\n                            </Col>\r\n                        }\r\n                    </Row>\r\n                </Col>\r\n                <Col style={{height: this.state.playlistHeight  - this.state.playlistHeaderHeight * playlistHeightMultiplayer + 'px'}}\r\n                     className=\"p-0 playlist-container\" xs={12} sm={12}>\r\n                    <PerfectScrollbar\r\n                        onYReachEnd={() => {\r\n                        }} onScrollY={() => {\r\n                    }}>\r\n                        {\r\n                            this.state.films.map((film, index) => {\r\n                                    if (film !== null && film !== undefined) {\r\n                                       return (\r\n                                            <Row xs={12} sm={12} className=\"m-0 p-0 playlist-remove-container\" key={film.id}>\r\n                                                <Col xs={10} sm={10}\r\n                                                     className={index === this.state.films.length - 1 ?\r\n                                                         \"mt-3 mb-3\" :\r\n                                                         \"mt-3\"}\r\n                                                     onClick={() => this.setRedirect(film.id)}\r\n                                                >\r\n                                                    <Row>\r\n                                                        <Col\r\n                                                            className=\"text-center justify-content-center d-flex align-items-center p-0 pl-1\"\r\n                                                            xs={1} sm={1}>\r\n                                                            {\r\n                                                                (this.state.currentFilm === film.id && this.state.index === index + 1) ?\r\n                                                                    <small><FontAwesomeIcon style={{fontWeight: 300}}\r\n                                                                                            icon=\"play\"/></small>\r\n                                                                    :\r\n                                                                    <small>{index + 1}</small>\r\n\r\n                                                            }\r\n                                                        </Col>\r\n                                                        <Col className=\"pr-2 pl-2\" xs={6} sm={6}>\r\n                                                            <div\r\n                                                                className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n                                                                <img alt=\"\" className=\"image embed-responsive-item\"\r\n                                                                     src={`${config.apiUrl}films/${film.id}/thumbnail/${film.thumbnail._id}?width=small`}/>\r\n                                                                <FontAwesomeIcon className=\"middle\" icon=\"play\"/>\r\n                                                            </div>\r\n                                                        </Col>\r\n                                                        <Col xs={5} sm={5} className=\"p-0\">\r\n                                                            <TextTruncate line={lines} text={film.title}\r\n                                                                          className=\"mb-0 title font-weight-bold\"/>\r\n                                                            <p className=\"mb-1 author-nick\">\r\n                                                                <small>{film.author_name}</small>\r\n                                                            </p>\r\n                                                        </Col>\r\n                                                    </Row>\r\n                                                </Col>\r\n                                                {\r\n                                                    this.state.ownerOfPlaylist &&\r\n                                                    <Col xs={2} sm={2}\r\n                                                         className={index === this.state.films.length - 1 ?\r\n                                                             \"mt-3 mb-3 text-center justify-content-center d-flex align-items-center\" :\r\n                                                             \"mt-3 text-center justify-content-center d-flex align-items-center\"}>\r\n                                                        <Col\r\n                                                            className=\"playlist-remove-holder p-0 m-0\"\r\n                                                            style={{height: 24 + 'px', width: 24 + \"px\"}}>\r\n                                                            <ButtonBase\r\n                                                                        style={{borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\"}}\r\n                                                                        className=\"button-my \"\r\n                                                                        onClick={() => this.handleRemoveFromPlaylist(index, film.id)}>\r\n                                                                {\r\n                                                                    <FontAwesomeIcon  icon=\"trash-alt\"/>\r\n                                                                }\r\n                                                            </ButtonBase>\r\n                                                        </Col>\r\n                                                    </Col>\r\n                                                }\r\n\r\n                                            </Row>\r\n                                        )\r\n                                    }else{\r\n                                        return (\r\n                                            <Row xs={12} sm={12} className=\"m-0 p-0 playlist-remove-container\" key={index}>\r\n                                                <Col xs={10} sm={10}\r\n                                                     className={index === this.state.films.length - 1 ?\r\n                                                         \"mt-3 mb-3\" :\r\n                                                         \"mt-3\"}\r\n                                                >\r\n                                                    <Row>\r\n                                                        <Col\r\n                                                            className=\"text-center justify-content-center d-flex align-items-center p-0 pl-1\"\r\n                                                            xs={1} sm={1}>\r\n                                                            {\r\n                                                                (this.state.index === index + 1) ?\r\n                                                                    <small><FontAwesomeIcon style={{fontWeight: 300}}\r\n                                                                                            icon=\"play\"/></small>\r\n                                                                    :\r\n                                                                    <small>{index + 1}</small>\r\n\r\n                                                            }\r\n                                                        </Col>\r\n                                                        <Col className=\"pr-2 pl-2\" xs={6} sm={6}>\r\n                                                            <div\r\n                                                                className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n                                                                <img alt=\"\" className=\" embed-responsive-item\"\r\n                                                                     src=\"https://www.atelierliving.nl/wp-content/themes/ctrln/assets/images/placeholder.png\"/>\r\n                                                                <FontAwesomeIcon className=\"middle\" icon=\"play\"/>\r\n                                                            </div>\r\n                                                        </Col>\r\n                                                        <Col xs={5} sm={5} className=\"p-0\">\r\n                                                            <p className=\"mb-0 title font-weight-bold mb-1 author-nick\">[Film delted]</p>\r\n                                                        </Col>\r\n                                                    </Row>\r\n                                                </Col>\r\n                                                {\r\n                                                    this.state.ownerOfPlaylist &&\r\n                                                    <Col xs={2} sm={2}\r\n                                                         className={index === this.state.films.length - 1 ?\r\n                                                             \"mt-3 mb-3 text-center justify-content-center d-flex align-items-center\" :\r\n                                                             \"mt-3 text-center justify-content-center d-flex align-items-center\"}>\r\n\r\n                                                        <Col\r\n                                                            className=\"playlist-remove-holder p-0 m-0\"\r\n                                                            style={{height: 24 + 'px', width: 24 + \"px\"}}>\r\n                                                            <ButtonBase\r\n                                                                        style={{borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\"}}\r\n                                                                        className=\"button-my\"\r\n                                                                        onClick={() => this.handleRemoveFromPlaylist(index, this.state.playlist.films[index])}>\r\n                                                                {\r\n                                                                    <FontAwesomeIcon  icon=\"trash-alt\"/>\r\n                                                                }\r\n                                                            </ButtonBase>\r\n                                                        </Col>\r\n                                                    </Col>\r\n\r\n                                                }\r\n\r\n                                            </Row>)\r\n                                    }\r\n                                }\r\n                            )}\r\n                    </PerfectScrollbar>\r\n\r\n                </Col>\r\n\r\n                <Snackbar\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={this.state.openSnackbar}\r\n                    autoHideDuration={1500}\r\n                    onClose={this.handleCloseSnackbar}\r\n                    ContentProps={{\r\n                        'aria-describedby': 'message-id',\r\n                    }}\r\n                    message={<span id=\"message-id\">{this.state.note}</span>}\r\n                />\r\n\r\n            </Col>\r\n\r\n\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    const {playlistFilm} = state.playlistFilm;\r\n\r\n    return {\r\n        loggedIn,\r\n        playlistFilm\r\n    };\r\n}\r\n\r\nconst connectedPlaylistPage = connect(mapStateToProps)(PlaylistComponent);\r\n\r\nexport {connectedPlaylistPage as PlaylistComponent};\r\n","import React, {Component} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport {Button, Col, Dropdown, DropdownButton, Row, Spinner} from \"react-bootstrap\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport {authHeader} from \"../../helpers\";\r\nimport {config} from \"../../config\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport \"../../../node_modules/video-react/dist/video-react.css\";\r\n\r\nconst CancelToken = axios.CancelToken;\r\nlet source = CancelToken.source();\r\nconst pathName = config.pathName;\r\n\r\nclass CommentsComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            filmID: '',\r\n\r\n            comments: [],\r\n\r\n            comment: '',\r\n            dir: 1,\r\n\r\n            error: false,\r\n            hasMore: true,\r\n            isLoading: false,\r\n\r\n            isLoaded: false,\r\n\r\n            addedCount: 0\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n    loadComments = () => {\r\n        this.setState({isLoading: true}, () => {\r\n\r\n            this.props.handleLoading(this.state);\r\n\r\n            axios.get(`${config.apiUrl}films/${this.state.filmID}/desc`,\r\n                {params: {start: this.state.comments.length, limit: 10}})\r\n                .then(res => {\r\n\r\n                    let film = res.data;\r\n\r\n                    this.setState({\r\n                        hasMore: (film.comments.length > 0),\r\n                        isLoading: false,\r\n                        comments: [...this.state.comments, ...film.comments]\r\n                    }, () => {\r\n                        this.props.handleLoading(this.state);\r\n                    });\r\n\r\n                })\r\n                .catch((err) => {\r\n                    this.setState({\r\n                        error: err.message,\r\n                        isLoading: false\r\n                    }, () => {\r\n                        this.props.handleLoading(this.state);\r\n                    })\r\n                })\r\n        })\r\n    };\r\n\r\n    addComment = () => {\r\n\r\n        if (!localStorage.getItem('user')) {\r\n            this.props.history.push(`${pathName}film/${this.state.filmID}/login`);\r\n            return;\r\n        }\r\n\r\n        const requestOptions = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        axios.post(`${config.apiUrl}films/${this.state.filmID}/comments`,\r\n            {text: this.state.comment}, requestOptions)\r\n\r\n            .then((response) => {\r\n\r\n                if (response.status === 200) {\r\n                    const comment = response.data;\r\n\r\n                    axios.get(`${config.apiUrl}users/${comment.author_id}`)\r\n                        .then(res => {\r\n                            let array = this.state.comments;\r\n                            array.unshift({\r\n                                id: comment._id,\r\n                                author: res.data.nick,\r\n                                comment: comment.text,\r\n                                createdAt: comment.createdAt\r\n                            });\r\n\r\n                            this.setState({comment: '', comments: array,\r\n                                addedCount: this.state.addedCount + 1\r\n                            })\r\n\r\n                        })\r\n\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n            });\r\n    };\r\n\r\n    sortComments = (e) => {\r\n        let path = '';\r\n\r\n        switch (e) {\r\n            case 'commentByDate':\r\n                path = 'date';\r\n\r\n                break;\r\n            case 'commentByName':\r\n                path = 'author';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (path === '')\r\n            return;\r\n\r\n\r\n        axios.get(`${config.apiUrl}films/${this.state.filmID}/comments/sort/${path}/${this.state.dir}`,\r\n            {params: {start: 0, limit: this.state.comments.length}})\r\n            .then(res => {\r\n\r\n                const data = res.data[0].comments;\r\n\r\n                const requests = [];\r\n\r\n                data.forEach(comment => {\r\n                    requests.push({\r\n                        id: comment.comment._id,\r\n                        author: comment.author,\r\n                        comment: comment.comment.text,\r\n                        createdAt: comment.comment.createdAt\r\n                    })\r\n                });\r\n\r\n                Promise.all(requests).then((comments) => {\r\n                    this.setState({comments: comments});\r\n                });\r\n            });\r\n\r\n        this.setState({dir: this.state.dir * -1});\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.setState({isLoading: true, filmID: this.props.filmID}, () => {\r\n\r\n            axios.get(`${config.apiUrl}films/${this.state.filmID}/desc`,\r\n                {params: {start: this.state.comments.length, limit: 5}})\r\n                .then(res => {\r\n\r\n                    let film = res.data;\r\n                    this.setState({\r\n                        hasMore: (film.comments.length > 0),\r\n                        isLoading: false,\r\n                        isLoaded: true,\r\n                        comments: [...this.state.comments, ...film.comments]\r\n                    }, () => {\r\n                        this.props.handleLoading(this.state);\r\n                    });\r\n\r\n                })\r\n                .catch((err) => {\r\n                    this.setState({\r\n                        error: err.message,\r\n                        isLoading: false\r\n                    }, () => {\r\n                        this.props.handleLoading(this.state);\r\n                    })\r\n                })\r\n        })\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n\r\n        if (prevProps.isLoading !== this.props.isLoading) {\r\n            if (this.props.isLoading && !(this.state.error || this.state.isLoading || !this.state.hasMore)) {\r\n                this.loadComments();\r\n            } else {\r\n                this.props.handleLoading(this.state)\r\n            }\r\n        }\r\n\r\n        if (prevProps.filmID!== this.props.filmID ) {\r\n\r\n            source.cancel();\r\n            source = axios.CancelToken.source();\r\n\r\n            this.setState({\r\n                filmID: this.props.filmID,\r\n                comment: '',\r\n                dir: 1,\r\n                comments: [],\r\n\r\n                isLoading: true,\r\n                isLoaded: false,\r\n                error: false,\r\n                hasMore: true,\r\n                addedCount: 0\r\n            }, () => {\r\n\r\n                this.props.handleLoading(this.state);\r\n\r\n                axios.get(`${config.apiUrl}films/${this.props.filmID}/desc`,\r\n                    {cancelToken: source.token, params: {start: 0, limit: 5}})\r\n                    .then(res => {\r\n                        let film = res.data;\r\n\r\n                        this.setState({\r\n                            hasMore: (film.comments.length > 0),\r\n                            isLoading: false,\r\n                            isLoaded: true,\r\n                            comments: film.comments\r\n                        }, () => {\r\n                            this.props.handleLoading(this.state);\r\n                        });\r\n\r\n                    })\r\n                    .catch((err) => {\r\n                        if (axios.isCancel(err)) {\r\n                            console.log('Request canceled', err.message);\r\n                        } else {\r\n                            this.setState({\r\n                                error: err.message,\r\n                                isLoading: false,\r\n                                isLoaded: true,\r\n                            }, () => {\r\n                                this.props.handleLoading(this.state);\r\n                            })\r\n                        }\r\n\r\n                    })\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n\r\n    handleChange(e) {\r\n        this.setState({comment: e.target.value});\r\n    }\r\n\r\n    render() {\r\n\r\n        const displayDate = (comment) => {\r\n            let date = new Date(Date.parse(comment.createdAt));\r\n\r\n            return ('0' + date.getDate()).slice(-2) + '-' + ('0' + (date.getMonth() + 1)).slice(-2) + '-'\r\n                + ('0' + date.getFullYear()).slice(-2)\r\n                + ' o ' + ('0' + date.getHours()).slice(-2) + ':' + ('0' + date.getMinutes()).slice(-2);\r\n        };\r\n\r\n\r\n        let {commentsLength} = this.props;\r\n        commentsLength += this.state.addedCount;\r\n\r\n        return (\r\n\r\n            <Col className=\"p-0 mt-4\">\r\n                {\r\n                    this.state.isLoaded &&\r\n                    <Col>\r\n                        <Col className=\"p-0\" sm={12}>\r\n                            <Row>\r\n                                <Col xs={8} sm={10}>\r\n                                    <TextField\r\n                                        value={this.state.comment}\r\n                                        onChange={this.handleChange}\r\n                                        type=\"text\"\r\n                                        id=\"standard-multiline-flexible\"\r\n                                        label=\"Comment\"\r\n                                        multiline\r\n                                        fullWidth\r\n                                        rowsMax=\"4\"\r\n                                    />\r\n                                </Col>\r\n                                <Col xs={2} sm={2}>\r\n                                    <Button className=\"mt-3\" variant=\"primary\"\r\n                                            onClick={() => this.addComment()}>\r\n                                        Submit\r\n                                    </Button>\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n                        {\r\n                            <Col className=\"p-0 mt-4 mb-4\" sm={12}>\r\n                                <Row>\r\n                                    <Col xs={7} sm={5} md={4}>\r\n                                        <p className=\"m-0\">{commentsLength + \" comments\"}</p>\r\n                                    </Col>\r\n                                    <Col xs={2} sm={2}>\r\n                                        <DropdownButton\r\n                                            alignRight\r\n                                            variant=\"secondary\"\r\n                                            title=\"Sort\"\r\n                                            id=\"dropdown-button-drop-down\"\r\n                                            onSelect={k => this.sortComments(k)}>\r\n                                            <Dropdown.Item eventKey=\"commentByDate\">By date</Dropdown.Item>\r\n                                            <Dropdown.Item eventKey=\"commentByName\">By author name</Dropdown.Item>\r\n                                        </DropdownButton>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        }\r\n\r\n                        {\r\n\r\n                            this.state.comments.map(comment => {\r\n                                return (\r\n                                    <Col className=\"p-0 mt-4\" sm={12} key={comment.id}>\r\n                                        <Row className=\"pl-3\">\r\n\r\n                                            <p className=\"m-0 font-weight-bold\">\r\n                                                <small className=\"m-0 font-weight-bold\">{comment.author}</small>\r\n                                            </p>\r\n                                            <p>\r\n                                                <small className=\"m-0\">&ensp;{displayDate(comment)}</small>\r\n                                            </p>\r\n                                        </Row>\r\n                                        <p>\r\n                                            <small>{comment.comment}</small>\r\n                                        </p>\r\n                                    </Col>\r\n                                )\r\n                            })\r\n\r\n\r\n                        }\r\n\r\n                    </Col>\r\n\r\n                }\r\n\r\n                {\r\n                    this.state.hasMore &&\r\n                    <Col style={{height: 40}} sm={12} className=\"mb-2 text-center\">\r\n                        {\r\n                            this.state.isLoading &&\r\n                            <Spinner animation=\"border\"/>\r\n                        }\r\n                    </Col>\r\n                }\r\n            </Col>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n\r\n    return {\r\n        loggedIn,\r\n    };\r\n}\r\n\r\n\r\nconst connectedFilmPage = connect(mapStateToProps)(CommentsComponent);\r\n\r\nexport {connectedFilmPage as CommentsComponent};\r\n","import React, {Component} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport {Button, Col, Row} from \"react-bootstrap\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\n\r\nimport './FilmComponent.css';\r\n\r\nimport {authHeader} from \"../../helpers\";\r\nimport {config} from \"../../config\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport \"../../../node_modules/video-react/dist/video-react.css\";\r\nimport {FilmsPreviewComponent} from \"./FilmsPreviewComponent\";\r\nimport {PlaylistComponent} from \"../Playlist/PlaylistComponent\";\r\nimport {CommentsComponent} from \"../Comments/CommentsComponent\";\r\nimport queryString from \"query-string\";\r\nimport {Player} from 'video-react';\r\nimport TextTruncate from 'react-text-truncate';\r\n\r\nconst CancelToken = axios.CancelToken;\r\nlet source = CancelToken.source();\r\n\r\nconst windowBreakpoint = 768;\r\nconst pathName = config.pathName;\r\n\r\nclass FilmComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            film: {},\r\n\r\n            isMounted: false,\r\n\r\n            isLoading: true,\r\n\r\n            isLoadingFilms: false,\r\n            isLoadingComments: false,\r\n\r\n            hasMoreFilms: true,\r\n\r\n            scroll: {},\r\n            windowWidth: window.innerWidth,\r\n\r\n            displayPlaylist: false,\r\n            playlistHeight: 400,\r\n            playlistID: null,\r\n            error: false,\r\n\r\n            expanded: false,\r\n            truncated: false,\r\n\r\n            rate: ''\r\n        };\r\n\r\n        this.handleTruncate = this.handleTruncate.bind(this);\r\n        this.toggleLines = this.toggleLines.bind(this);\r\n    }\r\n\r\n    handleTruncate(event) {\r\n\r\n        event.preventDefault();\r\n        this.setState({\r\n            truncated: false,\r\n            expanded: true\r\n        });\r\n    }\r\n\r\n    toggleLines(event) {\r\n        event.preventDefault();\r\n\r\n        this.setState({\r\n            expanded: !this.state.expanded\r\n        });\r\n    }\r\n\r\n    handleScroll = () => {\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: window.pageYOffset,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n\r\n\r\n        if ((window.innerHeight + window.pageYOffset) >= (document.body.offsetHeight - 150)) {\r\n            this.setState({isLoadingFilms: true});\r\n            if (window.innerWidth <= windowBreakpoint) {\r\n                if (!this.state.hasMoreFilms) {\r\n                    this.setState({isLoadingComments: true});\r\n                }\r\n            } else {\r\n                this.setState({isLoadingComments: true});\r\n            }\r\n        }\r\n    };\r\n\r\n    handleResize = () => {\r\n\r\n        this.setState({windowWidth: window.innerWidth});\r\n\r\n        let params = queryString.parse(this.props.location.search);\r\n\r\n        if (params && params.list) {\r\n            this.setState({\r\n                playlistHeight: this.filmElement.clientHeight\r\n            });\r\n        }\r\n    };\r\n\r\n    updateMeta = (meta) => {\r\n\r\n        if (meta !== 'views' && !localStorage.getItem('user')) {\r\n            this.props.history.push(`${pathName}film/${this.state.film.filmID}/login`);\r\n            return;\r\n        }\r\n\r\n        const options = {headers: {'Content-Type': 'application/json'}};\r\n\r\n        if (meta === 'views') {\r\n            return axios.put(`${config.apiUrl}films/${this.state.film.filmID}/meta`, JSON.stringify({'views': 1}),\r\n                options)\r\n                .then(data => {\r\n                    this.setState({\r\n                        isLoading: false\r\n                    });\r\n                }).catch(err => {\r\n                    this.setState({\r\n                        isLoading: false\r\n                    });\r\n                });\r\n        }\r\n\r\n        const requestOptions = {headers: authHeader()};\r\n\r\n        const rate = meta.toString().toUpperCase();\r\n\r\n        if(this.state.rate !== rate ) {\r\n\r\n            return axios.put(`${config.apiUrl}users/update/meta`, {[meta]: this.state.film.filmID},\r\n            requestOptions)\r\n            .then(data => {\r\n                const value = data.data;\r\n                return axios.put(`${config.apiUrl}films/${this.state.film.filmID}/meta`, value,\r\n                    options)\r\n                    .then(data => {\r\n\r\n                            this.setState({\r\n                                film: { ...this.state.film,\r\n                                    'dislikes': data.data.thumbsDown,\r\n                                    'likes': data.data.thumbsUp,\r\n                                },\r\n                                rate: rate\r\n\r\n                            });\r\n                    })\r\n                    .catch(err => {});\r\n\r\n            }).catch(err => {\r\n                console.log(err);\r\n            });\r\n\r\n        }\r\n    };\r\n\r\n\r\n    handleSetThumbnail = (filmID) => {\r\n        this.setState({\r\n            film: {\r\n                ...this.state.film,\r\n                poster: \"https://thumbs.gfycat.com/VibrantHeavyFrogmouth-size_restricted.gif\"\r\n            }\r\n        }, () => {\r\n            this.props.history.push(`${pathName}film/` + filmID);\r\n            window.scrollTo(0, 0);\r\n\r\n        })\r\n    };\r\n\r\n    handleSetThumbnailPlaylist = (filmID) => {\r\n        if (this.props.match.params.id !== filmID) {\r\n            this.setState({\r\n                film: {\r\n                    ...this.state.film,\r\n                    poster: \"https://thumbs.gfycat.com/VibrantHeavyFrogmouth-size_restricted.gif\"\r\n                }\r\n            })\r\n\r\n        }\r\n        window.scrollTo(0, 0);\r\n    };\r\n\r\n    handleLoadingFilms = (_State) => {\r\n        this.setState({isLoadingFilms: _State.isLoading});\r\n        this.setState({hasMoreFilms: _State.hasMore});\r\n    };\r\n\r\n    handleLoadingComments = (_State) => {\r\n        this.setState({isLoadingComments: _State.isLoading});\r\n    };\r\n\r\n    handleDeletePlaylist = () => {\r\n        this.setState({displayPlaylist: false});\r\n    };\r\n\r\n    componentDidMount() {\r\n\r\n        let params = queryString.parse(this.props.location.search);\r\n\r\n\r\n        window.addEventListener('scroll', this.handleScroll);\r\n        window.addEventListener('resize', this.handleResize);\r\n\r\n        this.setState({\r\n            film: {\r\n                ...this.state.film,\r\n                filmID: this.props.match.params.id\r\n            },\r\n            isLoading: true\r\n        }, () => {\r\n\r\n\r\n            axios.get(`${config.apiUrl}films/${this.props.match.params.id}/desc/no`)\r\n                .then(res => {\r\n\r\n                    const film = res.data;\r\n\r\n                    const requestParams = {\r\n                        headers: authHeader()\r\n                    };\r\n\r\n                    if (localStorage.getItem('user')) {\r\n\r\n                        axios.get(`${config.apiUrl}users/me`, requestParams)\r\n                            .then(res => {\r\n\r\n                                if (res.data.meta.liked.indexOf(this.state.film.filmID) > -1) {\r\n                                    this.setState({rate: 'LIKED'})\r\n                                }else if (res.data.meta.disliked.indexOf(this.state.film.filmID) > -1) {\r\n                                    this.setState({rate: 'DISLIKED'})\r\n                                }else{\r\n                                    this.setState({rate: ''});\r\n                                }\r\n\r\n                            });\r\n                    }\r\n\r\n                    if (params && params.list) {\r\n                        this.setState({\r\n                            displayPlaylist: true,\r\n                            playlistHeight: this.filmElement.clientHeight,\r\n                            playlistID: params.list\r\n                        });\r\n                    }\r\n\r\n                    this.setState({\r\n                        film: {\r\n                            ...this.state.film,\r\n                            thumbnail: film.thumbnail,\r\n                            poster: `${config.apiUrl}films/${this.state.film.filmID}/thumbnail/${film.thumbnail._id}?width=poster`,\r\n                            views: film.views + 1,\r\n                            title: film.title,\r\n                            description: film.description,\r\n                            likes: film.thumbsUp,\r\n                            dislikes: film.thumbsDown,\r\n                            videoSrc: `${config.apiUrl}films/${this.props.match.params.id}`,\r\n                            commentsLength: film.commentsLength\r\n                        },\r\n                        isMounted: true\r\n                    });\r\n\r\n                    this.updateMeta('views');\r\n\r\n\r\n                }).catch(err => {\r\n            })\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n        window.removeEventListener('resize', this.handleResize);\r\n    }\r\n\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n\r\n        if (prevProps.match.params.id !== this.props.match.params.id) {\r\n\r\n            source.cancel();\r\n            source = axios.CancelToken.source();\r\n\r\n            let params = queryString.parse(this.props.location.search);\r\n\r\n            this.setState({\r\n                isLoading: true,\r\n\r\n                film: {\r\n                    ...this.state.film,\r\n                    filmID: this.props.match.params.id,\r\n                },\r\n\r\n                isLoadingFilms: false,\r\n                isLoadingComments: false,\r\n\r\n                hasMoreFilms: true,\r\n                expanded: false,\r\n                truncated: false\r\n\r\n            }, () => {\r\n\r\n                axios.get(`${config.apiUrl}films/${this.props.match.params.id}/desc/no`, {\r\n                    cancelToken: source.token\r\n                })\r\n                    .then(res => {\r\n                        if (!params || !params.list) {\r\n                            this.setState({\r\n                                displayPlaylist: false,\r\n                                playlistHeight: 400,\r\n                                playlistID: null\r\n                            });\r\n                        } else {\r\n                            this.setState({\r\n                                displayPlaylist: true,\r\n                                playlistHeight: this.filmElement.clientHeight,\r\n                                playlistID: params.list\r\n                            });\r\n                        }\r\n\r\n                        const film = res.data;\r\n\r\n                        const requestParams = {\r\n                            headers: authHeader()\r\n                        };\r\n\r\n                        if (localStorage.getItem('user')) {\r\n\r\n                            axios.get(`${config.apiUrl}users/me`, requestParams)\r\n                                .then(res => {\r\n\r\n                                    if (res.data.meta.liked.indexOf(this.state.film.filmID) > -1) {\r\n                                        this.setState({rate: 'LIKED'})\r\n                                    } else if (res.data.meta.disliked.indexOf(this.state.film.filmID) > -1) {\r\n                                        this.setState({rate: 'DISLIKED'})\r\n                                    }else{\r\n                                        this.setState({rate: ''});\r\n                                    }\r\n\r\n                                });\r\n                        }\r\n\r\n                        this.setState({\r\n                            film: {\r\n                                ...this.state.film,\r\n                                thumbnail: film.thumbnail,\r\n                                views: film.views + 1,\r\n                                title: film.title,\r\n                                description: film.description,\r\n                                likes: film.thumbsUp,\r\n                                dislikes: film.thumbsDown,\r\n                                videoSrc: `${config.apiUrl}films/${this.props.match.params.id}`,\r\n                                commentsLength: film.commentsLength\r\n                            },\r\n                            isMounted: true\r\n                        });\r\n\r\n                        this.setState({\r\n                            film: {\r\n                                ...this.state.film,\r\n                                poster: `${config.apiUrl}films/${this.state.film.filmID}/thumbnail/${film.thumbnail._id}?width=poster`,\r\n                            }\r\n                        });\r\n\r\n                        this.updateMeta('views');\r\n\r\n\r\n                    }).catch(err => {\r\n                    console.log(JSON.stringify(err));\r\n                })\r\n            });\r\n\r\n        }\r\n\r\n        if(prevProps.loggedIn !== this.props.loggedIn && this.props.loggedIn){\r\n\r\n            if (localStorage.getItem('user')) {\r\n\r\n\r\n                const requestParams = {\r\n                    headers: authHeader()\r\n                };\r\n\r\n                axios.get(`${config.apiUrl}users/me`, requestParams)\r\n                    .then(res => {\r\n\r\n                        if (res.data.meta.liked.indexOf(this.state.film.filmID) > -1) {\r\n                            this.setState({rate: 'LIKED'})\r\n                        }else if (res.data.meta.disliked.indexOf(this.state.film.filmID) > -1) {\r\n                            this.setState({rate: 'DISLIKED'})\r\n                        }else {\r\n                            this.setState({rate: ''});\r\n                        }\r\n\r\n                    });\r\n            }\r\n        }else if(prevProps.loggedIn !== this.props.loggedIn && !this.props.loggedIn){\r\n            this.setState({rate: ''});\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        const {rate} = this.state;\r\n        const {loggedIn} = this.props;\r\n        const {\r\n            expanded,\r\n            truncated\r\n        } = this.state;\r\n\r\n\r\n\r\n        return (\r\n\r\n\r\n            <Col>\r\n                <Row>\r\n                    <Col md={8}>\r\n                        {\r\n                            <Col className=\"mt-4\" sm={12}>\r\n                                <div className=\"\"\r\n                                     ref={(filmElement) => this.filmElement = filmElement}>\r\n                                    <Player className=\"\"\r\n                                            playsInline\r\n                                            poster={this.state.film.poster}\r\n                                            src={this.state.film.videoSrc}\r\n                                    />\r\n                                </div>\r\n                            </Col>\r\n                        }\r\n\r\n                        {\r\n                            (this.state.isMounted && !this.state.isLoading) ?\r\n                                <Col className=\"pl-3 pr-3 mt-4\" sm={12}>\r\n                                    <Row>\r\n                                        <Col sm={12}>\r\n                                            <p className=\"font-weight-bold\">{this.state.film.title}</p>\r\n                                        </Col>\r\n                                        <Col xs={4} sm={4}>\r\n                                            <p><FontAwesomeIcon icon=\"eye\"/> &ensp;{this.state.film.views}</p>\r\n                                        </Col>\r\n                                        <Col xs={4} sm={4} className=\"text-right\">\r\n\r\n                                            <p style={{cursor: \"pointer\"}}\r\n                                               onClick={() => this.updateMeta('liked')}\r\n                                               className={`${loggedIn && rate === 'LIKED' ? \"blue\" : \"\"} font-weight-bold no-copy`}>\r\n                                                <FontAwesomeIcon icon=\"thumbs-up\"/>\r\n                                                &ensp;{this.state.film.likes}</p>\r\n                                        </Col>\r\n                                        <Col xs={4} sm={4}>\r\n                                            <p style={{cursor: \"pointer\"}}\r\n                                               onClick={() => this.updateMeta('disliked')}\r\n                                               className={`${loggedIn && rate === 'DISLIKED' ? \"blue\" : \"\"} font-weight-bold no-copy`}>\r\n                                                <FontAwesomeIcon icon=\"thumbs-down\"/>\r\n                                                &ensp;{this.state.film.dislikes}</p>\r\n                                        </Col>\r\n                                        <Col sm={12} className=\"mt-4 mb-4 divider\"/>\r\n\r\n                                        <Col sm={12}>\r\n                                            <TextTruncate line={!expanded && 2}\r\n                                                          truncateText=\"\"\r\n                                                          text={this.state.film.description}\r\n                                                          textTruncateChild={\r\n                                                              <span id=\"s-c-2\">\r\n                                                                  <Button variant=\"link\" style={{display: 'block'}}\r\n                                                                          className=\"p-0 m-0 mb-1 title font-weight-bold\"\r\n                                                                          onClick={this.handleTruncate}>Read more</Button></span>\r\n\r\n                                                          }>\r\n\r\n                                            </TextTruncate>\r\n\r\n                                            {!truncated && expanded && (\r\n                                                <span style={{display: 'block'}}>\r\n                                                    <Button className=\"p-0 m-0 mb-1 title font-weight-bold\"\r\n                                                            variant=\"link\" onClick={this.toggleLines}>Show less</Button></span>\r\n                                            )}\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Col>\r\n                                :\r\n                                this.state.isMounted ?\r\n                                    <Col style={{height: 80}} sm={12}\r\n                                         className=\"pl-3 pr-3 mb-2 text-center justify-content-center d-flex align-items-center\">\r\n                                        {\r\n                                        }\r\n                                    </Col>\r\n                                    :\r\n                                    null\r\n\r\n                        }\r\n                        <Col sm={12} className=\"mt-4 mb-2 divider d-block d-md-none\"/>\r\n                        {\r\n                            (this.state.displayPlaylist) && (this.state.windowWidth <= windowBreakpoint) && this.state.isMounted &&\r\n                            <Col\r\n                                className=\"p-0 d-block d-md-none\">\r\n                                <PlaylistComponent id={this.state.playlistID}\r\n                                                   filmID={this.props.match.params.id}\r\n                                                   filmElement={this.filmElement}\r\n                                                   history={this.props.history}\r\n                                                   windowWidth={this.state.windowWidth}\r\n\r\n                                                   handleSubmit={this.handleSetThumbnailPlaylist}\r\n                                                   handleDeletePlaylist={this.handleDeletePlaylist}\r\n                                />\r\n                            </Col>\r\n                        }\r\n                        {\r\n                            (this.state.windowWidth <= windowBreakpoint) && this.state.isMounted &&\r\n                            <Col className=\"mt-4 d-block d-md-none\">\r\n                                <FilmsPreviewComponent hasMoreFilms={this.state.hasMoreFilms}\r\n                                                       isLoading={this.state.isLoadingFilms}\r\n                                                       filmID={this.props.match.params.id}\r\n                                                       history={this.props.history}\r\n                                                       playlistID={this.state.playlistID}\r\n\r\n                                                       handleLoading={this.handleLoadingFilms}\r\n                                                       handleThumbnail={this.handleSetThumbnail}\r\n                                />\r\n                            </Col>\r\n                        }\r\n\r\n\r\n                        {\r\n                            ((this.state.windowWidth <= windowBreakpoint && !this.state.hasMoreFilms) || (this.state.windowWidth > windowBreakpoint))\r\n                            && this.state.isMounted &&\r\n                            <Col className=\"p-0 \">\r\n                                <Col sm={12} className=\"mt-4 mb-2 divider\"/>\r\n                                <CommentsComponent isLoading={this.state.isLoadingComments}\r\n                                                   filmID={this.props.match.params.id}\r\n                                                   history={this.props.history}\r\n                                                   commentsLength={this.state.film.commentsLength}\r\n\r\n                                                   handleLoading={this.handleLoadingComments}\r\n                                />\r\n                            </Col>\r\n                        }\r\n\r\n\r\n                    </Col>\r\n\r\n                    {\r\n\r\n                        <Col sm={4}>\r\n\r\n                            {\r\n\r\n                                (this.state.displayPlaylist) && (this.state.windowWidth > windowBreakpoint) && this.state.isMounted &&\r\n                                <Col\r\n                                    className=\"p-0 d-none d-md-block\" sm={10}>\r\n                                    <PlaylistComponent id={this.state.playlistID}\r\n                                                       filmID={this.props.match.params.id}\r\n                                                       filmElement={this.filmElement}\r\n                                                       history={this.props.history}\r\n                                                       windowWidth={this.state.windowWidth}\r\n\r\n                                                       handleSubmit={this.handleSetThumbnailPlaylist}\r\n                                                       handleDeletePlaylist={this.handleDeletePlaylist}\r\n                                    />\r\n                                </Col>\r\n                            }\r\n\r\n                            {\r\n                                (this.state.windowWidth > windowBreakpoint) && this.state.isMounted &&\r\n                                <Col className=\"p-0 mt-4 d-none d-md-block\" sm={12}>\r\n                                    <FilmsPreviewComponent hasMoreFilms={this.state.hasMoreFilms}\r\n                                                           isLoading={this.state.isLoadingFilms}\r\n                                                           filmID={this.props.match.params.id}\r\n                                                           history={this.props.history}\r\n                                                           playlistID={this.state.playlistID}\r\n\r\n                                                           handleLoading={this.handleLoadingFilms}\r\n                                                           handleThumbnail={this.handleSetThumbnail}\r\n                                    />\r\n                                </Col>\r\n                            }\r\n\r\n\r\n                        </Col>\r\n                    }\r\n\r\n                </Row>\r\n\r\n            </Col>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n\r\n    return {\r\n        loggedIn\r\n    };\r\n}\r\n\r\n\r\nconst connectedFilmPage = connect(mapStateToProps)(FilmComponent);\r\n\r\nexport {connectedFilmPage as FilmComponent};\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {Button, Col, Form, Modal} from 'react-bootstrap';\r\n\r\nimport {userActions} from \"../../actions\";\r\n\r\nclass LoginComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n            submitted: false,\r\n            show: true\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleChange(e) {\r\n        const {name, value} = e.target;\r\n        this.setState({[name]: value});\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        this.setState({submitted: true});\r\n        const {email, password} = this.state;\r\n        const {dispatch} = this.props;\r\n\r\n        if (email && password) {\r\n            dispatch(userActions.login(email, password));\r\n        }\r\n    }\r\n\r\n   handleForgotPassword = () => {\r\n        this.props.history.goBack();\r\n\r\n        setTimeout(function () {\r\n                this.props.history.push(`${this.props.location.pathname.slice(0, -5)}forgot${this.props.location.search}`);\r\n            }.bind(this),\r\n            500);\r\n    };\r\n\r\n\r\n\r\n    render() {\r\n\r\n        let modalClose = () => {\r\n            this.setState({show: false});\r\n            this.props.history.goBack();\r\n        };\r\n\r\n        let handleRegister = () => {\r\n            this.props.history.goBack();\r\n\r\n            setTimeout(function () {\r\n                    this.props.history.push(`${this.props.location.pathname.slice(0, -5)}register${this.props.location.search}`);\r\n                }.bind(this),\r\n                500);\r\n        };\r\n\r\n\r\n        const {loggingIn} = this.props;\r\n        const {alert} = this.props;\r\n        const {email, password, submitted} = this.state;\r\n        return (\r\n\r\n            <Modal\r\n                onHide={modalClose}\r\n                show={this.state.show}\r\n                size=\"lg\"\r\n                aria-labelledby=\"contained-modal-title-vcenter\"\r\n                centered\r\n            >\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                        Login\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form onSubmit={this.handleSubmit}>\r\n\r\n                        <Form.Group>\r\n                            <Form.Label htmlFor=\"email\">Email</Form.Label>\r\n                            <Form.Control isInvalid={submitted && !email} type=\"email\" name=\"email\" value={email}\r\n                                          onChange={this.handleChange}>\r\n                            </Form.Control>\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                Email is required\r\n                            </Form.Control.Feedback>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group>\r\n                            <Form.Label htmlFor=\"password\">Password</Form.Label>\r\n                            <Form.Control isInvalid={submitted && !password} type=\"password\" name=\"password\"\r\n                                          value={password} onChange={this.handleChange}>\r\n                            </Form.Control>\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                Password is required\r\n                            </Form.Control.Feedback>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group>\r\n                            <Button type=\"submit\" className=\"btn-primary\">\r\n                                Login\r\n                            </Button>\r\n\r\n                            {loggingIn &&\r\n                            <img alt=\"loading...\" className=\"pl-2\"\r\n                                 src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\"/>\r\n                            }\r\n                        </Form.Group>\r\n\r\n                    </Form>\r\n\r\n                    {alert.message &&\r\n                    <Col className={`alert ${alert.type}`}>{alert.message}</Col>\r\n                    }\r\n\r\n                    <Button variant=\"link\" onClick={handleRegister} className=\"p-0 m-0 btn btn-link\">Register</Button>\r\n\r\n                    <Col className=\"p-0 m-0 \" xs={12} sm={12}>\r\n                        <Button variant=\"link\" onClick={this.handleForgotPassword} className=\"p-0 m-0 btn btn-link\">Forgot password?</Button>\r\n                    </Col>\r\n\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer>\r\n                    <Button onClick={modalClose}>Close</Button>\r\n                </Modal.Footer>\r\n\r\n\r\n            </Modal>\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggingIn} = state.auth;\r\n    const {alert} = state;\r\n    return {\r\n        loggingIn,\r\n        alert\r\n    };\r\n}\r\n\r\nconst connectedLoginPage = connect(mapStateToProps)(LoginComponent);\r\nexport {connectedLoginPage as LoginComponent};","import React from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {Button, Form, Modal} from 'react-bootstrap';\r\n\r\nimport {userActions} from \"../../actions\";\r\n\r\nclass RegisterComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.props.dispatch(userActions.logout());\r\n\r\n        this.state = {\r\n            user: {\r\n                nick: '',\r\n                email: '',\r\n                password: '',\r\n            },\r\n            submitted: false,\r\n            show: true\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleChange(e) {\r\n        const {name, value} = e.target;\r\n        const {user} = this.state;\r\n        this.setState({\r\n            user: {\r\n                ...user,\r\n                [name]: value\r\n            }\r\n        });\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        this.setState({submitted: true});\r\n        const {user} = this.state;\r\n        const {dispatch} = this.props;\r\n\r\n        if (user.email && user.nick && user.password && user.password.length >= 6) {\r\n            dispatch(userActions.register(user));\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        let modalClose = () => {\r\n            this.setState({show: false});\r\n            this.props.history.goBack();\r\n        };\r\n\r\n        const {registering} = this.props;\r\n        const {user, submitted} = this.state;\r\n        const {alert} = this.props;\r\n\r\n        return (\r\n\r\n            <Modal\r\n                onHide={modalClose}\r\n                show={this.state.show}\r\n                size=\"lg\"\r\n                aria-labelledby=\"contained-modal-title-vcenter\"\r\n                centered\r\n            >\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                        Register\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form onSubmit={this.handleSubmit}>\r\n                        <Form.Group>\r\n                            <Form.Label htmlFor=\"nick\">Nick</Form.Label>\r\n                            <Form.Control isInvalid={submitted && !user.nick} type=\"text\" name=\"nick\" value={user.nick}\r\n                                          onChange={this.handleChange}>\r\n                            </Form.Control>\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                Nick is required\r\n                            </Form.Control.Feedback>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group>\r\n                            <Form.Label htmlFor=\"email\">Email</Form.Label>\r\n                            <Form.Control\r\n                                isInvalid={(submitted && !user.email) || (alert.type === 'alert-danger' && alert.message)}\r\n                                type=\"email\" name=\"email\" value={user.email} onChange={this.handleChange}>\r\n                            </Form.Control>\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                {\r\n                                    alert.message ? alert.message : \"Email is required\"\r\n                                }\r\n                            </Form.Control.Feedback>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group>\r\n                            <Form.Label htmlFor=\"password\">Password</Form.Label>\r\n                            <Form.Control isInvalid={submitted && (user.password.length < 6)} type=\"password\"\r\n                                          name=\"password\" value={user.password} maxLength=\"11\"\r\n                                          onChange={this.handleChange}>\r\n                            </Form.Control>\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                {\r\n                                    user.password.length === 0 ? \"Password is required\" : \"Password too short (min 6 chars)\"\r\n                                }\r\n\r\n                            </Form.Control.Feedback>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group>\r\n                            <Button type=\"submit\" className=\"btn-primary\">\r\n                                Register\r\n                            </Button>\r\n\r\n                            {registering &&\r\n                            <img alt=\"loading...\" className=\"pl-2\"\r\n                                 src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\"/>\r\n                            }\r\n                        </Form.Group>\r\n\r\n                    </Form>\r\n\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer>\r\n                    <Button onClick={modalClose}>Close</Button>\r\n                </Modal.Footer>\r\n\r\n\r\n            </Modal>\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {registering} = state.registration;\r\n    const {alert} = state;\r\n    return {\r\n        registering,\r\n        alert\r\n    };\r\n}\r\n\r\nconst connectedRegisterPage = connect(mapStateToProps)(RegisterComponent);\r\nexport {connectedRegisterPage as RegisterComponent};","import React, {Component} from 'react';\r\nimport axios from 'axios'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {Col, Collapse, Row, Spinner} from 'react-bootstrap';\r\n\r\nimport {config} from \"../../config\";\r\n\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport queryString from 'query-string';\r\nimport _ from \"lodash\";\r\n\r\nimport \"./SearchComponent.css\";\r\nimport {PlaylistAddButtonComponent} from \"../Playlist/PlaylistAddButtonComponent\";\r\nimport Snackbar from \"@material-ui/core/Snackbar/Snackbar\";\r\nimport TextTruncate from \"react-text-truncate\";\r\nimport Truncate from \"react-truncate\";\r\nimport {isMobile} from 'react-device-detect'\r\n\r\nconst pathName = config.pathName;\r\n\r\nlet filters = [\r\n    {id: 'last_hour', title: 'Last hour'},\r\n    {id: 'today', title: 'Today'},\r\n    {id: 'this_week', title: 'This week'},\r\n    {id: 'this_month', title: 'This month'},\r\n    {id: 'this_year', title: 'This year'},\r\n];\r\n\r\n\r\nclass SearchComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            films: [],\r\n            addOpenedIndex: -1,\r\n\r\n            click: false,\r\n\r\n            error: false,\r\n            hasMore: true,\r\n            isLoading: false,\r\n            scroll: {},\r\n            windowWidth: window.innerWidth,\r\n\r\n            open: false,\r\n            openSnackbar: false,\r\n\r\n            filter: '',\r\n            sort: '',\r\n            dir: 1,\r\n            sorts: [\r\n                {id: 'upload_date', title: 'Upload date', dir: 1},\r\n                {id: 'view_count', title: 'View count', dir: 1},\r\n                {id: 'rating', title: 'Rating', dir: 1},\r\n            ]\r\n        };\r\n\r\n        window.onresize = () => {\r\n\r\n            this.setState({windowWidth: window.innerWidth});\r\n\r\n        };\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n\r\n        window.addEventListener('scroll', this.handleScroll);\r\n        window.addEventListener('resize', this.handleResize);\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: window.pageYOffset,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n        let params = queryString.parse(this.props.location.search);\r\n\r\n        this.setState({\r\n            isLoading: true,\r\n            search: params.search,\r\n            dir: params.dir ? params.dir : 1,\r\n            sort: params.sort ? params.sort : '',\r\n            filter: params.filter ? params.filter : ''\r\n        }, () => {\r\n\r\n\r\n            axios.get(`${config.apiUrl}films/filter/title/?search=${this.state.search}&sort=${this.state.sort}&filter=${this.state.filter}&dir=${this.state.dir}`,\r\n                {params: {start: 0, limit: 5}})\r\n                .then(res => {\r\n                    const films = res.data;\r\n\r\n                    films.forEach(film => {\r\n                        film.add = false;\r\n                    });\r\n\r\n                    this.setState({\r\n                        hasMore: (films.length > 0),\r\n                        films: [...this.state.films, ...films],\r\n                        isLoading: false\r\n                    });\r\n                }).catch(err => {\r\n                console.log(err);\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n\r\n        if (this.state.click) {\r\n            this.setState({click: false});\r\n            return;\r\n        }\r\n\r\n        let params = queryString.parse(this.props.location.search);\r\n        let prevParams = queryString.parse(prevProps.location.search);\r\n\r\n        if (_.isEqual(prevParams, params) === false) {\r\n            this.setState({\r\n                scroll: {\r\n                    scrollTop: window.pageYOffset,\r\n                    offsetHeight: document.documentElement.offsetHeight,\r\n                    innerHeight: window.innerHeight\r\n                }\r\n            });\r\n\r\n\r\n            this.setState({\r\n\r\n                films: [],\r\n                addOpenedIndex: -1,\r\n\r\n                click: false,\r\n\r\n                error: false,\r\n                hasMore: true,\r\n                scroll: {},\r\n                windowWidth: window.innerWidth,\r\n\r\n                open: false,\r\n                openSnackbar: false,\r\n\r\n                isLoading: true,\r\n                search: params.search,\r\n                dir: params.dir ? params.dir : 1,\r\n                sort: params.sort ? params.sort : '',\r\n                filter: params.filter ? params.filter : ''\r\n\r\n            }, () => {\r\n\r\n                if (params.sort && params.sort !== '') {\r\n                    this.state.sorts.forEach(sort => {\r\n                        if (sort.id === params.sort) {\r\n                            sort.dir = parseInt(params.dir);\r\n                        }\r\n                    })\r\n                }\r\n\r\n                axios.get(`${config.apiUrl}films/filter/title/?search=${this.state.search}&sort=${this.state.sort}&filter=${this.state.filter}&dir=${this.state.dir}`,\r\n                    {params: {start: 0, limit: 5}})\r\n                    .then(res => {\r\n                        const films = res.data;\r\n\r\n                        films.forEach(film => {\r\n                            film.add = false;\r\n                        });\r\n\r\n                        this.setState({\r\n                            hasMore: (films.length > 0),\r\n                            films: [...this.state.films, ...films],\r\n                            isLoading: false\r\n                        });\r\n                    }).catch(err => {\r\n                    console.log(err);\r\n                });\r\n\r\n            });\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n        window.removeEventListener('resize', this.handleResize);\r\n    }\r\n\r\n\r\n    handleScroll = () => {\r\n\r\n        if (this.state.addOpenedIndex >= 0 && !isMobile) {\r\n            let array = this.state.films;\r\n            array[this.state.addOpenedIndex].add = false;\r\n\r\n            this.setState({films: array, addOpenedIndex: -1});\r\n        }\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: window.pageYOffset,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n\r\n        const {\r\n            loadData,\r\n            state: {\r\n                error,\r\n                isLoading,\r\n                hasMore\r\n            }\r\n        } = this;\r\n        if (error || isLoading || !hasMore) return;\r\n        if ((window.innerHeight + window.pageYOffset) >= (document.body.offsetHeight - 150)) {\r\n            loadData();\r\n        }\r\n    };\r\n\r\n    handleResize = () => {\r\n        this.setState({windowWidth: window.innerWidth});\r\n    };\r\n\r\n\r\n    handlePlaylistOperation = (message) => {\r\n        if (this.state.addOpenedIndex >= 0) {\r\n            let array = this.state.films;\r\n            array.forEach((film) => {\r\n                film.add = false;\r\n            });\r\n            this.setState({films: array, addOpenedIndex: -1})\r\n        }\r\n\r\n        this.setState({openSnackbar: true, note: message});\r\n    };\r\n\r\n    handleClickOutside = (index) => {\r\n        if (this.state.addOpenedIndex >= 0) {\r\n            let array = this.state.films;\r\n            array.forEach((film) => {\r\n                film.add = false;\r\n            });\r\n            this.setState({films: array, addOpenedIndex: index})\r\n        }\r\n    };\r\n\r\n    handleCreatePlaylistClick = () => {\r\n        this.setState({addOpenedIndex: -1});\r\n    };\r\n\r\n    handleAddPlaylistButtonClick = (index) => {\r\n        let array = this.state.films;\r\n        array[index].add = !array[index].add;\r\n\r\n        this.setState({films: array, addOpenedIndex: index})\r\n\r\n    };\r\n\r\n    handleCloseSnackbar = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n\r\n        this.setState({openSnackbar: false});\r\n    };\r\n\r\n\r\n    loadData = () => {\r\n        this.setState({isLoading: true}, () => {\r\n            axios.get(`${config.apiUrl}films/filter/title/?search=${this.state.search}&sort=${this.state.sort}&filter=${this.state.filter}&dir=${this.state.dir}`,\r\n                {\r\n                    params: {\r\n                        start: this.state.films.length,\r\n                        limit: this.state.films.length < 5 ? 5 : this.state.films.length + 5\r\n                    }\r\n                })\r\n                .then(res => {\r\n                    const films = res.data;\r\n                    this.setState({\r\n                        hasMore: (films.length > 0),\r\n                        films: [...this.state.films, ...films],\r\n                        isLoading: false\r\n                    });\r\n                }).catch(err => {\r\n                console.log(err);\r\n            });\r\n        });\r\n    };\r\n\r\n    parseDate = (film) => {\r\n\r\n        let date = new Date(Date.parse(film.createdAt));\r\n        let today = new Date();\r\n\r\n\r\n        let time = Math.abs(Math.floor((\r\n            Date.UTC(\r\n                date.getFullYear(),\r\n                date.getMonth(),\r\n                date.getDate(),\r\n                date.getHours(),\r\n                date.getMinutes()) -\r\n            Date.UTC(\r\n                today.getFullYear(),\r\n                today.getMonth(),\r\n                today.getDate(),\r\n                today.getHours(),\r\n                today.getMinutes()))\r\n            / (1000 * 60)));\r\n\r\n        if (time / 60 >= 1) {\r\n            time /= 60;\r\n\r\n            if (time / 24 >= 1) {\r\n\r\n                time /= 24;\r\n\r\n                if (time / 30 >= 1) {\r\n\r\n                    time /= 30;\r\n\r\n                    if (time / 12 >= 1) {\r\n\r\n                        time = time / 12;\r\n                        time = Math.floor(time) + ' years ';\r\n\r\n                    } else {\r\n                        time = Math.floor(time) + ' months ';\r\n                    }\r\n\r\n                } else {\r\n                    time = Math.floor(time) + ' days ';\r\n                }\r\n\r\n            } else {\r\n                time = Math.floor(time) + ' hours ';\r\n            }\r\n        } else {\r\n            time = Math.floor(time) + ' minutes ';\r\n        }\r\n\r\n        time = time + 'ago';\r\n\r\n        return time;\r\n    };\r\n\r\n    setRedirect = (e, filmID) => {\r\n\r\n        if (e && e.target && (e.target.id === \"s-c-1\"\r\n            || e.target.id === \"s-c-2\" || e.target.id === \"s-c-3\" || e.target.id === \"s-c-4\"\r\n            || (e.target.localName === \"path\" && e.target.parentElement && e.target.parentElement.parentElement\r\n                && e.target.parentElement.parentElement.id !== \"a-b-2\"))) {\r\n            this.props.history.push(`${pathName}film/` + filmID);\r\n        }\r\n\r\n    };\r\n\r\n\r\n    handleOnclick = (state, type) => {\r\n\r\n        this.setState({click: true});\r\n\r\n        let filter = this.state.filter;\r\n        let sort = this.state.sort;\r\n        let dir = this.state.dir;\r\n\r\n        if (state === 'filter') {\r\n            if (this.state.filter === type.id) {\r\n                this.setState({filter: ''});\r\n                sort = this.state.sort;\r\n                filter = '';\r\n                dir = this.state.dir;\r\n            } else {\r\n                this.setState({filter: type.id});\r\n                sort = this.state.sort;\r\n                filter = type.id;\r\n                dir = this.state.dir;\r\n            }\r\n        } else {\r\n            if (this.state.sort === type.id) {\r\n                sort = type.id;\r\n\r\n                if (type.dir === 1) {\r\n                    type.dir = -1;\r\n                    this.setState({dir: -1});\r\n                    dir = type.dir;\r\n                } else if (type.dir === -1) {\r\n                    this.setState({sort: ''});\r\n                    filter = this.state.filter;\r\n                    type.dir = 1;\r\n                    sort = '';\r\n                    this.setState({dir: 1});\r\n                }\r\n\r\n            } else {\r\n                this.setState({sort: type.id});\r\n                filter = this.state.filter;\r\n                sort = type.id;\r\n                dir = type.dir;\r\n            }\r\n\r\n        }\r\n\r\n\r\n        if (sort !== '' && filter !== '') {\r\n            this.props.history.push({\r\n                search: `?search=${this.state.search}&sort=${sort}&dir=${dir}&filter=${filter}`,\r\n            });\r\n\r\n        } else if (sort === '' && filter !== '') {\r\n            this.props.history.push({\r\n                search: `?search=${this.state.search}&filter=${filter}`,\r\n            });\r\n        } else if (sort !== '' && filter === '') {\r\n            this.props.history.push({\r\n                search: `?search=${this.state.search}&sort=${sort}&dir=${dir}`,\r\n            });\r\n        } else if (sort === '' && filter === '') {\r\n            this.props.history.push({\r\n                search: `?search=${this.state.search}`,\r\n            });\r\n        }\r\n\r\n\r\n        axios.get(`${config.apiUrl}films/filter/title/?search=${this.state.search}&sort=${sort}&filter=${filter}&dir=${dir}`,\r\n            {params: {start: 0, limit: this.state.films.length < 5 ? 5 : this.state.films.length}})\r\n            .then(result => {\r\n                const films = result.data;\r\n                this.setState({films: films});\r\n\r\n            }).catch(err => {\r\n        });\r\n\r\n    };\r\n\r\n    render() {\r\n        const {scroll} = this.state;\r\n        const {open} = this.state;\r\n\r\n        return (\r\n            <Col>\r\n\r\n                <Button\r\n                    onClick={() => this.setState({open: !open})}\r\n                    aria-controls=\"filter-collapse\"\r\n                    aria-expanded={open}\r\n                    className=\"mt-3 p-2 button-my\"><FontAwesomeIcon style={{cursor: \"pointer\"}} icon=\"filter\"/></Button>\r\n\r\n                <Collapse in={this.state.open}>\r\n                    <Row id=\"filter-collapse\">\r\n                        <Col className=\"mt-4\" sm={4}>\r\n                            <p style={{'fontWeight': 500}}>UPLOAD DATE</p>\r\n\r\n                            <Col sm={8} className=\"mt-3 mb-3 divider\"/>\r\n\r\n\r\n                            {\r\n                                filters.map((filter) => {\r\n                                    return (<p key={filter.id} style={this.state.filter === filter.id ? {\r\n                                            fontWeight: 700,\r\n                                            fontSize: 80 + '%'\r\n                                        } :\r\n                                        {fontWeight: 400, fontSize: 80 + '%'}}\r\n                                               onClick={() => this.handleOnclick('filter', filter)}\r\n                                               className=\"filter-search\">{filter.title}</p>)\r\n                                })\r\n                            }\r\n\r\n                        </Col>\r\n\r\n                        <Col className=\"mt-4\" sm={4}>\r\n                            <p style={{'fontWeight': 500}}>SORT BY</p>\r\n\r\n                            <Col sm={8} className=\"mt-3 mb-3 divider\"/>\r\n\r\n                            {\r\n                                this.state.sorts.map((sort) => {\r\n                                    return (<Row key={sort.id} className=\"ml-0\">\r\n                                        <p style={this.state.sort === sort.id ? {\r\n                                                fontWeight: 700,\r\n                                                fontSize: 80 + '%'\r\n                                            } :\r\n                                            {fontWeight: 400, fontSize: 80 + '%'}}\r\n                                           onClick={() => this.handleOnclick('sort', sort)}\r\n                                           className=\"filter-search\">{sort.title}</p>\r\n                                        {this.state.sort === sort.id && sort.dir === 1 ?\r\n                                            <FontAwesomeIcon className=\"ml-2\" icon=\"sort-up\"/> :\r\n                                            this.state.sort === sort.id && sort.dir === -1 ?\r\n                                                <FontAwesomeIcon className=\"ml-2\" icon=\"sort-down\"/> : \"\"}\r\n                                    </Row>)\r\n                                })\r\n                            }\r\n\r\n                        </Col>\r\n\r\n                    </Row>\r\n                </Collapse>\r\n\r\n                <Col sm={12} className=\"mt-2 mb-3 divider\"/>\r\n\r\n                <Row>\r\n\r\n                    {\r\n                        <Col className=\"mt-4\">\r\n                            {\r\n                                this.state.films.map((film, index) => {\r\n                                        let time = this.parseDate(film);\r\n\r\n                                        let lines = this.state.windowWidth < 1200 && this.state.windowWidth > 576 ? 1 : 2;\r\n\r\n                                        return <Col xs={12} sm={12} lg={8}\r\n                                                    className=\"film-preview-holder m-0 mb-1 container\"\r\n                                                    onClick={(e) => this.setRedirect(e, film.id)} key={film.id}>\r\n                                            <Row className=\"d-sm-none mb-4\">\r\n                                                <Col xs={8} sm={4}>\r\n                                                    <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n                                                        <img alt=\"\" id=\"s-c-1\" className=\"image embed-responsive-item\"\r\n                                                             src={`${config.apiUrl}films/${film.id}/thumbnail/${film.thumbnail._id}?width=small`}/>\r\n                                                        <FontAwesomeIcon className=\"middle\" icon=\"play\"/>\r\n                                                    </div>\r\n                                                </Col>\r\n                                                <Col xs={4} sm={8} className=\"p-0\">\r\n                                                    <Row className=\"m-0\">\r\n                                                        <Col xs={8} sm={8} className=\"p-0\">\r\n\r\n                                                            <Truncate lines={1} id=\"s-c-2\"\r\n                                                                      className=\"mb-1 title-search font-weight-bold\">\r\n                                                                {film.title}\r\n                                                            </Truncate>\r\n\r\n                                                        </Col>\r\n\r\n                                                        {\r\n                                                            this.state.windowWidth < 576 &&\r\n                                                            <PlaylistAddButtonComponent parentName=\"search\"\r\n                                                                                        filmID={film.id}\r\n                                                                                        show={film.add} index={index}\r\n\r\n                                                                                        handleAddPlaylistButtonClick={this.handleAddPlaylistButtonClick}\r\n                                                                                        handleClick={this.handleCreatePlaylistClick}\r\n                                                                                        handleClickOutside={this.handleClickOutside}\r\n                                                                                        handlePlaylistOperation={this.handlePlaylistOperation}/>\r\n\r\n                                                        }\r\n\r\n                                                    </Row>\r\n                                                    <p id=\"s-c-3\" className=\"mb-0 author-nick\">\r\n                                                        <small>{film.author_name} &#183; {film.views} views</small>\r\n                                                    </p>\r\n\r\n                                                </Col>\r\n                                            </Row>\r\n\r\n                                            <Col className=\"d-none d-sm-inline\">\r\n                                                <Row className=\"style-search\">\r\n                                                    <Col xs={8} sm={4}>\r\n                                                        <div\r\n                                                            className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n                                                            <img alt=\"\" id=\"s-c-1\" className=\"image embed-responsive-item\"\r\n                                                                 src={`${config.apiUrl}films/${film.id}/thumbnail/${film.thumbnail._id}?width=small`}/>\r\n                                                            <FontAwesomeIcon className=\"middle\" icon=\"play\"/>\r\n                                                        </div>\r\n                                                    </Col>\r\n                                                    <Col xs={4} sm={8} className=\"p-0 \">\r\n                                                        <Row className=\"m-0\">\r\n                                                            <Col xs={10} sm={10} className=\"p-0 mb-1\">\r\n                                                                <Truncate lines={lines} id=\"s-c-2\"\r\n                                                                          className=\"mb-0 title-search font-weight-bold\">\r\n                                                                    {film.title}\r\n                                                                </Truncate>\r\n                                                            </Col>\r\n\r\n                                                            {\r\n                                                                this.state.windowWidth >= 576 &&\r\n                                                                <PlaylistAddButtonComponent parentName=\"search\"\r\n                                                                                            filmID={film.id}\r\n                                                                                            show={film.add} index={index}\r\n\r\n                                                                                            handleAddPlaylistButtonClick={this.handleAddPlaylistButtonClick}\r\n                                                                                            handleClick={this.handleCreatePlaylistClick}\r\n                                                                                            handleClickOutside={this.handleClickOutside}\r\n                                                                                            handlePlaylistOperation={this.handlePlaylistOperation}/>\r\n                                                            }\r\n                                                        </Row>\r\n                                                        <p id=\"s-c-3\" className=\"mb-1 author-nick-search\">\r\n                                                            <small>{film.author_name} &#183; {film.views} views &#183; {time}</small>\r\n                                                        </p>\r\n\r\n                                                        <small><TextTruncate id=\"s-c-4\" className=\"mb-0 author-nick-search\"\r\n                                                                             line={lines} text={film.description}/></small>\r\n\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </Col>\r\n                                        </Col>\r\n\r\n\r\n                                    }\r\n                                )\r\n                            }\r\n\r\n                        </Col>\r\n                    }\r\n\r\n                </Row>\r\n\r\n                {\r\n\r\n                    this.state.hasMore &&\r\n                    <Col style={{height: 40}} sm={12} className=\"text-center\">\r\n                        {!(scroll.scrollTop === 0 || scroll.offsetHeight <= scroll.innerHeight) &&\r\n                        this.state.isLoading &&\r\n                        <Spinner animation=\"border\"/>\r\n                        }\r\n                    </Col>\r\n                }\r\n\r\n                <Snackbar\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={this.state.openSnackbar}\r\n                    autoHideDuration={1500}\r\n                    onClose={this.handleCloseSnackbar}\r\n                    ContentProps={{\r\n                        'aria-describedby': 'message-id',\r\n                    }}\r\n                    message={<span id=\"message-id\">{this.state.note}</span>}\r\n                />\r\n\r\n            </Col>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    return {\r\n        loggedIn\r\n    };\r\n}\r\n\r\nconst connectedSearchPage = connect(mapStateToProps)(SearchComponent);\r\n\r\n\r\nexport {connectedSearchPage as SearchComponent};\r\n","import React, {Component} from 'react';\r\nimport axios from 'axios'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {Col, Row, Spinner} from 'react-bootstrap';\r\n\r\nimport {config} from \"../../config\";\r\n\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport Button from '@material-ui/core/Button';\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport TextTruncate from \"react-text-truncate\";\r\nimport ImageBlurredComponent from \"../ImageBlurred/ImageBlurredComponent\";\r\n\r\nconst pathName = config.pathName;\r\n\r\nclass AllPlaylistsComponent extends Component {\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            playlists: [],\r\n\r\n\r\n            error: false,\r\n            hasMore: true,\r\n            isLoading: true,\r\n            isMounted: false,\r\n            playlistsPreviewLoaded: 0,\r\n\r\n            scroll: {},\r\n            windowWidth: window.innerWidth,\r\n\r\n        };\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        window.addEventListener('scroll', this.handleScroll);\r\n        window.addEventListener('resize', this.handleResize);\r\n\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: window.pageYOffset,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n\r\n\r\n        this.setState({isLoading: true}, () => {\r\n            let limit = 3;\r\n            const {windowWidth} = this.state;\r\n\r\n            if (windowWidth <= 576)\r\n                limit = 1.3;\r\n            else if (windowWidth > 1920)\r\n                limit = 6;\r\n            else if (windowWidth > 1422)\r\n                limit = 5;\r\n\r\n            axios.get(`${config.apiUrl}playlists/all`, {params: {start: 0, limit: Math.ceil(6 * limit)}})\r\n                .then(response => {\r\n\r\n                    let playlists = response.data;\r\n\r\n                    playlists.forEach(playlist => {\r\n                        playlist.img = `${config.apiUrl}films/${playlist.filmID}/thumbnail/${playlist.thumbnail}?width=preview`\r\n                    });\r\n\r\n                    this.setState({\r\n                        hasMore: playlists.length >= Math.ceil(6 * limit),\r\n                        playlists: playlists,\r\n                        isLoading: false,\r\n                        isMounted: true\r\n                    });\r\n                });\r\n        });\r\n\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n        window.removeEventListener('resize', this.handleResize);\r\n    }\r\n\r\n\r\n    handleScroll = () => {\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: window.pageYOffset,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n\r\n        const {\r\n            loadData,\r\n            state: {\r\n                error,\r\n                isLoading,\r\n                hasMore\r\n            }\r\n        } = this;\r\n\r\n        if (error || isLoading || !hasMore) return;\r\n\r\n        if ((window.innerHeight + window.pageYOffset) >= (document.body.offsetHeight - 150)) {\r\n            loadData();\r\n        }\r\n    };\r\n\r\n    handleResize = () => {\r\n        this.setState({windowWidth: window.innerWidth});\r\n    };\r\n\r\n\r\n\r\n    loadData = () => {\r\n        this.setState({isLoading: true}, () => {\r\n            axios.get(`${config.apiUrl}playlists/all`, {params: {start: this.state.playlists.length, limit: 6}})\r\n                .then(response => {\r\n\r\n                    let playlists = response.data;\r\n\r\n                    playlists.forEach(playlist => {\r\n                        playlist.img = `${config.apiUrl}films/${playlist.filmID}/thumbnail/${playlist.thumbnail}?width=preview`\r\n                    });\r\n\r\n                    this.setState({\r\n                        hasMore: (playlists.length === 6),\r\n                        isLoading: false,\r\n                        playlists: [\r\n                            ...this.state.playlists,\r\n                            ...playlists]\r\n                    });\r\n\r\n                })\r\n                .catch((err) => {\r\n                    this.setState({\r\n                        error: err.message,\r\n                        isLoading: false\r\n                    })\r\n                });\r\n        })\r\n    };\r\n\r\n    setRedirect = (playlistID, filmID) => {\r\n        this.props.history.push({\r\n            pathname: `${pathName}film/` + filmID,\r\n            search: `?list=${playlistID}`\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const {isLoading} = this.state;\r\n        const {scroll} = this.state;\r\n        let playlists = this.state.playlists.map(a => Object.assign({}, a));\r\n\r\n        return (\r\n            <Col>\r\n\r\n\r\n                <Row className=\"mt-5\">\r\n\r\n                    {\r\n                        playlists.map((playlist, index) => {\r\n\r\n\r\n                                const filmID = playlist.filmID;\r\n\r\n                                const playlistID = playlist.id;\r\n\r\n                                if(!playlist.thumbnail){\r\n                                    return null;\r\n                                }\r\n\r\n                                return <Col className=\"mb-5 film-preview-holder\" xs={6} sm={4} md={3} lg={2} key={playlist.id}>\r\n                                    <div onClick={() => this.setRedirect(playlistID, filmID)}\r\n                                         className=\"embed-responsive embed-responsive-16by9 z-depth-1-half container\">\r\n                                        {\r\n\r\n                                            <ImageBlurredComponent\r\n                                                image={playlist.img}\r\n                                                setRedirect={() => this.setRedirect(playlistID, filmID)}/>\r\n                                        }\r\n                                        <Row className=\"middle\">\r\n                                            <Col xs={4} sm={4}>\r\n                                                <FontAwesomeIcon icon=\"play\"/>\r\n                                            </Col>\r\n                                            <Col xs={8} sm={8}>\r\n                                                <small className=\"font-weight-bold\" >Play all</small>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </div>\r\n\r\n                                    <Col xs={12} sm={12} className=\"p-0\">\r\n                                        <TextTruncate line={2} text={playlist.title}\r\n                                                      id=\"s-c-2\"\r\n                                                      className=\"mb-1 mt-1 title \"/>\r\n                                    </Col>\r\n                                    <p className=\"mb-0 author-nick\">\r\n                                        <small>{playlist.authorName}</small>\r\n                                    </p>\r\n\r\n                                </Col>\r\n\r\n\r\n                            }\r\n                        )\r\n\r\n\r\n                    }\r\n\r\n                </Row>\r\n                {\r\n                    ((scroll.scrollTop === 0 || scroll.offsetHeight <= scroll.innerHeight) && this.state.hasMore && this.state.isMounted) &&\r\n                    <Col sm={12} className=\"text-center\">\r\n                        <Button\r\n                            className=\"button-my\"\r\n                            variant=\"contained\"\r\n                            disabled={isLoading}\r\n                            onClick={!isLoading ? this.loadData : null}\r\n                        >\r\n                            {isLoading ? 'Loading' : 'Click to load'}\r\n                        </Button>\r\n                    </Col>\r\n\r\n\r\n                }\r\n                {\r\n\r\n                    this.state.hasMore &&\r\n                    <Col style={{height: 40}} sm={12} className=\"text-center\">\r\n                        {\r\n                            (!(scroll.scrollTop === 0 || scroll.offsetHeight <= scroll.innerHeight) || !this.state.isMounted) &&\r\n                        this.state.isLoading &&\r\n                        <Spinner animation=\"border\"/>\r\n                        }\r\n                    </Col>\r\n                }\r\n\r\n            </Col>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    return {\r\n        loggedIn\r\n    };\r\n}\r\n\r\nconst connectedAllPlaylistsComponent = connect(mapStateToProps)(AllPlaylistsComponent);\r\n\r\n\r\nexport {connectedAllPlaylistsComponent as AllPlaylistsComponent};\r\n","import React, {Component} from 'react';\r\nimport {Button, Col, Form, FormControl, Row} from \"react-bootstrap\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './AddFilmComponent.css'\r\n\r\nimport FileDrop from 'react-file-drop';\r\nimport {config} from \"../../config\";\r\nimport {authHeader} from \"../../helpers\";\r\nimport axios from \"axios\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {isMobile} from \"react-device-detect\";\r\n\r\nconst CHOOSE_FILM = `Choose a film `;\r\nconst CHOOSE_THUMBNAIL = `Choose a thumbnail `;\r\nconst pathName = config.pathName;\r\n\r\nclass AddFilmComponent extends Component {\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            title: '',\r\n            description: '',\r\n            submitted: false,\r\n\r\n            film: null,\r\n            filmName: CHOOSE_FILM,\r\n            filmPreview: null,\r\n\r\n            thumbnail: null,\r\n            thumbnailName: CHOOSE_THUMBNAIL,\r\n            thumbnailPreview: null,\r\n\r\n            isLoading: false,\r\n            alert: {type: \"\", message: \"\"}\r\n        };\r\n\r\n        this.filmInput = React.createRef();\r\n        this.thumbnailInput = React.createRef();\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleFileChoose = this.handleFileChoose.bind(this);\r\n    }\r\n\r\n    handleChange(e) {\r\n        const {name, value} = e.target;\r\n        this.setState({[name]: value});\r\n        this.setState({\r\n            alert: {type: \"\", message: \"\"}\r\n        });\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        this.setState({submitted: true});\r\n        this.setState({\r\n            alert: {type: \"\", message: \"\"}\r\n        });\r\n\r\n        if (!localStorage.getItem('user')) {\r\n            this.props.history.push(`${pathName}add/login`);\r\n            return;\r\n        }\r\n\r\n        const requestOptions = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        let film = new FormData();\r\n        film.set('title', this.state.title);\r\n        film.set('description', this.state.description);\r\n        film.set('file', this.state.film);\r\n        film.set('thumbnail', this.state.thumbnail);\r\n\r\n\r\n        this.setState({isLoading: true}, () =>\r\n            axios.post(`${config.apiUrl}films`,\r\n                film, requestOptions)\r\n\r\n                .then((response) => {\r\n                    this.props.history.push(`${pathName}film/${response.data.id}`);\r\n\r\n                })\r\n                .catch((error) => {\r\n                    console.log(error);\r\n                    console.log(JSON.stringify(error));\r\n                    if (error.response && error.response.data && error.response.data.error) {\r\n                        this.setState({\r\n                            isLoading: false,\r\n                            alert: {type: \"alert-danger\", message: error.response.data.error}\r\n                        });\r\n                        if (error.response.status === 422) {\r\n                            this.setState({\r\n                                film: null,\r\n                                filmName: CHOOSE_FILM,\r\n                                filmPreview: null,\r\n\r\n                                thumbnail: null,\r\n                                thumbnailName: CHOOSE_THUMBNAIL,\r\n                                thumbnailPreview: null,\r\n                            })\r\n                        }\r\n                    } else if (error.response && error.response.data && error.response.data.errors) {\r\n                        if (error.response.data.errors.description)\r\n                            this.setState({\r\n                                isLoading: false,\r\n                                alert: {type: \"alert-danger\", message: error.response.data.errors.description.message}\r\n                            });\r\n                        else if (error.response.data.errors.title)\r\n                            this.setState({\r\n                                isLoading: false,\r\n                                alert: {type: \"alert-danger\", message: error.response.data.errors.title.message}\r\n                            })\r\n                    }\r\n\r\n                }));\r\n\r\n    }\r\n\r\n    handleFileChoose(event, type) {\r\n        event.preventDefault();\r\n        this.setState({\r\n            alert: {type: \"\", message: \"\"}\r\n        });\r\n        switch (type) {\r\n            case 'film':\r\n                this.setState({\r\n                    film: this.filmInput.current.files[0],\r\n                    filmName: this.filmInput.current.files[0].name,\r\n                    filmPreview: URL.createObjectURL(event.target.files[0])\r\n                });\r\n                break;\r\n\r\n            case 'thumbnail':\r\n                this.setState({\r\n                    thumbnail: this.thumbnailInput.current.files[0],\r\n                    thumbnailName: this.thumbnailInput.current.files[0].name,\r\n                    thumbnailPreview: URL.createObjectURL(event.target.files[0])\r\n                });\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    handleDropFilm = (files, event) => {\r\n        this.setState({\r\n            alert: {type: \"\", message: \"\"}\r\n        });\r\n\r\n        this.setState({\r\n            film: files[0],\r\n            filmName: files[0].name,\r\n            filmPreview: URL.createObjectURL(files[0])\r\n        });\r\n    };\r\n\r\n    handleDropThumbnail = (files, event) => {\r\n        this.setState({\r\n            alert: {type: \"\", message: \"\"}\r\n        });\r\n\r\n        this.setState({\r\n            thumbnail: files[0],\r\n            thumbnailName: files[0].name,\r\n            thumbnailPreview: URL.createObjectURL(files[0])\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const {isLoading} = this.state;\r\n\r\n        return (\r\n            <Row className=\"mt-4 mr-2 ml-2\" sm={12}>\r\n                <Col className=\"mb-4\" sm={6} lg={5}>\r\n\r\n                    <Col  className=\"mb-4 ml-auto mr-auto\" xs={10}  sm={12} lg={10} >\r\n                        <div\r\n                            className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n                            <FileDrop onDrop={this.handleDropFilm}\r\n                                      className=\"justify-content-center d-flex align-items-center embed-responsive-item text-center box has-advanced-upload\">\r\n                                <input id=\"film\" accept=\"video/mp4, video/ogg\"\r\n                                       onChange={event => this.handleFileChoose(event, 'film')}\r\n                                       type=\"file\" ref={this.filmInput} className=\"inputfile\" />\r\n                                <label htmlFor=\"film\" >\r\n\r\n                                    {\r\n                                        this.state.filmName === CHOOSE_FILM &&\r\n                                        <span>{this.state.filmName}</span>\r\n                                    }\r\n                                </label>\r\n\r\n                                {\r\n                                    !isMobile && this.state.filmName === CHOOSE_FILM &&\r\n                                    <span>or drop it here</span>\r\n                                }\r\n\r\n                                {\r\n                                    this.state.filmPreview &&\r\n                                    <video muted={true} autoPlay={true} className=\"embed-responsive-item \" loop={true}\r\n                                           src={this.state.filmPreview}>\r\n                                    </video>\r\n                                }\r\n\r\n                                {\r\n                                    this.state.filmPreview &&\r\n                                    <Col style={{left:0, top: 0, position: 'absolute', width: 100 + '%', height: 100 + '%'}} className=\"add-item-opacity\" />\r\n                                }\r\n\r\n                                {\r\n                                    this.state.filmPreview &&\r\n                                    <FontAwesomeIcon className=\"add-item-middle fa-3x\" style={{color: \"#ffffff\"}} icon=\"times\"\r\n                                    onClick={() => {this.setState({filmName: CHOOSE_FILM, filmPreview: null})}}/>\r\n                                }\r\n\r\n                            </FileDrop>\r\n                        </div>\r\n                    </Col>\r\n                    <Col className=\"ml-auto mr-auto\" xs={10} sm={12} lg={10}>\r\n                        <div\r\n                            className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n                            <FileDrop onDrop={this.handleDropThumbnail}\r\n                                      className=\"justify-content-center d-flex align-items-center embed-responsive-item text-center box has-advanced-upload\">\r\n                                <input id=\"thumbnail\" accept=\"image/jpg, image/png, image/jpeg\"\r\n                                       onChange={event => this.handleFileChoose(event, 'thumbnail')}\r\n                                       type=\"file\" ref={this.thumbnailInput} className=\" inputfile\"/>\r\n                                <label htmlFor=\"thumbnail\">\r\n\r\n                                    {\r\n                                        this.state.thumbnailName === CHOOSE_THUMBNAIL &&\r\n                                        <span>{this.state.thumbnailName}</span>\r\n                                    }\r\n                                </label>\r\n\r\n                                {\r\n                                    !isMobile && this.state.thumbnailName === CHOOSE_THUMBNAIL &&\r\n                                    <span>or drop it here</span>\r\n                                }\r\n                                {\r\n                                    this.state.thumbnailPreview &&\r\n                                    <img alt=\"\"\r\n                                         className=\"embed-responsive-item\"\r\n                                         src={this.state.thumbnailPreview}/>\r\n                                }\r\n\r\n                                {\r\n                                    this.state.thumbnailPreview &&\r\n                                    <Col style={{left:0, top: 0, position: 'absolute', width: 100 + '%', height: 100 + '%'}} className=\"add-item-opacity\" />\r\n                                }\r\n\r\n                                {\r\n                                    this.state.thumbnailPreview &&\r\n                                    <FontAwesomeIcon className=\"add-item-middle fa-3x\" style={{color: \"#ffffff\"}} icon=\"times\"\r\n                                                     onClick={() => {this.setState({thumbnailName: CHOOSE_THUMBNAIL, thumbnailPreview: null})}}/>\r\n                                }\r\n                            </FileDrop>\r\n                        </div>\r\n\r\n                    </Col>\r\n                </Col>\r\n                <Col className=\"mb-2\" sm={6} lg={5}>\r\n\r\n                    <Col className=\"mb-3\" sm={12}>\r\n                        <FormControl\r\n                            placeholder=\"Title\"\r\n                            aria-label=\"Title\"\r\n                            aria-describedby=\"basic-addon1\"\r\n                            name=\"title\"\r\n                            value={this.state.title}\r\n                            onChange={this.handleChange}\r\n                        />\r\n\r\n                    </Col>\r\n\r\n                    <Col className=\"mb-3\" sm={12}>\r\n                        <FormControl\r\n                            placeholder=\"Description\"\r\n                            as=\"textarea\" aria-label=\"With textarea\"\r\n                            name=\"description\"\r\n                            value={this.state.description}\r\n                            onChange={this.handleChange}\r\n                        />\r\n                    </Col>\r\n\r\n                    <Col className=\"mb-3\" sm={12}>\r\n                        <Form.Group>\r\n                            <Button variant=\"primary\"\r\n                                    disabled={isLoading}\r\n                                    onClick={!isLoading ? this.handleSubmit : null}\r\n                            >\r\n                                {isLoading ? 'Loading' : 'Add'}\r\n                            </Button>\r\n\r\n                            {\r\n                                isLoading &&\r\n                                <img alt=\"loading...\" className=\"pl-2\"\r\n                                     src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\"/>\r\n\r\n                            }\r\n                        </Form.Group>\r\n                    </Col>\r\n                    {this.state.alert.message &&\r\n                    <Col className={`alert ${this.state.alert.type}`}>{this.state.alert.message}</Col>\r\n                    }\r\n                </Col>\r\n\r\n\r\n            </Row>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    return {\r\n        loggedIn\r\n    };\r\n}\r\n\r\nconst connectedAddPage = connect(mapStateToProps)(AddFilmComponent);\r\nexport {connectedAddPage as AddFilmComponent};","import React, {Component} from 'react';\r\nimport {Col} from \"react-bootstrap\";\r\n\r\nimport error_404 from '../../images/error-404.png'; // Tell Webpack this JS file uses this image\r\n\r\nclass NotFoundComponent extends Component{\r\n\r\n\r\n    render(){\r\n        return(\r\n            <Col xs={12} sm={12} className=\"embed-responsive embed-responsive-16by9\">\r\n                <img className=\"embed-responsive-item\" src={error_404}\r\n                     alt=\"\" />\r\n            </Col>\r\n        )\r\n    }\r\n}\r\n\r\nexport default NotFoundComponent;","import React from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {Alert, Button, Form, Modal} from 'react-bootstrap';\r\n\r\nimport {userActions} from \"../../actions\";\r\nimport {config} from \"../../config\";\r\nimport axios from 'axios';\r\n\r\nconst pathName = config.pathName;\r\nclass ResetPasswordComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.props.dispatch(userActions.logout());\r\n\r\n        this.state = {\r\n            user: {\r\n                password: '',\r\n            },\r\n            submitted: false,\r\n            show: true,\r\n\r\n            resetRequested: false,\r\n            resetSuccessful: false,\r\n            resetError: false,\r\n\r\n            errorMessage: ''\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmitPasswordChange = this.handleSubmitPasswordChange.bind(this);\r\n    }\r\n\r\n    handleChange(e) {\r\n        this.setState({submitted: false, resetError: false});\r\n\r\n        const {name, value} = e.target;\r\n        const {user} = this.state;\r\n        this.setState({\r\n            user: {\r\n                ...user,\r\n                [name]: value\r\n            }\r\n        });\r\n    }\r\n\r\n    handleSubmitPasswordChange(e) {\r\n        e.preventDefault();\r\n\r\n        this.setState({submitted: true, resetRequested: true, resetError: false});\r\n\r\n        const {user} = this.state;\r\n\r\n        if (this.props.match.params.token && user.password && user.password.length >= 6) {\r\n            axios.post(`${config.apiUrl}users/password/reset/${this.props.match.params.token}`,\r\n                {password: this.state.user.password})\r\n                .then(res => {\r\n\r\n                    this.setState({resetSuccessful: true, resetRequested: false});\r\n\r\n                    setTimeout(function () {\r\n                        this.setState({show: false});\r\n                        this.props.history.push(`${pathName}`);\r\n                        setTimeout(function () {\r\n                            this.props.history.push(`${pathName}login`);\r\n                        }.bind(this), 500);\r\n                    }.bind(this), 1500);\r\n\r\n                })\r\n                .catch(err => {\r\n                    let errorMessage = '';\r\n\r\n                    if(err.response && err.response.data && err.response.data.errors)\r\n                        errorMessage = err.response.data.errors;\r\n\r\n                    this.setState({resetError: true, resetSuccessful: false, resetRequested: false, errorMessage: errorMessage});\r\n\r\n                })\r\n        }else{\r\n            this.setState({resetRequested: false});\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        let modalClose = () => {\r\n            this.setState({show: false});\r\n            this.props.history.push(`${pathName}`);\r\n        };\r\n\r\n        const {user, submitted, resetSuccessful, resetRequested, resetError, errorMessage} = this.state;\r\n\r\n        return (\r\n\r\n            <Modal\r\n                onHide={modalClose}\r\n                show={this.state.show}\r\n                size=\"lg\"\r\n                aria-labelledby=\"contained-modal-title-vcenter\"\r\n                centered\r\n            >\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                        Register\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form onSubmit={this.handleSubmitPasswordChange}>\r\n                        <Form.Group>\r\n                            <Form.Label htmlFor=\"password\">Password</Form.Label>\r\n                            <Form.Control isInvalid={submitted && (user.password.length < 6 )} type=\"password\"\r\n                                          name=\"password\" value={user.password} maxLength=\"11\"\r\n                                          onChange={this.handleChange}>\r\n                            </Form.Control>\r\n                            <Form.Control.Feedback type={\"invalid\"}>\r\n                                {\r\n                                    user.password.length === 0 ? \"Password is required\" : \"Password too short (min 6 chars)\"\r\n                                }\r\n\r\n                            </Form.Control.Feedback>\r\n                        </Form.Group>\r\n\r\n                        {\r\n                            resetSuccessful &&\r\n                            <Alert variant=\"success\">\r\n                                Password has been reseated! Redirecting to login page.\r\n                            </Alert>\r\n                        }\r\n\r\n                        {\r\n                            resetError &&\r\n                            <Alert variant=\"danger\">\r\n                                {errorMessage ? errorMessage : 'Error while resetting password.'}\r\n                            </Alert>\r\n                        }\r\n\r\n                        <Form.Group>\r\n                            <Button type=\"submit\" className=\"btn-primary\">\r\n                                Reset password\r\n                            </Button>\r\n\r\n                            {resetRequested &&\r\n                            <img alt=\"loading...\" className=\"pl-2\"\r\n                                 src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\"/>\r\n                            }\r\n                        </Form.Group>\r\n\r\n                    </Form>\r\n\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer>\r\n                    <Button onClick={modalClose}>Close</Button>\r\n                </Modal.Footer>\r\n\r\n\r\n            </Modal>\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {registering} = state.registration;\r\n    const {alert} = state;\r\n    return {\r\n        registering,\r\n        alert\r\n    };\r\n}\r\n\r\nconst connectedResetPasswordComponent = connect(mapStateToProps)(ResetPasswordComponent);\r\nexport {connectedResetPasswordComponent as ResetPasswordComponent};","import React from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {Alert, Button, Form, Modal} from 'react-bootstrap';\r\n\r\nimport {userActions} from \"../../actions\";\r\nimport {config} from \"../../config\";\r\nimport axios from 'axios';\r\n\r\n\r\nclass ForgotPasswordComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.props.dispatch(userActions.logout());\r\n\r\n        this.state = {\r\n            user: {\r\n                email: ''\r\n            },\r\n            submitted: false,\r\n            show: true,\r\n\r\n            emailSending: false,\r\n            emailSend: false,\r\n            emailError: false,\r\n\r\n            errorMessage: ''\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmitForgotRequest = this.handleSubmitForgotRequest.bind(this);\r\n    }\r\n\r\n    handleChange(e) {\r\n        this.setState({emailError: false});\r\n\r\n        const {name, value} = e.target;\r\n        const {user} = this.state;\r\n        this.setState({\r\n            user: {\r\n                ...user,\r\n                [name]: value\r\n            }\r\n        });\r\n    }\r\n\r\n    handleSubmitForgotRequest(e) {\r\n        e.preventDefault();\r\n\r\n        this.setState({emailSending: true, emailError: false, errorMessage: ''});\r\n\r\n        axios.post(`${config.apiUrl}users/password/forgot`, {email: this.state.user.email} )\r\n            .then(res => {\r\n                this.setState({emailSend: true, emailSending: false});\r\n            })\r\n            .catch(err => {\r\n                let errorMessage = '';\r\n\r\n                if(err.response && err.response.data && err.response.data.errors)\r\n                    errorMessage = err.response.data.errors;\r\n\r\n                this.setState({emailError: true, emailSending: false, errorMessage: errorMessage});\r\n\r\n            })\r\n    };\r\n\r\n    render() {\r\n\r\n        let modalClose = () => {\r\n            this.setState({show: false});\r\n            this.props.history.goBack();\r\n        };\r\n\r\n        const {user, submitted, emailSending, emailSend, emailError, errorMessage} = this.state;\r\n\r\n        return (\r\n\r\n            <Modal\r\n                onHide={modalClose}\r\n                show={this.state.show}\r\n                size=\"lg\"\r\n                aria-labelledby=\"contained-modal-title-vcenter\"\r\n                centered\r\n            >\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                        Register\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form onSubmit={this.handleSubmitForgotRequest}>\r\n                        <Form.Group>\r\n                            <Form.Label htmlFor=\"email\">Email</Form.Label>\r\n                            <Form.Control\r\n                                isInvalid={(submitted && !user.email) || (alert.type === 'alert-danger' && alert.message)}\r\n                                type=\"email\" name=\"email\" value={user.email} onChange={this.handleChange}>\r\n                            </Form.Control>\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                {\r\n                                    alert.message ? alert.message : \"Email is required\"\r\n                                }\r\n                            </Form.Control.Feedback>\r\n                        </Form.Group>\r\n\r\n\r\n\r\n                        {\r\n                            emailSend &&\r\n                            <Alert variant=\"success\">\r\n                                Email with link to reset password has been sent.\r\n                            </Alert>\r\n                        }\r\n\r\n                        {\r\n                            emailError &&\r\n                            <Alert variant=\"danger\">\r\n                                {errorMessage ? errorMessage : \"Error while sending email.\" }\r\n                            </Alert>\r\n                        }\r\n\r\n                        <Form.Group>\r\n                            <Button type=\"submit\" className=\"btn-primary\">\r\n                                Reset password\r\n                            </Button>\r\n\r\n                            {emailSending &&\r\n                            <img alt=\"loading...\" className=\"pl-2\"\r\n                                 src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\"/>\r\n                            }\r\n                        </Form.Group>\r\n\r\n                    </Form>\r\n\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer>\r\n                    <Button onClick={modalClose}>Close</Button>\r\n                </Modal.Footer>\r\n\r\n\r\n            </Modal>\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {registering} = state.registration;\r\n    const {alert} = state;\r\n    return {\r\n        registering,\r\n        alert\r\n    };\r\n}\r\n\r\nconst connectedForgotPasswordComponent = connect(mapStateToProps)(ForgotPasswordComponent);\r\nexport {connectedForgotPasswordComponent as ForgotPasswordComponent};","import {Redirect, Route} from \"react-router\";\r\nimport React from \"react\";\r\nimport {config} from \"../config\";\r\n\r\nlet pathName = config.pathName;\r\n\r\nexport const PrivateRoute = ({component: Component, ...rest}) => {\r\n    return <Route\r\n        {...rest}\r\n        render={props =>\r\n            localStorage.getItem(\"user\") ? (\r\n                <Component {...props} />\r\n            ) : (\r\n                <Redirect to={{\r\n                    pathname: `${pathName}login`,\r\n                    state: {from: props.location}\r\n                }}/>\r\n            )\r\n        }/>\r\n};","import React, {Component} from 'react';\r\nimport axios from 'axios'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {Col, Row, Spinner} from 'react-bootstrap';\r\n\r\nimport {config} from \"../../config\";\r\n\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport {authHeader} from \"../../helpers\";\r\nimport {PlaylistAddButtonComponent} from \"../Playlist/PlaylistAddButtonComponent\";\r\nimport TextTruncate from \"react-text-truncate\";\r\nimport {isMobile} from 'react-device-detect'\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport Button from '@material-ui/core/Button';\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport ButtonBase from \"@material-ui/core/ButtonBase/ButtonBase\";\r\n\r\nconst pathName = config.pathName;\r\n\r\nclass ProfileComponent extends Component {\r\n\r\n\r\n    handleScroll = () => {\r\n        if (this.state.addOpenedIndex >= 0 && !isMobile) {\r\n            let array = this.state.films;\r\n            array[this.state.addOpenedIndex].add = false;\r\n\r\n            this.setState({films: array, addOpenedIndex: -1});\r\n        }\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: window.pageYOffset,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n\r\n    };\r\n\r\n    handleResize = () => {\r\n        this.setState({windowWidth: window.innerWidth});\r\n    };\r\n\r\n    handlePlaylistOperation = (message) => {\r\n        if (this.state.addOpenedIndex >= 0) {\r\n            let array = this.state.films;\r\n            array.forEach((film) => {\r\n                film.add = false;\r\n            });\r\n            this.setState({films: array, addOpenedIndex: -1})\r\n        }\r\n\r\n        this.setState({openSnackbar: true, note: message});\r\n    };\r\n\r\n    handleClickOutside = (index) => {\r\n        if (this.state.addOpenedIndex >= 0) {\r\n            let array = this.state.films;\r\n            array.forEach((film) => {\r\n                film.add = false;\r\n            });\r\n            this.setState({films: array, addOpenedIndex: index})\r\n        }\r\n    };\r\n\r\n    handleCreatePlaylistClick = () => {\r\n        this.setState({addOpenedIndex: -1});\r\n    };\r\n\r\n    handleAddPlaylistButtonClick = (index) => {\r\n        let array = this.state.films;\r\n        array[index].add = !array[index].add;\r\n\r\n        this.setState({films: array, addOpenedIndex: index})\r\n\r\n    };\r\n\r\n    handleClose = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n\r\n        this.setState({openSnackbar: false});\r\n    };\r\n\r\n    setRedirect = (filmID, playlistID) => {\r\n        playlistID ?\r\n            this.props.history.push({\r\n                pathname: `${pathName}film/` + filmID,\r\n                search: `?list=${playlistID}`\r\n            })\r\n            :\r\n            this.props.history.push({\r\n                pathname: `${pathName}film/` + filmID\r\n            });\r\n    };\r\n\r\n    handleRemovePlaylist = (id, index) => {\r\n\r\n        const requestParams = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        axios.delete(`${config.apiUrl}playlists/${id}`, requestParams)\r\n            .then(res => {\r\n                let playlists = this.state.playlists;\r\n                playlists.splice(index, 1);\r\n\r\n                this.setState({playlists: playlists, openSnackbar: true, note: \"Playlist removed successfully!\"});\r\n            }).catch(err => {\r\n            console.log(err);\r\n        })\r\n    };\r\n\r\n    handleRemoveFilm = (id, index) => {\r\n\r\n        const requestParams = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        axios.delete(`${config.apiUrl}films/${id}`, requestParams)\r\n            .then(res => {\r\n\r\n                let films = this.state.films;\r\n                films.splice(index, 1);\r\n\r\n                this.setState({films: films, openSnackbar: true, note: \"Film removed successfully!\"});\r\n            }).catch(err => {\r\n            console.log(JSON.stringify(err));\r\n        })\r\n    };\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            films: [],\r\n            playlists: [],\r\n\r\n            user: {},\r\n\r\n            addOpenedIndex: -1,\r\n\r\n            error: false,\r\n\r\n            isLoading: true,\r\n            isLoaded: false,\r\n\r\n            scroll: {},\r\n\r\n            windowWidth: window.innerWidth,\r\n\r\n            openSnackbar: false,\r\n            note: ''\r\n        };\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        window.addEventListener('scroll', this.handleScroll);\r\n        window.addEventListener('resize', this.handleResize);\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: window.pageYOffset,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n\r\n\r\n        this.setState({isLoading: true}, async () => {\r\n\r\n            const requestOptions = {headers: authHeader()};\r\n\r\n            await axios.get(`${config.apiUrl}users/me/films`, requestOptions)\r\n                .then(response => {\r\n\r\n                    let films = response.data;\r\n\r\n                    films.forEach(film => {\r\n                        film.add = false;\r\n                    });\r\n\r\n                    this.setState({\r\n                        films: films,\r\n                    });\r\n                })\r\n                .catch(err => {\r\n                    console.log(JSON.stringify(err));\r\n                });\r\n\r\n\r\n            await axios.get(`${config.apiUrl}users/me/playlists`, requestOptions)\r\n                .then(response => {\r\n\r\n                    let playlists = response.data;\r\n\r\n                    this.setState({\r\n                        isLoading: false,\r\n                        isLoaded: true,\r\n                        playlists: playlists\r\n                    })\r\n\r\n                })\r\n                .catch((err) => {\r\n                    this.setState({\r\n                        error: err.message,\r\n                        isLoading: false,\r\n                        isLoaded: true,\r\n                    })\r\n                });\r\n        });\r\n\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n        window.removeEventListener('resize', this.handleResize);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if(prevProps.loggedIn !== this.props.loggedIn && !this.props.loggedIn){\r\n            this.props.history.push(`${pathName}`)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {isLoading} = this.state;\r\n        const {scroll} = this.state;\r\n\r\n        return (\r\n            <Col>\r\n\r\n\r\n                <Row className=\"mt-5\">\r\n\r\n                    {\r\n                        this.state.films.map((film, index) => {\r\n\r\n                            const filmID = film.id;\r\n\r\n\r\n                            return <Col className=\"mb-5 film-preview-holder playlist-remove-container\" xs={6} sm={4} md={3} lg={2} key={film.id}>\r\n                                <div className=\"embed-responsive embed-responsive-16by9 container\">\r\n                                    {\r\n                                        <img\r\n                                            alt=\"\"\r\n                                            className=\"embed-responsive-item image\"\r\n                                            src={`${config.apiUrl}films/${film.id}/thumbnail/${film.thumbnail._id}?width=small`}\r\n                                            onClick={() => this.setRedirect(filmID)}/>\r\n                                    }\r\n                                    <FontAwesomeIcon className=\"middle\" icon=\"play\"\r\n                                                     onClick={() => this.setRedirect(filmID)}/>\r\n\r\n                                </div>\r\n\r\n                                <Row className=\"m-0 mt-1\">\r\n                                    <Col xs={8} sm={8} className=\"p-0\">\r\n\r\n                                        <TextTruncate line={2} text={film.title}\r\n                                                      id=\"s-c-2\"\r\n                                                      className=\"mb-1 mt-1 title \"/>\r\n\r\n                                    </Col>\r\n\r\n\r\n                                    <Col  style={{height: 24 + 'px', width: 24 + \"px\" , position: 'absolute', right: 28}}\r\n                                         className={\"playlist-remove-holder p-0 d-flex text-center justify-content-center align-items-center\"}\r\n                                         onClick={() => this.handleRemoveFilm(film.id, index)}>\r\n                                        <ButtonBase  style={{borderRadius: 20 + \"px\", width: 30 + \"px\", height: 24 + \"px\"}} className=\"button-my\" >\r\n                                            {\r\n                                                <FontAwesomeIcon\r\n                                                    icon=\"trash-alt\"/>\r\n                                            }\r\n                                        </ButtonBase>\r\n                                    </Col>\r\n\r\n                                    <Col xs={1} sm={1} className=\"p-0\" style={{position: 'absolute', right: 8}}>\r\n                                        <PlaylistAddButtonComponent\r\n                                            parentName=\"profile\"\r\n                                            filmID={film.id}\r\n                                            filmTitle={film.title}\r\n                                            show={film.add} index={index}\r\n                                            handleAddPlaylistButtonClick={this.handleAddPlaylistButtonClick}\r\n                                            handleClick={this.handleCreatePlaylistClick}\r\n                                            handleClickOutside={this.handleClickOutside}\r\n                                            handlePlaylistOperation={this.handlePlaylistOperation}/>\r\n                                    </Col>\r\n\r\n\r\n                                </Row>\r\n                                <p className=\"mb-0 mt-1 film-views\">\r\n                                    <small>{film.views} views</small>\r\n                                </p>\r\n\r\n                            </Col>\r\n\r\n\r\n                        })\r\n                    }\r\n\r\n                    {\r\n                        this.state.playlists.map((playlist, index) => {\r\n\r\n                            const filmID = playlist.filmID;\r\n                            const playlistID = playlist.id;\r\n\r\n\r\n                            return <Col className=\"mb-5 playlist-remove-container\" xs={6} sm={4} md={3} lg={2}\r\n                                        key={playlist.id}>\r\n                                <div onClick={() => this.setRedirect(filmID, playlistID)}\r\n                                     className=\"embed-responsive embed-responsive-16by9 z-depth-1-half container\">\r\n                                    {\r\n                                        filmID !== null ?\r\n                                        <img alt=\"\"\r\n                                             className=\"embed-responsive-item image\"\r\n                                             src={`${config.apiUrl}films/${filmID}/thumbnail/${playlist.thumbnail}?width=small`}\r\n                                             />\r\n                                            :\r\n                                        <img alt=\"\"\r\n                                             className=\"embed-responsive-item image\"\r\n                                        src=\"https://www.atelierliving.nl/wp-content/themes/ctrln/assets/images/placeholder.png\"\r\n                                             />\r\n\r\n                                    }\r\n                                    <Row className=\"middle\">\r\n                                        <Col xs={4} sm={4}>\r\n                                            <FontAwesomeIcon icon=\"play\" />\r\n                                        </Col>\r\n                                        <Col xs={8} sm={8}>\r\n                                            <small className=\"font-weight-bold\">Play all</small>\r\n\r\n                                        </Col>\r\n                                    </Row>\r\n\r\n\r\n                                </div>\r\n                                <Row className=\"p-0 m-0 mt-1\">\r\n                                    <Col className=\"p-0 m-0 \">\r\n\r\n                                            <TextTruncate line={2} text={playlist.title}\r\n                                                          id=\"s-c-2\"\r\n                                                          className=\"mb-2 mt-1 title \"/>\r\n                                    </Col>\r\n                                    <ButtonBase  style={{borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\"}} className=\"button-my\" >\r\n                                        {\r\n                                            <Col\r\n                                                style={{width: 30 + \"px\", height: 24 + \"px\"}}\r\n                                                className={\r\n                                                \"playlist-remove-holder m-0 p-0 text-center justify-content-center d-flex align-items-center\"}\r\n                                                 onClick={() => this.handleRemovePlaylist(playlist.id, index)}>\r\n\r\n                                                <FontAwesomeIcon icon=\"trash-alt\"/>\r\n                                            </Col>\r\n                                        }\r\n                                    </ButtonBase>\r\n                                </Row>\r\n\r\n                                <p className=\"mb-0 author-nick\">\r\n                                    <small>{playlist.authorName}</small>\r\n                                </p>\r\n\r\n                            </Col>\r\n\r\n\r\n                        })\r\n                    }\r\n\r\n                </Row>\r\n\r\n                {\r\n                    ((scroll.scrollTop === 0 || scroll.offsetHeight <= scroll.innerHeight) && this.state.hasMore && this.state.isLoaded) &&\r\n                    <Col sm={12} className=\"text-center\">\r\n                        <Button\r\n                            className=\"button-my\"\r\n                            variant=\"contained\"\r\n                            disabled={isLoading}\r\n                            onClick={!isLoading ? this.loadData : null}\r\n                        >\r\n                            {isLoading ? 'Loading' : 'Click to load'}\r\n                        </Button>\r\n                    </Col>\r\n\r\n\r\n                }\r\n\r\n                {\r\n\r\n\r\n                    <Col style={{height: 40}} sm={12} className=\"text-center\">\r\n                        {(!(scroll.scrollTop === 0 || scroll.offsetHeight <= scroll.innerHeight) || !this.state.isLoaded) &&\r\n                        this.state.isLoading &&\r\n                        <Spinner animation=\"border\"/>\r\n                        }\r\n                    </Col>\r\n                }\r\n\r\n                <Snackbar\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={this.state.openSnackbar}\r\n                    autoHideDuration={1500}\r\n                    onClose={this.handleClose}\r\n                    ContentProps={{\r\n                        'aria-describedby': 'message-id',\r\n                    }}\r\n                    message={<span id=\"message-id\">{this.state.note}</span>}\r\n                />\r\n            </Col>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    return {\r\n        loggedIn\r\n    };\r\n}\r\n\r\nconst connectedProfileComponent = connect(mapStateToProps)(ProfileComponent);\r\n\r\n\r\nexport {connectedProfileComponent as ProfileComponent};\r\n","import React, {Component} from 'react';\r\nimport './App.css';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nimport {NavbarComponent} from './components/Navbar/NavbarComponent';\r\n\r\nimport {HomeComponent} from './components/Home/HomeComponent';\r\nimport {FilmComponent} from './components/Film/FilmComponent';\r\nimport {LoginComponent} from './components/Login/LoginComponent';\r\nimport {RegisterComponent} from './components/Register/RegisterComponent';\r\nimport {SearchComponent} from './components/Search/SearchComponent';\r\nimport {AllPlaylistsComponent} from './components/Playlist/AllPlaylistsComponent';\r\nimport {AddFilmComponent} from './components/AddFilm/AddFilmComponent';\r\nimport NotFoundComponent from './components/NotFound/NotFoundComponent';\r\n\r\nimport {Route, Router} from 'react-router-dom';\r\n\r\n\r\nimport {history} from './helpers';\r\nimport {alertActions} from './actions';\r\nimport {connect} from 'react-redux';\r\n//  --------- icons ------------\r\nimport {library} from '@fortawesome/fontawesome-svg-core'\r\nimport {\r\n    faCaretDown,\r\n    faCaretUp,\r\n    faEllipsisV,\r\n    faEye,\r\n    faFilter,\r\n    faPlay,\r\n    faPlus,\r\n    faSearch,\r\n    faThumbsDown,\r\n    faThumbsUp,\r\n    faSortUp,\r\n    faSortDown,\r\n    faTrashAlt,\r\n    faTimes\r\n} from '@fortawesome/free-solid-svg-icons'\r\nimport {Switch} from \"react-router\";\r\nimport {ResetPasswordComponent} from './components/ResetPassword/ResetPasswordComponent';\r\nimport {ForgotPasswordComponent} from './components/ResetPassword/ForgotPasswordComponent';\r\nimport {PrivateRoute} from './helpers/PrivateRoute';\r\nimport {ProfileComponent} from './components/Profile/ProfileComponent';\r\n\r\nimport {config} from './config';\r\n\r\nlibrary.add(faSearch, faPlus, faThumbsUp, faThumbsDown, faEye, faPlay, faFilter, faCaretUp, faCaretDown, faEllipsisV,\r\n    faSortDown, faSortUp, faTrashAlt, faTimes);\r\n\r\nconst pathName = config.pathName;\r\n\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const {dispatch} = this.props;\r\n\r\n        history.listen((location, action) => {\r\n            dispatch(alertActions.clear());\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Router history={history}>\r\n\r\n                    <Route  component={() => <NavbarComponent location={history.location} history={history}/>}/>\r\n\r\n                    <Route exact path={[`${pathName}login`, `${pathName}film/:id/login`, `${pathName}search/login`, `${pathName}add/login`, `${pathName}playlists/login`]}\r\n                           component={LoginComponent}/>\r\n\r\n                    <Route exact path={[`${pathName}register`, `${pathName}film/:id/register`, `${pathName}search/register`, `${pathName}add/register`, `${pathName}playlists/register`]}\r\n                           component={RegisterComponent}/>\r\n\r\n                    <Route exact path={[`${pathName}reset/:token`, `${pathName}film/:id/reset/:token`, `${pathName}search/reset/:token`, `${pathName}add/reset/:token`, `${pathName}playlists/reset/:token`]}\r\n                           component={ResetPasswordComponent}/>\r\n\r\n                    <Route exact path={[`${pathName}forgot`, `${pathName}film/:id/forgot`, `${pathName}search/forgot`, `${pathName}add/forgot`, `${pathName}playlists/forgot`]}\r\n                           component={ForgotPasswordComponent}/>\r\n\r\n                    <Switch>\r\n\r\n                        <Route exact path={[`${pathName}film/:id`, `${pathName}film/:id/login`, `${pathName}film/:id/register`, `${pathName}film/:id/reset/:token`,\r\n                            `${pathName}film/:id/forgot`]} component={FilmComponent}/>\r\n\r\n                        <Route exact path={[`${pathName}`, `${pathName}login`, `${pathName}register`,\r\n                            `${pathName}reset/:token`, `${pathName}forgot`]} component={HomeComponent}/>\r\n\r\n                        <Route exact path={[`${pathName}search`, `${pathName}search/login`, `${pathName}search/register`, `${pathName}search/reset/:token`, `${pathName}search/forgot`]} component={SearchComponent}/>\r\n\r\n                        <Route exact path={[`${pathName}add`, `${pathName}add/login`, `${pathName}add/register`, `${pathName}add/reset/:token`, `${pathName}add/forgot`]} component={AddFilmComponent}/>\r\n\r\n                        <Route exact path={[`${pathName}playlists`, `${pathName}playlists/login`, `${pathName}playlists/register`, `${pathName}playlists/reset/:token`,\r\n                            `${pathName}playlists/forgot`]} component={AllPlaylistsComponent}/>\r\n\r\n                        <PrivateRoute exact path={[`${pathName}profile`]} component={ProfileComponent} />\r\n\r\n                        <Route exact path=\"*\" component={NotFoundComponent}/>\r\n\r\n                    </Switch>\r\n                </Router>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {alert} = state;\r\n    return {\r\n        alert\r\n    }\r\n}\r\n\r\nconst connectedApp = connect(mapStateToProps)(App);\r\n\r\nexport {connectedApp as App};\r\n\r\n","const isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import \"es6-promise\";\r\nimport \"isomorphic-fetch\";\r\n\r\nimport 'react-app-polyfill/ie9';\r\nimport 'react-app-polyfill/ie11';\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport { App } from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from \"./helpers\";\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App />\r\n    </Provider>,\r\n    document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}