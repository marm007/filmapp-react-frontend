{"version":3,"sources":["config/index.js","services/playlistService.js","helpers/components/changePrivacyButton.js","components/blurredImage/index.js","helpers/index.js","components/add/reducers/playlistDropdownMenuReducer.js","components/add/playlistDropdownMenu.js","components/add/playlistAddButton.js","components/searchPage/reducer.js","components/searchPage/index.js"],"names":["commentsMaxFetchCount","recommendationsMaxFetchCount","playlistButtonMaxFetchCount","pageInitialMaxFetchCount","pageMaxFetchCount","create","body","axios","post","headers","authHeader","index","id","get","show","params","partialUpdate","patch","remove","delete","ChangePrivacyButton","isPublic","isProfile","dispatchPrivacyUpdate","filmDispatch","useState","isChanging","setIsChanging","useEffect","a","playlistApi","is_public","then","res","type","payload","data","undefined","fieldName","catch","err","console","error","changePrivacy","privacyButton","style","marginLeft","borderRadius","width","height","className","onClick","e","stopPropagation","icon","BlurredImageComponent","props","image","setImage","aspectRatio","alt","src","checkIfPlaylistButtonClick","target","tagName","parentNode","animVal","includes","displayCommentDate","comment","date","Date","parse","createdAt","getDate","slice","getMonth","getFullYear","getHours","getMinutes","parseSearchDate","film","today","time","Math","abs","floor","UTC","playlistDropdownMenuInitialState","playlists","isLoading","isAllFetched","isCreating","isAdding","playlistToUpgrade","title","playlistDropdownMenuReducer","state","action","map","playlist","contains","PlaylistDropdownMenu","filmID","handlePlaylistClose","isPreview","useRipple","background","addRipple","ripples","createToast","useContext","ToastContext","useReducer","dispatch","handleOnPlaylistDropdownMenuBottom","useCallback","scrollRef","useBottomScrollListener","userApi","skip","length","limit","result","forEach","films","indexOf","getMyPlaylists","films_id","errorMessage","response","errors","creatPlaylist","is_remove_films","message","addToPlaylist","Dropdown","Menu","Row","Col","xs","sm","setTimeout","Divider","ref","maxHeight","overflowY","minHeight","Form","Check","FormCheck","Input","onChange","handleAddToPlaylist","checked","Label","Spinner","animation","ItemText","FormControl","isInvalid","value","placeholder","Feedback","Select","Group","Button","disabled","PlaylistAddButton","user","UserContext","isOpen","setIsOpen","auth","onToggle","event","metadata","Toggle","variant","bsPrefix","color","display","verticalAlign","opacity","faEllipsisV","searchInitialState","isInitialLoaded","search","filter","sort","dir","sorts","searchReducer","resetSort","filters","Search","history","useHistory","location","useLocation","handleSearchOnBottom","searchParams","queryString","filmApi","getFilms","handleOnclick","filterClick","sortClick","dirClick","tmpType","push","cursor","faFilter","Collapse","in","filterTmp","fontWeight","fontSize","sortTmp","lg","process","flex","Truncate","lines","author_name","views","line","text","description"],"mappings":"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","file":"static/js/9.8f2f2596.chunk.js","sourcesContent":["export const commentsMaxFetchCount = 10\nexport const recommendationsMaxFetchCount = 12\n\nexport const playlistButtonMaxFetchCount = 10\n\nexport const pageInitialMaxFetchCount = 40\nexport const pageMaxFetchCount = 20\n","import axios from '../helpers/axios'\nimport authHeader from '../helpers/authHeader'\n\n\nexport const create = (body) => axios.post('playlists', body, { headers: authHeader() })\nexport const index = (id) => axios.get(`playlists/${id}`, { headers: authHeader() })\nexport const show = (params) => axios.get(`playlists`, { params, headers: authHeader() })\nexport const partialUpdate = (id, body) => axios.patch(`playlists/${id}`, body, { headers: authHeader() })\n\n\nexport const remove = (id) => axios.delete(`playlists/${id}`, { headers: authHeader() })\n\n","import Col  from \"react-bootstrap/Col\"\nimport ButtonBase  from \"@material-ui/core/ButtonBase\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { useEffect, useState } from \"react\"\nimport * as playlistApi from '../../services/playlistService'\n\nconst ChangePrivacyButton = ({ isPublic, id, isProfile, dispatchPrivacyUpdate, filmDispatch }) => {\n\n    const [isChanging, setIsChanging] = useState(false)\n\n\n    useEffect(() => {\n        async function changePrivacy() {\n            await playlistApi.partialUpdate(id, { is_public: !isPublic })\n                .then(res => {\n                    setIsChanging(false)\n\n                    dispatchPrivacyUpdate({\n                        type: 'change-playlist-privacy-success',\n                        payload: res.data\n                    })\n\n                    if (filmDispatch !== undefined) {\n                        filmDispatch({\n                            type: 'field',\n                            fieldName: 'reloadPlaylist',\n                            payload: true\n                        })\n                    }\n                })\n                .catch(err => {\n                    console.error(err)\n                    setIsChanging(false)\n                })\n        }\n        if (isChanging) changePrivacy()\n    }, [dispatchPrivacyUpdate, isChanging, isPublic, id, filmDispatch])\n\n    const handleChangePrivacy = (e) => {\n        e.stopPropagation()\n        if (!isChanging) setIsChanging(true)\n    }\n\n    const privacyButton = (\n        <ButtonBase\n            style={{ marginLeft: 'auto', borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\" }}\n            className=\"m-button\"\n            onClick={handleChangePrivacy}>\n            <FontAwesomeIcon icon={isPublic ? \"globe-europe\" : \"lock\"} />\n        </ButtonBase>\n    )\n\n    return isProfile ?\n        (\n            <Col className=\"text-center justify-content-center d-flex align-items-center p-0 flex-grow-0\"\n            >\n                <Col\n                    className=\"remove-holder p-0 m-0 flex-grow-0\"\n                    style={{ height: '24px', width: '24' }}>\n                    {privacyButton}\n                </Col>\n            </Col>\n        ) :\n        privacyButton\n}\n\nexport default ChangePrivacyButton","import React, { useState, useEffect } from 'react';\nimport { Ratio } from 'react-bootstrap'\n\nfunction BlurredImageComponent(props) {\n\n    const [image, setImage] = useState(\"data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\")\n\n    useEffect(() => {\n        setImage(props.image);\n    }, [props.image])\n\n\n    return (\n        <Ratio aspectRatio=\"16x9\">\n            <img\n                alt=\"\"\n                className=\"embed-responsive-item play-image\"\n                src={image} />\n        </Ratio>);\n}\n\nexport default BlurredImageComponent;","export const checkIfPlaylistButtonClick = (target) => {\n    if ((target.tagName === 'path' && target.parentNode.className.animVal && target.parentNode.className.animVal.includes('playlist-add-icon')) ||\n        (target.tagName === 'svg' && target.className.animVal && target.className.animVal.includes('playlist-add-icon')) ||\n        (target.className && typeof target.className === 'string' && target.className.includes('playlist-add-icon-holder')))\n        return true\n    return false\n}\n\nexport const displayCommentDate = (comment) => {\n    let date = new Date(Date.parse(comment.createdAt));\n    let time = (('0' + date.getDate()).slice(-2) + '-' + ('0' + (date.getMonth() + 1)).slice(-2) + '-'\n        + ('0' + date.getFullYear()).slice(-2)\n        + ' o ' + ('0' + date.getHours()).slice(-2) + ':' + ('0' + date.getMinutes()).slice(-2))\n    return time;\n};\n\nexport const parseSearchDate = (film) => {\n\n    let date = new Date(Date.parse(film.createdAt));\n    let today = new Date();\n\n\n    let time = Math.abs(Math.floor((\n        Date.UTC(\n            date.getFullYear(),\n            date.getMonth(),\n            date.getDate(),\n            date.getHours(),\n            date.getMinutes()) -\n        Date.UTC(\n            today.getFullYear(),\n            today.getMonth(),\n            today.getDate(),\n            today.getHours(),\n            today.getMinutes()))\n        / (1000 * 60)));\n\n    if (time / 60 >= 1) {\n        time /= 60;\n\n        if (time / 24 >= 1) {\n\n            time /= 24;\n\n            if (time / 30 >= 1) {\n\n                time /= 30;\n\n                if (time / 12 >= 1) {\n\n                    time = time / 12;\n                    time = Math.floor(time) + ' years ';\n\n                } else {\n                    time = Math.floor(time) + ' months ';\n                }\n\n            } else {\n                time = Math.floor(time) + ' days ';\n            }\n\n        } else {\n            time = Math.floor(time) + ' hours ';\n        }\n    } else {\n        time = Math.floor(time) + ' minutes ';\n    }\n\n    time = time + 'ago';\n\n    return time;\n};\n","import { playlistButtonMaxFetchCount } from \"../../../config\"\n\nexport const playlistDropdownMenuInitialState = {\n    playlists: [],\n    isLoading: true,\n    isAllFetched: false,\n    isCreating: false,\n    isAdding: false,\n    playlistToUpgrade: null,\n    title: '',\n    isPublic: false,\n    error: '',\n}\n\nexport function playlistDropdownMenuReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                error: '',\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'load': {\n            return {\n                ...state,\n                isLoading: true,\n                isAllFetched: false,\n            }\n        }\n        case 'load-success': {\n            return {\n                ...state,\n                playlists: [...state.playlists, ...action.payload],\n                isLoading: false,\n                isAllFetched: action.payload < playlistButtonMaxFetchCount,\n                error: '',\n            }\n        }\n        case 'create': {\n            return {\n                ...state,\n                isLoading: false,\n                isCreating: true\n            }\n        }\n        case 'create-success': {\n            return {\n                ...state,\n                isLoading: false,\n                isCreating: false\n            }\n        }\n        case 'add': {\n            return {\n                ...state,\n                isLoading: false,\n                isAdding: true,\n                playlistToUpgrade: action.payload\n            }\n        }\n        case 'add-update-playlist': {\n            return {\n                ...state,\n                playlists: state.playlists.map(playlist => {\n                    if (playlist.id === state.playlistToUpgrade.id) return { ...playlist, contains: !playlist.contains }\n                    else return playlist\n                }),\n                playlistToUpgrade: null\n            }\n        }\n        case 'add-success': {\n            return {\n                ...state,\n                isAdding: false\n            }\n        }\n        case 'change-playlist-privacy-success': {\n            return {\n                ...state,\n                playlists: state.playlists.map(playlist => {\n                    if (playlist.id === action.payload.id) return { ...playlist, is_public: action.payload.is_public }\n                    return playlist\n                })\n            }\n        }\n        case 'error':\n            return {\n                ...state,\n                isLoading: false,\n                isAllFetched: false,\n                isCreating: false,\n                error: action.payload,\n                title: ''\n            }\n        default:\n            return state\n\n    }\n}\n","import React, { useCallback, useEffect, useContext, useReducer } from 'react';\nimport { Button, Col, Dropdown, Form, FormCheck, FormControl, Row, Spinner } from \"react-bootstrap\";\n\nimport * as userApi from '../../services/userService'\nimport * as playlistApi from '../../services/playlistService'\n\nimport ToastContext from '../../helpers/contexts/toast/toastContext';\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\nimport { playlistDropdownMenuReducer, playlistDropdownMenuInitialState } from './reducers/playlistDropdownMenuReducer'\nimport ChangePrivacyButton from '../../helpers/components/changePrivacyButton';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport useRipple from \"useripple\"\nimport { playlistButtonMaxFetchCount } from '../../config';\n\nfunction PlaylistDropdownMenu({ filmID, handlePlaylistClose, isPreview, filmDispatch }) {\n\n    const [addRipple, ripples] = useRipple({ background: \"black\" })\n\n    const { createToast } = useContext(ToastContext);\n    const [state, dispatch] = useReducer(playlistDropdownMenuReducer, playlistDropdownMenuInitialState);\n\n    const { playlists, title, isPublic, isLoading, isAllFetched, isCreating, isAdding, playlistToUpgrade, error } = state\n\n    const handleOnPlaylistDropdownMenuBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && !isCreating && !isAdding) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isLoading, isAllFetched, isCreating, isAdding])\n\n    const scrollRef = useBottomScrollListener(handleOnPlaylistDropdownMenuBottom);\n\n    useEffect(() => {\n        async function getMyPlaylists() {\n            await userApi.me({ playlists: true, skip: playlists.length, limit: playlistButtonMaxFetchCount })\n                .then(res => {\n\n                    let result = res.data.playlists\n\n                    result.forEach(playlist => {\n                        playlist.contains = playlist.films.indexOf(filmID) > -1\n                    });\n\n                    dispatch({\n                        type: 'load-success',\n                        payload: result\n                    })\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (isLoading) getMyPlaylists()\n\n    }, [filmID, playlists, isLoading])\n\n    useEffect(() => {\n\n        async function creatPlaylist() {\n            const body = { title: title, is_public: isPublic, films_id: [filmID] };\n\n            await playlistApi.create(body)\n                .then(res => {\n                    dispatch({\n                        type: 'create-success'\n                    })\n                    createToast(`Created playlist ${title}`)\n                    handlePlaylistClose()\n\n                })\n                .catch(err => {\n                    console.error(err)\n                    let errorMessage = null\n\n                    if (err.response && err.response.data && err.response.data.error) {\n                        errorMessage = err.response.data.error\n                    } else if (err.response && err.response.data && err.response.data.errors) {\n                        errorMessage = err.response.data.errors[0]\n                    }\n\n                    dispatch({\n                        type: 'error',\n                        payload: errorMessage === \"Path `title` is required.\" ? 'Playlist title is required' : errorMessage\n                    })\n                })\n        }\n\n        if (isCreating) creatPlaylist()\n\n    }, [isCreating, title, isPublic, createToast, handlePlaylistClose, filmID,])\n\n    useEffect(() => {\n        async function addToPlaylist() {\n\n            let body = { films_id: [filmID] };\n\n            body = playlistToUpgrade.contains ? { ...body, is_remove_films: true } : { ...body, is_remove_films: false }\n\n            const message = playlistToUpgrade.contains ? `Deleted from playlist ${playlistToUpgrade.title}` : `Added to playlist ${playlistToUpgrade.title}`\n\n            dispatch({\n                type: 'add-update-playlist',\n                playlist: playlistToUpgrade\n            })\n\n            await playlistApi.partialUpdate(playlistToUpgrade.id, body)\n                .then(res => {\n                    dispatch({\n                        type: 'add-success'\n                    })\n\n                    if (isPreview) {\n                        filmDispatch({\n                            type: 'field',\n                            fieldName: 'reloadPlaylist',\n                            payload: true\n                        })\n                    }\n                    createToast(message)\n                })\n                .catch(err => console.error(err))\n        }\n        if (isAdding && playlistToUpgrade) addToPlaylist()\n    }, [isAdding, playlistToUpgrade, createToast, filmDispatch, filmID, isPreview])\n\n    const handleAddToPlaylist = (playlist) => {\n        dispatch({\n            type: 'add',\n            payload: playlist\n        })\n    };\n\n    const handleCreatePlaylist = (e) => {\n        e.stopPropagation()\n        dispatch({\n            type: 'create'\n        })\n    };\n\n    return (\n\n        <Dropdown.Menu\n            onClick={e => e.stopPropagation()}\n            style={{ width: 240 + \"px\" }}>\n            <Row className=\"m-0 m-button playlist-add-button-ripple\" >\n                <Col className=\"playlist-add-exit-text-width\">Save to...</Col>\n                <Col xs={2} sm={2}\n                    onClick={(e) => {\n                        addRipple(e)\n                        setTimeout(handlePlaylistClose, 150)\n                    }}\n                    style={{ borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\" }}\n                    className=\"playlist-add-icon-holder p-0 playlist-add-button-ripple d-flex align-items-center text-center justify-content-center\">\n                    <FontAwesomeIcon icon=\"times\" />\n                    {ripples}\n                </Col>\n            </Row>\n            <Dropdown.Divider />\n            <div\n                ref={scrollRef}\n                style={{\n                    maxHeight: 100 + 'px', overflowY: 'scroll', minHeight: 3 + 'rem'\n                }}>\n\n                {\n                    playlists.map((playlist, index) => {\n                        return (<Row className=\"m-0 playlist-form-group\" key={playlist.id} >\n                            <Col xs={10} sm={10} className=\"p-0\">\n                                <Form.Check id={playlist.id} className=\"form-check\">\n                                    <FormCheck.Input type=\"checkbox\"\n                                        onChange={() => handleAddToPlaylist(playlist)}\n                                        checked={playlist.contains} />\n                                    <FormCheck.Label>\n                                        <p className=\"playlist-check-label\">\n                                            {playlist.title}\n                                        </p>\n                                    </FormCheck.Label>\n                                </Form.Check>\n\n                            </Col>\n                            <ChangePrivacyButton\n                                id={playlist.id}\n                                isPublic={playlist.is_public}\n                                isProfile={false}\n                                filmDispatch={filmDispatch}\n                                dispatchPrivacyUpdate={dispatch} />\n\n                        </Row>)\n                    })\n                }\n\n                {\n                    !isAllFetched && <div style={{ height: 32 + 'px' }} className=\"d-flex justify-content-center\">\n                        {isLoading && <Spinner animation=\"border\" />}\n                    </div>\n                }\n            </div>\n            <Dropdown.Divider />\n            <Dropdown.ItemText>Create a new playlist</Dropdown.ItemText>\n            <Row className=\"m-0 p-0\">\n                <Form>\n                    <FormControl\n                        isInvalid={error !== ''}\n                        onChange={(e) => dispatch({ type: 'field', fieldName: 'title', payload: e.target.value })}\n                        className=\"mb-2 mt-2\"\n                        placeholder=\"Enter playlist title...\" />\n\n                    <FormControl.Feedback type=\"invalid\"\n                        className=\"mb-2 mt-2\">\n                        {error}\n                    </FormControl.Feedback>\n                    <Form.Select aria-label=\"Privacy\" className=\"mb-2 mt-2\"\n                        onChange={(e) => dispatch({ type: 'field', fieldName: 'isPublic', payload: e.target.value === 'public' })}>\n                        <option value=\"private\">Private</option>\n                        <option value=\"public\">Public</option>\n                    </Form.Select>\n\n                    <Form.Group className=\"d-flex align-items-center mt-2\">\n                        <Button disabled={isCreating}\n                            onClick={isCreating ? null : handleCreatePlaylist}>Create</Button>\n\n                        {\n                            isCreating &&\n                            <Spinner className=\"ms-2\" animation=\"grow\" />\n                        }\n                    </Form.Group>\n\n                </Form>\n\n            </Row>\n\n        </Dropdown.Menu>\n\n\n    )\n}\n\nexport default PlaylistDropdownMenu\n","import React, { useState, useContext } from 'react';\nimport { Col, Dropdown } from \"react-bootstrap\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport PlaylistDropdownMenu from './playlistDropdownMenu'\nimport UserContext from '../../helpers/contexts/user/userContext';\nimport useRipple from \"useripple\"\n\nimport { faEllipsisV } from '@fortawesome/free-solid-svg-icons'\n\nimport './playlistAdd.css'\n\nfunction PlaylistAddButton(props) {\n\n    const { user } = useContext(UserContext);\n\n    const [addRipple, ripples] = useRipple({ background: \"black\" })\n\n    const [isOpen, setIsOpen] = useState(false)\n\n    const handlePlaylistClose = () => {\n        setIsOpen(false)\n    }\n\n    const allClass = \"\"\n    const previewClass = \"col-sm-2 col-2 p-0\"\n\n    return (\n\n        user.auth ?\n            <Dropdown show={isOpen}\n                onToggle={(isOpen, event, metadata) => {\n                    setIsOpen(isOpen)\n                }} className={props.isPreview ? previewClass : allClass} >\n                <Dropdown.Toggle variant=\"link\" bsPrefix=\"p-0\"\n                    className=\"m-button playlist-add-button-ripple\"\n                    style={{ color: \"black\" }}>\n                    <div style={{ display: 'inline-block', width: '100%', height: '100%' }}>\n                        <Col\n                            onClick={addRipple}\n                            style={{ verticalAlign: 'top', borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\" }}\n                            className=\"playlist-add-icon-holder p-0 playlist-add-button-ripple\">\n                            <FontAwesomeIcon style={{ opacity: (isOpen ? 1 : \"\") }}\n                                className=\"playlist-add-icon\" icon={faEllipsisV} />\n                            {ripples}\n                        </Col>\n                    </div>\n                </Dropdown.Toggle>\n                {isOpen && <PlaylistDropdownMenu\n                    isPreview={props.isPreview}\n                    filmDispatch={props.filmDispatch}\n                    isOpen={isOpen}\n                    filmID={props.filmID}\n                    handlePlaylistClose={handlePlaylistClose} />}\n            </Dropdown>\n            :\n            null\n\n    )\n}\n\nexport default PlaylistAddButton\n","import { pageMaxFetchCount } from \"../../config\"\n\nexport const searchInitialState = {\n    films: [],\n    isLoading: false,\n    isAllFetched: false,\n    isInitialLoaded: false,\n    error: null,\n    search: '',\n    filter: '',\n    sort: '',\n    dir: 1,\n    sorts: [\n        { id: 'upload_date', title: 'Upload date', dir: 1 },\n        { id: 'view_count', title: 'View count', dir: 1 },\n        { id: 'rating', title: 'Rating', dir: 1 },\n    ]\n\n}\n\nexport const searchReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'initial-success': {\n            return {\n                ...state,\n                isLoading: false,\n                isInitialLoaded: true,\n                error: null,\n                isAllFetched: action.payload.films.length < pageMaxFetchCount,\n                films: action.payload.films,\n                search: action.payload.params.search,\n                sort: action.payload.params.sort,\n                filter: action.payload.params.filter,\n                dir: action.payload.params.dir,\n\n            }\n        }\n        case 'load': {\n            return !state.isLoading && !state.isAllFetched && state.isInitialLoaded && !state.error ? {\n                ...state,\n                isLoading: true,\n            } : state\n        }\n        case 'load-success': {\n            return {\n                ...state,\n                isLoading: false,\n                error: null,\n                isAllFetched: action.payload.length < pageMaxFetchCount,\n                films: [...state.films, ...action.payload],\n            }\n        }\n        case 'sorts-change': {\n            return {\n                ...state,\n                sort: action.resetSort ? '' : state.sort,\n                sorts: state.sorts.map(sort => {\n                    if (sort.id === action.payload.id) return action.payload\n                    else return sort\n                })\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isLoading: false,\n                error: true,\n            }\n        }\n        default: return state\n    }\n}\n","import React, { useEffect, useReducer, useState, useCallback } from 'react';\nimport { useLocation, useHistory } from 'react-router-dom'\nimport { Col, Collapse, Row, Spinner } from 'react-bootstrap';\n\nimport \"./search.css\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Button from '@material-ui/core/Button';\n\nimport queryString from 'query-string';\n\nimport TextTruncate from \"react-text-truncate\";\nimport Truncate from \"react-truncate\";\n\nimport PlaylistAddButtonComponent from '../add/playlistAddButton';\n\n\nimport { parseSearchDate, checkIfPlaylistButtonClick } from '../../helpers'\nimport * as filmApi from '../../services/filmService'\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\n\nimport BlurredImageComponent from '../blurredImage'\n\nimport { searchReducer, searchInitialState } from './reducer'\nimport { pageMaxFetchCount } from '../../config';\nimport { faFilter } from '@fortawesome/free-solid-svg-icons'\n\nlet filters = [\n    { id: 'last_hour', title: 'Last hour' },\n    { id: 'today', title: 'Today' },\n    { id: 'this_week', title: 'This week' },\n    { id: 'this_month', title: 'This month' },\n    { id: 'this_year', title: 'This year' },\n];\n\nconst Search = (props) => {\n\n    const history = useHistory();\n    const location = useLocation();\n\n    const [state, dispatch] = useReducer(searchReducer, searchInitialState)\n\n    const { films, isLoading, isAllFetched, search, sort, filter, dir, sorts, error, isInitialLoaded } = state\n\n    const [isOpen, setIsOpen] = useState(false)\n\n    const handleSearchOnBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && !error && isInitialLoaded) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [error, isAllFetched, isInitialLoaded, isLoading])\n\n    useBottomScrollListener(handleSearchOnBottom)\n\n    useEffect(() => {\n\n        let searchParams = queryString.parse(location.search);\n\n        const params = {\n            search: searchParams.title,\n            sort: searchParams.sort ?? '',\n            filter: searchParams.filter ?? '',\n            dir: searchParams.dir ?? 1\n        }\n\n        function getSearchedFilms() {\n            dispatch({\n                type: 'initial-success',\n                payload: { films: location.state.films, params: params }\n            })\n        }\n\n        async function getFilms() {\n            await filmApi.search({ ...params, limit: pageMaxFetchCount })\n                .then(res => {\n                    dispatch({\n                        type: 'initial-success',\n                        payload: { films: res.data, params: params }\n                    })\n                })\n                .catch(err => {\n                    dispatch({\n                        type: 'error'\n                    })\n                    console.error(err)\n                })\n        }\n\n        if (location.state && location.state.films) getSearchedFilms()\n        else getFilms()\n\n    }, [location])\n\n    useEffect(() => {\n        async function getFilms() {\n            await filmApi.search({\n                search: search,\n                sort: sort,\n                filter: filter,\n                dir: dir,\n                skip: films.length,\n                limit: pageMaxFetchCount\n            })\n                .then(res => {\n                    dispatch({\n                        type: 'load-success',\n                        payload: res.data\n                    })\n                })\n                .catch(err => {\n                    dispatch({\n                        type: 'error'\n                    })\n                    console.error(err)\n                })\n        }\n\n        if (isLoading) getFilms()\n\n    }, [dir, films.length, filter, isLoading, search, sort])\n\n    const setRedirect = (e, filmID) => {\n        history.push(`${process.env.REACT_APP_PATH_NAME}film/` + filmID);\n    };\n\n\n    const handleOnclick = (state, type) => {\n\n        let filterClick = filter;\n        let sortClick = sort;\n        let dirClick = dir;\n\n\n        if (state === 'filter') {\n            if (filterClick === type.id) {\n                filterClick = '';\n            } else {\n                filterClick = type.id;\n            }\n        } else {\n            let tmpType = type;\n\n            if (sortClick === type.id) {\n                sortClick = type.id;\n\n\n                if (tmpType.dir === 1) {\n                    tmpType.dir = -1;\n                    dirClick = type.dir;\n                } else if (tmpType.dir === -1) {\n                    tmpType.dir = 1;\n                    sortClick = '';\n                }\n\n                dispatch({\n                    type: 'sorts-change',\n                    payload: tmpType,\n                    resetSort: sortClick === ''\n                })\n\n                dirClick = type.dir\n\n            } else {\n                sortClick = type.id;\n                dirClick = type.dir;\n            }\n\n        }\n\n\n        if (sortClick !== '' && filterClick !== '') {\n            history.push({\n                search: `?title=${search}&sort=${sortClick}&dir=${dirClick}&filter=${filterClick}`,\n            });\n\n        } else if (sortClick === '' && filterClick !== '') {\n            history.push({\n                search: `?title=${search}&filter=${filterClick}`,\n            });\n        } else if (sortClick !== '' && filterClick === '') {\n            history.push({\n                search: `?title=${search}&sort=${sortClick}&dir=${dirClick}`,\n            });\n        } else if (sortClick === '' && filterClick === '') {\n            history.push({\n                search: `?title=${search}`,\n            });\n        }\n\n    };\n\n    return (\n        <>\n            <Button\n                onClick={() => setIsOpen(!isOpen)}\n                aria-controls=\"filter-collapse\"\n                aria-expanded={isOpen}\n                className=\"mt-3 mx-3 p-2 m-button\">\n                <FontAwesomeIcon style={{ cursor: \"pointer\" }} icon={faFilter} />\n            </Button>\n\n            <Collapse in={isOpen}>\n                <Row id=\"filter-collapse\" className=\"mx-2\">\n                    <Col className=\"mt-4\" sm={4}>\n                        <p style={{ 'fontWeight': 500 }}>UPLOAD DATE</p>\n\n                        <Col sm={8} className=\"mt-3 mb-3 divider\" />\n\n\n                        {\n                            filters.map((filterTmp) => {\n                                return (<p key={filterTmp.id} style={filter === filterTmp.id ?\n                                    { fontWeight: 700, fontSize: 80 + '%' } :\n                                    { fontWeight: 400, fontSize: 80 + '%' }}\n                                    onClick={() => handleOnclick('filter', filterTmp)}\n                                    className=\"search-filter\">{filterTmp.title}</p>)\n                            })\n                        }\n\n                    </Col>\n\n                    <Col className=\"mt-4\" sm={4}>\n                        <p style={{ 'fontWeight': 500 }}>SORT BY</p>\n\n                        <Col sm={8} className=\"mt-3 mb-3 divider\" />\n\n                        {\n                            sorts.map((sortTmp) => {\n                                return (<Col key={sortTmp.id} className=\"d-flex\">\n                                    <p style={sort === sortTmp.id ?\n                                        { fontWeight: 700, fontSize: 80 + '%' } :\n                                        { fontWeight: 400, fontSize: 80 + '%' }}\n                                        onClick={() => handleOnclick('sort', sortTmp)}\n                                        className=\"search-filter\">{sortTmp.title}\n                                    </p>\n                                    {sort === sortTmp.id && sortTmp.dir === 1 ?\n                                        <FontAwesomeIcon className=\"ms-2\" icon=\"sort-up\" /> :\n                                        sort === sortTmp.id && sortTmp.dir === -1 ?\n                                            <FontAwesomeIcon className=\"ms-2\" icon=\"sort-down\" /> : \"\"}\n                                </Col>)\n                            })\n                        }\n\n                    </Col>\n\n                </Row>\n            </Collapse>\n\n            <Col sm={12} className=\"mt-2 mb-3 divider\" />\n\n            <Row className=\"mx-2 mt-4\">\n                {\n                    films.map((film, index) => {\n                        const time = parseSearchDate(film);\n\n                        return <Col xs={12} sm={12} lg={8}\n                            key={film.id}>\n                            <Col className=\"play-outer-container m-0 mb-1\"\n                                onClick={(e) => {\n                                    const isPlaylistButton = checkIfPlaylistButtonClick(e.target)\n                                    if (!isPlaylistButton) setRedirect(e, film.id)\n\n\n                                }} >\n                                <Row className=\"search-style mb-4 m-0\">\n                                    <Col xs={8} sm={4} className=\"p-0\">\n                                        <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\n                                            <BlurredImageComponent\n                                                image={`${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=small_webp`} />\n                                            <FontAwesomeIcon className=\"play-middle\" icon=\"play\" />\n                                        </div>\n                                    </Col>\n                                    <Col xs={4} sm={8}>\n                                        <Row className=\"m-0\">\n                                            <Col className=\"p-0 mb-1\"\n                                                style={{\n                                                    flex: '0 0 auto !important',\n                                                    width: 'calc(83.33333333% - 24px) !important'\n                                                }}>\n                                                <Truncate lines={1}\n                                                    className=\"mb-0 search-title fw-bold\">\n                                                    {film.title}\n                                                </Truncate>\n                                            </Col>\n                                            <Col className=\"d-flex justify-content-end\">\n                                                <PlaylistAddButtonComponent\n                                                    index={index}\n                                                    filmID={film.id} />\n                                            </Col>\n                                        </Row>\n                                        <p className=\"d-none d-sm-inline mb-1 author-nick-search\">\n                                            <small>{film.author_name} &#183; {film.views} views &#183; {time}</small>\n                                        </p>\n\n                                        <p className=\"d-inline d-sm-none mb-0 author-nick-color\">\n                                            <small>{film.author_name} &#183; {film.views} views</small>\n                                        </p>\n\n                                        <small className=\"d-none d-sm-inline\">\n                                            <TextTruncate className=\"mb-0 author-nick-search\"\n                                                line={2} text={film.description} />\n                                        </small>\n\n                                    </Col>\n                                </Row>\n                            </Col>\n                        </Col>\n                    })\n                }\n\n            </Row>\n\n            {\n                !isAllFetched && <div className={!isInitialLoaded ? \"suspense-loader\" : \"fetch-loader d-flex justify-content-center\"}>\n                    {\n                        (isLoading || !isInitialLoaded) &&\n                        <Spinner className={!isInitialLoaded ? \"suspense-loader-spinner\" : \"\"} animation=\"border\" />\n                    }\n                </div>\n            }\n        </>\n\n    )\n}\n\nexport default Search\n"],"sourceRoot":""}