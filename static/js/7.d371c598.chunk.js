(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[7],{610:function(e,a,t){"use strict";t.r(a);var n=t(23),s=t.n(n),r=t(35),c=t(12),i=t(0),o=t(25),l=t(508),d=t(509),p=t(295),u=t(505),j=t(507),b=t(45),m=t(105),h=t(69),f=t(107),O=t(1);a.default=function(e){var a=Object(i.useContext)(h.a).login,t=Object(o.g)(),n=Object(o.h)(),x=Object(i.useReducer)(f.b,f.a),g=Object(c.a)(x,2),v=g[0],y=g[1],k=v.email,w=v.password,C=v.isSubmitted,N=v.isSending,F=v.isError,B=v.error,E=Object(i.useState)(!0),L=Object(c.a)(E,2),S=L[0],T=L[1];Object(i.useEffect)((function(){function e(){return(e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.b({email:k,password:w}).then((function(e){a(e.data.user.name,e.data.user.id,e.data.token,e.data.refreshToken);var s=n.pathname.slice(0,-6);""===s&&(s="/filmapp-react-frontend/"),t.replace({pathname:s,search:n.search,state:n.state})})).catch((function(e){var a=null;e.response&&e.response.data&&e.response.data.errors&&(a=e.response.data.errors),y({type:"error",payload:a}),console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}N&&function(){e.apply(this,arguments)}()}),[N,k,w,t,n,a]);var G=function(){T(!1),n.state?t.push("/filmapp-react-frontend/"):t.goBack()};return Object(O.jsxs)(l.a,{onHide:G,show:S,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(O.jsx)(l.a.Header,{closeButton:!0,children:Object(O.jsx)(l.a.Title,{id:"contained-modal-title-vcenter",children:"Login"})}),Object(O.jsxs)(l.a.Body,{children:[Object(O.jsxs)(d.a,{onSubmit:N?null:function(e){e.preventDefault(),y({type:"submit"}),k&&w&&y({type:"send"})},children:[Object(O.jsxs)(d.a.Group,{children:[Object(O.jsx)(d.a.Label,{htmlFor:"email",children:"Email"}),Object(O.jsx)(d.a.Control,{isInvalid:C&&!k,type:"email",name:"email",value:k,onChange:function(e){return y({type:"field",fieldName:"email",payload:e.target.value})}}),Object(O.jsx)(d.a.Control.Feedback,{type:"invalid",children:"Email is required"})]}),Object(O.jsxs)(d.a.Group,{className:"mt-2",children:[Object(O.jsx)(d.a.Label,{htmlFor:"password",children:"Password"}),Object(O.jsx)(d.a.Control,{isInvalid:C&&!w,type:"password",name:"password",value:w,onChange:function(e){return y({type:"field",fieldName:"password",payload:e.target.value})}}),Object(O.jsx)(d.a.Control.Feedback,{type:"invalid",children:"Password is required"})]}),Object(O.jsxs)(d.a.Group,{className:"d-flex align-items-center mt-2",children:[Object(O.jsx)(p.a,{disabled:N,type:"submit",className:"btn-primary",children:"Login"}),N&&Object(O.jsx)(u.a,{className:"ms-2",animation:"grow"})]})]}),F&&Object(O.jsx)(j.a,{variant:"danger",className:"mt-2 mb-0",children:B||"Error while logging in."}),Object(O.jsx)(p.a,{variant:"link",onClick:function(){t.goBack(),setTimeout((function(){t.push("".concat(n.pathname.slice(0,-5),"register").concat(n.search))}),500)},className:"p-0 mt-2 btn btn-link",children:"Register"}),Object(O.jsx)(b.a,{className:"p-0 m-0 ",xs:12,sm:12,children:Object(O.jsx)(p.a,{variant:"link",onClick:function(){t.goBack(),setTimeout((function(){t.push("".concat(n.pathname.slice(0,-5),"forgot").concat(n.search))}),500)},className:"p-0 mt-2 btn btn-link",children:"Forgot password?"})})]}),Object(O.jsx)(l.a.Footer,{children:Object(O.jsx)(p.a,{onClick:G,children:"Close"})})]})}}}]);
//# sourceMappingURL=7.d371c598.chunk.js.map