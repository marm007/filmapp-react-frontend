{"version":3,"sources":["components/dialogs/update-playlist.js","pages/update-playlist.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","helpers/index.js","components/input.js","services/playlistService.js","reducers/update-reducer.js"],"names":["UpdatePlaylist","setToUpdate","useContext","UpdateContext","history","useHistory","id","useParams","useReducer","updateReducer","updateInitialState","update","title","initial","isInitialLoaded","isSumbitted","isSending","isError","error","isSuccess","dispatch","useEffect","getInitialPlaylist","a","index","then","res","type","payload","data","catch","err","location","state","onSubmit","event","preventDefault","partialUpdate","setTimeout","handleCloseModalWindow","className","htmlFor","name","value","isInvalid","onChange","e","fieldName","target","disabled","onClose","module","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","done","Promise","_asyncToGenerator","fn","self","this","args","arguments","apply","undefined","displayCommentDate","comment","date","Date","parse","createdAt","getDate","slice","getMonth","getFullYear","getHours","getMinutes","parseSearchDate","film","today","time","Math","abs","floor","UTC","toSplit","replace","pathname","split","historyObject","process","search","push","Input","placeholder","InputTag","inputRef","useRef","current","classList","add","remove","ref","create","body","axios","post","headers","authHeader","get","show","params","patch","delete","action"],"mappings":"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","file":"static/js/12.cc619e0e.chunk.js","sourcesContent":["import React, { useContext, useEffect, useReducer } from 'react'\nimport { useHistory, useParams } from 'react-router-dom'\nimport Input from '../input'\nimport { updateInitialState, updateReducer } from \"../../reducers/update-reducer\";\n\nimport { index, partialUpdate } from '../../services/playlistService'\nimport { handleCloseModalWindow } from '../../helpers'\nimport UpdateContext from '../../contexts/updateModal/updateContext'\n\nconst UpdatePlaylist = () => {\n\n    const { setToUpdate } = useContext(UpdateContext)\n\n    let history = useHistory()\n    let { id } = useParams();\n\n    const [{\n        update,\n        initial,\n        isInitialLoaded,\n        isSumbitted,\n        isSending,\n        isError,\n        error,\n        isSuccess }, dispatch] = useReducer(updateReducer,\n            { ...updateInitialState, update: { title: '' }, initial: { title: '' } })\n\n\n    useEffect(() => {\n        const getInitialPlaylist = async () => {\n\n            await index(id)\n                .then(res => {\n                    dispatch({\n                        type: 'initial-success',\n                        payload: { title: res.data.title }\n                    })\n                })\n                .catch(err => {\n                    dispatch({ type: 'error' })\n                })\n        }\n\n        if (history.location.state && history.location.state.title) {\n            dispatch({\n                type: 'initial-success',\n                payload: { title: history.location.state.title }\n            })\n        } else {\n            getInitialPlaylist()\n        }\n\n    }, [id, history])\n\n\n    const handleSumbit = (event) => {\n        event.preventDefault()\n        dispatch({ type: 'submit' })\n\n        if (update.title) {\n            dispatch({ type: 'send' })\n\n            return partialUpdate(id, { title: update.title })\n                .then(res => {\n                    dispatch({ type: 'success' })\n\n                    setToUpdate(true, res.data)\n\n                    setTimeout(() => handleCloseModalWindow(history, '/update-playlist'), 500)\n                })\n                .catch(err => {\n                    dispatch({ type: 'error' })\n                })\n        }\n    }\n\n    return (\n        <>\n            <form onSubmit={isSending ? null : handleSumbit}>\n                <div className=\"form-group\">\n                    <label htmlFor=\"title\">Title</label>\n                    <Input type=\"text\" name=\"title\" value={update.title}\n                        isInvalid={isSumbitted && !update.title}\n                        onChange={e => dispatch({ type: 'update', fieldName: 'title', payload: e.target.value })}\n                    />\n                    <div className=\"invalid-feedback\">\n                        Title cannot be empty\n                    </div>\n                </div>\n                <div className=\"form-group\">\n                    <button className=\"btn btn-primary\"\n                        disabled={!isInitialLoaded ||\n                            (isInitialLoaded && update.title === initial.title)}\n                        type=\"submit\">Save</button>\n                    {\n                        isSending &&\n                        <div className=\"ml-2 spinner-grow\" />\n                    }\n                </div>\n            </form>\n            {\n                isError && <div className=\"alert alert-danger mt-2 mb-0\">\n                    {error ? error : 'Something went wrong'}\n                </div>\n            }\n\n            {\n                isSuccess && <div className=\"alert alert-success mt-2 mb-0\">\n                    Changes saved successfully!\n                </div>\n            }\n        </>\n    )\n}\n\nexport default UpdatePlaylist","import { useHistory } from 'react-router-dom'\nimport Modal from '../components/modal'\nimport UpdatePlaylistComponent from '../components/dialogs/update-playlist'\n\nimport { handleCloseModalWindow } from '../helpers'\n\nexport default function UpdatePlaylist() {\n\n    let history = useHistory()\n\n    const modalClose = () => {\n        handleCloseModalWindow(history, '/update-playlist')\n    }\n\n    return (\n        <Modal id=\"updatatePlaylistModal\" title=\"Update\" onClose={modalClose}>\n            <UpdatePlaylistComponent />\n        </Modal>\n    )\n}","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export const displayCommentDate = (comment) => {\n    let date = new Date(Date.parse(comment.createdAt));\n    let time = (('0' + date.getDate()).slice(-2) + '-' + ('0' + (date.getMonth() + 1)).slice(-2) + '-'\n        + ('0' + date.getFullYear()).slice(-2)\n        + ' o ' + ('0' + date.getHours()).slice(-2) + ':' + ('0' + date.getMinutes()).slice(-2))\n    return time;\n};\n\nexport const parseSearchDate = (film) => {\n\n    let date = new Date(Date.parse(film.createdAt));\n    let today = new Date();\n\n\n    let time = Math.abs(Math.floor((\n        Date.UTC(\n            date.getFullYear(),\n            date.getMonth(),\n            date.getDate(),\n            date.getHours(),\n            date.getMinutes()) -\n        Date.UTC(\n            today.getFullYear(),\n            today.getMonth(),\n            today.getDate(),\n            today.getHours(),\n            today.getMinutes()))\n        / (1000 * 60)));\n\n    if (time / 60 >= 1) {\n        time /= 60;\n\n        if (time / 24 >= 1) {\n\n            time /= 24;\n\n            if (time / 30 >= 1) {\n\n                time /= 30;\n\n                if (time / 12 >= 1) {\n\n                    time = time / 12;\n                    time = Math.floor(time) + ' years ';\n\n                } else {\n                    time = Math.floor(time) + ' months ';\n                }\n\n            } else {\n                time = Math.floor(time) + ' days ';\n            }\n\n        } else {\n            time = Math.floor(time) + ' hours ';\n        }\n    } else {\n        time = Math.floor(time) + ' minutes ';\n    }\n\n    time = time + 'ago';\n\n    return time;\n};\n\nexport const handleCloseModalWindow = (history, toSplit, replace = false) => {\n\n    let pathname = history.location.pathname.split(toSplit)[0]\n\n    const historyObject = {\n        pathname: pathname === '' ? process.env.REACT_APP_PATH_NAME : pathname,\n        search: history.location.search,\n        state: history.location.state\n    }\n\n    if (replace) {\n        history.replace(historyObject)\n    }\n    else {\n        history.push(historyObject)\n    }\n\n}","import { useEffect, useRef } from \"react\"\n\nconst Input = ({ isInvalid, onChange, type, name, value, placeholder = '' }) => {\n\n    const InputTag = type === 'textarea' ? 'textarea' : 'input'\n\n    const inputRef = useRef(null)\n\n    useEffect(() => {\n        let ref = inputRef.current\n        if (ref) {\n            if (isInvalid) inputRef.current.classList.add('is-invalid')\n            else inputRef.current.classList.remove('is-invalid')\n        }\n    }, [isInvalid])\n\n    return (\n        <InputTag ref={inputRef} className=\"form-control\"\n            placeholder={placeholder}\n            type={type} name={name}\n            value={value} onChange={onChange} />\n    )\n}\n\nexport default Input","import axios from '../helpers/axios'\nimport authHeader from '../helpers/auth-header'\n\n\nexport const create = (body) => axios.post('playlists', body, { headers: authHeader() })\nexport const index = (id) => axios.get(`playlists/${id}`, { headers: authHeader() })\nexport const show = (params) => axios.get(`playlists`, { params, headers: authHeader() })\nexport const partialUpdate = (id, body) => axios.patch(`playlists/${id}`, body, { headers: authHeader() })\n\n\nexport const remove = (id) => axios.delete(`playlists/${id}`, { headers: authHeader() })\n\n","export const updateInitialState = {\n    update: {},\n    initial: {},\n    isInitialLoaded: false,\n    isSumbitted: false,\n    isSending: false,\n    isSuccess: false,\n    isError: false,\n    error: '',\n}\n\nexport const updateReducer = (state, action) => {\n    switch (action.type) {\n        case 'update': {\n            return {\n                ...state,\n                error: '',\n                isError: false,\n                update: { ...state.update, [action.fieldName]: action.payload }\n            }\n        }\n        case 'initial-success': {\n            return {\n                ...state,\n                isInitialLoaded: true,\n                update: action.payload,\n                initial: action.payload\n            }\n        }\n        case 'submit': {\n            return {\n                ...state,\n                isSumbitted: true,\n                isError: false,\n                error: ''\n            }\n        }\n        case 'send': {\n            return {\n                ...state,\n                isSending: true\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                isSuccess: true,\n                isSending: false,\n                isSumbitted: false,\n                isError: false,\n                error: ''\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isSuccess: false,\n                isSending: false,\n                isSumbitted: false,\n                isError: true,\n                error: action.payload ? action.payload : ''\n            }\n        }\n        default: {\n            return state\n        }\n    }\n}"],"sourceRoot":""}