(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[8],{370:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"e",(function(){return n})),a.d(t,"d",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return r}));var c=10,n=12,i=10,s=40,r=20},372:function(e,t,a){"use strict";var c=a(9),n=a(358),i=a(376),s=a.n(i),r=a(1);t.a=function(e){var t=e.onClick,a=e.children,i=e.className,l=s()({background:"black"}),o=Object(c.a)(l,2),d=o[0],u=o[1];return Object(r.jsxs)(n.a,{variant:"link",onClick:function(e){t(e)},onMouseDown:d,className:"button-ripple ".concat(i),children:[a,u]})}},373:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return o}));var c=a(19),n=a(49),i=function(e){return c.a.post("playlists",e,{headers:Object(n.a)()})},s=function(e){return c.a.get("playlists/".concat(e),{headers:Object(n.a)()})},r=function(e){return c.a.get("playlists",{params:e,headers:Object(n.a)()})},l=function(e,t){return c.a.patch("playlists/".concat(e),t,{headers:Object(n.a)()})},o=function(e){return c.a.delete("playlists/".concat(e),{headers:Object(n.a)()})}},374:function(e,t,a){"use strict";var c=a(21),n=a.n(c),i=a(35),s=a(9),r=a(145),l=a(143),o=a(0),d=a(373),u=a(372),p=a(1);t.a=function(e){var t=e.isPublic,a=e.id,c=e.isProfile,j=e.dispatchPrivacyUpdate,b=e.filmDispatch,f=Object(o.useState)(!1),m=Object(s.a)(f,2),h=m[0],O=m[1];Object(o.useEffect)((function(){function e(){return(e=Object(i.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.c(a,{is_public:!t}).then((function(e){O(!1),j({type:"change-playlist-privacy-success",payload:e.data}),void 0!==b&&b({type:"field",fieldName:"reloadPlaylist",payload:!0})})).catch((function(e){console.error(e),O(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}h&&function(){e.apply(this,arguments)}()}),[j,h,t,a,b]);var y=Object(p.jsx)(u.a,{className:"button-ripple-24 p-0",onClick:function(e){e.stopPropagation(),h||O(!0)},children:Object(p.jsx)(l.a,{icon:t?"globe-europe":"lock"})});return c?Object(p.jsx)(r.a,{className:"text-center justify-content-center d-flex align-items-center p-0 flex-grow-0",children:Object(p.jsx)(r.a,{className:"remove-holder p-0 m-0 flex-grow-0",style:{height:"24px",width:"24"},children:y})}):y}},375:function(e,t,a){"use strict";var c=a(9),n=a(0),i=a(392),s=a(1);t.a=function(e){var t=Object(n.useState)("data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="),a=Object(c.a)(t,2),r=a[0],l=a[1];return Object(n.useEffect)((function(){l(e.image)}),[e.image]),Object(s.jsx)(i.a,{aspectRatio:"16x9",className:"overflow-hidden",children:Object(s.jsx)("img",{alt:"",className:"embed-responsive-item play-image",src:r})})}},379:function(e,t,a){"use strict";var c=a(143),n=a(372),i=a(1);t.a=function(e){var t=e.handleRemove;return Object(i.jsx)(n.a,{className:"button-ripple-24 remove-holder p-0",onClick:t,children:Object(i.jsx)(c.a,{icon:"trash-alt"})})}},380:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i}));var c=function(e){return!!("path"===e.tagName&&e.parentNode.className.animVal&&e.parentNode.className.animVal.includes("playlist-add-icon")||"svg"===e.tagName&&e.className.animVal&&e.className.animVal.includes("playlist-add-icon")||e.className&&"string"===typeof e.className&&e.className.includes("playlist-add-icon-holder"))},n=function(e){var t=new Date(Date.parse(e.createdAt));return("0"+t.getDate()).slice(-2)+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getFullYear()).slice(-2)+" o "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)},i=function(e){var t=new Date(Date.parse(e.createdAt)),a=new Date,c=Math.abs(Math.floor((Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())-Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes()))/6e4));return c/60>=1?(c/=60)/24>=1?(c/=24)/30>=1?(c/=30)/12>=1?(c/=12,c=Math.floor(c)+" years "):c=Math.floor(c)+" months ":c=Math.floor(c)+" days ":c=Math.floor(c)+" hours ":c=Math.floor(c)+" minutes ",c+="ago"}},382:function(e,t,a){},384:function(e,t,a){"use strict";var c=a(9),n=a(0),i=a(473),s=a(145),r=a(143),l=a(2),o=a(21),d=a.n(o),u=a(35),p=a(361),j=a(365),b=a(79),f=a(362),m=a(207),h=a(358),O=a(117),y=a(373),x=a(92),g=a(144),v=a(80),N=a(15),w=a(370),A={playlists:[],isLoading:!0,isAllFetched:!1,isCreating:!1,isAdding:!1,playlistToUpgrade:null,title:"",isPublic:!1,error:""};function k(e,t){switch(t.type){case"field":return Object(l.a)(Object(l.a)({},e),{},Object(N.a)({error:""},t.fieldName,t.payload));case"load":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0,isAllFetched:!1});case"load-success":return Object(l.a)(Object(l.a)({},e),{},{playlists:[].concat(Object(v.a)(e.playlists),Object(v.a)(t.payload)),isLoading:!1,isAllFetched:t.payload.length<w.d,error:""});case"create":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isCreating:!0});case"create-success":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isCreating:!1});case"add":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isAdding:!0,playlistToUpgrade:t.payload});case"add-update-playlist":return Object(l.a)(Object(l.a)({},e),{},{playlists:e.playlists.map((function(t){return t.id===e.playlistToUpgrade.id?Object(l.a)(Object(l.a)({},t),{},{contains:!t.contains}):t})),playlistToUpgrade:null});case"add-success":return Object(l.a)(Object(l.a)({},e),{},{isAdding:!1});case"change-playlist-privacy-success":return Object(l.a)(Object(l.a)({},e),{},{playlists:e.playlists.map((function(e){return e.id===t.payload.id?Object(l.a)(Object(l.a)({},e),{},{is_public:t.payload.is_public}):e}))});case"error":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isAllFetched:!1,isCreating:!1,error:t.payload,title:""});default:return e}}var C=a(374),P=a(372),D=a(1);var L=function(e){var t=e.filmID,a=e.handlePlaylistClose,o=e.isPreview,v=e.filmDispatch,N=Object(n.useContext)(x.a).createToast,L=Object(n.useReducer)(k,A),_=Object(c.a)(L,2),F=_[0],M=_[1],E=F.playlists,T=F.title,I=F.isPublic,R=F.isLoading,U=F.isAllFetched,S=F.isCreating,H=F.isAdding,V=F.playlistToUpgrade,Y=F.error,B=Object(n.useCallback)((function(){R||U||S||H||M({type:"load"})}),[R,U,S,H]),q=Object(g.a)(B);return Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a({playlists:!0,skip:E.length,limit:w.d}).then((function(e){var a=e.data.playlists;a.forEach((function(e){e.contains=e.films.indexOf(t)>-1})),M({type:"load-success",payload:a})})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}R&&function(){e.apply(this,arguments)}()}),[t,E,R]),Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={title:T,is_public:I,films_id:[t]},e.next=3,y.a(c).then((function(e){M({type:"create-success"}),N("Created playlist ".concat(T)),a()})).catch((function(e){console.error(e);var t=null;e.response&&e.response.data&&e.response.data.error?t=e.response.data.error:e.response&&e.response.data&&e.response.data.errors&&(t=e.response.data.errors[0]),M({type:"error",payload:"Path `title` is required."===t?"Playlist title is required":t})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}S&&function(){e.apply(this,arguments)}()}),[S,T,I,N,a,t]),Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={films_id:[t]},a=V.contains?Object(l.a)(Object(l.a)({},a),{},{is_remove_films:!0}):Object(l.a)(Object(l.a)({},a),{},{is_remove_films:!1}),c=V.contains?"Deleted from playlist ".concat(V.title):"Added to playlist ".concat(V.title),M({type:"add-update-playlist",playlist:V}),e.next=6,y.c(V.id,a).then((function(e){M({type:"add-success"}),o&&v({type:"field",fieldName:"reloadPlaylist",payload:!0}),N(c)})).catch((function(e){return console.error(e)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}H&&V&&function(){e.apply(this,arguments)}()}),[H,V,N,v,t,o]),Object(D.jsxs)(i.a.Menu,{onClick:function(e){return e.stopPropagation()},style:{width:"240px",left:"50px !important"},children:[Object(D.jsxs)(p.a,{className:"m-0 m-button button-ripple",children:[Object(D.jsx)(s.a,{className:"playlist-add-exit-text-width",children:"Save to..."}),Object(D.jsx)(P.a,{className:"button-ripple-24 playlist-add-icon-holder p-0 d-flex align-items-center text-center justify-content-center",onClick:function(){return setTimeout(a,150)},children:Object(D.jsx)(r.a,{icon:"times"})})]}),Object(D.jsx)(i.a.Divider,{}),Object(D.jsxs)("div",{ref:q,style:{maxHeight:"100px",overflowY:"scroll",minHeight:"3rem"},children:[E.map((function(e,t){return Object(D.jsxs)(p.a,{className:"m-0 playlist-form-group",children:[Object(D.jsx)(s.a,{xs:10,sm:10,className:"p-0",children:Object(D.jsxs)(j.a.Check,{id:e.id,className:"form-check",children:[Object(D.jsx)(b.a.Input,{type:"checkbox",onChange:function(){return function(e){M({type:"add",payload:e})}(e)},checked:e.contains}),Object(D.jsx)(b.a.Label,{children:Object(D.jsx)("p",{className:"playlist-check-label",children:e.title})})]})}),Object(D.jsx)(C.a,{id:e.id,isPublic:e.is_public,isProfile:!1,filmDispatch:v,dispatchPrivacyUpdate:M})]},e.id)})),!U&&Object(D.jsx)("div",{style:{height:"3rem"},className:"fetch-spinner d-flex justify-content-center align-items-center",children:R&&Object(D.jsx)(f.a,{animation:"border"})})]}),Object(D.jsx)(i.a.Divider,{}),Object(D.jsx)(i.a.ItemText,{children:"Create a new playlist"}),Object(D.jsx)(p.a,{className:"m-0 p-0",children:Object(D.jsxs)(j.a,{children:[Object(D.jsx)(m.a,{isInvalid:""!==Y,onChange:function(e){return M({type:"field",fieldName:"title",payload:e.target.value})},className:"mb-2 mt-2",placeholder:"Enter playlist title..."}),Object(D.jsx)(m.a.Feedback,{type:"invalid",className:"mb-2 mt-2",children:Y}),Object(D.jsxs)(j.a.Select,{"aria-label":"Privacy",className:"mb-2 mt-2",onChange:function(e){return M({type:"field",fieldName:"isPublic",payload:"public"===e.target.value})},children:[Object(D.jsx)("option",{value:"private",children:"Private"}),Object(D.jsx)("option",{value:"public",children:"Public"})]}),Object(D.jsxs)(j.a.Group,{className:"d-flex align-items-center mt-2",children:[Object(D.jsx)(h.a,{disabled:S,onClick:S?null:function(e){e.stopPropagation(),M({type:"create"})},children:"Create"}),S&&Object(D.jsx)(f.a,{className:"ms-2",animation:"grow"})]})]})})]})},_=a(44),F=a(376),M=a.n(F),E=a(52);a(382);t.a=function(e){var t=Object(n.useContext)(_.a).user,a=M()({background:"black"}),l=Object(c.a)(a,2),o=l[0],d=l[1],u=Object(n.useState)(!1),p=Object(c.a)(u,2),j=p[0],b=p[1];return t.auth?Object(D.jsxs)(i.a,{show:j,onToggle:function(e,t,a){b(e)},className:e.isPreview?"col-sm-2 col-2 p-0":"",children:[Object(D.jsx)(i.a.Toggle,{variant:"link",bsPrefix:"p-0",className:"m-button button-ripple",style:{color:"black"},children:Object(D.jsx)("div",{style:{display:"inline-block",width:"100%",height:"100%"},children:Object(D.jsxs)(s.a,{onClick:o,className:"playlist-add-icon-holder p-0 button-ripple button-ripple-24",children:[Object(D.jsx)(r.a,{style:{opacity:j?1:""},className:"playlist-add-icon",icon:E.a}),d]})})}),j&&Object(D.jsx)(L,{isPreview:e.isPreview,filmDispatch:e.filmDispatch,isOpen:j,filmID:e.filmID,handlePlaylistClose:function(){b(!1)}})]}):null}},385:function(e,t,a){},386:function(e,t,a){"use strict";a(0);var c=a(145),n=a(361),i=a(143),s=a(378),r=a.n(s),l=a(375),o=a(384),d=a(380),u=a(379),p=(a(385),a(1));t.a=function(e){var t=e.film,a=e.index,s=e.handleRedirect,j=e.handleRemove,b=e.isProfile,f=e.isRecommendations;return Object(p.jsx)("div",{className:f?"row mx-0 mb-4":"col mb-5 col-12 col-sm-6 col-md-3 col-lg-2",children:Object(p.jsxs)("div",{className:(f?"row p-0 m-0":"col").concat(" play-outer-container remove-container"),onClick:function(e){Object(d.a)(e.target)||s(t.id)},children:[Object(p.jsx)(c.a,{xs:f?6:12,sm:f?6:12,className:"m-0 p-0",children:Object(p.jsxs)("div",{className:"embed-responsive embed-responsive-16by9 z-depth-1-half play-container",children:[Object(p.jsx)(l.a,{image:t.img}),Object(p.jsx)(i.a,{className:"play-middle",icon:"play"})]})}),Object(p.jsxs)(c.a,{xs:f?6:12,sm:f?6:12,className:f?"m-0":"m-0 p-0",children:[Object(p.jsxs)(n.a,{className:"m-0 mt-1",children:[Object(p.jsx)(c.a,{className:"film-preview-playlist-title-width p-0",children:Object(p.jsx)(r.a,{line:1,text:t.title,className:"mb-1 mt-1 title "})}),Object(p.jsx)(c.a,{className:"p-0 d-flex justify-content-end",children:b?Object(p.jsx)(u.a,{handleRemove:j}):Object(p.jsx)(o.a,{index:a,filmID:t.id})})]}),Object(p.jsx)("p",{className:"mb-0 author-nick-color",children:Object(p.jsx)("small",{children:t.author_name})}),Object(p.jsx)("p",{className:"mb-0 film-views",children:Object(p.jsxs)("small",{children:[t.views," views"]})})]})]})})}},481:function(e,t,a){"use strict";a.r(t);var c=a(21),n=a.n(c),i=a(35),s=a(9),r=a(0),l=a(18),o=a(361),d=a(362),u=a(116),p=a(80),j=a(15),b=a(2),f=a(370),m={films:null,isLoading:!1,isAllFetched:!1,isInitialLoaded:!1,error:null},h=function(e,t){switch(t.type){case"field":return Object(b.a)(Object(b.a)({},e),{},Object(j.a)({},t.fieldName,t.payload));case"load":return Object(b.a)(Object(b.a)({},e),{},{isLoading:!0,isAllFetched:!1,error:""});case"initial-load":return Object(b.a)(Object(b.a)({},e),{},{films:Object(p.a)(new Set(Object(p.a)(t.payload))),isLoading:!1,isInitialLoaded:!0,isAllFetched:t.payload.length<f.b});case"success":return Object(b.a)(Object(b.a)({},e),{},{films:Object(p.a)(new Set([].concat(Object(p.a)(e.films),Object(p.a)(t.payload)))),isLoading:!1,isAllFetched:t.payload.length<f.c,error:null});case"error":return Object(b.a)(Object(b.a)({},e),{},{isLoading:!1,isAllFetched:!1,error:t.payload});default:return e}},O=a(144),y=a(386),x=a(1);t.default=function(e){var t=Object(l.g)(),a=Object(r.useReducer)(h,m),c=Object(s.a)(a,2),p=c[0],j=c[1],b=p.films,g=p.isLoading,v=p.isAllFetched,N=p.isInitialLoaded,w=Object(r.useCallback)((function(){g||v||!N||j({type:"load"})}),[g,v,N]);Object(O.a)(w,{triggerOnNoScroll:!0}),Object(r.useEffect)((function(){function e(){return(e=Object(i.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a({limit:f.b}).then((function(e){var t=e.data;t.forEach((function(e){e.img="".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail?width=small_webp")})),j({type:"initial-load",payload:t})}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){function e(){return(e=Object(i.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a({skip:b.length,limit:f.c}).then((function(e){var t=e.data;t.forEach((function(e){e.img="".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail?width=small_webp")})),j({type:"success",payload:t})})).catch((function(e){return console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}g&&N&&b&&function(){e.apply(this,arguments)}()}),[g,N,b]);var A=function(e){t.push({pathname:"".concat("/filmapp-react-frontend/","film/")+e})};return Object(x.jsxs)(o.a,{className:"mt-5 mx-2",children:[b&&b.map((function(e,t){return Object(x.jsx)(y.a,{film:e,index:t,handleRedirect:A},e.id)})),!v&&Object(x.jsx)("div",{className:"fetch-loader d-flex justify-content-center",children:g&&Object(x.jsx)(d.a,{animation:"border"})})]})}}}]);
//# sourceMappingURL=8.60691005.chunk.js.map