(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[12],{617:function(t,e,n){"use strict";n.r(e);var a=n(23),c=n.n(a),i=n(35),s=n(12),l=n(0),r=n(25),o=n(212),u=n(505),p=n(93),f=n(31),d=n(18),b=n(2),h=n(58),m={playlists:null,playlistsCount:0,isLoading:!1,isAllFetched:!1,isInitialLoaded:!1,error:null},j=function(t,e){switch(e.type){case"field":return Object(b.a)(Object(b.a)({},t),{},Object(d.a)({},e.fieldName,e.payload));case"initial-success":return Object(b.a)(Object(b.a)({},t),{},{playlists:Object(f.a)(new Set(Object(f.a)(e.playlists))),isLoading:!1,isInitialLoaded:!0,isAllFetched:e.responseCount<h.b,playlistsCount:t.playlistsCount+e.responseCount});case"load":return Object(b.a)(Object(b.a)({},t),{},{isLoading:!0,isAllFetched:!1,error:null});case"success":return Object(b.a)(Object(b.a)({},t),{},{playlists:Object(f.a)(new Set([].concat(Object(f.a)(t.playlists),Object(f.a)(e.playlists)))),isLoading:!1,isAllFetched:e.responseCount<h.c,playlistsCount:t.playlistsCount+e.responseCount,error:null});case"clear":return m;case"error":return Object(b.a)(Object(b.a)({},t),{},{isLoading:!1,isAllFetched:!1,error:e.payload});default:return t}},O=n(98),y=n(283),g=n(1);e.default=function(t){var e=Object(r.g)(),n=Object(l.useReducer)(j,m),a=Object(s.a)(n,2),f=a[0],d=a[1],b=f.playlists,w=f.isLoading,C=f.isAllFetched,x=f.isInitialLoaded,k=f.playlistsCount,L=Object(l.useCallback)((function(){w||C||!x||d({type:"load"})}),[C,w,x]);Object(O.a)(L,{triggerOnNoScroll:!0}),Object(l.useEffect)((function(){function t(){return(t=Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.e({limit:h.b}).then((function(t){var e=t.data,n=e.filter((function(t){return t.film_id}));n.forEach((function(t){t.img="".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(t.film_id,"/thumbnail?width=small_webp")})),d({type:"initial-success",playlists:n,responseCount:e.length})})).catch((function(t){console.error(t)}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}d({type:"clear"}),function(){t.apply(this,arguments)}()}),[]),Object(l.useEffect)((function(){function t(){return(t=Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.e({skip:k,limit:h.c}).then((function(t){var e=t.data,n=e.filter((function(t){return t.film_id}));n.forEach((function(t){t.img="".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(t.film_id,"/thumbnail?width=small_webp")})),d({type:"success",playlists:n,responseCount:e.length})})).catch((function(t){console.error(t)}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}w&&x&&function(){t.apply(this,arguments)}()}),[w,x,b,k]);var v=function(t,n){e.push({pathname:"".concat("/filmapp-react-frontend/","film/")+n,search:"?list=".concat(t)})};return Object(g.jsxs)(o.a,{className:"mt-5 mx-2",children:[b&&b.map((function(t,e){return Object(g.jsx)(y.a,{playlist:t,index:e,handleRedirect:v},t.id)})),!C&&Object(g.jsx)("div",{style:{height:"32px",width:"100%"},className:"d-flex justify-content-center",children:(w||!x)&&Object(g.jsx)(u.a,{animation:"border"})})]})}}}]);
//# sourceMappingURL=12.17326105.chunk.js.map