(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[9],{482:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return c})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r}));var s=10,i=12,c=10,n=40,r=20},483:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return n})),a.d(t,"e",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return o}));var s=a(23),i=a(57),c=function(e){return s.a.post("playlists",e,{headers:Object(i.a)()})},n=function(e){return s.a.get("playlists/".concat(e),{headers:Object(i.a)()})},r=function(e){return s.a.get("playlists",{params:e,headers:Object(i.a)()})},l=function(e,t){return s.a.patch("playlists/".concat(e),t,{headers:Object(i.a)()})},o=function(e){return s.a.delete("playlists/".concat(e),{headers:Object(i.a)()})}},484:function(e,t,a){"use strict";var s=a(25),i=a.n(s),c=a(41),n=a(16),r=a(270),l=a(480),o=a(190),d=a(0),u=a(483),p=a(1);t.a=function(e){var t=e.isPublic,a=e.id,s=e.isProfile,j=e.dispatchPrivacyUpdate,b=e.filmDispatch,f=Object(d.useState)(!1),h=Object(n.a)(f,2),m=h[0],O=h[1];Object(d.useEffect)((function(){function e(){return(e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.c(a,{is_public:!t}).then((function(e){O(!1),j({type:"change-playlist-privacy-success",payload:e.data}),void 0!==b&&b({type:"field",fieldName:"reloadPlaylist",payload:!0})})).catch((function(e){console.error(e),O(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}m&&function(){e.apply(this,arguments)}()}),[j,m,t,a,b]);var y=Object(p.jsx)(l.a,{style:{marginLeft:"auto",borderRadius:"20px",width:"24px",height:"24px"},className:"m-button",onClick:function(e){e.stopPropagation(),m||O(!0)},children:Object(p.jsx)(o.a,{icon:t?"globe-europe":"lock"})});return s?Object(p.jsx)(r.a,{className:"text-center justify-content-center d-flex align-items-center p-0 flex-grow-0",children:Object(p.jsx)(r.a,{className:"remove-holder p-0 m-0 flex-grow-0",style:{height:"24px",width:"24"},children:y})}):y}},485:function(e,t,a){"use strict";var s=a(16),i=a(0),c=a(503),n=a(1);t.a=function(e){var t=Object(i.useState)("data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="),a=Object(s.a)(t,2),r=a[0],l=a[1];return Object(i.useEffect)((function(){l(e.image)}),[e.image]),Object(n.jsx)(c.a,{aspectRatio:"16x9",children:Object(n.jsx)("img",{alt:"",className:"embed-responsive-item play-image",src:r})})}},491:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return c}));var s=function(e){return!!("path"===e.tagName&&e.parentNode.className.animVal&&e.parentNode.className.animVal.includes("playlist-add-icon")||"svg"===e.tagName&&e.className.animVal&&e.className.animVal.includes("playlist-add-icon")||e.className&&"string"===typeof e.className&&e.className.includes("playlist-add-icon-holder"))},i=function(e){var t=new Date(Date.parse(e.createdAt));return("0"+t.getDate()).slice(-2)+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getFullYear()).slice(-2)+" o "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)},c=function(e){var t=new Date(Date.parse(e.createdAt)),a=new Date,s=Math.abs(Math.floor((Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())-Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes()))/6e4));return s/60>=1?(s/=60)/24>=1?(s/=24)/30>=1?(s/=30)/12>=1?(s/=12,s=Math.floor(s)+" years "):s=Math.floor(s)+" months ":s=Math.floor(s)+" days ":s=Math.floor(s)+" hours ":s=Math.floor(s)+" minutes ",s+="ago"}},493:function(e,t,a){},495:function(e,t,a){"use strict";var s=a(16),i=a(0),c=a(594),n=a(270),r=a(190),l=a(2),o=a(25),d=a.n(o),u=a(41),p=a(471),j=a(476),b=a(102),f=a(472),h=a(271),m=a(460),O=a(158),y=a(483),x=a(117),g=a(191),v=a(155),N=a(17),w=a(482),A={playlists:[],isLoading:!0,isAllFetched:!1,isCreating:!1,isAdding:!1,playlistToUpgrade:null,title:"",isPublic:!1,error:""};function k(e,t){switch(t.type){case"field":return Object(l.a)(Object(l.a)({},e),{},Object(N.a)({error:""},t.fieldName,t.payload));case"load":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0,isAllFetched:!1});case"load-success":return Object(l.a)(Object(l.a)({},e),{},{playlists:[].concat(Object(v.a)(e.playlists),Object(v.a)(t.payload)),isLoading:!1,isAllFetched:t.payload<w.d,error:""});case"create":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isCreating:!0});case"create-success":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isCreating:!1});case"add":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isAdding:!0,playlistToUpgrade:t.payload});case"add-update-playlist":return Object(l.a)(Object(l.a)({},e),{},{playlists:e.playlists.map((function(t){return t.id===e.playlistToUpgrade.id?Object(l.a)(Object(l.a)({},t),{},{contains:!t.contains}):t})),playlistToUpgrade:null});case"add-success":return Object(l.a)(Object(l.a)({},e),{},{isAdding:!1});case"change-playlist-privacy-success":return Object(l.a)(Object(l.a)({},e),{},{playlists:e.playlists.map((function(e){return e.id===t.payload.id?Object(l.a)(Object(l.a)({},e),{},{is_public:t.payload.is_public}):e}))});case"error":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isAllFetched:!1,isCreating:!1,error:t.payload,title:""});default:return e}}var C=a(484),P=a(490),D=a.n(P),L=a(1);var _=function(e){var t=e.filmID,a=e.handlePlaylistClose,o=e.isPreview,v=e.filmDispatch,N=D()({background:"black"}),P=Object(s.a)(N,2),_=P[0],T=P[1],F=Object(i.useContext)(x.a).createToast,M=Object(i.useReducer)(k,A),E=Object(s.a)(M,2),S=E[0],I=E[1],U=S.playlists,R=S.title,H=S.isPublic,W=S.isLoading,z=S.isAllFetched,V=S.isCreating,Y=S.isAdding,B=S.playlistToUpgrade,q=S.error,G=Object(i.useCallback)((function(){W||z||V||Y||I({type:"load"})}),[W,z,V,Y]),J=Object(g.a)(G);return Object(i.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a({playlists:!0,skip:U.length,limit:w.d}).then((function(e){var a=e.data.playlists;a.forEach((function(e){e.contains=e.films.indexOf(t)>-1})),I({type:"load-success",payload:a})})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}W&&function(){e.apply(this,arguments)}()}),[t,U,W]),Object(i.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={title:R,is_public:H,films_id:[t]},e.next=3,y.a(s).then((function(e){I({type:"create-success"}),F("Created playlist ".concat(R)),a()})).catch((function(e){console.error(e);var t=null;e.response&&e.response.data&&e.response.data.error?t=e.response.data.error:e.response&&e.response.data&&e.response.data.errors&&(t=e.response.data.errors[0]),I({type:"error",payload:"Path `title` is required."===t?"Playlist title is required":t})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}V&&function(){e.apply(this,arguments)}()}),[V,R,H,F,a,t]),Object(i.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){var a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={films_id:[t]},a=B.contains?Object(l.a)(Object(l.a)({},a),{},{is_remove_films:!0}):Object(l.a)(Object(l.a)({},a),{},{is_remove_films:!1}),s=B.contains?"Deleted from playlist ".concat(B.title):"Added to playlist ".concat(B.title),I({type:"add-update-playlist",playlist:B}),e.next=6,y.c(B.id,a).then((function(e){I({type:"add-success"}),o&&v({type:"field",fieldName:"reloadPlaylist",payload:!0}),F(s)})).catch((function(e){return console.error(e)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Y&&B&&function(){e.apply(this,arguments)}()}),[Y,B,F,v,t,o]),Object(L.jsxs)(c.a.Menu,{onClick:function(e){return e.stopPropagation()},style:{width:"240px"},children:[Object(L.jsxs)(p.a,{className:"m-0 m-button playlist-add-button-ripple",children:[Object(L.jsx)(n.a,{className:"playlist-add-exit-text-width",children:"Save to..."}),Object(L.jsxs)(n.a,{xs:2,sm:2,onClick:function(e){_(e),setTimeout(a,150)},style:{borderRadius:"20px",width:"24px",height:"24px"},className:"playlist-add-icon-holder p-0 playlist-add-button-ripple d-flex align-items-center text-center justify-content-center",children:[Object(L.jsx)(r.a,{icon:"times"}),T]})]}),Object(L.jsx)(c.a.Divider,{}),Object(L.jsxs)("div",{ref:J,style:{maxHeight:"100px",overflowY:"scroll",minHeight:"3rem"},children:[U.map((function(e,t){return Object(L.jsxs)(p.a,{className:"m-0 playlist-form-group",children:[Object(L.jsx)(n.a,{xs:10,sm:10,className:"p-0",children:Object(L.jsxs)(j.a.Check,{id:e.id,className:"form-check",children:[Object(L.jsx)(b.a.Input,{type:"checkbox",onChange:function(){return function(e){I({type:"add",payload:e})}(e)},checked:e.contains}),Object(L.jsx)(b.a.Label,{children:Object(L.jsx)("p",{className:"playlist-check-label",children:e.title})})]})}),Object(L.jsx)(C.a,{id:e.id,isPublic:e.is_public,isProfile:!1,filmDispatch:v,dispatchPrivacyUpdate:I})]},e.id)})),!z&&Object(L.jsx)("div",{style:{height:"32px"},className:"d-flex justify-content-center",children:W&&Object(L.jsx)(f.a,{animation:"border"})})]}),Object(L.jsx)(c.a.Divider,{}),Object(L.jsx)(c.a.ItemText,{children:"Create a new playlist"}),Object(L.jsx)(p.a,{className:"m-0 p-0",children:Object(L.jsxs)(j.a,{children:[Object(L.jsx)(h.a,{isInvalid:""!==q,onChange:function(e){return I({type:"field",fieldName:"title",payload:e.target.value})},className:"mb-2 mt-2",placeholder:"Enter playlist title..."}),Object(L.jsx)(h.a.Feedback,{type:"invalid",className:"mb-2 mt-2",children:q}),Object(L.jsxs)(j.a.Select,{"aria-label":"Privacy",className:"mb-2 mt-2",onChange:function(e){return I({type:"field",fieldName:"isPublic",payload:"public"===e.target.value})},children:[Object(L.jsx)("option",{value:"private",children:"Private"}),Object(L.jsx)("option",{value:"public",children:"Public"})]}),Object(L.jsxs)(j.a.Group,{className:"d-flex align-items-center mt-2",children:[Object(L.jsx)(m.a,{disabled:V,onClick:V?null:function(e){e.stopPropagation(),I({type:"create"})},children:"Create"}),V&&Object(L.jsx)(f.a,{className:"ms-2",animation:"grow"})]})]})})]})},T=a(51),F=a(60);a(493);t.a=function(e){var t=Object(i.useContext)(T.a).user,a=D()({background:"black"}),l=Object(s.a)(a,2),o=l[0],d=l[1],u=Object(i.useState)(!1),p=Object(s.a)(u,2),j=p[0],b=p[1];return t.auth?Object(L.jsxs)(c.a,{show:j,onToggle:function(e,t,a){b(e)},className:e.isPreview?"col-sm-2 col-2 p-0":"",children:[Object(L.jsx)(c.a.Toggle,{variant:"link",bsPrefix:"p-0",className:"m-button playlist-add-button-ripple",style:{color:"black"},children:Object(L.jsx)("div",{style:{display:"inline-block",width:"100%",height:"100%"},children:Object(L.jsxs)(n.a,{onClick:o,style:{verticalAlign:"top",borderRadius:"20px",width:"24px",height:"24px"},className:"playlist-add-icon-holder p-0 playlist-add-button-ripple",children:[Object(L.jsx)(r.a,{style:{opacity:j?1:""},className:"playlist-add-icon",icon:F.a}),d]})})}),j&&Object(L.jsx)(_,{isPreview:e.isPreview,filmDispatch:e.filmDispatch,isOpen:j,filmID:e.filmID,handlePlaylistClose:function(){b(!1)}})]}):null}},591:function(e,t,a){},613:function(e,t,a){"use strict";a.r(t);var s=a(25),i=a.n(s),c=a(2),n=a(41),r=a(16),l=a(0),o=a(22),d=a(269),u=a(471),p=a(270),j=a(472),b=(a(591),a(190)),f=a(608),h=a(500),m=a.n(h),O=a(487),y=a.n(O),x=a(592),g=a(495),v=a(491),N=a(157),w=a(191),A=a(485),k=a(155),C=a(17),P=a(482),D={films:[],isLoading:!1,isAllFetched:!1,isInitialLoaded:!1,error:null,search:"",filter:"",sort:"",dir:1,sorts:[{id:"upload_date",title:"Upload date",dir:1},{id:"view_count",title:"View count",dir:1},{id:"rating",title:"Rating",dir:1}]},L=function(e,t){switch(t.type){case"field":return Object(c.a)(Object(c.a)({},e),{},Object(C.a)({},t.fieldName,t.payload));case"initial-success":return Object(c.a)(Object(c.a)({},e),{},{isLoading:!1,isInitialLoaded:!0,error:null,isAllFetched:t.payload.films.length<P.c,films:t.payload.films,search:t.payload.params.search,sort:t.payload.params.sort,filter:t.payload.params.filter,dir:t.payload.params.dir});case"load":return e.isLoading||e.isAllFetched||!e.isInitialLoaded||e.error?e:Object(c.a)(Object(c.a)({},e),{},{isLoading:!0});case"load-success":return Object(c.a)(Object(c.a)({},e),{},{isLoading:!1,error:null,isAllFetched:t.payload.length<P.c,films:[].concat(Object(k.a)(e.films),Object(k.a)(t.payload))});case"sorts-change":return Object(c.a)(Object(c.a)({},e),{},{sort:t.resetSort?"":e.sort,sorts:e.sorts.map((function(e){return e.id===t.payload.id?t.payload:e}))});case"error":return Object(c.a)(Object(c.a)({},e),{},{isLoading:!1,error:!0});default:return e}},_=a(60),T=a(1),F=[{id:"last_hour",title:"Last hour"},{id:"today",title:"Today"},{id:"this_week",title:"This week"},{id:"this_month",title:"This month"},{id:"this_year",title:"This year"}];t.default=function(e){var t=Object(o.g)(),a=Object(o.h)(),s=Object(l.useReducer)(L,D),h=Object(r.a)(s,2),O=h[0],k=h[1],C=O.films,M=O.isLoading,E=O.isAllFetched,S=O.search,I=O.sort,U=O.filter,R=O.dir,H=O.sorts,W=O.error,z=O.isInitialLoaded,V=Object(l.useState)(!1),Y=Object(r.a)(V,2),B=Y[0],q=Y[1],G=Object(l.useCallback)((function(){M||E||W||!z||k({type:"load"})}),[W,E,z,M]);Object(w.a)(G),Object(l.useEffect)((function(){var e,t,s,r=m.a.parse(a.search),l={search:r.title,sort:null!==(e=r.sort)&&void 0!==e?e:"",filter:null!==(t=r.filter)&&void 0!==t?t:"",dir:null!==(s=r.dir)&&void 0!==s?s:1};function o(){return(o=Object(n.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.f(Object(c.a)(Object(c.a)({},l),{},{limit:P.c})).then((function(e){k({type:"initial-success",payload:{films:e.data,params:l}})})).catch((function(e){k({type:"error"}),console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a.state&&a.state.films?k({type:"initial-success",payload:{films:a.state.films,params:l}}):function(){o.apply(this,arguments)}()}),[a]),Object(l.useEffect)((function(){function e(){return(e=Object(n.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.f({search:S,sort:I,filter:U,dir:R,skip:C.length,limit:P.c}).then((function(e){k({type:"load-success",payload:e.data})})).catch((function(e){k({type:"error"}),console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}M&&function(){e.apply(this,arguments)}()}),[R,C.length,U,M,S,I]);var J=function(e,a){var s=U,i=I,c=R;if("filter"===e)s=s===a.id?"":a.id;else{var n=a;i===a.id?(i=a.id,1===n.dir?(n.dir=-1,c=a.dir):-1===n.dir&&(n.dir=1,i=""),k({type:"sorts-change",payload:n,resetSort:""===i}),c=a.dir):(i=a.id,c=a.dir)}""!==i&&""!==s?t.push({search:"?title=".concat(S,"&sort=").concat(i,"&dir=").concat(c,"&filter=").concat(s)}):""===i&&""!==s?t.push({search:"?title=".concat(S,"&filter=").concat(s)}):""!==i&&""===s?t.push({search:"?title=".concat(S,"&sort=").concat(i,"&dir=").concat(c)}):""===i&&""===s&&t.push({search:"?title=".concat(S)})};return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(f.a,{onClick:function(){return q(!B)},"aria-controls":"filter-collapse","aria-expanded":B,className:"mt-3 mx-3 p-2 m-button",children:Object(T.jsx)(b.a,{style:{cursor:"pointer"},icon:_.c})}),Object(T.jsx)(d.a,{in:B,children:Object(T.jsxs)(u.a,{id:"filter-collapse",className:"mx-2",children:[Object(T.jsxs)(p.a,{className:"mt-4",sm:4,children:[Object(T.jsx)("p",{style:{fontWeight:500},children:"UPLOAD DATE"}),Object(T.jsx)(p.a,{sm:8,className:"mt-3 mb-3 divider"}),F.map((function(e){return Object(T.jsx)("p",{style:U===e.id?{fontWeight:700,fontSize:"80%"}:{fontWeight:400,fontSize:"80%"},onClick:function(){return J("filter",e)},className:"search-filter",children:e.title},e.id)}))]}),Object(T.jsxs)(p.a,{className:"mt-4",sm:4,children:[Object(T.jsx)("p",{style:{fontWeight:500},children:"SORT BY"}),Object(T.jsx)(p.a,{sm:8,className:"mt-3 mb-3 divider"}),H.map((function(e){return Object(T.jsxs)(p.a,{className:"d-flex",children:[Object(T.jsx)("p",{style:I===e.id?{fontWeight:700,fontSize:"80%"}:{fontWeight:400,fontSize:"80%"},onClick:function(){return J("sort",e)},className:"search-filter",children:e.title}),I===e.id&&1===e.dir?Object(T.jsx)(b.a,{className:"ms-2",icon:"sort-up"}):I===e.id&&-1===e.dir?Object(T.jsx)(b.a,{className:"ms-2",icon:"sort-down"}):""]},e.id)}))]})]})}),Object(T.jsx)(p.a,{sm:12,className:"mt-2 mb-3 divider"}),Object(T.jsx)(u.a,{className:"mx-2 mt-4",children:C.map((function(e,a){var s=Object(v.c)(e);return Object(T.jsx)(p.a,{xs:12,sm:12,lg:8,children:Object(T.jsx)(p.a,{className:"play-outer-container m-0 mb-1",onClick:function(a){var s;Object(v.a)(a.target)||(s=e.id,t.push("".concat("/filmapp-react-frontend/","film/")+s))},children:Object(T.jsxs)(u.a,{className:"search-style mb-4 m-0",children:[Object(T.jsx)(p.a,{xs:8,sm:4,className:"p-0",children:Object(T.jsxs)("div",{className:"embed-responsive embed-responsive-16by9 z-depth-1-half play-container",children:[Object(T.jsx)(A.a,{image:"".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail?width=small_webp")}),Object(T.jsx)(b.a,{className:"play-middle",icon:"play"})]})}),Object(T.jsxs)(p.a,{xs:4,sm:8,children:[Object(T.jsxs)(u.a,{className:"m-0",children:[Object(T.jsx)(p.a,{className:"p-0 mb-1",style:{flex:"0 0 auto !important",width:"calc(83.33333333% - 24px) !important"},children:Object(T.jsx)(x.a,{lines:1,className:"mb-0 search-title fw-bold",children:e.title})}),Object(T.jsx)(p.a,{className:"d-flex justify-content-end",children:Object(T.jsx)(g.a,{index:a,filmID:e.id})})]}),Object(T.jsx)("p",{className:"d-none d-sm-inline mb-1 author-nick-search",children:Object(T.jsxs)("small",{children:[e.author_name," \xb7 ",e.views," views \xb7 ",s]})}),Object(T.jsx)("p",{className:"d-inline d-sm-none mb-0 author-nick-color",children:Object(T.jsxs)("small",{children:[e.author_name," \xb7 ",e.views," views"]})}),Object(T.jsx)("small",{className:"d-none d-sm-inline",children:Object(T.jsx)(y.a,{className:"mb-0 author-nick-search",line:2,text:e.description})})]})]})})},e.id)}))}),!E&&Object(T.jsx)("div",{className:z?"fetch-loader d-flex justify-content-center":"suspense-loader",children:(M||!z)&&Object(T.jsx)(j.a,{className:z?"":"suspense-loader-spinner",animation:"border"})})]})}}}]);
//# sourceMappingURL=9.ad826224.chunk.js.map