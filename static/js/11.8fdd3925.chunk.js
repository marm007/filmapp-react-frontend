(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[11],{514:function(e,t,n){"use strict";n.r(t);var c=n(536),i=n(524),r=n.n(i),o=n(525),a=n(44),s=n(1),l=n(7),u=n(136),d=n(15),p=n(535),f={playlists:null,playlistsCount:0,isLoading:!1,isAllFetched:!1,isInitialLoaded:!1,error:null},b=function(e,t){switch(t.type){case"field":return Object(d.a)(Object(d.a)({},e),{},Object(u.a)({},t.fieldName,t.payload));case"initial-success":return Object(d.a)(Object(d.a)({},e),{},{playlists:Object(c.a)(new Set(Object(c.a)(t.playlists))),isLoading:!1,isInitialLoaded:!0,isAllFetched:t.responseCount<p.b,playlistsCount:e.playlistsCount+t.responseCount});case"load":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!0,isAllFetched:!1,error:null});case"success":return Object(d.a)(Object(d.a)({},e),{},{playlists:Object(c.a)(new Set([].concat(Object(c.a)(e.playlists),Object(c.a)(t.playlists)))),isLoading:!1,isAllFetched:t.responseCount<p.c,playlistsCount:e.playlistsCount+t.responseCount,error:null});case"user-logout":return e.playlists?Object(d.a)(Object(d.a)({},e),{},{playlists:e.playlists.filter((function(e){return e.is_public}))}):e;case"clear":return f;case"error":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1,isAllFetched:!1,error:t.payload});default:return e}},j=n(550),m=n(580),h=n(542),v=n(544),O=n(541),y=n(80),x=n(2);t.default=function(){var e=Object(s.useContext)(y.a).user,t=Object(l.g)(),n=Object(s.useReducer)(b,f),i=Object(a.a)(n,2),u=i[0],d=i[1],g=u.playlists,w=u.isLoading,N=u.isAllFetched,_=u.isInitialLoaded,k=u.playlistsCount,C=Object(s.useCallback)((function(){w||N||!_||d({type:"load"})}),[N,w,_]);Object(O.a)(C,{triggerOnNoScroll:!0}),Object(s.useEffect)((function(){function t(){return(t=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a().then((function(e){})).catch((function(e){return console.error(e)}));case 2:return e.next=4,h.e({limit:p.b,playlistPage:!0}).then((function(e){var t=e.data,n=t.filter((function(e){return e.film_id}));n.forEach((function(e){e.img="".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.film_id,"/thumbnail")})),console.log(e.data),d({type:"initial-success",playlists:n,responseCount:t.length})})).catch((function(e){console.error(e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log("auth",e.auth),d({type:"clear"}),function(){t.apply(this,arguments)}()}),[e.auth]),Object(s.useEffect)((function(){function e(){return(e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("auth","aldalld"),e.next=3,h.e({skip:k,limit:p.c,playlistPage:!0}).then((function(e){var t=e.data,n=t.filter((function(e){return e.film_id}));n.forEach((function(e){e.img="".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.film_id,"/thumbnail")})),d({type:"success",playlists:n,responseCount:t.length})})).catch((function(e){console.error(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}w&&_&&function(){e.apply(this,arguments)}()}),[w,_,g,k]);var E=function(e,n){t.push({pathname:"".concat("/filmapp-react-frontend/","film/")+n,search:"?list=".concat(e)})};return Object(x.jsxs)("div",{className:"row mt-5 mx-2",children:[g?g.map((function(e,t){return Object(x.jsx)(m.a,{playlist:e,index:t,handleRedirect:E},e.id)})):Object(c.a)(Array(20)).map((function(e,t){return Object(x.jsx)(j.a,{},t)})),!N&&Object(x.jsx)("div",{className:"fetch-loader d-flex justify-content-center",children:w&&Object(x.jsx)("div",{className:"spinner spinner-border"})})]})}},535:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"f",(function(){return s}));var c=10,i=12,r=10,o=40,a=20,s=10},536:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(132);var i=n(144);function r(e){return function(e){if(Array.isArray(e))return Object(c.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},537:function(e,t,n){"use strict";var c=n(15),i=n(44),r=n(140),o=n(561),a=n.n(o),s=n(2),l=["onClick","children","className","id"];t.a=function(e){var t=e.onClick,n=void 0===t?function(){}:t,o=e.children,u=e.className,d=e.id,p=Object(r.a)(e,l),f=a()({background:"black"}),b=Object(i.a)(f,2),j=b[0],m=b[1];return Object(s.jsxs)("button",Object(c.a)(Object(c.a)({id:d||"",onClick:function(e){n(e)},onMouseDown:j,className:"btn btn-link button-ripple text-dark ".concat(u)},p),{},{children:[o,m]}))}},541:function(e,t,n){"use strict";var c=n(1),i=n(554),r=n.n(i),o=function(e,t,n){return e?r()(t,e,n):t};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(c.useMemo)((function(){var e,n,c,i,r;return{offset:null!==(e=null===t||void 0===t?void 0:t.offset)&&void 0!==e?e:20,debounce:null!==(n=null===t||void 0===t?void 0:t.debounce)&&void 0!==n?n:200,debounceOptions:null!==(c=null===t||void 0===t?void 0:t.debounceOptions)&&void 0!==c?c:{leading:!0},triggerOnNoScroll:null!==(i=null===t||void 0===t?void 0:t.triggerOnNoScroll)&&void 0!==i&&i,id:null!==(r=null===t||void 0===t?void 0:t.id)&&void 0!==r?r:null}}),[null===t||void 0===t?void 0:t.offset,null===t||void 0===t?void 0:t.debounce,null===t||void 0===t?void 0:t.debounceOptions,null===t||void 0===t?void 0:t.triggerOnNoScroll,null===t||void 0===t?void 0:t.id]),i=n.offset,r=n.triggerOnNoScroll,a=n.debounce,s=n.debounceOptions,l=n.id,u=Object(c.useMemo)((function(){return o(a,e,s)}),[e,a,s]),d=Object(c.useRef)(null),p=Object(c.useCallback)((function(){if(null!=d.current){var e=d.current,t=Math.round(e.scrollTop+e.clientHeight);Math.round(e.scrollHeight-i)<=t&&u()}else if(null!==l){var n=document.getElementById(l);if(n){var c=Math.round(n.scrollTop+n.clientHeight);Math.round(n.scrollHeight-i)<=c&&u()}}else{var r=document.scrollingElement||document.documentElement,o=Math.round(r.scrollTop+window.innerHeight);Math.round(r.scrollHeight-i)<=o&&u()}}),[u,i,l]);return Object(c.useEffect)((function(){var e=d.current,t=document.getElementById(l);return null!=e?e.addEventListener("scroll",p):null!==t?t.addEventListener("scroll",p):window.addEventListener("scroll",p),r&&p(),function(){null!=e?e.removeEventListener("scroll",p):null!==t?t.addEventListener("scroll",p):window.removeEventListener("scroll",p)}}),[p,r,l]),d}},542:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return l}));var c=n(41),i=n(137),r=function(e){return c.a.post("playlists",e,{headers:Object(i.a)()})},o=function(e){return c.a.get("playlists/".concat(e),{headers:Object(i.a)()})},a=function(e){return c.a.get("playlists",{params:e,headers:Object(i.a)()})},s=function(e,t){return c.a.patch("playlists/".concat(e),t,{headers:Object(i.a)()})},l=function(e){return c.a.delete("playlists/".concat(e),{headers:Object(i.a)()})}},544:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var c=n(41),i=n(137),r=function(e){return c.a.get("users/me",{params:e,headers:Object(i.a)()})},o=function(e){return c.a.patch("users",e,{headers:Object(i.a)()})}},548:function(e,t,n){"use strict";var c=n(524),i=n.n(c),r=n(525),o=n(44),a=n(530),s=n(1),l=n(542),u=n(537),d=n(2);t.a=function(e){var t=e.isPublic,n=e.id,c=e.isPlaylist,p=e.dispatchPrivacyUpdate,f=e.filmDispatch,b=Object(s.useState)(!1),j=Object(o.a)(b,2),m=j[0],h=j[1];Object(s.useEffect)((function(){function e(){return(e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.c(n,{is_public:!t}).then((function(e){h(!1),p({type:"change-playlist-privacy-success",payload:e.data}),void 0!==f&&f({type:"field",fieldName:"reloadPlaylist",payload:!0})})).catch((function(e){console.error(e),h(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}m&&function(){e.apply(this,arguments)}()}),[p,m,t,n,f]);return Object(d.jsx)(u.a,{className:"button-ripple-24 p-0 ".concat(c?"":"remove-holder"),onClick:function(e){e.preventDefault(),e.stopPropagation(),m||h(!0)},children:Object(d.jsx)(a.a,{icon:t?"globe-europe":"lock"})})}},549:function(e,t,n){"use strict";var c=n(530),i=n(537),r=n(2);t.a=function(e){var t=e.handleRemove;return Object(r.jsx)(i.a,{className:"button-ripple-24 remove-holder p-0",onClick:t,children:Object(r.jsx)(c.a,{icon:"trash-alt"})})}},550:function(e,t,n){"use strict";var c=n(562),i=n.n(c),r=(n(556),n(2));t.a=function(e){var t=e.isRecommendations;return Object(r.jsxs)("div",{className:"".concat(t?"col-sm-12":"col-sm-6"," mb-4 col col-12 col-md-3 col-lg-2 container-px"),children:[Object(r.jsx)("div",{className:"col-12 col-sm-12 p-0",children:Object(r.jsx)("div",{className:"embed-responsive embed-responsive-16by9 z-depth-1-half play-container",children:Object(r.jsx)("div",{className:"embed-responsive-item",children:Object(r.jsx)(i.a,{className:"w-100 h-100 line-height-unset"})})})}),Object(r.jsxs)("div",{className:"col-12 col-sm-12 mt-2 p-0",children:[Object(r.jsx)("div",{className:"col p-0",children:Object(r.jsx)(i.a,{className:"w-100 h-100 line-height-unset"})}),Object(r.jsx)("div",{className:"col p-0",children:Object(r.jsx)(i.a,{className:"".concat(t?"line-height-unset":""," col w-100")})})]})]})}},553:function(e,t,n){"use strict";var c=n(44),i=n(1),r=n.n(i);n(577);var o=function(e){var t=e.target,n=e.onIntersect,c=e.threshold,i=void 0===c?.1:c,o=e.rootMargin,a=void 0===o?"0px":o;r.a.useEffect((function(){var e=new IntersectionObserver(n,{rootMargin:a,threshold:i}),c=t.current;return e.observe(c),function(){e.unobserve(c)}}))},a=(n(560),n(2)),s=function(e){var t=e.src,n=e.srcWebp,r=e.thumb,o=e.thumbWebp,s=e.isCached,l=Object(i.useState)(s),u=Object(c.a)(l,2),d=u[0],p=u[1];return Object(a.jsxs)("div",{children:[Object(a.jsxs)("picture",{children:[Object(a.jsx)("source",{type:"image/webp",srcSet:o}),Object(a.jsx)("source",{type:"image/jpeg",srcSet:r}),Object(a.jsx)("img",{className:"image thumb",alt:"",style:{visibility:d?"hidden":"visible"},src:r,onLoad:function(){p(!0)}})]}),Object(a.jsxs)("picture",{children:[Object(a.jsx)("source",{type:"image/webp",srcSet:n}),Object(a.jsx)("source",{type:"image/jpeg",srcSet:t}),Object(a.jsx)("img",{className:"image full",alt:"",style:{opacity:d?1:0},src:t,onLoad:function(){p(!0)}})]})]})};t.a=function(e){var t=e.image,n=Object(i.useRef)(),r=Object(i.useState)(!1),l=Object(c.a)(r,2),u=l[0],d=l[1],p=Object(i.useState)(!1),f=Object(c.a)(p,2),b=f[0],j=f[1];return o({target:n,onIntersect:function(e,i){if(Object(c.a)(e,1)[0].isIntersecting){var r=new Image;r.src=t.concat("?width=poster_webp"),j(r.complete),d(!0),n.current&&i.unobserve(n.current)}}}),Object(a.jsx)("div",{ref:n,className:"image-container embed-responsive embed-responsive-16by9  play-image",children:u&&Object(a.jsx)(s,{isCached:b,src:t.concat("?width=poster"),srcWebp:t.concat("?width=poster_webp"),thumb:t.concat("?width=preview"),thumbWebp:t.concat("?width=preview_webp")})})}},554:function(e,t,n){(function(t){var n=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,r=/^0o[0-7]+$/i,o=parseInt,a="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,l=a||s||Function("return this")(),u=Object.prototype.toString,d=Math.max,p=Math.min,f=function(){return l.Date.now()};function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function j(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var a=i.test(e);return a||r.test(e)?o(e.slice(2),a?2:8):c.test(e)?NaN:+e}e.exports=function(e,t,n){var c,i,r,o,a,s,l=0,u=!1,m=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=c,r=i;return c=i=void 0,l=t,o=e.apply(r,n)}function O(e){return l=e,a=setTimeout(x,t),u?v(e):o}function y(e){var n=e-s;return void 0===s||n>=t||n<0||m&&e-l>=r}function x(){var e=f();if(y(e))return g(e);a=setTimeout(x,function(e){var n=t-(e-s);return m?p(n,r-(e-l)):n}(e))}function g(e){return a=void 0,h&&c?v(e):(c=i=void 0,o)}function w(){var e=f(),n=y(e);if(c=arguments,i=this,s=e,n){if(void 0===a)return O(s);if(m)return a=setTimeout(x,t),v(s)}return void 0===a&&(a=setTimeout(x,t)),o}return t=j(t)||0,b(n)&&(u=!!n.leading,r=(m="maxWait"in n)?d(j(n.maxWait)||0,t):r,h="trailing"in n?!!n.trailing:h),w.cancel=function(){void 0!==a&&clearTimeout(a),l=0,c=s=i=a=void 0},w.flush=function(){return void 0===a?o:g(f())},w}}).call(this,n(51))},555:function(e,t,n){"use strict";n(1);var c=n(7),i=n(530),r=n(537),o=n(2);t.a=function(e){var t=e.isPlaylist,n=e.id,a=e.title,s=e.description,l=Object(c.g)();return Object(o.jsx)(r.a,{className:"button-ripple-24 remove-holder p-0",onClick:function(e){e.stopPropagation(),t?l.push({pathname:"profile/update-playlist/".concat(n),state:{title:a}}):l.push({pathname:"profile/update-film/".concat(n),state:{title:a,description:s}})},children:Object(o.jsx)(i.a,{icon:"edit"})})}},556:function(e,t,n){},557:function(e,t){function n(t,c){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,c)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},560:function(e,t,n){},568:function(e,t,n){var c=n(557);e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,c(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},580:function(e,t,n){"use strict";var c=n(44),i=n(1),r=n(530),o=n(547),a=n.n(o),s=n(553),l=n(549),u=n(548),d=n(555),p=n(2);t.a=function(e){var t=e.playlist,n=e.handleRedirect,o=e.handleRemove,f=e.isProfile,b=e.dispatchPrivacyUpdate,j=Object(i.useState)("mb-4 play-outer-container remove-container"),m=Object(c.a)(j,2),h=m[0],v=m[1];return Object(i.useEffect)((function(){t.film_id||v("mb-4 play-cursor-default remove-container")}),[t.film_id]),Object(p.jsx)("div",{className:"col-12 col-sm-6 col-md-3 col-lg-2 container-px",children:Object(p.jsxs)("div",{className:"col ".concat(h," p-0"),onClick:function(){return n(t.id,t.film_id)},children:[Object(p.jsxs)("div",{className:"play-container p-0",children:[Object(p.jsx)(s.a,{image:t.img}),Object(p.jsxs)("div",{className:"row play-middle w-100 m-0",children:[Object(p.jsx)("div",{className:"col-5 col-sm-5 pr-1 d-flex justify-content-end align-items-center",children:Object(p.jsx)(r.a,{icon:"play"})}),Object(p.jsx)("div",{className:"col-7 col-sm-7 pl-1 d-flex justify-content-start align-items-center",children:Object(p.jsx)("small",{className:"font-weight-bold",children:"Play all"})})]})]}),Object(p.jsxs)("div",{className:"row m-0 mt-1",children:[Object(p.jsx)("div",{className:"p-0 col ".concat(f?"button-ripple-div-next-width-3x":"col-12"),children:Object(p.jsx)(a.a,{line:1,text:t.title,className:"mb-1 mt-1 title "})}),f&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(u.a,{id:t.id,isPublic:t.is_public,isProfile:!0,dispatchPrivacyUpdate:b}),Object(p.jsx)(l.a,{handleRemove:o}),Object(p.jsx)(d.a,{isPlaylist:!0,id:t.id,title:t.title})]})]}),Object(p.jsx)("p",{className:"mb-0 author-nick",children:Object(p.jsx)("span",{children:t.author_name})})]})},t.id)}}}]);
//# sourceMappingURL=11.8fdd3925.chunk.js.map