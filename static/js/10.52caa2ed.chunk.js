(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[10],{615:function(e,t,a){"use strict";a.r(t);var n=a(23),c=a.n(n),i=a(35),r=a(12),l=a(0),o=a(25),s=a(212),d=a(505),u=a(119),p=a(31),f=a(18),b=a(2),h=a(58),m={films:null,isLoading:!1,isAllFetched:!1,isInitialLoaded:!1,error:null},j=function(e,t){switch(t.type){case"field":return Object(b.a)(Object(b.a)({},e),{},Object(f.a)({},t.fieldName,t.payload));case"load":return Object(b.a)(Object(b.a)({},e),{},{isLoading:!0,isAllFetched:!1,error:""});case"initial-load":return Object(b.a)(Object(b.a)({},e),{},{films:Object(p.a)(new Set(Object(p.a)(t.payload))),isLoading:!1,isInitialLoaded:!0,isAllFetched:t.payload.length<h.b});case"success":return Object(b.a)(Object(b.a)({},e),{},{films:Object(p.a)(new Set([].concat(Object(p.a)(e.films),Object(p.a)(t.payload)))),isLoading:!1,isAllFetched:t.payload.length<h.c,error:null});case"error":return Object(b.a)(Object(b.a)({},e),{},{isLoading:!1,isAllFetched:!1,error:t.payload});default:return e}},O=a(98),y=a(216),g=a(1);t.default=function(e){var t=Object(o.g)(),a=Object(l.useReducer)(j,m),n=Object(r.a)(a,2),p=n[0],f=n[1],b=p.films,w=p.isLoading,x=p.isAllFetched,k=p.isInitialLoaded,L=Object(l.useCallback)((function(){w||x||!k||f({type:"load"})}),[w,x,k]);Object(O.a)(L,{triggerOnNoScroll:!0}),Object(l.useEffect)((function(){function e(){return(e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a({limit:h.b}).then((function(e){var t=e.data;t.forEach((function(e){e.img="".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail?width=small_webp")})),f({type:"initial-load",payload:t})}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(l.useEffect)((function(){function e(){return(e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a({skip:b.length,limit:h.c}).then((function(e){var t=e.data;t.forEach((function(e){e.img="".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail?width=small_webp")})),f({type:"success",payload:t})})).catch((function(e){return console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}w&&k&&b&&function(){e.apply(this,arguments)}()}),[w,k,b]);var v=function(e){t.push({pathname:"".concat("/filmapp-react-frontend/","film/")+e})};return Object(g.jsxs)(s.a,{className:"mt-5 mx-2",children:[b&&b.map((function(e,t){return Object(g.jsx)(y.a,{film:e,index:t,handleRedirect:v},e.id)})),!x&&Object(g.jsx)("div",{style:{height:"32px",width:"100%"},className:"d-flex justify-content-center",children:(w||!k)&&Object(g.jsx)(d.a,{animation:"border"})})]})}}}]);
//# sourceMappingURL=10.52caa2ed.chunk.js.map