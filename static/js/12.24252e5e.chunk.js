(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[12],{522:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return O}));var n=a(8),r=a(138),i=a(531),c=a.n(i),s=a(532),u=a(15),o=a(47),l=a(1),d=a(540),f=a(562),p=a(543),b=a(536),j=a(142),h=a(2),m=function(){var t=Object(l.useContext)(j.a).setToUpdate,e=Object(n.g)(),a=Object(n.i)().id,r=Object(l.useReducer)(f.b,Object(u.a)(Object(u.a)({},f.a),{},{update:{title:""},initial:{title:""}})),i=Object(o.a)(r,2),m=i[0],O=m.update,v=m.initial,g=m.isInitialLoaded,y=m.isSumbitted,x=m.isSending,S=m.isError,w=m.error,M=m.isSuccess,D=i[1];Object(l.useEffect)((function(){var t=function(){var t=Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.b)(a).then((function(t){D({type:"initial-success",payload:{title:t.data.title}})})).catch((function(t){D({type:"error"})}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e.location.state&&e.location.state.title?D({type:"initial-success",payload:{title:e.location.state.title}}):t()}),[a,e]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("form",{onSubmit:x?null:function(n){if(n.preventDefault(),D({type:"submit"}),O.title)return D({type:"send"}),Object(p.c)(a,{title:O.title}).then((function(a){D({type:"success"}),t(!0,a.data),setTimeout((function(){return Object(b.b)(e,"/update-playlist")}),500)})).catch((function(t){D({type:"error"})}))},children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"title",children:"Title"}),Object(h.jsx)(d.a,{type:"text",name:"title",value:O.title,isInvalid:y&&!O.title,onChange:function(t){return D({type:"update",fieldName:"title",payload:t.target.value})}}),Object(h.jsx)("div",{className:"invalid-feedback",children:"Title cannot be empty"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("button",{className:"btn btn-primary",disabled:!g||g&&O.title===v.title,type:"submit",children:"Save"}),x&&Object(h.jsx)("div",{className:"ml-2 spinner-grow"})]})]}),S&&Object(h.jsx)("div",{className:"alert alert-danger mt-2 mb-0",children:w||"Something went wrong"}),M&&Object(h.jsx)("div",{className:"alert alert-success mt-2 mb-0",children:"Changes saved successfully!"})]})};function O(){var t=Object(n.g)();return Object(h.jsx)(r.a,{id:"updatatePlaylistModal",title:"Update",onClose:function(){Object(b.b)(t,"/update-playlist")},children:Object(h.jsx)(m,{})})}},531:function(t,e,a){t.exports=a(241)},532:function(t,e,a){"use strict";function n(t,e,a,n,r,i,c){try{var s=t[i](c),u=s.value}catch(o){return void a(o)}s.done?e(u):Promise.resolve(u).then(n,r)}function r(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var c=t.apply(e,a);function s(t){n(c,r,i,s,u,"next",t)}function u(t){n(c,r,i,s,u,"throw",t)}s(void 0)}))}}a.d(e,"a",(function(){return r}))},536:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return i}));var n=function(t){var e=new Date(Date.parse(t.createdAt));return("0"+e.getDate()).slice(-2)+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getFullYear()).slice(-2)+" o "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)},r=function(t){var e=new Date(Date.parse(t.createdAt)),a=new Date,n=Math.abs(Math.floor((Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes())-Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes()))/6e4));return n/60>=1?(n/=60)/24>=1?(n/=24)/30>=1?(n/=30)/12>=1?(n/=12,n=Math.floor(n)+" years "):n=Math.floor(n)+" months ":n=Math.floor(n)+" days ":n=Math.floor(n)+" hours ":n=Math.floor(n)+" minutes ",n+="ago"},i=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.location.pathname.split(e)[0],r={pathname:""===n?"/filmapp-react-frontend/":n,search:t.location.search,state:t.location.state};a?t.replace(r):t.push(r)}},540:function(t,e,a){"use strict";var n=a(1),r=a(2);e.a=function(t){var e=t.isInvalid,a=t.onChange,i=t.type,c=t.name,s=t.value,u=t.placeholder,o=void 0===u?"":u,l=Object(n.useRef)(null);return Object(n.useEffect)((function(){l.current&&(e?l.current.classList.add("is-invalid"):l.current.classList.remove("is-invalid"))}),[e]),"textarea"===i?Object(r.jsx)("textarea",{ref:l,className:"form-control",placeholder:o,type:i,name:c,value:s,onChange:a,rows:8}):Object(r.jsx)("input",{ref:l,className:"form-control",placeholder:o,type:i,name:c,value:s,onChange:a})}},543:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return c})),a.d(e,"e",(function(){return s})),a.d(e,"c",(function(){return u})),a.d(e,"d",(function(){return o}));var n=a(43),r=a(137),i=function(t){return n.a.post("playlists",t,{headers:Object(r.a)()})},c=function(t){return n.a.get("playlists/".concat(t),{headers:Object(r.a)()})},s=function(t){return n.a.get("playlists",{params:t,headers:Object(r.a)()})},u=function(t,e){return n.a.patch("playlists/".concat(t),e,{headers:Object(r.a)()})},o=function(t){return n.a.delete("playlists/".concat(t),{headers:Object(r.a)()})}},562:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return c}));var n=a(136),r=a(15),i={update:{},initial:{},isInitialLoaded:!1,isSumbitted:!1,isSending:!1,isSuccess:!1,isError:!1,error:""},c=function(t,e){switch(e.type){case"update":return Object(r.a)(Object(r.a)({},t),{},{error:"",isError:!1,update:Object(r.a)(Object(r.a)({},t.update),{},Object(n.a)({},e.fieldName,e.payload))});case"initial-success":return Object(r.a)(Object(r.a)({},t),{},{isInitialLoaded:!0,update:e.payload,initial:e.payload});case"submit":return Object(r.a)(Object(r.a)({},t),{},{isSumbitted:!0,isError:!1,error:""});case"send":return Object(r.a)(Object(r.a)({},t),{},{isSending:!0});case"success":return Object(r.a)(Object(r.a)({},t),{},{isSuccess:!0,isSending:!1,isSumbitted:!1,isError:!1,error:""});case"error":return Object(r.a)(Object(r.a)({},t),{},{isSuccess:!1,isSending:!1,isSumbitted:!1,isError:!0,error:e.payload?e.payload:""});default:return t}}}}]);
//# sourceMappingURL=12.24252e5e.chunk.js.map