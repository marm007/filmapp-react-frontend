{"version":3,"sources":["components/dialogs/updatePlaylist/reducer.js","components/dialogs/updatePlaylist/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","components/models/input/index.js","services/playlistService.js"],"names":["updatePlaylistInitialState","title","initialPlaylist","isInitialLoaded","isSumbitted","isSending","isError","error","isSuccess","updatePlaylistReducer","state","action","type","fieldName","payload","UpdatePlaylist","history","useHistory","id","useParams","useReducer","dispatch","useEffect","getInitialPlaylist","a","playlistApi","then","res","data","catch","err","console","log","location","setTimeout","goBack","updatePlaylist","onClose","onSubmit","e","preventDefault","className","htmlFor","name","value","isInvalid","onChange","target","disabled","module","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","done","Promise","_asyncToGenerator","fn","self","this","args","arguments","apply","undefined","Input","placeholder","InputTag","inputRef","useRef","current","classList","add","remove","ref","create","body","axios","post","headers","authHeader","index","get","show","params","partialUpdate","patch","delete"],"mappings":"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","file":"static/js/16.865b6ff8.chunk.js","sourcesContent":["export const updatePlaylistInitialState = {\n    title: '',\n    initialPlaylist: {\n        title: ''\n    },\n    isInitialLoaded: false,\n    isSumbitted: false,\n    isSending: false,\n    isError: false,\n    error: '',\n    isSuccess: false,\n}\n\nexport const updatePlaylistReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                error: '',\n                isError: false,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'initial-success': {\n            return {\n                ...state,\n                isInitialLoaded: true,\n                title: action.payload,\n                initialPlaylist: {\n                    title: action.payload\n                }\n            }\n        }\n        case 'submit': {\n            return {\n                ...state,\n                isSumbitted: true,\n                isError: false,\n                error: ''\n            }\n        }\n        case 'send': {\n            return {\n                ...state,\n                isSending: true\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                isSuccess: true,\n                isSending: false,\n                isSumbitted: false,\n                isError: false,\n                error: ''\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isSuccess: false,\n                isSending: false,\n                isSumbitted: false,\n                isError: true,\n                error: action.payload ? action.payload : ''\n            }\n        }\n        default: {\n            return state\n        }\n    }\n}","import React, { useEffect, useReducer } from 'react'\nimport { useHistory, useParams } from 'react-router-dom'\nimport Input from '../../models/input'\nimport Modal from '../../models/modal'\nimport { updatePlaylistInitialState, updatePlaylistReducer } from './reducer'\n\nimport * as playlistApi from '../../../services/playlistService'\n\nconst UpdatePlaylist = () => {\n    let history = useHistory()\n    let { id } = useParams();\n\n    const [state, dispatch] = useReducer(updatePlaylistReducer, updatePlaylistInitialState)\n    const { title, initialPlaylist, isInitialLoaded,\n        isSumbitted, isSending, isError, error, isSuccess } = state\n\n\n    useEffect(() => {\n        const getInitialPlaylist = async () => {\n            await playlistApi.index(id)\n                .then(res => {\n\n                    dispatch({\n                        type: 'initial-success',\n                        payload: res.data.title\n                    })\n                })\n                .catch(err => {\n                    dispatch({\n                        type: 'error'\n                    })\n                })\n        }\n        console.log(history.location.state)\n\n        if (history.location.state && history.location.state.title) {\n            dispatch({\n                type: 'initial-success',\n                payload: history.location.state.title\n            })\n        } else {\n            getInitialPlaylist()\n        }\n\n    }, [id, history])\n\n    useEffect(() => {\n        const updatePlaylist = async () => {\n            await playlistApi.partialUpdate(id, { title })\n                .then(res => {\n                    dispatch({\n                        type: 'success'\n                    })\n\n                    setTimeout(() => history.goBack(), 500)\n                })\n                .catch(err => {\n                    dispatch({\n                        type: 'error'\n                    })\n                })\n        }\n\n        if (isSending) updatePlaylist()\n    }, [id, history, isSending, title])\n\n    const modalClose = () => {\n        history.goBack()\n    }\n\n    const handleSumbit = (e) => {\n        e.preventDefault()\n        dispatch({\n            type: 'submit'\n        })\n\n        if (title) {\n            dispatch({\n                type: 'send'\n            })\n        }\n    }\n\n    return (\n        <Modal id=\"updatatePlaylistModal\" title=\"Update\" onClose={modalClose}>\n            <form onSubmit={isSending ? null : handleSumbit}>\n                <div className=\"form-group\">\n                    <label htmlFor=\"title\">Title</label>\n                    <Input type=\"text\" name=\"title\" value={title}\n                        isInvalid={isSumbitted && !title}\n                        onChange={e => dispatch({ type: 'field', fieldName: 'title', payload: e.target.value })}\n                    />\n                    <div className=\"invalid-feedback\">\n                        Title cannot be empty\n                    </div>\n                </div>\n                <div className=\"form-group\">\n                    <button className=\"btn btn-primary\"\n                        disabled={!isInitialLoaded ||\n                            (isInitialLoaded && title === initialPlaylist.title)}\n                        type=\"submit\">Save</button>\n                    {\n                        isSending &&\n                        <div className=\"ml-2 spinner-grow\" />\n                    }\n                </div>\n            </form>\n            {\n                isError && <div className=\"alert alert-danger mt-2 mb-0\">\n                    {error ? error : 'Something went wrong'}\n                </div>\n            }\n\n            {\n                isSuccess && <div className=\"alert alert-success mt-2 mb-0\">\n                    Changes saved successfully!\n                </div>\n            }\n        </Modal>\n    )\n}\n\nexport default UpdatePlaylist","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import { useEffect, useRef } from \"react\"\n\nconst Input = ({ isInvalid, onChange, type, name, value, placeholder = '' }) => {\n\n    const InputTag = type === 'textarea' ? 'textarea' : 'input'\n\n    const inputRef = useRef(null)\n\n    useEffect(() => {\n        let ref = inputRef.current\n        if (ref) {\n            if (isInvalid) inputRef.current.classList.add('is-invalid')\n            else inputRef.current.classList.remove('is-invalid')\n        }\n    }, [isInvalid])\n\n    return (\n        <InputTag ref={inputRef} className=\"form-control\"\n            placeholder={placeholder}\n            type={type} name={name}\n            value={value} onChange={onChange} />\n    )\n}\n\nexport default Input","import axios from '../helpers/axios'\nimport authHeader from '../helpers/authHeader'\n\n\nexport const create = (body) => axios.post('playlists', body, { headers: authHeader() })\nexport const index = (id) => axios.get(`playlists/${id}`, { headers: authHeader() })\nexport const show = (params) => axios.get(`playlists`, { params, headers: authHeader() })\nexport const partialUpdate = (id, body) => axios.patch(`playlists/${id}`, body, { headers: authHeader() })\n\n\nexport const remove = (id) => axios.delete(`playlists/${id}`, { headers: authHeader() })\n\n"],"sourceRoot":""}