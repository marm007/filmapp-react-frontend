(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[10],{517:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return w}));var n=r(1),a=r(534),i=r.n(a),s=r(535),c=r(48),o=r(11),l=r(536),u=r(543),f=r(141),d=r(16),p=function(e){return{file:null,name:e?b:j,preview:null}},m={type:"",message:""},b="Choose a film ",j="Choose a thumbnail ",O={title:"",description:"",film:p(!0),thumbnail:p(!1),isSubmitted:!1,isSending:!1,isSuccess:!1,isError:!1,error:null},y=function(e,t){switch(t.type){case"field":return Object(d.a)(Object(d.a)({},e),{},Object(f.a)({isError:!1,error:null},t.fieldName,t.payload));case"file-add":return!0===t.isFilm?Object(d.a)(Object(d.a)({},e),{},{isError:!1,error:null,alert:m,film:{file:t.file,name:t.fileName,preview:t.preview}}):Object(d.a)(Object(d.a)({},e),{},{isError:!1,error:null,alert:m,thumbnail:{file:t.file,name:t.fileName,preview:t.preview}});case"file-clear":return!0===t.isFilm?Object(d.a)(Object(d.a)({},e),{},{isError:!1,error:null,film:p(!0)}):Object(d.a)(Object(d.a)({},e),{},{isError:!1,error:null,thumbnail:p(!1)});case"submit":return Object(d.a)(Object(d.a)({},e),{},{isError:!1,error:null,alert:m,isSubmitted:!0});case"send":return Object(d.a)(Object(d.a)({},e),{},{isSending:!0});case"success":return Object(d.a)(Object(d.a)({},e),{},{isSending:!1,isSuccess:!0});case"error":return Object(d.a)(Object(d.a)({},e),{},{isSending:!1,isSuccess:!1,isError:!0,error:t.payload});case"error-422":return Object(d.a)(Object(d.a)({},e),{},{isSending:!1,isSuccess:!1,isError:!0,error:t.payload,film:p(!0),thumbnail:p(!1)});default:return e}},v=r(545),h=r(86),x=(r(697),r(2)),g=function(){var e=Object(n.useContext)(h.a),t=e.user,r=e.clearUser,a=Object(o.e)(),f=Object(n.useRef)(null),d=Object(n.useRef)(null),p=Object(n.useReducer)(y,O),m=Object(c.a)(p,2),g=m[0],w=g.title,N=g.description,A=g.film,S=g.thumbnail,k=g.isSubmitted,E=g.isSending,C=g.isError,P=g.error,I=m[1];Object(n.useEffect)((function(){!t.auth&&t.isInitialLoaded&&(a.replace("".concat("/filmapp-react-frontend/")),a.push("".concat("/filmapp-react-frontend/","login")),r())}),[t,a,r]);var R=function(){var e=Object(s.a)(i.a.mark((function e(r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),I({type:"submit"}),t.auth){e.next=5;break}return a.push("".concat("/filmapp-react-frontend/","add/login")),e.abrupt("return");case 5:if(!w||!N){e.next=14;break}return I({type:"send"}),(n=new FormData).set("title",w),n.set("description",N),n.set("film",A.file),n.set("thumbnail",S.file),e.next=14,Object(v.b)(n).then((function(e){I({type:"success"}),a.push("".concat("/filmapp-react-frontend/","film/").concat(e.data.id))})).catch((function(e){var t=null;e.response&&e.response.data&&e.response.data.error?t=e.response.data.error:e.response&&e.response.data&&e.response.data.errors&&(e.response.data.errors.description?t=e.response.data.errors.description.message:e.response.data.errors.title&&(t=e.response.data.errors.title.message)),422===e.response.status?I({type:"error-422",payload:t}):I({type:"error",payload:t})}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e,t){switch(e.preventDefault(),t){case"film":I({type:"file-add",isFilm:!0,file:f.current.files[0],fileName:f.current.files[0].name,preview:URL.createObjectURL(e.target.files[0])});break;case"thumbnail":I({type:"file-add",isFilm:!1,file:d.current.files[0],fileName:d.current.files[0].name,preview:URL.createObjectURL(e.target.files[0])})}};return Object(x.jsxs)("div",{className:"row my-4 mx-2 h-100 mx-auto",children:[Object(x.jsx)("div",{className:"col col-12 col-md-5",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col col-12 mx-auto mb-4",children:Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"position-relative justify-content-center d-flex align-items-center text-center box has-advanced-upload",children:[Object(x.jsx)("div",{className:"embed-responsive embed-responsive-16by9 ",children:Object(x.jsx)("video",{muted:!0,autoPlay:!0,className:"embed-responsive-item",loop:!0,src:A.preview?A.preview:""})}),Object(x.jsx)("input",{id:"film",accept:"video/mp4, video/ogg",onChange:function(e){return F(e,"film")},type:"file",ref:f,className:"inputfile"}),Object(x.jsx)("label",{htmlFor:"film",className:"position-absolute",children:A.name===b&&Object(x.jsx)("span",{children:A.name})}),A.preview&&Object(x.jsx)("div",{className:"col card-img-overlay film-add-item-opacity"}),A.preview&&Object(x.jsx)(l.a,{className:"film-add-item-middle fa-3x text-white",icon:"times",onClick:function(){I({type:"file-clear",isFilm:!0})}})]})})}),Object(x.jsx)("div",{className:"col col-12 mx-auto mb-4 mb-md-0",children:Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"position-relative justify-content-center d-flex align-items-center text-center box has-advanced-upload",children:[Object(x.jsx)("div",{className:"embed-responsive embed-responsive-16by9 ",children:Object(x.jsx)("img",{className:"embed-responsive-item",alt:"",src:S.preview?S.preview:"data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})}),Object(x.jsx)("input",{id:"thumbnail",accept:"image/jpg, image/png, image/jpeg",onChange:function(e){return F(e,"thumbnail")},type:"file",ref:d,className:" inputfile position-absolute"}),Object(x.jsx)("label",{htmlFor:"thumbnail",className:"position-absolute",children:S.name===j&&Object(x.jsx)("span",{children:S.name})}),S.preview&&Object(x.jsx)("div",{className:"col card-img-overlay film-add-item-opacity"}),S.preview&&Object(x.jsx)(l.a,{className:"film-add-item-middle fa-3x text-white",icon:"times",onClick:function(){I({type:"file-clear",isFilm:!1})}})]})})})]})}),Object(x.jsxs)("div",{className:"col col-12 col-md-7 m-0 ml-auto mr-auto mb-4 mb-md-0",children:[Object(x.jsxs)("div",{className:"mb-3 input-group",children:[Object(x.jsx)(u.a,{placeholder:"Title",type:"text",isInvalid:k&&!w,name:"title",value:w,onChange:function(e){return I({type:"field",fieldName:"title",payload:e.target.value})}}),Object(x.jsx)("div",{className:"invalid-feedback",children:"Title is required"})]}),Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)(u.a,{placeholder:"Description",type:"textarea",isInvalid:k&&!N,name:"description",value:N,onChange:function(e){return I({type:"field",fieldName:"description",payload:e.target.value})}}),Object(x.jsx)("div",{className:"invalid-feedback",children:"Description is required"})]}),Object(x.jsx)("div",{className:"col-12 mb-3 p-0",children:Object(x.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[E&&Object(x.jsx)("div",{className:"spinner-grow mr-2"}),Object(x.jsx)("button",{className:"btn btn-primary",disabled:E||!w||!N,onClick:E?null:R,children:"Add"})]})}),C&&Object(x.jsx)("div",{className:"alert alert-danger",children:P||"Error while creating film."})]})]})};function w(){return Object(n.useEffect)((function(){document.title="Add film - FilmApp"}),[]),Object(x.jsx)(g,{})}},534:function(e,t,r){e.exports=r(244)},535:function(e,t,r){"use strict";function n(e,t,r,n,a,i,s){try{var c=e[i](s),o=c.value}catch(l){return void r(l)}c.done?t(o):Promise.resolve(o).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var s=e.apply(t,r);function c(e){n(s,a,i,c,o,"next",e)}function o(e){n(s,a,i,c,o,"throw",e)}c(void 0)}))}}r.d(t,"a",(function(){return a}))},536:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(146),a=r(62),i=r.n(a),s=r(1),c=r.n(s);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function p(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}function b(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var r,n=t.indexOf(":"),a=m(t.slice(0,n)),i=t.slice(n+1).trim();return a.startsWith("webkit")?e[(r=a,r.charAt(0).toUpperCase()+r.slice(1))]=i:e[a]=i,e}),{})}var j=!1;try{j=!0}catch(x){}function O(e){return n.c.icon?n.c.icon(e):null===e?null:"object"===o(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function y(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?l({},e,t):{}}function v(e){var t=e.forwardedRef,r=d(e,["forwardedRef"]),a=r.icon,i=r.mask,s=r.symbol,c=r.className,o=r.title,u=r.titleId,m=O(a),b=y("classes",[].concat(p(function(e){var t,r=e.spin,n=e.pulse,a=e.fixedWidth,i=e.inverse,s=e.border,c=e.listItem,o=e.flip,u=e.size,f=e.rotation,d=e.pull,p=(l(t={"fa-spin":r,"fa-pulse":n,"fa-fw":a,"fa-inverse":i,"fa-border":s,"fa-li":c,"fa-flip-horizontal":"horizontal"===o||"both"===o,"fa-flip-vertical":"vertical"===o||"both"===o},"fa-".concat(u),"undefined"!==typeof u&&null!==u),l(t,"fa-rotate-".concat(f),"undefined"!==typeof f&&null!==f&&0!==f),l(t,"fa-pull-".concat(d),"undefined"!==typeof d&&null!==d),l(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(p).map((function(e){return p[e]?e:null})).filter((function(e){return e}))}(r)),p(c.split(" ")))),x=y("transform","string"===typeof r.transform?n.c.transform(r.transform):r.transform),g=y("mask",O(i)),w=Object(n.a)(m,f({},b,{},x,{},g,{symbol:s,title:o,titleId:u}));if(!w)return function(){var e;!j&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",m),null;var N=w.abstract,A={ref:t};return Object.keys(r).forEach((function(e){v.defaultProps.hasOwnProperty(e)||(A[e]=r[e])})),h(N[0],A)}v.displayName="FontAwesomeIcon",v.propTypes={border:i.a.bool,className:i.a.string,mask:i.a.oneOfType([i.a.object,i.a.array,i.a.string]),fixedWidth:i.a.bool,inverse:i.a.bool,flip:i.a.oneOf(["horizontal","vertical","both"]),icon:i.a.oneOfType([i.a.object,i.a.array,i.a.string]),listItem:i.a.bool,pull:i.a.oneOf(["right","left"]),pulse:i.a.bool,rotation:i.a.oneOf([0,90,180,270]),size:i.a.oneOf(["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:i.a.bool,symbol:i.a.oneOfType([i.a.bool,i.a.string]),title:i.a.string,transform:i.a.oneOfType([i.a.string,i.a.object]),swapOpacity:i.a.bool},v.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var h=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof r)return r;var a=(r.children||[]).map((function(r){return e(t,r)})),i=Object.keys(r.attributes||{}).reduce((function(e,t){var n=r.attributes[t];switch(t){case"class":e.attrs.className=n,delete r.attributes.class;break;case"style":e.attrs.style=b(n);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=n:e.attrs[m(t)]=n}return e}),{attrs:{}}),s=n.style,c=void 0===s?{}:s,o=d(n,["style"]);return i.attrs.style=f({},i.attrs.style,{},c),t.apply(void 0,[r.tag,f({},i.attrs,{},o)].concat(p(a)))}.bind(null,c.a.createElement)},543:function(e,t,r){"use strict";var n=r(1),a=r(2);t.a=function(e){var t=e.isInvalid,r=e.onChange,i=e.type,s=e.name,c=e.value,o=e.placeholder,l=void 0===o?"":o,u=Object(n.useRef)(null);return Object(n.useEffect)((function(){u.current&&(t?u.current.classList.add("is-invalid"):u.current.classList.remove("is-invalid"))}),[t]),"textarea"===i?Object(a.jsx)("textarea",{ref:u,className:"form-control",placeholder:l,type:i,name:s,value:c,onChange:r,rows:8}):Object(a.jsx)("input",{ref:u,className:"form-control",placeholder:l,type:i,name:s,value:c,onChange:r})}},545:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"h",(function(){return o})),r.d(t,"i",(function(){return l})),r.d(t,"b",(function(){return u})),r.d(t,"f",(function(){return f})),r.d(t,"e",(function(){return d})),r.d(t,"g",(function(){return p}));var n=r(44),a=r(142),i=function(e){return n.a.get("films/",{params:e})},s=function(e){return n.a.get("films/".concat(e))},c=function(e){return n.a.get("films/".concat(e,"/details"))},o=function(e){return n.a.get("films/search",{params:e})},l=function(e){return n.a.patch("films/".concat(e,"/view"))},u=function(e){return n.a.post("films",e,{headers:Object(a.a)()})},f=function(e,t){return n.a.patch("films/".concat(e),t,{headers:Object(a.a)()})},d=function(e,t){return n.a.patch("films/".concat(e,"/action"),t,{headers:Object(a.a)()})},p=function(e){return n.a.delete("films/".concat(e),{headers:Object(a.a)()})}},697:function(e,t,r){}}]);
//# sourceMappingURL=10.7139bce7.chunk.js.map