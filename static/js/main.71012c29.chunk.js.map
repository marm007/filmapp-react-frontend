{"version":3,"sources":["helpers/axios.js","helpers/authHeader.js","services/filmService.js","helpers/contexts/user/userContext.js","components/navbar/reducer.js","helpers/hooks/useBottomScrollListener.js","helpers/hooks/useWindowsWidth.js","components/navbar/index.js","images/header.png","helpers/contexts/removeModal/removeModalContext.js","helpers/components/removeModal.js","config/index.js","components/homePage/reducer.js","components/blurredImage/index.js","services/userService.js","services/playlistService.js","helpers/contexts/toast/toastContext.js","components/add/reducers/playlistDropdownMenuReducer.js","helpers/components/changePrivacyButton.js","components/add/playlistDropdownMenu.js","components/add/playlistAddButton.js","helpers/index.js","helpers/components/removeButton.js","helpers/components/film.js","components/homePage/index.js","helpers/contexts/film/filmContext.js","components/filmPage/reducers/previewReducer.js","components/filmPage/preview.js","components/filmPage/reducers/recommendationsReducer.js","components/filmPage/recommendations.js","services/commentService.js","components/filmPage/reducers/commentsReducer.js","components/filmPage/comments.js","images/image_not_found.png","components/filmPage/reducers/playlistReducer.js","components/filmPage/playlist.js","helpers/contexts/film/filmProvider.js","components/filmPage/index.js","services/authService.js","components/auth/reducer.js","components/auth/login.js","components/auth/register.js","components/searchPage/reducer.js","components/searchPage/index.js","components/playlistsPage/reducer.js","helpers/components/playlist.js","components/playlistsPage/index.js","components/add/reducers/filmAddReducer.js","components/add/filmAdd.js","images/page-not-found.svg","components/notFound/index.js","components/settings/reducer.js","components/settings/index.js","components/auth/resetPassword.js","components/auth/forgotPassword.js","helpers/components/privateRoute.js","components/profilePage/reducer.js","components/profilePage/index.js","helpers/components/withAxios.js","helpers/contexts/user/userProvider.js","App.js","serviceWorker.js","helpers/contexts/toast/toastProvider.js","helpers/contexts/removeModal/removeModalProvider.js","index.js"],"names":["instance","axios","create","baseURL","process","authHeader","token","JSON","parse","localStorage","getItem","all","params","get","index","id","search","view","patch","form","post","headers","like","remove","delete","UserContext","createContext","name","auth","isInitialLoaded","initialSearchState","options","isLoading","isAllFetched","isSearching","isOpen","selected","title","searchReducer","state","action","type","fieldName","payload","length","createCallback","debounce","handleOnScroll","lodashDebounce","useBottomScrollListener","onBottom","useMemo","offset","debounceOptions","leading","triggerOnNoScroll","debouncedOnBottom","containerRef","useRef","useCallback","current","scrollNode","scrollContainerBottomPosition","Math","round","scrollTop","clientHeight","scrollHeight","document","getElementById","scrollingElement","documentElement","window","innerHeight","useEffect","ref","node","addEventListener","removeEventListener","useWindowsWidth","useState","isScreenSmall","setIsScreenSmall","checkScreenSize","innerWidth","NavbarComponent","props","history","useHistory","location","useLocation","onSmallScreen","useContext","user","logout","useReducer","dispatch","isExpanded","setIsExpanded","handleSearchOnBottom","typeaheadRef","anchorEl","setAnchorEl","handleKeyDown","a","filmApi","skip","then","data","map","film","img","catch","err","console","error","getAllSearchedFilms","event","target","className","keyCode","charCode","log","handleSearchSubmit","e","preventDefault","reset","clear","push","pathname","films","handleSearch","query","Navbar","expanded","expand","bg","variant","onToggle","onSelect","eventKey","handleSelect","Col","xs","span","order","sm","md","Brand","style","cursor","onClick","alt","src","width","height","Toggle","Form","inline","Row","useCache","filterBy","open","placeholder","labelKey","minLength","onSearch","onBlur","onFocus","onKeyDown","onMenuToggle","onInputChange","text","onChange","renderMenu","results","menuProps","result","option","position","stopPropagation","marginRight","role","href","Spinner","animation","Button","icon","Collapse","Nav","activeKey","Link","Avatar","currentTarget","toUpperCase","charAt","slice","handleLogin","keepMounted","Boolean","onClose","RemoveModalContext","show","isRemoving","RemoveModal","removeModalData","handleClose","Modal","onHide","centered","Header","Title","Body","Footer","commentsMaxFetchCount","pageInitialMaxFetchCount","pageMaxFetchCount","initialState","homePageReducer","Set","BlurredImageComponent","image","setImage","Ratio","aspectRatio","me","partialUpdate","body","ToastContext","playlistDropdownMenuInitialState","playlists","isCreating","isAdding","playlistToUpgrade","isPublic","playlistDropdownMenuReducer","playlist","contains","is_public","ChangePrivacyButton","isProfile","dispatchPrivacyUpdate","filmDispatch","isChanging","setIsChanging","playlistApi","res","undefined","changePrivacy","privacyButton","ButtonBase","marginLeft","borderRadius","PlaylistDropdownMenu","filmID","handlePlaylistClose","isPreview","useRipple","background","addRipple","ripples","createToast","handleOnPlaylistDropdownMenuBottom","scrollRef","userApi","limit","forEach","indexOf","getMyPlaylists","films_id","errorMessage","response","errors","creatPlaylist","is_remove_films","message","addToPlaylist","Dropdown","Menu","setTimeout","Divider","maxHeight","overflowY","minHeight","Check","FormCheck","Input","handleAddToPlaylist","checked","Label","ItemText","FormControl","isInvalid","value","Feedback","Select","Group","disabled","PlaylistAddButton","setIsOpen","metadata","bsPrefix","color","display","verticalAlign","opacity","checkIfPlaylistButtonClick","tagName","parentNode","animVal","includes","displayCommentDate","comment","date","Date","createdAt","getDate","getMonth","getFullYear","getHours","getMinutes","RemoveButton","handleRemove","Film","handleRedirect","isRecommendations","concat","line","author_name","views","Home","handleOnHomePageData","fetchData","getAllFilms","FilmContext","initialPreviewState","video","likes","dislikes","description","isLiked","isDisliked","isLikeButtonClicked","likeAction","isDescExpanded","previewReducer","FilmPreview","playerRef","getBoundingClientRect","setPlayerNode","playerNode","measure","requests","match","details","Promise","allSettled","filmResponse","filmViewResponse","userResponse","status","filmData","comments","commentsCount","comments_count","liked","disliked","handleGetFilm","likeResult","likeData","userResult","handleLike","handleTruncate","TruncateButton","playsInline","poster","Fragment","whiteSpace","textAlign","truncateText","textTruncateChild","recommendationsInitialState","recommendationsReducer","FilmsRecommendations","filmState","handleRecommendationsOnBottom","exclude","isPreviewLoaded","initialLoad","film_id","sort","commentsInitialState","toRemove","isSorting","sorts","dir","commentsReducer","filter","sortToChange","Comments","showModal","handleOnCommentsBottom","commentApi","loadSortedComments","loadComments","addComment","substring","removeComment","sortParams","sortComments","DropdownButton","tmpSort","handleSortComments","sortTmp","Item","active","TextField","label","multiline","fullWidth","maxrow","author_id","handleRemoveComment","filmPlaylistInitialState","currentFilm","currentFilmIndex","isRemovingPlaylist","isRemovingFilm","removingFilmId","headerHeight","playerHeight","filmPlaylistReducer","filtered","findIndex","Playlist","clearPlaylist","headerRef","filmIndex","filmId","Array","prototype","call","reloadPlaylist","handleReloadPlaylist","parsed","queryString","list","handleGetPlaylist","removePlaylist","removeFilm","handleRemoveFromPlaylist","onYReachEnd","onScrollY","isNonExisting","fontWeight","justifyContent","alignItems","image_not_found","filmInitialState","filmReducer","FilmProvider","children","Provider","useWindowWidth","historyObject","login","username","email","password","register","forget","authInitialState","nick","isSubmitted","isSending","isSuccess","isError","authReducer","Login","setShow","authApi","refreshToken","replace","sendData","modalClose","goBack","size","closeButton","onSubmit","htmlFor","Control","Alert","Register","submitData","maxLength","searchInitialState","resetSort","filters","Search","searchParams","getFilms","handleOnclick","filterClick","sortClick","dirClick","tmpType","in","filterTmp","fontSize","time","today","abs","floor","UTC","parseSearchDate","lg","flex","Truncate","lines","playlistsCount","playlistsPageReducer","responseCount","colWidth","setStyle","margin","PlaylistsPage","handleOnPlaylistsBottom","fetchInitialPlaylists","fetchPlaylists","setRedirect","playlistID","setFileInitialState","isFilm","file","CHOOSE_FILM","CHOOSE_THUMBNAIL","preview","alertInitialState","filmAddInitialState","thumbnail","filmAddReducer","alert","fileName","FilmAdd","clearUser","filmInputRef","thumbnailInputRef","FormData","set","handleFileChoose","files","URL","createObjectURL","muted","autoPlay","loop","accept","as","NotFound","error_404","userInitialState","settingsInitialState","initialUser","success","settingsReducer","Settings","updateUser","getUser","toUpdate","accessToken","updateUserData","ResetPassword","ForgotPassword","PrivateRoute","Component","component","rest","render","to","from","initialProfileState","filmsCount","profileReducer","resource","isPlaylist","Profile","handleProfileOnBottom","skipFilms","skipPlaylists","fetchInitialData","record","handleRedirectPlaylist","WithAxios","interceptors","use","isAuth","originalRequest","config","_retry","url","reject","setItem","stringify","UserProvider","setUser","scrollTo","decoded","jwt_decode","getMe","removeItem","reload","library","add","faSearch","faPlus","faThumbsUp","faThumbsDown","faEye","faPlay","faFilter","faCaretUp","faCaretDown","faEllipsisV","faSortDown","faSortUp","faTrashAlt","faTimes","faGlobeEurope","faLock","pathName","App","toast","clearToast","Toast","autohide","exact","path","SettingsComponent","LoginComponent","RegisterComponent","ResetPasswordComponent","ForgotPasswordComponent","FilmComponent","HomeComponent","SearchComponent","AddFilmComponent","ProfileComponent","NotFoundComponent","hostname","ToastProvider","isPrevoius","setToast","RemoveModalProvider","setRemoveModalData","prevState","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.71012c29.chunk.js","sourcesContent":["import axios from 'axios'\nconst instance = axios.create({\n    baseURL: process.env.REACT_APP_API_URL\n})\nexport default instance","const authHeader = () => {\n\n    let token = JSON.parse(localStorage.getItem('accessToken'));\n\n    if(token){\n        return { 'Authorization' : 'Bearer ' + token};\n    } else{\n        return {};\n    }\n}\n\nexport default authHeader","import axios from '../helpers/axios'\nimport authHeader from '../helpers/authHeader'\n\n\nexport const all = (params) => axios.get('films/', {params})\nexport const index = (id) => axios.get(`films/${id}`)\nexport const search = (params) => axios.get('films/search', {params})\n\nexport const view = (id) => axios.patch(`films/${id}/view`)\n\nexport const video = (id) => axios.get(`films/${id}/video`)\nexport const thumbnail = (id, params) => axios.get(`films/${id}/thumbnail`, {params})\n\nexport const create = (form) => axios.post(`films`, form, {headers: authHeader()})\n\nexport const update = (id, form) => axios.put(`films/${id}`, form, {headers: authHeader()})\nexport const partialUpdate = (id, form) => axios.patch(`films/${id}`, form, {headers: authHeader()})\n\nexport const like = (id, form) => axios.patch(`films/${id}/action`, form, {headers: authHeader()})\n\nexport const remove = (id) => axios.delete(`films/${id}`, { headers: authHeader() })\n\n\n\n","import { createContext } from 'react';\nconst UserContext = createContext({ name: '', id: null, auth: false, isInitialLoaded: false });\nexport default UserContext","export const initialSearchState = {\n    options: [],\n    isLoading: false,\n    isAllFetched: false,\n    isSearching: false,\n    isOpen: false,\n    selected: null,\n    title: ''\n}\n\nexport function searchReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                selected: null,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'pick-option': {\n            return {\n                ...state,\n                title: action.title,\n                selected: action.selected\n            }\n        }\n        case 'success-load': {\n            return {\n                ...state,\n                isLoading: false,\n                isSearching: false,\n                isAllFetched: action.payload.length < 10,\n                options: [...state.options, ...action.payload]\n            }\n        }\n        case 'success-search': {\n            return {\n                ...state,\n                isLoading: false,\n                isSearching: false,\n                isAllFetched: action.payload.length < 10,\n                options: action.payload\n            }\n        }\n        case 'clear': {\n            return initialSearchState\n        }\n        case 'load': {\n            return !state.isLoading && !state.isAllFetched ? {\n                ...state,\n                isLoading: true,\n                isAllFetched: false,\n                isSearching: false,\n            } : state\n        }\n        case 'search': {\n            return {\n                ...state,\n                options: [],\n                isSearching: true,\n                isLoading: false,\n                isAllFetched: false\n            }\n        }\n        default: return state\n    }\n}","import { useCallback, useEffect, useRef, useMemo } from 'react';\nimport lodashDebounce from 'lodash.debounce';\n\nconst createCallback = (debounce, handleOnScroll, options) => {\n  if (debounce) {\n    return lodashDebounce(handleOnScroll, debounce, options);\n  } else {\n    return handleOnScroll;\n  }\n};\n\nfunction useBottomScrollListener(\n  onBottom = () => { },\n  options = {},\n) {\n  const { offset, triggerOnNoScroll, debounce, debounceOptions, id } = useMemo(\n    () => ({\n      offset: options?.offset ?? 20,\n      debounce: options?.debounce ?? 200,\n      debounceOptions: options?.debounceOptions ?? { leading: true },\n      triggerOnNoScroll: options?.triggerOnNoScroll ?? false,\n      id: options?.id ?? null\n    }),\n    [options?.offset, options?.debounce, options?.debounceOptions, options?.triggerOnNoScroll, options?.id],\n  );\n\n  const debouncedOnBottom = useMemo(() => createCallback(debounce, onBottom, debounceOptions), [onBottom, debounce, debounceOptions]);\n  const containerRef = useRef(null);\n  const handleOnScroll = useCallback(() => {\n\n    if (containerRef.current != null) {\n      const scrollNode = containerRef.current;\n      const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + scrollNode.clientHeight);\n      const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\n\n      if (scrollPosition <= scrollContainerBottomPosition) {\n        debouncedOnBottom();\n      }\n    } else if (id !== null) {\n      const scrollNode = document.getElementById(id);\n      if (scrollNode) {\n        const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + scrollNode.clientHeight);\n        const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\n        if (scrollPosition <= scrollContainerBottomPosition) {\n          debouncedOnBottom();\n        }\n      }\n    } else {\n      const scrollNode = document.scrollingElement || document.documentElement;\n      const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + window.innerHeight);\n      const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\n\n      if (scrollPosition <= scrollContainerBottomPosition) {\n        debouncedOnBottom();\n      }\n    }\n  }, [debouncedOnBottom, offset, id]);\n\n  useEffect(() => {\n    const ref = containerRef.current;\n    const node = document.getElementById(id)\n\n    if (ref != null) {\n      ref.addEventListener('scroll', handleOnScroll);\n    } else if (node !== null) {\n      node.addEventListener('scroll', handleOnScroll);\n    } else {\n      window.addEventListener('scroll', handleOnScroll);\n    }\n\n    if (triggerOnNoScroll) {\n      handleOnScroll();\n    }\n\n    return () => {\n      if (ref != null) {\n        ref.removeEventListener('scroll', handleOnScroll);\n      } else if (node !== null) {\n        node.addEventListener('scroll', handleOnScroll);\n      } else {\n        window.removeEventListener('scroll', handleOnScroll);\n      }\n    };\n  }, [handleOnScroll, triggerOnNoScroll, id]);\n\n  return containerRef;\n}\n\nexport default useBottomScrollListener;\n","import { useState, useEffect } from \"react\";\n\nconst useWindowsWidth = () => {\n  const [isScreenSmall, setIsScreenSmall] = useState(false);\n\n  let checkScreenSize = () => {\n    setIsScreenSmall(window.innerWidth < 600);\n  };\n  useEffect(() => {\n    checkScreenSize();\n    window.addEventListener(\"resize\", checkScreenSize);\n\n    return () => window.removeEventListener(\"resize\", checkScreenSize);\n  }, []);\n\n  return isScreenSmall;\n};\n\nexport default useWindowsWidth;\n","/* eslint-disable jsx-a11y/role-has-required-aria-props */\n/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { useState, useEffect, useCallback, useContext, useReducer, useRef } from 'react';\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Avatar from '@material-ui/core/Avatar';\n\nimport { Button, Col, Row, Form, Nav, Navbar, Spinner } from 'react-bootstrap';\n\nimport Menu from \"@material-ui/core/Menu/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem/MenuItem\";\n\nimport headerIcon from '../../images/header.png';\nimport * as filmApi from '../../services/filmService'\n\nimport { AsyncTypeahead, Menu as AsyncMenu, MenuItem as AsyncMenuItem } from 'react-bootstrap-typeahead';\n\nimport UserContext from '../../helpers/contexts/user/userContext'\n\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\nimport './navbar.css';\nimport { initialSearchState, searchReducer } from './reducer';\n\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\nimport useWindowsWidth from '../../helpers/hooks/useWindowsWidth';\n\nfunction NavbarComponent(props) {\n\n    let history = useHistory();\n    let location = useLocation();\n\n    const onSmallScreen = useWindowsWidth();\n\n    const { user, logout } = useContext(UserContext);\n\n    const [state, dispatch] = useReducer(searchReducer, initialSearchState)\n\n    const [isExpanded, setIsExpanded] = useState(false)\n\n    const { options, title, isLoading, isAllFetched, isSearching, isOpen, selected } = state\n\n    const handleSearchOnBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && !isSearching && isOpen) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isLoading, isAllFetched, isSearching, isOpen])\n\n    useBottomScrollListener(handleSearchOnBottom, { id: 'typeahead-navbar' })\n\n    const typeaheadRef = useRef(null)\n\n    const [anchorEl, setAnchorEl] = useState(null)\n\n    const filterBy = () => true;\n\n    useEffect(() => {\n        document.addEventListener(\"keydown\", handleKeyDown);\n\n        return function cleanup() {\n            document.removeEventListener(\"keydown\", handleKeyDown);\n        }\n    })\n\n    useEffect(() => {\n        setIsExpanded(false)\n    }, [location])\n\n    useEffect(() => {\n        async function getAllSearchedFilms() {\n            await filmApi.search({ search: title, skip: options.length })\n                .then(({ data }) => {\n                    const options = data.map((film) => ({\n                        ...film,\n                        img: `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=small_webp`\n                    }));\n\n                    dispatch({\n                        type: 'success-load',\n                        payload: options\n                    })\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (isLoading) getAllSearchedFilms()\n    }, [isLoading, title, options.length])\n\n    useEffect(() => {\n        async function getAllSearchedFilms() {\n            await filmApi.search({ search: title })\n                .then(({ data }) => {\n                    const options = data.map((film) => ({\n                        ...film,\n                        img: `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=small_webp`\n                    }));\n                    dispatch({\n                        type: 'success-search',\n                        payload: options\n                    })\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (isSearching) getAllSearchedFilms()\n    }, [isSearching, title])\n\n    const handleKeyDown = (event) => {\n        if (event && event.target && event.target.className &&\n            event.target.className === \"rbt-input-main form-control rbt-input  focus\") {\n            let keyCode = event.keyCode || event.charCode;\n            console.log(keyCode)\n\n            switch (keyCode) {\n                case 13:\n                    handleSearchSubmit(event);\n                    break;\n                case 9:\n                    if (onSmallScreen)\n                        handleSearchSubmit(event);\n                    break;\n                default:\n                    break;\n            }\n        }\n    };\n\n    const handleSelect = (eventKey) => {\n\n        switch (eventKey) {\n            case 'add_film': {\n                history.push(`${process.env.REACT_APP_PATH_NAME}add`);\n                break;\n            }\n            case 'playlists':\n                history.push(`${process.env.REACT_APP_PATH_NAME}playlists`)\n                break;\n            default: break;\n        }\n    }\n\n    const handleSearchSubmit = (e) => {\n        e.preventDefault();\n\n        document.getElementById(\"search-form\").reset();\n        if (typeaheadRef) typeaheadRef.current.clear();\n\n        if (selected) {\n            history.push({\n                pathname: `${process.env.REACT_APP_PATH_NAME}film/${selected.id}`,\n                search: '',\n                state: {}\n            });\n        }\n        else if (title === '') {\n            history.push({\n                pathname: `${process.env.REACT_APP_PATH_NAME}search`,\n                search: `?title=${title}`,\n                state: {}\n            });\n        }\n        else if (options.length === 1) {\n            history.push({\n                pathname: `${process.env.REACT_APP_PATH_NAME}film/${options[0].id}`,\n                search: '',\n                state: {}\n            });\n        } else {\n            history.push({\n                pathname: `${process.env.REACT_APP_PATH_NAME}search`,\n                search: `?title=${title}`,\n                state: { films: options }\n            });\n        }\n\n        dispatch({\n            type: 'clear'\n        })\n    }\n\n    const handleProfileMenuOpen = event => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleProfileMenuClose = () => {\n        setAnchorEl(null);\n    };\n\n    const handleLogoutClick = () => {\n        setAnchorEl(null);\n        logout()\n    };\n\n    const handleProfileClick = () => {\n        setAnchorEl(null);\n        history.push(`${process.env.REACT_APP_PATH_NAME}profile`)\n    };\n\n    const handleSettingsClick = () => {\n        setAnchorEl(null);\n        let pathname = location.pathname\n        if (pathname === process.env.REACT_APP_PATH_NAME) pathname = pathname.slice(0, -1)\n        \n        history.push({\n            pathname: `${pathname}/settings`,\n            search: location.search,\n            state: location.state\n        });\n    }\n\n    const handleToggle = (expanded) => {\n        setIsExpanded(expanded)\n    }\n    const handleSearch = useCallback((query) => {\n        dispatch({\n            type: 'search',\n            payload: query\n        })\n    }, []);\n\n    const handleLogin = () => {\n        let pathname = location.pathname\n        if (pathname === process.env.REACT_APP_PATH_NAME) pathname = pathname.slice(0, -1)\n        history.push({\n            pathname: `${pathname}/login`,\n            search: location.search,\n            state: location.state\n        });\n    }\n\n    return (\n\n        <Navbar\n            expanded={isExpanded}\n            className=\"py-2 px-4\"\n            expand=\"md\" bg=\"light\" variant=\"light\"\n            onToggle={handleToggle}\n            onSelect={e => handleSelect(e)}>\n\n            <Col className=\"pb-2\"\n                xs={{ span: 5, order: 'first' }}\n                sm={{ span: 2, order: 'first' }}\n                md={{ span: 4, order: 'first' }}>\n                <Navbar.Brand style={{ cursor: 'pointer' }}\n                    className=\"d-flex align-items-center\"\n                    onClick={() => history.push(process.env.REACT_APP_PATH_NAME)}>\n                    <Navbar.Brand>\n                        {\n                            <img alt=\"\"\n                                src={headerIcon} width=\"30\"\n                                height=\"30\" />\n                        }\n                    </Navbar.Brand>\n                    {<p className=\"d-none d-md-inline m-0\">FilmApp</p>}\n                </Navbar.Brand>\n            </Col>\n\n            <Col className=\"text-right d-md-none m-button pb-2 \"\n                xs={{ span: 6, order: 2 }}\n                sm={{ span: 2, order: 'last' }}>\n                <Navbar.Toggle className=\"m-button\" aria-controls=\"responsive-navbar-nav\" />\n            </Col>\n\n            <Col xs={{ span: 12, order: 3 }}\n                sm={{ span: 8, order: 2 }}\n                md={{ span: 5, order: 2 }}>\n                <Form id=\"search-form\" inline=\"true\">\n                    <Row className=\"m-0\" style={{ width: 100 + '%' }}>\n                        <Col xs={12} sm={10} className=\"p-0\">\n                            <AsyncTypeahead\n                                ref={typeaheadRef}\n                                className=\"search-bar\"\n                                useCache={false}\n                                filterBy={filterBy}\n                                id=\"typeahead-navbar\"\n                                isLoading={true}\n                                open={isOpen}\n                                placeholder=\"Search\"\n                                labelKey=\"title\"\n                                minLength={1}\n                                options={options}\n                                onSearch={handleSearch}\n                                onBlur={(event) => dispatch({ type: 'field', fieldName: 'isOpen', payload: false })}\n                                onFocus={(event) => {\n                                    if (title !== '')\n                                        dispatch({ type: 'field', fieldName: 'isOpen', payload: true })\n                                }}\n                                onKeyDown={(event) => dispatch({ type: 'field', fieldName: 'isOpen', payload: true })}\n                                onMenuToggle={(isOpen) => dispatch({ type: 'field', fieldName: 'isOpen', payload: isOpen })}\n                                onInputChange={(text, event) => {\n                                    dispatch({\n                                        type: 'field',\n                                        fieldName: 'title',\n                                        payload: text\n                                    })\n                                    if (text === '')\n                                        dispatch({\n                                            type: 'field',\n                                            fieldName: 'options',\n                                            payload: []\n                                        })\n                                }}\n                                onChange={(selected) => {\n                                    const title = selected.length > 0 ? selected[0].title : '';\n                                    dispatch({\n                                        type: 'pick-option',\n                                        title: title,\n                                        selected: selected.length > 0 ? selected[0] : null\n                                    })\n                                }}\n                                renderMenu={(results, menuProps) => (\n                                    <AsyncMenu {...menuProps} className=\"pt-4 pb-4\">\n                                        {results.map((result, index) => (\n                                            <AsyncMenuItem key={result.id} option={result} position={index}>\n                                                <Row className=\"p-0 m-0 entry__inner\" onClick={(e) => {\n                                                    e.stopPropagation()\n                                                    e.preventDefault()\n                                                    dispatch({\n                                                        type: 'clear'\n                                                    })\n                                                    document.getElementById(\"search-form\").reset();\n                                                    if (typeaheadRef) typeaheadRef.current.clear();\n\n                                                    history.push({\n                                                        pathname: `${process.env.REACT_APP_PATH_NAME}film/${result.id}`,\n                                                        search: '',\n                                                        state: {}\n                                                    });\n\n                                                }}>\n                                                    <img\n                                                        className=\"p-0\"\n                                                        alt=\"\"\n                                                        src={result.img}\n                                                        style={{\n                                                            height: '24px',\n                                                            marginRight: '10px',\n                                                            width: '24px',\n                                                        }}\n                                                    />\n                                                    <span className=\"entry__text\">{result.title}</span>\n                                                </Row>\n                                            </AsyncMenuItem>\n                                        ))}\n\n\n\n                                        {!isLoading && !isSearching && results.length === 0 && <a role=\"option\" className=\"dropdown-item disabled\" href=\"#\">No matches found.</a>}\n                                        {isSearching && <a role=\"option\" className=\"dropdown-item disabled\" href=\"#\">Searching...</a>}\n                                        {\n                                            <div style={{ height: 8 + 'px' }} className=\"d-flex justify-content-center\">\n                                                {isLoading && !isAllFetched && <Spinner animation=\"border\" />}\n                                            </div>\n                                        }\n                                    </AsyncMenu>\n                                )}\n\n                            />\n                        </Col>\n                        <Col sm={2}>\n                            <Button onClick={handleSearchSubmit}\n                                className=\"d-none d-sm-inline\"\n                                variant=\"light\">\n                                <FontAwesomeIcon icon=\"search\" />\n                            </Button>\n                        </Col>\n                    </Row>\n                </Form>\n            </Col>\n\n\n            <Col xs={{ span: 12, order: 'last' }}\n                sm={{ span: 12, order: 'last' }}\n                md={{ span: 3, order: 'last' }}>\n\n                <Navbar.Collapse className=\"justify-content-end\" id=\"responsive-navbar-nav\">\n\n                    <Nav activeKey=\"\" className=\"d-block d-sm-block d-md-flex  align-items-center\">\n                        <Nav.Link className=\"px-2\" eventKey=\"playlists\">Playlists</Nav.Link>\n                        {user.auth && <Nav.Link className=\"px-2\" eventKey=\"add_film\">Add</Nav.Link>}\n\n                        {\n                            user.auth ?\n                                (\n                                    <Avatar onClick={handleProfileMenuOpen}\n                                        className=\"pe-2 ps-2 custom-avatar m-button\">\n                                        {user.name.toUpperCase().charAt(0)}\n                                    </Avatar>\n\n                                ) :\n                                (\n                                    <Nav.Link className=\"pe-2 ps-2\" eventKey=\"login \"\n                                        onClick={() => handleLogin()}>\n                                        Login\n                                    </Nav.Link>\n                                )\n                        }\n                    </Nav>\n\n                </Navbar.Collapse>\n\n            </Col>\n\n            <Menu\n                id=\"film-navbar-menu\"\n                anchorEl={anchorEl}\n                keepMounted\n                open={Boolean(anchorEl)}\n                onClose={handleProfileMenuClose}\n            >\n                <MenuItem onClick={handleProfileClick}>Profile</MenuItem>\n                <MenuItem onClick={handleSettingsClick}>Settings</MenuItem>\n                <MenuItem onClick={handleLogoutClick}>Logout</MenuItem>\n            </Menu>\n\n        </Navbar>\n    )\n}\n\nexport default NavbarComponent","export default \"data:image/png;base64,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\"","import { createContext } from 'react'\nconst RemoveModalContext = createContext({ show: false, isRemoving: false, id: null, type: null, title: '' })\nexport default RemoveModalContext","import { useContext } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport RemoveModalContext from \"../contexts/removeModal/removeModalContext\";\n\nconst RemoveModal = (props) => {\n    const { removeModalData, remove, clear } = useContext(RemoveModalContext)\n\n    const handleRemove = () => remove()\n\n    const handleClose = () => clear();\n\n    return (\n        <>\n            <Modal show={removeModalData.show} onHide={handleClose} centered>\n                <Modal.Header>\n                    <Modal.Title>Delete {removeModalData.type}</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>Do you really want to delete {removeModalData.type} <b>{removeModalData.title}</b>?\n                    <br />\n                    Action cannot be undone!\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={handleClose}>\n                        Cancel\n                    </Button>\n                    <Button variant=\"primary\" onClick={handleRemove}>\n                        Delete\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        </>\n    );\n}\n\nexport default RemoveModal","export const commentsMaxFetchCount = 10\nexport const recommendationsMaxFetchCount = 12\n\nexport const playlistButtonMaxFetchCount = 10\n\nexport const pageInitialMaxFetchCount = 40\nexport const pageMaxFetchCount = 20\n","import { pageInitialMaxFetchCount, pageMaxFetchCount } from \"../../config\"\n\nexport const initialState = {\n    films: null,\n    isLoading: false,\n    isAllFetched: false,\n    isInitialLoaded: false,\n    error: null,\n}\n\nexport const homePageReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'load': {\n            return {\n                ...state,\n                isLoading: true,\n                isAllFetched: false,\n                error: ''\n            }\n        }\n        case 'initial-load': { \n            return {\n                ...state,\n                films: [...new Set([...action.payload])],\n                isLoading: false,\n                isInitialLoaded: true,\n                isAllFetched: action.payload.length < pageInitialMaxFetchCount,\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                films: [...new Set([...state.films, ...action.payload])],\n                isLoading: false,\n                isAllFetched: action.payload.length < pageMaxFetchCount,\n                error: null\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isLoading: false,\n                isAllFetched: false,\n                error: action.payload\n            }\n        }\n        default:\n            return state\n    }\n}","import React, { useState, useEffect } from 'react';\nimport { Ratio } from 'react-bootstrap'\n\nfunction BlurredImageComponent(props) {\n\n    const [image, setImage] = useState(\"data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\")\n\n    useEffect(() => {\n        setImage(props.image);\n    }, [props.image])\n\n\n    return (\n        <Ratio aspectRatio=\"16x9\">\n            <img\n                alt=\"\"\n                className=\"embed-responsive-item play-image\"\n                src={image} />\n        </Ratio>);\n}\n\nexport default BlurredImageComponent;","import axios from '../helpers/axios'\nimport authHeader from '../helpers/authHeader'\n\n\nexport const me = (params) => axios.get('users/me', { params, headers: authHeader() })\nexport const partialUpdate = (body) => axios.patch('users', body, { headers: authHeader() })\n\nexport const userService = {\n    login,\n    logout,\n    register\n};\n\nfunction login(username, password) {\n\n    let loginHeaderMy = null\n\n    const requestOptions = {\n        method: 'POST',\n        headers: loginHeaderMy\n\n    };\n\n    return fetch(`${process.env.REACT_APP_API_URL}/users/auth`, requestOptions)\n        .then(handleResponse)\n        .then(user => {\n            localStorage.setItem('user', JSON.stringify(user));\n            return user;\n        })\n}\n\nfunction logout() {\n    localStorage.removeItem('user');\n}\n\nfunction register(user) {\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(user)\n    };\n    return fetch(`${process.env.REACT_APP_API_URL}/users/`, requestOptions)\n        .then(handleResponse);\n}\n\nfunction handleResponse(response) {\n    return response.text().then(text => {\n        const data = text && JSON.parse(text);\n        if (!response.ok) {\n            if (response.status === 401) {\n                logout();\n            }\n            const error = (data && data.errors) || response.statusText;\n            return Promise.reject(error);\n        }\n        return data;\n    })\n}\n\n","import axios from '../helpers/axios'\nimport authHeader from '../helpers/authHeader'\n\n\nexport const create = (body) => axios.post('playlists', body, { headers: authHeader() })\nexport const index = (id) => axios.get(`playlists/${id}`, { headers: authHeader() })\nexport const show = (params) => axios.get(`playlists`, { params, headers: authHeader() })\nexport const partialUpdate = (id, body) => axios.patch(`playlists/${id}`, body, { headers: authHeader() })\n\n\nexport const remove = (id) => axios.delete(`playlists/${id}`, { headers: authHeader() })\n\n","import { createContext } from \"react\";\nconst ToastContext = createContext('')\nexport default ToastContext","import { playlistButtonMaxFetchCount } from \"../../../config\"\n\nexport const playlistDropdownMenuInitialState = {\n    playlists: [],\n    isLoading: true,\n    isAllFetched: false,\n    isCreating: false,\n    isAdding: false,\n    playlistToUpgrade: null,\n    title: '',\n    isPublic: false,\n    error: '',\n}\n\nexport function playlistDropdownMenuReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                error: '',\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'load': {\n            return {\n                ...state,\n                isLoading: true,\n                isAllFetched: false,\n            }\n        }\n        case 'load-success': {\n            return {\n                ...state,\n                playlists: [...state.playlists, ...action.payload],\n                isLoading: false,\n                isAllFetched: action.payload < playlistButtonMaxFetchCount,\n                error: '',\n            }\n        }\n        case 'create': {\n            return {\n                ...state,\n                isLoading: false,\n                isCreating: true\n            }\n        }\n        case 'create-success': {\n            return {\n                ...state,\n                isLoading: false,\n                isCreating: false\n            }\n        }\n        case 'add': {\n            return {\n                ...state,\n                isLoading: false,\n                isAdding: true,\n                playlistToUpgrade: action.payload\n            }\n        }\n        case 'add-update-playlist': {\n            return {\n                ...state,\n                playlists: state.playlists.map(playlist => {\n                    if (playlist.id === state.playlistToUpgrade.id) return { ...playlist, contains: !playlist.contains }\n                    else return playlist\n                }),\n                playlistToUpgrade: null\n            }\n        }\n        case 'add-success': {\n            return {\n                ...state,\n                isAdding: false\n            }\n        }\n        case 'change-playlist-privacy-success': {\n            return {\n                ...state,\n                playlists: state.playlists.map(playlist => {\n                    if (playlist.id === action.payload.id) return { ...playlist, is_public: action.payload.is_public }\n                    return playlist\n                })\n            }\n        }\n        case 'error':\n            return {\n                ...state,\n                isLoading: false,\n                isAllFetched: false,\n                isCreating: false,\n                error: action.payload,\n                title: ''\n            }\n        default:\n            return state\n\n    }\n}\n","import { Col } from \"react-bootstrap\"\nimport { ButtonBase } from \"@material-ui/core\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { useEffect, useState } from \"react\"\nimport * as playlistApi from '../../services/playlistService'\n\nconst ChangePrivacyButton = ({ isPublic, id, isProfile, dispatchPrivacyUpdate, filmDispatch }) => {\n\n    const [isChanging, setIsChanging] = useState(false)\n\n\n    useEffect(() => {\n        async function changePrivacy() {\n            await playlistApi.partialUpdate(id, { is_public: !isPublic })\n                .then(res => {\n                    setIsChanging(false)\n\n                    dispatchPrivacyUpdate({\n                        type: 'change-playlist-privacy-success',\n                        payload: res.data\n                    })\n\n                    if (filmDispatch !== undefined) {\n                        filmDispatch({\n                            type: 'field',\n                            fieldName: 'reloadPlaylist',\n                            payload: true\n                        })\n                    }\n                })\n                .catch(err => {\n                    console.error(err)\n                    setIsChanging(false)\n                })\n        }\n        if (isChanging) changePrivacy()\n    }, [dispatchPrivacyUpdate, isChanging, isPublic, id, filmDispatch])\n\n    const handleChangePrivacy = (e) => {\n        e.stopPropagation()\n        if (!isChanging) setIsChanging(true)\n    }\n\n    const privacyButton = (\n        <ButtonBase\n            style={{ marginLeft: 'auto', borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\" }}\n            className=\"m-button\"\n            onClick={handleChangePrivacy}>\n            <FontAwesomeIcon icon={isPublic ? \"globe-europe\" : \"lock\"} />\n        </ButtonBase>\n    )\n\n    return isProfile ?\n        (\n            <Col className=\"text-center justify-content-center d-flex align-items-center p-0 flex-grow-0\"\n            >\n                <Col\n                    className=\"remove-holder p-0 m-0 flex-grow-0\"\n                    style={{ height: '24px', width: '24' }}>\n                    {privacyButton}\n                </Col>\n            </Col>\n        ) :\n        privacyButton\n}\n\nexport default ChangePrivacyButton","import React, { useCallback, useEffect, useContext, useReducer } from 'react';\nimport { Button, Col, Dropdown, Form, FormCheck, FormControl, Row, Spinner } from \"react-bootstrap\";\n\nimport * as userApi from '../../services/userService'\nimport * as playlistApi from '../../services/playlistService'\n\nimport ToastContext from '../../helpers/contexts/toast/toastContext';\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\nimport { playlistDropdownMenuReducer, playlistDropdownMenuInitialState } from './reducers/playlistDropdownMenuReducer'\nimport ChangePrivacyButton from '../../helpers/components/changePrivacyButton';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport useRipple from \"useripple\"\nimport { playlistButtonMaxFetchCount } from '../../config';\n\nfunction PlaylistDropdownMenu({ filmID, handlePlaylistClose, isPreview, filmDispatch }) {\n\n    const [addRipple, ripples] = useRipple({ background: \"black\" })\n\n    const { createToast } = useContext(ToastContext);\n    const [state, dispatch] = useReducer(playlistDropdownMenuReducer, playlistDropdownMenuInitialState);\n\n    const { playlists, title, isPublic, isLoading, isAllFetched, isCreating, isAdding, playlistToUpgrade, error } = state\n\n    const handleOnPlaylistDropdownMenuBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && !isCreating && !isAdding) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isLoading, isAllFetched, isCreating, isAdding])\n\n    const scrollRef = useBottomScrollListener(handleOnPlaylistDropdownMenuBottom);\n\n    useEffect(() => {\n        async function getMyPlaylists() {\n            await userApi.me({ playlists: true, skip: playlists.length, limit: playlistButtonMaxFetchCount })\n                .then(res => {\n\n                    let result = res.data.playlists\n\n                    result.forEach(playlist => {\n                        playlist.contains = playlist.films.indexOf(filmID) > -1\n                    });\n\n                    dispatch({\n                        type: 'load-success',\n                        payload: result\n                    })\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (isLoading) getMyPlaylists()\n\n    }, [filmID, playlists, isLoading])\n\n    useEffect(() => {\n\n        async function creatPlaylist() {\n            const body = { title: title, is_public: isPublic, films_id: [filmID] };\n\n            await playlistApi.create(body)\n                .then(res => {\n                    dispatch({\n                        type: 'create-success'\n                    })\n                    createToast(`Created playlist ${title}`)\n                    handlePlaylistClose()\n\n                })\n                .catch(err => {\n                    console.error(err)\n                    let errorMessage = null\n\n                    if (err.response && err.response.data && err.response.data.error) {\n                        errorMessage = err.response.data.error\n                    } else if (err.response && err.response.data && err.response.data.errors) {\n                        errorMessage = err.response.data.errors[0]\n                    }\n\n                    dispatch({\n                        type: 'error',\n                        payload: errorMessage === \"Path `title` is required.\" ? 'Playlist title is required' : errorMessage\n                    })\n                })\n        }\n\n        if (isCreating) creatPlaylist()\n\n    }, [isCreating, title, isPublic, createToast, handlePlaylistClose, filmID,])\n\n    useEffect(() => {\n        async function addToPlaylist() {\n\n            let body = { films_id: [filmID] };\n\n            body = playlistToUpgrade.contains ? { ...body, is_remove_films: true } : { ...body, is_remove_films: false }\n\n            const message = playlistToUpgrade.contains ? `Deleted from playlist ${playlistToUpgrade.title}` : `Added to playlist ${playlistToUpgrade.title}`\n\n            dispatch({\n                type: 'add-update-playlist',\n                playlist: playlistToUpgrade\n            })\n\n            await playlistApi.partialUpdate(playlistToUpgrade.id, body)\n                .then(res => {\n                    dispatch({\n                        type: 'add-success'\n                    })\n\n                    if (isPreview) {\n                        filmDispatch({\n                            type: 'field',\n                            fieldName: 'reloadPlaylist',\n                            payload: true\n                        })\n                    }\n                    createToast(message)\n                })\n                .catch(err => console.error(err))\n        }\n        if (isAdding && playlistToUpgrade) addToPlaylist()\n    }, [isAdding, playlistToUpgrade, createToast, filmDispatch, filmID, isPreview])\n\n    const handleAddToPlaylist = (playlist) => {\n        dispatch({\n            type: 'add',\n            payload: playlist\n        })\n    };\n\n    const handleCreatePlaylist = (e) => {\n        e.stopPropagation()\n        dispatch({\n            type: 'create'\n        })\n    };\n\n    return (\n\n        <Dropdown.Menu\n            onClick={e => e.stopPropagation()}\n            style={{ width: 240 + \"px\" }}>\n            <Row className=\"m-0 m-button playlist-add-button-ripple\" >\n                <Col className=\"playlist-add-exit-text-width\">Save to...</Col>\n                <Col xs={2} sm={2}\n                    onClick={(e) => {\n                        addRipple(e)\n                        setTimeout(handlePlaylistClose, 150)\n                    }}\n                    style={{ borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\" }}\n                    className=\"playlist-add-icon-holder p-0 playlist-add-button-ripple d-flex align-items-center text-center justify-content-center\">\n                    <FontAwesomeIcon icon=\"times\" />\n                    {ripples}\n                </Col>\n            </Row>\n            <Dropdown.Divider />\n            <div\n                ref={scrollRef}\n                style={{\n                    maxHeight: 100 + 'px', overflowY: 'scroll', minHeight: 3 + 'rem'\n                }}>\n\n                {\n                    playlists.map((playlist, index) => {\n                        return (<Row className=\"m-0 playlist-form-group\" key={playlist.id} >\n                            <Col xs={10} sm={10} className=\"p-0\">\n                                <Form.Check id={playlist.id} className=\"form-check\">\n                                    <FormCheck.Input type=\"checkbox\"\n                                        onChange={() => handleAddToPlaylist(playlist)}\n                                        checked={playlist.contains} />\n                                    <FormCheck.Label>\n                                        <p className=\"playlist-check-label\">\n                                            {playlist.title}\n                                        </p>\n                                    </FormCheck.Label>\n                                </Form.Check>\n\n                            </Col>\n                            <ChangePrivacyButton\n                                id={playlist.id}\n                                isPublic={playlist.is_public}\n                                isProfile={false}\n                                filmDispatch={filmDispatch}\n                                dispatchPrivacyUpdate={dispatch} />\n\n                        </Row>)\n                    })\n                }\n\n                {\n                    !isAllFetched && <div style={{ height: 32 + 'px' }} className=\"d-flex justify-content-center\">\n                        {isLoading && <Spinner animation=\"border\" />}\n                    </div>\n                }\n            </div>\n            <Dropdown.Divider />\n            <Dropdown.ItemText>Create a new playlist</Dropdown.ItemText>\n            <Row className=\"m-0 p-0\">\n                <Form>\n                    <FormControl\n                        isInvalid={error !== ''}\n                        onChange={(e) => dispatch({ type: 'field', fieldName: 'title', payload: e.target.value })}\n                        className=\"mb-2 mt-2\"\n                        placeholder=\"Enter playlist title...\" />\n\n                    <FormControl.Feedback type=\"invalid\"\n                        className=\"mb-2 mt-2\">\n                        {error}\n                    </FormControl.Feedback>\n                    <Form.Select aria-label=\"Privacy\" className=\"mb-2 mt-2\"\n                        onChange={(e) => dispatch({ type: 'field', fieldName: 'isPublic', payload: e.target.value === 'public' })}>\n                        <option value=\"private\">Private</option>\n                        <option value=\"public\">Public</option>\n                    </Form.Select>\n\n                    <Form.Group className=\"d-flex align-items-center mt-2\">\n                        <Button disabled={isCreating}\n                            onClick={isCreating ? null : handleCreatePlaylist}>Create</Button>\n\n                        {\n                            isCreating &&\n                            <Spinner className=\"ms-2\" animation=\"grow\" />\n                        }\n                    </Form.Group>\n\n                </Form>\n\n            </Row>\n\n        </Dropdown.Menu>\n\n\n    )\n}\n\nexport default PlaylistDropdownMenu\n","import React, { useState, useContext } from 'react';\nimport { Col, Dropdown } from \"react-bootstrap\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport PlaylistDropdownMenu from './playlistDropdownMenu'\nimport UserContext from '../../helpers/contexts/user/userContext';\nimport useRipple from \"useripple\"\n\nimport './playlistAdd.css'\n\nfunction PlaylistAddButton(props) {\n\n    const { user } = useContext(UserContext);\n\n    const [addRipple, ripples] = useRipple({ background: \"black\" })\n\n    const [isOpen, setIsOpen] = useState(false)\n\n    const handlePlaylistClose = () => {\n        setIsOpen(false)\n    }\n\n    const allClass = \"\"\n    const previewClass = \"col-sm-2 col-2 p-0\"\n\n    return (\n\n        user.auth ?\n            <Dropdown show={isOpen}\n                onToggle={(isOpen, event, metadata) => {\n                    setIsOpen(isOpen)\n                }} className={props.isPreview ? previewClass : allClass} >\n                <Dropdown.Toggle variant=\"link\" bsPrefix=\"p-0\"\n                    className=\"m-button playlist-add-button-ripple\"\n                    style={{ color: \"black\" }}>\n                    <div style={{ display: 'inline-block', width: '100%', height: '100%' }}>\n                        <Col\n                            onClick={addRipple}\n                            style={{ verticalAlign: 'top', borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\" }}\n                            className=\"playlist-add-icon-holder p-0 playlist-add-button-ripple\">\n                            <FontAwesomeIcon style={{ opacity: (isOpen ? 1 : \"\") }}\n                                className=\"playlist-add-icon\" icon=\"ellipsis-v\" />\n                            {ripples}\n                        </Col>\n                    </div>\n                </Dropdown.Toggle>\n                {isOpen && <PlaylistDropdownMenu\n                    isPreview={props.isPreview}\n                    filmDispatch={props.filmDispatch}\n                    isOpen={isOpen}\n                    filmID={props.filmID}\n                    handlePlaylistClose={handlePlaylistClose} />}\n            </Dropdown>\n            :\n            null\n\n    )\n}\n\nexport default PlaylistAddButton\n","export const checkIfPlaylistButtonClick = (target) => {\n    if ((target.tagName === 'path' && target.parentNode.className.animVal && target.parentNode.className.animVal.includes('playlist-add-icon')) ||\n        (target.tagName === 'svg' && target.className.animVal && target.className.animVal.includes('playlist-add-icon')) ||\n        (target.className && typeof target.className === 'string' && target.className.includes('playlist-add-icon-holder')))\n        return true\n    return false\n}\n\nexport const displayCommentDate = (comment) => {\n    let date = new Date(Date.parse(comment.createdAt));\n    let time = (('0' + date.getDate()).slice(-2) + '-' + ('0' + (date.getMonth() + 1)).slice(-2) + '-'\n        + ('0' + date.getFullYear()).slice(-2)\n        + ' o ' + ('0' + date.getHours()).slice(-2) + ':' + ('0' + date.getMinutes()).slice(-2))\n    return time;\n};\n\nexport const parseSearchDate = (film) => {\n\n    let date = new Date(Date.parse(film.createdAt));\n    let today = new Date();\n\n\n    let time = Math.abs(Math.floor((\n        Date.UTC(\n            date.getFullYear(),\n            date.getMonth(),\n            date.getDate(),\n            date.getHours(),\n            date.getMinutes()) -\n        Date.UTC(\n            today.getFullYear(),\n            today.getMonth(),\n            today.getDate(),\n            today.getHours(),\n            today.getMinutes()))\n        / (1000 * 60)));\n\n    if (time / 60 >= 1) {\n        time /= 60;\n\n        if (time / 24 >= 1) {\n\n            time /= 24;\n\n            if (time / 30 >= 1) {\n\n                time /= 30;\n\n                if (time / 12 >= 1) {\n\n                    time = time / 12;\n                    time = Math.floor(time) + ' years ';\n\n                } else {\n                    time = Math.floor(time) + ' months ';\n                }\n\n            } else {\n                time = Math.floor(time) + ' days ';\n            }\n\n        } else {\n            time = Math.floor(time) + ' hours ';\n        }\n    } else {\n        time = Math.floor(time) + ' minutes ';\n    }\n\n    time = time + 'ago';\n\n    return time;\n};\n","import { Col } from \"react-bootstrap\"\nimport { ButtonBase } from \"@material-ui/core\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\n\nconst RemoveButton = ({ handleRemove }) => {\n    return (\n        <Col\n            className=\"text-center justify-content-center d-flex align-items-center p-0 flex-grow-0\">\n            <Col\n                className=\"remove-holder p-0 m-0 flex-grow-0\"\n                style={{ height: '24px', width: '24px' }}>\n                <ButtonBase\n                    style={{ marginLeft: 'auto', borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\" }}\n                    className=\"m-button \"\n                    onClick={handleRemove}>\n                    <FontAwesomeIcon icon=\"trash-alt\" />\n                </ButtonBase>\n            </Col>\n        </Col>\n    )\n}\n\nexport default RemoveButton","import React from 'react';\nimport { Col, Row } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport TextTruncate from \"react-text-truncate\";\n\nimport BlurredImageComponent from \"../../components/blurredImage\";\nimport PlaylistAddButtonComponent from \"../../components/add/playlistAddButton\";\n\nimport { checkIfPlaylistButtonClick } from '../index'\nimport RemoveButton from './removeButton';\nimport '../../components/filmPage/film.css'\n\nconst Film = ({ film, index, handleRedirect, handleRemove, isProfile, isRecommendations }) => {\n\n    const recommendationsClass = \"row mx-0 mb-4\"\n    const normalClass = \"col mb-5 col-12 col-sm-6 col-md-3 col-lg-2\"\n\n    return (\n        <div className={isRecommendations ? recommendationsClass : normalClass}>\n            <div className={(isRecommendations ? \"row p-0 m-0\" : \"col\").concat(\" play-outer-container remove-container\")}\n                onClick={(e) => {\n                    const isPlaylistButton = checkIfPlaylistButtonClick(e.target)\n                    if (!isPlaylistButton) handleRedirect(film.id)\n                }}>\n                <Col xs={isRecommendations ? 6 : 12} sm={isRecommendations ? 6 : 12}\n                    className=\"m-0 p-0\">\n                    <div\n                        className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\n                        <BlurredImageComponent\n                            image={film.img} />\n                        <FontAwesomeIcon className=\"play-middle\" icon=\"play\" />\n                    </div>\n                </Col>\n                <Col xs={isRecommendations ? 6 : 12} sm={isRecommendations ? 6 : 12}\n                    className={isRecommendations ? \"m-0\" : \"m-0 p-0\"}>\n                    <Row className=\"m-0 mt-1\">\n                        <Col className=\"film-preview-playlist-title-width p-0\">\n                            <TextTruncate line={1} text={film.title}\n                                className=\"mb-1 mt-1 title \" />\n                        </Col>\n\n                        <Col className=\"p-0 d-flex justify-content-end\">\n                            {\n                                isProfile ?\n                                    <RemoveButton handleRemove={handleRemove} /> :\n                                    <PlaylistAddButtonComponent\n                                        index={index}\n                                        filmID={film.id} />\n                            }\n                        </Col>\n                    </Row>\n                    <p className=\"mb-0 author-nick-color\">\n                        <small>{film.author_name}</small>\n                    </p>\n                    <p className=\"mb-0 film-views\">\n                        <small>{film.views} views</small>\n                    </p>\n                </Col>\n            </div>\n        </div>\n    )\n}\n\nexport default Film","import React, { useEffect, useReducer, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Row, Spinner } from 'react-bootstrap';\n\n\nimport * as filmApi from '../../services/filmService'\nimport { homePageReducer, initialState } from './reducer';\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\n\nimport Film from '../../helpers/components/film'\nimport { pageMaxFetchCount, pageInitialMaxFetchCount } from '../../config';\n\nfunction Home(props) {\n\n    let history = useHistory()\n\n    const [state, dispatch] = useReducer(homePageReducer, initialState)\n    const { films, isLoading, isAllFetched, isInitialLoaded } = state\n\n\n    const handleOnHomePageData = useCallback(() => {\n        if (!isLoading && !isAllFetched && isInitialLoaded) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isLoading, isAllFetched, isInitialLoaded])\n\n    useBottomScrollListener(handleOnHomePageData, { triggerOnNoScroll: true })\n\n    useEffect(() => {\n        async function fetchData() {\n            await filmApi.all({ limit: pageInitialMaxFetchCount }).then(res => {\n                let response = res.data;\n\n                response.forEach(film => {\n                    film.img = `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=small_webp`\n\n                });\n\n                dispatch({\n                    type: 'initial-load',\n                    payload: response\n                })\n            })\n        }\n        fetchData()\n\n    }, [])\n\n    useEffect(() => {\n        async function getAllFilms() {\n            await filmApi.all({ skip: films.length, limit: pageMaxFetchCount })\n                .then(res => {\n                    let response = res.data;\n\n                    response.forEach(film => {\n                        film.img = `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=small_webp`\n\n                    });\n\n                    dispatch({\n                        type: 'success',\n                        payload: response\n                    })\n                }).catch(err => console.error(err))\n        }\n        if (isLoading && isInitialLoaded && films) getAllFilms()\n    }, [isLoading, isInitialLoaded, films])\n\n    const handleRedirect = (id) => {\n        history.push({ pathname: `${process.env.REACT_APP_PATH_NAME}film/` + id });\n    };\n\n    return (\n        <Row className=\"mt-5 mx-2\">\n            {\n                films && films.map((film, index) => <Film key={film.id} film={film} index={index} handleRedirect={handleRedirect} />)\n            }\n\n            {\n                !isAllFetched && <div style={{ height: 32 + 'px', width: '100%' }} className=\"d-flex justify-content-center\">\n                    {(isLoading || !isInitialLoaded) && <Spinner animation=\"border\" />}\n                </div>\n            }\n\n        </Row>\n    )\n}\n\nexport default Home;\n","import { createContext } from 'react'\nconst FilmContext = createContext();\nexport default FilmContext","const initialFilm = {\n    img: '',\n    video: '',\n    film: '',\n    title: '',\n    views: '',\n    likes: '',\n    dislikes: '',\n    description: `\\r\\n\\n\\n`,\n}\n\nexport const initialPreviewState = {\n    film: initialFilm,\n    isLiked: false,\n    isDisliked: false,\n    isLikeButtonClicked: false,\n    likeAction: null,\n    isDescExpanded: false\n}\n\nexport function previewReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'like': {\n            return {\n                ...state,\n                isLikeButtonClicked: true,\n                likeAction: action.payload\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                film: action.film,\n                isLiked: action.isLiked,\n                isDisliked: action.isDisliked,\n                isLikeButtonClicked: false,\n                likeAction: null,\n                isDescExpanded: false\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isLikeButtonClicked: false,\n                likeAction: null\n            }\n        }\n        default: return state\n    }\n}","import React, { useState, useEffect, useCallback, useContext, useReducer } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom'\n\nimport { Button, Col, Row } from \"react-bootstrap\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport * as filmApi from '../../services/filmService'\nimport * as userApi from '../../services/userService'\n\nimport { Player } from 'video-react';\nimport TextTruncate from 'react-text-truncate';\n\nimport FilmContext from '../../helpers/contexts/film/filmContext'\n\nimport \"../../../node_modules/video-react/dist/video-react.css\";\nimport { initialPreviewState, previewReducer } from './reducers/previewReducer';\nimport UserContext from '../../helpers/contexts/user/userContext';\n\n\nfunction FilmPreview(props) {\n\n    let history = useHistory()\n    let location = useLocation()\n\n    const { user } = useContext(UserContext)\n\n    // eslint-disable-next-line no-unused-vars\n    const [filmState, filmDispatch] = useContext(FilmContext)\n\n    const playerRef = useCallback(node => {\n        if (node !== null) {\n            filmDispatch({\n                type: 'field',\n                fieldName: 'playerHeight',\n                payload: node.getBoundingClientRect().height\n            })\n            setPlayerNode(node)\n        }\n    }, [filmDispatch])\n\n    const [state, dispatch] = useReducer(previewReducer, initialPreviewState)\n\n    const { film, isLiked, isDisliked, isLikeButtonClicked, likeAction, isDescExpanded } = state\n\n    const [playerNode, setPlayerNode] = useState(null);\n\n\n    useEffect(() => {\n        if (playerNode) {\n\n            const measure = () => {\n                filmDispatch({\n                    type: 'field',\n                    fieldName: 'playerHeight',\n                    payload: playerNode.getBoundingClientRect().height\n                })\n            }\n\n            window.addEventListener(\"resize\", measure);\n\n            return () => window.removeEventListener(\"resize\", measure);\n        }\n    }, [playerNode, filmDispatch]);\n\n    useEffect(() => {\n        async function handleGetFilm() {\n            let requests = [filmApi.index(props.match.params.id), filmApi.view(props.match.params.id)]\n            if (user.auth) requests.push(userApi.me({ details: true }))\n\n            const [filmResponse, filmViewResponse, userResponse] = await Promise.allSettled(requests);\n\n            if (filmResponse.status === \"rejected\" || filmViewResponse.status === \"rejected\") {\n                filmDispatch({\n                    type: 'field',\n                    fieldName: 'error',\n                    payload: true\n                })\n                return\n            }\n\n\n            const filmData = filmResponse.value.data\n\n            filmDispatch({\n                type: 'success',\n                comments: filmData.comments,\n                commentsCount: filmData.comments_count\n            })\n\n            const film = {\n                ...filmData,\n                img: `${process.env.REACT_APP_API_URL}films/${filmData.id}/thumbnail?width=poster`,\n                video: `${process.env.REACT_APP_API_URL}films/${filmData.id}/video`,\n                views: filmViewResponse.value.data.views\n            }\n            let isLiked = false\n            let isDisliked = false\n\n\n            if (userResponse && userResponse.status === \"fulfilled\") {\n                const details = userResponse.value.data.details\n                isLiked = details.liked.indexOf(props.match.params.id) > -1\n                isDisliked = details.disliked.indexOf(props.match.params.id) > -1\n            }\n\n            dispatch({\n                type: 'success',\n                film: film,\n                isLiked: isLiked,\n                isDisliked: isDisliked\n            })\n\n        }\n        handleGetFilm()\n    }, [props.match.params.id, filmDispatch, user.auth])\n\n    useEffect(() => {\n        async function handleLike() {\n            if (likeAction === null) return\n\n            try {\n                const likeResult = await filmApi.like(film.id, { action: likeAction })\n\n                let likeData = likeResult.data\n                likeData.img = `${process.env.REACT_APP_API_URL}films/${likeData.id}/thumbnail?width=poster`\n                likeData.video = `${process.env.REACT_APP_API_URL}films/${likeData.id}/video`\n\n                const userResult = await userApi.me({ details: true })\n                const details = userResult.data.details\n                const isLiked = details.liked.indexOf(likeData.id) > -1\n                const isDisliked = details.disliked.indexOf(likeData.id) > -1\n\n                dispatch({\n                    type: 'success',\n                    film: likeData,\n                    isLiked: isLiked,\n                    isDisliked: isDisliked\n                })\n\n            } catch (err) {\n                console.error(err)\n                dispatch({\n                    type: 'error'\n                })\n                if (err.response && err.response.status === 401) {\n                    history.push(`${location.pathname}/login`);\n                }\n            }\n        }\n\n        if (isLikeButtonClicked) handleLike()\n    }, [film.id, isLikeButtonClicked, likeAction, history, location])\n\n    const handleTruncate = (e) => {\n        e.preventDefault();\n        dispatch({\n            type: 'field',\n            fieldName: 'isDescExpanded',\n            payload: !isDescExpanded\n        })\n    }\n\n    const handleLike = (action) => {\n        if (isLikeButtonClicked) return\n        dispatch({\n            type: 'like',\n            payload: action\n        })\n\n    };\n\n    const TruncateButton = (title) => {\n        return (<span>\n            <Button variant=\"link\"\n                className=\"p-0 m-0 mb-1 title fw-bold\"\n                onClick={handleTruncate}>{title}</Button>\n        </span>)\n    }\n    return (\n\n        <Col>\n            <Col sm={12}>\n                <div ref={playerRef}>\n                    <Player\n                        playsInline\n                        poster={film.img}\n                        src={film.video} />\n                </div>\n            </Col>\n            {\n                film &&\n                <React.Fragment>\n                    <Col className=\"mt-4\" sm={12}>\n                        <Row className=\"p-0 m-0\">\n                            <Col sm={12} className=\"p-0\">\n                                {!film.title && <p className=\"fw-bold\"><br /></p>}\n                                <p className=\"fw-bold\">{film.title}</p>\n                            </Col>\n                            <Col xs={4} sm={4} className=\"p-0\">\n                                <p><FontAwesomeIcon icon=\"eye\" /> &ensp;{film.views}</p>\n                            </Col>\n                            <Col xs={4} sm={4} className=\"text-right d-flex justify-content-end\">\n                                <p style={{ cursor: \"pointer\" }}\n                                    className={isLiked ? 'film-picked-thumb-color' : ''}\n                                    onClick={() => handleLike('like')}>\n                                    <FontAwesomeIcon icon=\"thumbs-up\" />\n                                    &ensp;{film.likes}\n                                </p>\n                            </Col>\n                            <Col xs={4} sm={4}>\n                                <p style={{ cursor: \"pointer\" }} className={isDisliked ? 'film-picked-thumb-color' : ''}\n                                    onClick={() => handleLike('dislike')}>\n                                    <FontAwesomeIcon icon=\"thumbs-down\" />\n                                    &ensp;{film.dislikes}\n                                </p>\n                            </Col>\n                            <Col sm={12} className=\"mt-4 mb-4 divider\" />\n\n                            <Col sm={12} className=\"p-0\" style={{ whiteSpace: 'pre-line', textAlign: 'justify' }}>\n                                <TextTruncate line={!isDescExpanded && 2}\n                                    truncateText=\"…\"\n                                    text={film.description}\n                                    textTruncateChild={TruncateButton('Show more')} />\n\n                                {isDescExpanded && TruncateButton('Show less')}\n                            </Col>\n                        </Row>\n                    </Col>\n                    <Col sm={12} className=\"mt-4 mb-2 divider\" />\n                </React.Fragment>\n            }\n        </Col>\n\n\n    )\n}\n\n\nexport default FilmPreview\n","import { recommendationsMaxFetchCount } from \"../../../config\"\n\nexport const recommendationsInitialState = {\n    films: null,\n    id: null,\n    isLoading: false,\n    isAllFetched: false,\n    isInitialLoaded: false,\n    error: null,\n}\n\nexport function recommendationsReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'clear': {\n            return recommendationsInitialState\n        }\n        case 'initial-success': {\n            return {\n                ...recommendationsInitialState,\n                films: action.films,\n                id: action.id,\n                isInitialLoaded: true\n            }\n        }\n        case 'load': {\n\n            return {\n                ...state,\n                isLoading: true,\n                isAllFetched: false\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                films: [...state.films, ...action.payload],\n                isLoading: false,\n                isAllFetched: action.payload.length < recommendationsMaxFetchCount\n            }\n        }\n        case 'error': {\n            return {\n                ...recommendationsInitialState,\n                error: action.payload\n            }\n        }\n        default: return state\n    }\n}\n","import React, { useEffect, useReducer, useCallback, useContext } from 'react';\n\nimport { Col, Spinner } from \"react-bootstrap\";\n\nimport * as filmApi from '../../services/filmService'\n\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\nimport Film from '../../helpers/components/film';\nimport { recommendationsReducer, recommendationsInitialState } from './reducers/recommendationsReducer'\nimport { recommendationsMaxFetchCount } from \"../../config\"\nimport FilmContext from '../../helpers/contexts/film/filmContext';\n\nfunction FilmsRecommendations(props) {\n\n    // eslint-disable-next-line no-unused-vars\n    const [filmState, filmDispatch] = useContext(FilmContext)\n\n    const [state, dispatch] = useReducer(recommendationsReducer, recommendationsInitialState)\n\n    const { films, isLoading, isAllFetched, isInitialLoaded, id, error } = state\n\n    const handleRecommendationsOnBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && isInitialLoaded && !error && id) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isLoading, isAllFetched, isInitialLoaded, error, id])\n\n    useBottomScrollListener(handleRecommendationsOnBottom)\n\n    useEffect(() => {\n        async function initialLoad() {\n            await filmApi.all({ exclude: props.match.params.id, limit: recommendationsMaxFetchCount })\n                .then(res => {\n                    let films = res.data;\n\n                    films.forEach(film => {\n                        film.img = `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=small_webp`\n\n                    });\n\n                    dispatch({\n                        type: 'initial-success',\n                        films: films,\n                        id: props.match.params.id\n                    })\n\n\n                })\n                .catch(err => console.error(err))\n        }\n\n        dispatch({\n            type: 'clear'\n        })\n\n        if (filmState.isPreviewLoaded) {\n            initialLoad()\n        }\n    }, [props.match.params.id, filmState.isPreviewLoaded])\n\n    useEffect(() => {\n        if (filmState.error) {\n            dispatch({\n                type: 'error',\n                payload: filmState.error\n            })\n        }\n    }, [filmState.error])\n\n    useEffect(() => {\n        async function fetchData() {\n            await filmApi.all({ exclude: id, skip: films.length, limit: recommendationsMaxFetchCount }).then(res => {\n                let films = res.data;\n\n                films.forEach(film => {\n                    film.img = `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=small_webp`\n\n                });\n\n                dispatch({\n                    type: 'success',\n                    payload: films\n                })\n            })\n        }\n        if (isLoading && films && id) fetchData()\n    }, [isLoading, id, films])\n\n    return (\n\n        <Col>\n\n            {\n                films && films.map((film, index) => <Film key={film.id} film={film} index={index} isRecommendations={true} handleRedirect={() => props.handleRedirect(film.id)} />)\n            }\n\n\n            {\n                !isAllFetched && <div style={{ height: 32 + 'px' }} className=\"d-flex justify-content-center\">\n                    {(isLoading || !isInitialLoaded) && !error && <Spinner animation=\"border\" />}\n                </div>\n            }\n        </Col>\n    )\n}\n\nexport default FilmsRecommendations\n","import axios from '../helpers/axios'\nimport authHeader from '../helpers/authHeader'\n\n\nexport const all = (film_id, params) => axios.get(`films/${film_id}/comments`, { params })\n\nexport const create = (film_id, form) => axios.post(`films/${film_id}/comments`, form, { headers: authHeader() })\n\nexport const update = (id, update) => axios.put(`comments/${id}`, update, { headers: authHeader() })\n\nexport const remove = (id) => axios.delete(`comments/${id}`, { headers: authHeader() })\n\nexport const sort = (film_id, params) => axios.get(`films/${film_id}/comments/sort`, { params, headers: authHeader() })\n\n\n","import { commentsMaxFetchCount } from \"../../../config\"\n\nexport const commentsInitialState = {\n    comments: null,\n    commentsCount: null,\n    text: '',\n    id: null,\n    isLoading: false,\n    isAllFetched: false,\n    isInitialLoaded: false,\n    isAdding: false,\n    isRemoving: false,\n    toRemove: null,\n    isSorting: false,\n    sort: null,\n    sorts: [\n        { id: 'created_at', title: 'By date', dir: 1 },\n        { id: 'author_name', title: 'By author name', dir: 1 }\n    ],\n    error: null\n}\n\nexport function commentsReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'clear': {\n            return {\n                ...commentsInitialState,\n                id: action.id\n            }\n        }\n        case 'load': {\n            return !state.isLoading && !state.isAllFetched && state.isInitialLoaded && !state.isAdding &&\n                !state.error && state.id && !state.isSorting ?\n                {\n                    ...state,\n                    isLoading: true\n                } : state\n        }\n        case 'initial-success': {\n            return {\n                ...state,\n                comments: action.comments,\n                commentsCount: action.commentsCount,\n                isAllFetched: action.comments.length < commentsMaxFetchCount,\n                isInitialLoaded: true,\n                error: null,\n            }\n        }\n        case 'load-success': {\n            return {\n                ...state,\n                comments: [...state.comments, ...action.payload],\n                isLoading: false,\n                isAllFetched: action.payload.length < commentsMaxFetchCount\n            }\n        }\n        case 'add': {\n            return {\n                ...state,\n                isAdding: true,\n                error: null\n            }\n        }\n        case 'add-success': {\n            return {\n                ...state,\n                text: '',\n                commentsCount: state.commentsCount + 1,\n                comments: [action.payload, ...state.comments],\n                isAdding: false\n            }\n        }\n        case 'remove': {\n            return {\n                ...state,\n                isRemoving: true,\n                toRemove: action.payload\n            }\n        }\n        case 'remove-success': {\n            return {\n                ...state,\n                isRemoving: false,\n                toRemove: null,\n                commentsCount: state.commentsCount - 1,\n                comments: state.toRemove ? state.comments.filter(comment => comment.id !== state.toRemove.id) : state.data\n            }\n        }\n        case 'sort': {\n            return {\n                ...state,\n                comments: null,\n                isAllFetched: false,\n                sorts: state.sorts.map(sort => {\n                    if (sort.id === action.sortToChange.id) return action.sortToChange\n                    else return sort\n                }),\n                sort: action.sort,\n                isSorting: true,\n            }\n        }\n        case 'sort-success': {\n            return {\n                ...state,\n                isSorting: false,\n                comments: action.payload,\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isAdding: false,\n                isLoading: false,\n                isSorting: false,\n                error: action.payload,\n            }\n        }\n        default: return state\n    }\n}","import React, { useContext, useEffect, useReducer, useCallback } from 'react';\n\nimport { Button, Col, Dropdown, DropdownButton, Row, Spinner } from \"react-bootstrap\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport TextField from '@material-ui/core/TextField';\nimport ButtonBase from \"@material-ui/core/ButtonBase/ButtonBase\";\n\nimport * as commentApi from '../../services/commentService'\n\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\nimport { commentsReducer, commentsInitialState } from './reducers/commentsReducer';\nimport { commentsMaxFetchCount } from \"../../config\"\nimport UserContext from '../../helpers/contexts/user/userContext';\nimport FilmContext from '../../helpers/contexts/film/filmContext';\nimport { displayCommentDate } from '../../helpers';\nimport RemoveModalContext from '../../helpers/contexts/removeModal/removeModalContext';\n\nfunction Comments(props) {\n\n    const { showModal, clear, removeModalData } = useContext(RemoveModalContext)\n\n    const { user } = useContext(UserContext);\n\n    const [filmState, filmDispatch] = useContext(FilmContext)\n\n    const [state, dispatch] = useReducer(commentsReducer, commentsInitialState)\n    const {\n        comments,\n        commentsCount,\n        text,\n        isInitialLoaded,\n        isLoading,\n        isAllFetched,\n        isAdding,\n        id,\n        isRemoving,\n        toRemove,\n        isSorting,\n        sort,\n        sorts,\n        error\n    } = state\n\n    const handleOnCommentsBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && isInitialLoaded && !isAdding && !error && id && !isSorting) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isLoading, isAllFetched, isInitialLoaded, isAdding, error, id, isSorting])\n\n    useBottomScrollListener(handleOnCommentsBottom)\n\n    useEffect(() => {\n        dispatch({\n            type: 'clear',\n            id: props.match.params.id\n        })\n    }, [props.match.params.id])\n\n    useEffect(() => {\n        if (filmState.error) {\n            dispatch({\n                type: 'error',\n                payload: filmState.error\n            })\n        }\n    }, [filmState.error])\n\n    useEffect(() => {\n        function getCommentsFromContext() {\n            dispatch({\n                type: 'initial-success',\n                comments: filmState.comments,\n                commentsCount: filmState.commentsCount,\n            })\n        }\n\n        if (filmState.comments && filmState.commentsCount !== null) getCommentsFromContext()\n    }, [filmState.comments, filmState.commentsCount, filmDispatch])\n\n    useEffect(() => {\n        async function loadComments() {\n            await commentApi.all(id, { skip: comments.length, limit: commentsMaxFetchCount })\n                .then(res => {\n                    dispatch({\n                        type: 'load-success',\n                        payload: res.data\n                    })\n                })\n                .catch(err => {\n                    dispatch({\n                        type: 'error'\n                    })\n                })\n        }\n        async function loadSortedComments() {\n            await commentApi.sort(id, { [sort.id]: sort.dir, skip: comments.length, limit: commentsMaxFetchCount })\n                .then(res => {\n                    dispatch({\n                        type: 'load-success',\n                        payload: res.data\n                    })\n                })\n                .catch(err => {\n                    dispatch({\n                        type: 'error'\n                    })\n                })\n        }\n        if (isLoading && isInitialLoaded && !isAdding &&\n            comments && id && !isSorting) {\n            if (!sort)\n                loadComments()\n            else\n                loadSortedComments()\n        }\n    }, [isLoading, isAdding, id, comments, isInitialLoaded, isSorting, sort])\n\n\n    useEffect(() => {\n        const addComment = async () => {\n            const comment = { text: text }\n\n            await commentApi.create(id, comment)\n                .then(res => {\n                    dispatch({\n                        type: 'add-success',\n                        payload: res.data\n                    })\n                })\n                .catch(err => {\n                    dispatch({\n                        type: 'error',\n                        payload: err.response.status\n                    })\n                })\n        };\n        if (isAdding && !isLoading && id) addComment()\n    }, [isAdding, isLoading, id, text])\n\n    useEffect(() => {\n        async function removeComment() {\n            await commentApi.remove(toRemove.id)\n                .then(res => {\n                    dispatch({ type: 'remove-success' })\n                    clear()\n                })\n                .catch(err => {\n                    clear()\n                    console.error(err)\n                })\n        }\n\n        if (isRemoving && toRemove && removeModalData.isRemoving &&\n            removeModalData.id === toRemove.id && removeModalData.type === 'comment' &&\n            removeModalData.title === toRemove.text.substring(0, 10).concat('...')) removeComment()\n    }, [isRemoving, toRemove, clear, removeModalData])\n\n    useEffect(() => {\n        async function sortComments() {\n            const sortParams = sort ? { [sort.id]: sort.dir, limit: commentsMaxFetchCount } : {}\n\n            await commentApi.sort(id, sortParams)\n                .then(res => {\n                    dispatch({ type: 'sort-success', payload: res.data })\n                })\n                .catch(err => {\n                    dispatch({ type: 'error', payload: 'Sort error.' })\n                    console.error(err)\n                })\n        }\n        if (isSorting) sortComments()\n    }, [isSorting, sort, id])\n\n    const handleAddComment = () => {\n        dispatch({\n            type: 'add'\n        })\n    }\n\n    const handleRemoveComment = (comment) => {\n        if (removeModalData.isRemoving) return\n        dispatch({ type: 'remove', payload: comment })\n        showModal(comment.id, 'comment', comment.text.substring(0, 10).concat('...'))\n    }\n\n    const handleSortComments = (e) => {\n\n        let sortToChange = null\n\n        switch (e) {\n            case 'created_at':\n                sortToChange = sorts[0]\n\n                break;\n            case 'author_name':\n                sortToChange = sorts[1]\n                break;\n            default:\n                return;\n        }\n\n        let tmpSort = null\n\n        if (sort && sort.id === sortToChange.id) {\n            sortToChange.dir *= -1\n            tmpSort = sortToChange\n            if (sortToChange.dir === 1) {\n                tmpSort = null\n            }\n        } else {\n            tmpSort = sortToChange\n        }\n\n        dispatch({\n            type: 'sort',\n            sortToChange: sortToChange,\n            sort: tmpSort\n        })\n\n    };\n\n\n    return (\n\n        <Col>\n            <Row className=\"p-0 mt-4 mb-4\">\n                <Col xs={7} sm={5} md={4} className=\"d-flex align-items-center \">\n                    {commentsCount !== null && <span>{commentsCount}{commentsCount === 1 ? ' comment' : ' comments'} </span>}\n                </Col>\n                <Col xs={2} sm={2}>\n                    <DropdownButton\n                        variant=\"secondary\"\n                        title=\"Sort\"\n                        id=\"dropdown-button-drop-down\"\n                        onSelect={e => handleSortComments(e)}>\n                        {\n                            sorts.map(sortTmp => (\n                                <Dropdown.Item key={sortTmp.id} eventKey={sortTmp.id} active={sort && sortTmp.id === sort.id}>\n                                    {sortTmp.title}\n                                    {sort && sort.id === sortTmp.id && sortTmp.dir === 1 ?\n                                        <FontAwesomeIcon className=\"ms-2\" icon=\"sort-up\" /> :\n                                        sort && sort.id === sortTmp.id && sortTmp.dir === -1 ?\n                                            <FontAwesomeIcon className=\"ms-2\" icon=\"sort-down\" /> : \"\"}\n                                </Dropdown.Item>)\n                            )\n                        }\n                    </DropdownButton>\n                </Col>\n            </Row>\n            <TextField\n                value={text}\n                onChange={e => dispatch({ type: 'field', fieldName: 'text', payload: e.target.value })}\n                type=\"text\"\n                id=\"standard-multiline-flexible\"\n                label=\"Comment\"\n                multiline\n                fullWidth\n                maxrow=\"4\" />\n            <Col className=\"d-flex justify-content-end\" >\n                <Button disabled={isAdding || !text}\n                    className=\"mt-3\" variant=\"primary\"\n                    onClick={(text && !isAdding) ? handleAddComment : null}>\n                    Submit\n                </Button>\n            </Col>\n\n            {\n                isAdding && <div style={{ height: 32 + 'px' }} className=\"d-flex justify-content-center\">\n                    <Spinner animation=\"border\" />\n                </div>\n            }\n            {\n                comments && comments.map(comment => {\n                    return (\n                        <Col className=\"p-0 mt-4 remove-container\" sm={12} key={comment.id}>\n                            <div className=\"d-flex\">\n                                <p className=\"m-0 fw-bold\">\n                                    <small className=\"m-0 fw-bold\">{comment.author_name}&nbsp;</small>\n                                </p>\n                                <p >\n                                    <small className=\"m-0\">{displayCommentDate(comment)}</small>\n                                </p>\n                                {\n                                    user.id === comment.author_id &&\n                                    <Col\n                                        xs={2} sm={2}\n                                        className=\"d-flex justify-content-center align-items-center remove-holder p-0 m-0 ms-auto\"\n                                        style={{ height: 24 + 'px', width: 24 + \"px\" }}>\n                                        <ButtonBase\n                                            style={{ borderRadius: 20 + \"px\", width: 24 + \"px\", height: 24 + \"px\" }}\n                                            className=\"m-button cursor-pointer\"\n                                            onClick={() => handleRemoveComment(comment)}>\n                                            <FontAwesomeIcon icon=\"trash-alt\" />\n                                        </ButtonBase>\n                                    </Col>\n                                }\n                            </div>\n                            <p className=\"d-block d-sm-block\">\n                                <small>{comment.text}</small>\n                            </p>\n                        </Col>\n                    )\n                })\n            }\n\n            {\n                !isAllFetched && <div style={{ height: 32 + 'px' }} className=\"d-flex justify-content-center\">\n                    {(isLoading || !isInitialLoaded || isSorting) && !error && <Spinner animation=\"border\" />}\n                </div>\n            }\n\n        </Col>\n\n    )\n}\n\nexport default Comments","export default __webpack_public_path__ + \"static/media/image_not_found.c4ba1e76.png\";","\nexport const filmPlaylistInitialState = {\n    playlist: null,\n    currentFilm: null,\n    currentFilmIndex: 0,\n    isLoading: false,\n    isRemovingPlaylist: false,\n    isRemovingFilm: false,\n    removingFilmId: null,\n    headerHeight: null,\n    playerHeight: null\n}\n\nexport const filmPlaylistReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                isLoading: false,\n                playlist: action.playlist,\n                currentFilm: action.currentFilm,\n                currentFilmIndex: action.currentFilmIndex\n            }\n        }\n        case 'clear': {\n            return filmPlaylistInitialState\n        }\n        case 'remove-film': {\n            return {\n                ...state,\n                removingFilmId: action.payload,\n                isRemovingFilm: true\n            }\n        }\n        case 'remove-film-success': {\n\n            if (!state.removingFilmId)\n                return {\n                    ...state,\n                    isRemovingFilm: false\n                }\n\n            const filtered = state.playlist.films.filter(film => film.id !== state.removingFilmId)\n            return {\n                ...state,\n                currentFilm: state.removingFilmId === state.currentFilm ? null : state.currentFilm,\n                currentFilmIndex: state.removingFilmId === state.currentFilm ? 0 : filtered.findIndex(film => film.id === state.currentFilm) + 1,\n                playlist: {\n                    ...state.playlist,\n                    films: filtered\n                },\n                isRemovingFilm: false,\n            }\n        }\n        case 'change-playlist-privacy-success': {\n            return {\n                ...state,\n                playlist: { ...state.playlist, is_public: action.payload.is_public }\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isLoading: false,\n                error: action.payload\n            }\n        }\n        default:\n            return state\n    }\n}","import React, { useContext, useEffect, useCallback, useReducer } from 'react';\nimport { useLocation } from 'react-router-dom'\nimport { Col, Row } from \"react-bootstrap\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport queryString from \"query-string\";\n\nimport TextTruncate from \"react-text-truncate\";\nimport image_not_found from '../../images/image_not_found.png'; // Tell Webpack this JS file uses this image\n\nimport 'react-perfect-scrollbar/dist/css/styles.css';\nimport PerfectScrollbar from 'react-perfect-scrollbar'\n\nimport * as playlistApi from '../../services/playlistService'\nimport FilmContext from '../../helpers/contexts/film/filmContext';\n\nimport { filmPlaylistInitialState, filmPlaylistReducer } from './reducers/playlistReducer';\n\nimport UserContext from '../../helpers/contexts/user/userContext';\nimport RemoveButton from '../../helpers/components/removeButton';\nimport ChangePrivacyButton from '../../helpers/components/changePrivacyButton';\nimport RemoveModalContext from '../../helpers/contexts/removeModal/removeModalContext';\n\nfunction Playlist(props) {\n\n    const { showModal, clear, removeModalData } = useContext(RemoveModalContext)\n\n    let location = useLocation()\n\n    const { user } = useContext(UserContext)\n    const [filmState, filmDispatch] = useContext(FilmContext)\n\n    const [state, dispatch] = useReducer(filmPlaylistReducer, filmPlaylistInitialState)\n\n    const {\n        playlist,\n        isRemovingPlaylist,\n        isRemovingFilm,\n        removingFilmId,\n        currentFilm,\n        currentFilmIndex,\n        headerHeight,\n        playerHeight,\n        error\n    } = state\n\n    const clearPlaylist = () => {\n        dispatch({ type: 'clear' })\n    }\n\n    const headerRef = useCallback(node => {\n        if (node !== null) {\n            dispatch({\n                type: 'field',\n                fieldName: 'headerHeight',\n                payload: node.getBoundingClientRect().height\n            });\n        }\n    }, [])\n\n    useEffect(() => {\n        dispatch({\n            type: 'field',\n            fieldName: 'playerHeight',\n            payload: filmState.playerHeight\n        });\n    }, [filmState.playerHeight])\n\n    useEffect(() => {\n        dispatch({\n            type: 'error',\n            payload: filmState.error\n        });\n    }, [filmState.error])\n\n\n    useEffect(() => {\n        async function handleReloadPlaylist() {\n            await playlistApi.index(playlist.id)\n                .then(res => {\n\n                    let filmIndex = 0\n                    let filmId = null\n\n                    Array.prototype.forEach.call(res.data.films, (film, index) => {\n                        if (film && film.id === props.match.params.id) {\n                            filmIndex = index + 1\n                            filmId = film.id\n                        }\n                    })\n\n                    dispatch({\n                        type: 'success',\n                        playlist: res.data,\n                        currentFilm: filmId,\n                        currentFilmIndex: filmIndex\n                    })\n\n                    filmDispatch({\n                        type: 'field',\n                        fieldName: 'reloadPlaylist',\n                        payload: false\n                    })\n\n                    return res.data\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (filmState.reloadPlaylist && playlist) handleReloadPlaylist()\n\n    }, [filmState.reloadPlaylist, playlist, filmDispatch, props.match.params.id])\n\n\n\n    useEffect(() => {\n        const parsed = queryString.parse(location.search);\n        if (!parsed.list) {\n            clearPlaylist()\n            return\n        }\n\n        async function handleGetPlaylist() {\n            await playlistApi.index(parsed.list).then(res => {\n\n                let filmIndex = 0\n                let filmId = null\n\n                Array.prototype.forEach.call(res.data.films, (film, index) => {\n                    if (film && film.id === props.match.params.id) {\n                        filmIndex = index + 1\n                        filmId = film.id\n                    }\n                })\n\n                dispatch({\n                    type: 'success',\n                    playlist: res.data,\n                    currentFilm: filmId,\n                    currentFilmIndex: filmIndex\n                })\n                return res.data\n            }).catch(err => {\n                console.error(err)\n                clearPlaylist()\n            })\n        }\n        if (!error && filmState.isPreviewLoaded) handleGetPlaylist()\n    }, [props.match.params.id, location.search, error, filmState.isPreviewLoaded])\n\n\n    useEffect(() => {\n        async function removePlaylist() {\n            await playlistApi.remove(playlist.id)\n                .then(res => {\n                    clearPlaylist()\n                    clear()\n                })\n                .catch(err => {\n                    console.error(err)\n                    clear()\n                })\n        }\n        if (isRemovingPlaylist && removeModalData.isRemoving &&\n            removeModalData.id === playlist.id && removeModalData.type === 'playlist' &&\n            removeModalData.title === playlist.title) removePlaylist()\n    }, [clear, isRemovingPlaylist, playlist, removeModalData])\n\n\n    useEffect(() => {\n        async function removeFilm() {\n            await playlistApi.partialUpdate(playlist.id, { films_id: [removingFilmId], is_remove_films: true })\n                .then(res => {\n                    dispatch({\n                        type: 'remove-film-success'\n                    })\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (isRemovingFilm) removeFilm()\n    }, [isRemovingFilm, playlist, removingFilmId])\n\n    const handleRemovePlaylist = () => {\n\n        if (removeModalData.isRemoving) return\n\n        dispatch({\n            type: 'field',\n            fieldName: 'isRemovingPlaylist',\n            payload: true\n        })\n\n        showModal(playlist.id, 'playlist', playlist.title)\n    }\n\n    const handleRemoveFromPlaylist = (id) => {\n        if (isRemovingFilm) return\n\n        dispatch({\n            type: 'remove-film',\n            payload: id\n        })\n    }\n\n\n    return (\n\n        playlist && playerHeight && !error &&\n        <Col className='mb-4'>\n            <Col className='p-0 border'>\n                <Col ref={headerRef}\n                    style={{ height: headerHeight + 'px' }}\n                    className=\"remove-container pt-2 pb-2 film-preview-playlist-header\" sm={12}>\n                    <Row className=\"m-0 px-2\">\n                        <Col className=\"film-preview-playlist-title-width\">\n                            <p className=\"mb-1 fw-bold film-preview-playlist-text-truncate\">{playlist.title}</p>\n                        </Col>\n                        <Col className=\"justify-content-end d-flex\">\n                            {\n                                user.id === playlist.author_id &&\n                                <RemoveButton handleRemove={() => handleRemovePlaylist()} />\n                            }\n                        </Col>\n                        <Col xs={12} sm={12}>\n                            {\n                                user.id === playlist.author_id &&\n                                <ChangePrivacyButton\n                                    id={playlist.id}\n                                    isPublic={playlist.is_public}\n                                    isProfile={false}\n                                    dispatchPrivacyUpdate={dispatch} />\n                            }\n                            {\n                                user.id === playlist.author_id && <small>&nbsp;</small>\n\n                            }\n                            <small>{playlist.author_name}&nbsp;</small>\n                            <small\n                                className=\"film-preview-playlist-index\">\n                                - {currentFilmIndex}/{playlist.films.length}\n                            </small>\n                        </Col>\n                    </Row>\n                </Col>\n                <Col style={{ height: playerHeight - headerHeight + 'px' }}\n                    className=\"p-0 film-preview-playlist-container\" xs={12} sm={12}>\n                    <PerfectScrollbar\n                        onYReachEnd={() => { }}\n                        onScrollY={() => { }}>\n                        {\n                            playlist.films.map((film, index) => {\n                                return film && !film.isNonExisting ? (\n                                    <Row xs={12} sm={12} className=\"m-0 p-0 remove-container\" key={film.id}>\n                                        <Col xs={9} sm={9}\n                                            className={index === playlist.films.length - 1 ?\n                                                \"mt-3 mb-3 \" :\n                                                \"mt-3\"}\n                                            onClick={() => props.handleRedirect(film.id)} >\n                                            <Row className=\"m-0 p-0 play-outer-container\">\n                                                <Col xs={1} sm={1}\n                                                    className=\"text-center justify-content-center d-flex align-items-center p-0 ps-1\" >\n                                                    {\n                                                        (currentFilm === film.id) ?\n                                                            <small>\n                                                                <FontAwesomeIcon style={{ fontWeight: 300 }}\n                                                                    icon=\"play\" />\n                                                            </small>\n                                                            :\n                                                            <small>{index + 1}</small>\n\n                                                    }\n                                                </Col>\n                                                <Col xs={6} sm={6} className=\"pe-2 ps-2\"\n                                                    style={{\n                                                        display: 'flex',\n                                                        justifyContent: 'center',\n                                                        alignItems: 'center'\n                                                    }}>\n                                                    <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\n                                                        <img alt=\"\" className=\"embed-responsive-item play-image\"\n                                                            src={`${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=small_webp`} />\n                                                    </div>\n                                                </Col>\n                                                <Col xs={5} sm={5} className=\"p-0\">\n                                                    <TextTruncate line={1} text={film.title}\n                                                        className=\"mb-0 title fw-bold\" />\n                                                    <p className=\"mb-1 author-nick-color\">\n                                                        <small>{film.author_name}</small>\n                                                    </p>\n                                                </Col>\n                                            </Row>\n                                        </Col>\n                                        {\n                                            user.id === playlist.author_id &&\n                                            <RemoveButton handleRemove={() => handleRemoveFromPlaylist(film.id)} />\n                                        }\n\n                                    </Row>\n                                ) : (\n                                    <Row xs={12} sm={12} className=\"m-0 p-0 remove-container\" key={film.id}>\n                                        <Col xs={9} sm={9}\n                                            className={index === playlist.films.length - 1 ?\n                                                \"mt-3 mb-3 \" :\n                                                \"mt-3\"} >\n                                            <Row className=\"m-0 p-0\">\n                                                <Col xs={1} sm={1}\n                                                    className=\"text-center justify-content-center d-flex align-items-center p-0 ps-1\" >\n                                                    <small>{index + 1}</small>\n                                                </Col>\n                                                <Col xs={6} sm={6} className=\"pe-2 ps-2\"\n                                                    style={{\n                                                        display: 'flex',\n                                                        justifyContent: 'center',\n                                                        alignItems: 'center'\n                                                    }}>\n                                                    <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\n                                                        <img alt=\"\" className=\"embed-responsive-item play-image\"\n                                                            src={image_not_found} />\n                                                    </div>\n                                                </Col>\n                                                <Col xs={5} sm={5} className=\"p-0\">\n                                                    <TextTruncate line={2} text=\"Not found\"\n                                                        className=\"mb-0 title fw-bold\" />\n                                                </Col>\n                                            </Row>\n                                        </Col>\n                                        {\n                                            user.id === playlist.author_id &&\n                                            <RemoveButton handleRemove={() => handleRemoveFromPlaylist(film.id)} />\n                                        }\n\n                                    </Row>\n                                )\n                            })\n                        }\n                    </PerfectScrollbar>\n\n                </Col>\n            </Col>\n        </Col >\n\n\n    )\n}\n\n\nexport default Playlist\n","import { useReducer } from \"react\"\nimport FilmContext from \"./filmContext\"\n\nconst filmInitialState = {\n    isPreviewLoaded: false,\n    comments: null,\n    commentsCount: null,\n    playerHeight: null,\n    reloadPlaylist: false,\n    error: null\n}\n\nconst filmReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                isPreviewLoaded: true,\n                comments: action.comments,\n                commentsCount: action.commentsCount,\n                error: null\n            }\n        }\n        case 'reset-comments': {\n            return {\n                ...state,\n                comments: null,\n                commentsCount: null\n            }\n        }\n        default:\n            return state\n    }\n}\n\nconst FilmProvider = ({ children }) => {\n    const [filmState, filmDispatch] = useReducer(filmReducer, filmInitialState)\n\n\n    return (\n        <FilmContext.Provider value={[filmState, filmDispatch]}>\n            {children}\n        </FilmContext.Provider>\n    );\n}\n\nexport default FilmProvider","import React from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\n\nimport queryString from \"query-string\";\n\nimport FilmPreview from './preview'\nimport { Row, Col } from \"react-bootstrap\";\nimport FilmsRecommendations from './recommendations';\nimport Comments from './comments';\nimport Playlist from './playlist';\nimport useWindowWidth from '../../helpers/hooks/useWindowsWidth'\n\nimport FilmProvider from '../../helpers/contexts/film/filmProvider'\nimport './film.css'\n\n\nfunction Film(props) {\n\n    let history = useHistory()\n    let location = useLocation()\n\n    const onSmallScreen = useWindowWidth();\n\n    const handleRedirect = (id) => {\n        const parsed = queryString.parse(location.search);\n        let historyObject = { pathname: `${process.env.REACT_APP_PATH_NAME}film/` + id }\n        if (parsed.list) historyObject = { ...historyObject, search: `?list=${parsed.list}` }\n        history.push(historyObject);\n    };\n\n    return (\n        <FilmProvider>\n            <Row className=\"p-0 m-0 mt-4 mx-2\">\n                <Col xs={{ span: 12, order: 'first' }} sm={8}>\n                    <FilmPreview {...props} />\n                    {!onSmallScreen && <Comments {...props} />}\n                </Col>\n                <Col xs={{ span: 12, order: 2 }} sm={4}>\n                    <Playlist handleRedirect={handleRedirect} {...props} />\n                    <FilmsRecommendations handleRedirect={handleRedirect} {...props} />\n                </Col>\n                {onSmallScreen &&\n                    <Col xs={{ span: 12, order: 'last' }} sm={8}>\n                        <Comments {...props} />\n                    </Col>\n                }\n            </Row>\n\n        </FilmProvider>\n    )\n}\n\nexport default Film","import authHeader from '../helpers/authHeader'\nimport axios from '../helpers/axios'\n\nexport const login = (data) => axios.post('auth', {}, {\n    auth: {\n        username: data.email,\n        password: data.password\n    }\n})\nexport const register = (form) => axios.post('users', form)\n\nexport const refresh = (data) => axios.post('auth/refresh', data, {headers: authHeader()})\nexport const forget = (form) => axios.post('auth/password/forgot', form)\nexport const reset = (token, form) => axios.post(`auth/password/reset/${token}`, form)","\nexport const authInitialState = {\n    email: '',\n    nick: '',\n    password: '',\n    isSubmitted: false,\n    isSending: false,\n    isSuccess: false,\n    isError: false,\n    error: null\n}\n\nexport const authReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                isSubmitted: false,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'submit': {\n            return {\n                ...state,\n                isError: false,\n                error: null,\n                isSubmitted: true\n            }\n        }\n        case 'send': {\n            return {\n                ...state,\n                isSending: true\n            }\n        }\n        case 'success': {\n            return {\n\n                ...state,\n                isError: false,\n                error: null,\n                isSending: false,\n                isSuccess: true\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isSending: false,\n                isError: true,\n                error: action.payload\n            }\n        }\n        default: return state\n    }\n}","import React, { useState, useEffect, useContext, useReducer } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom'\n\nimport { Alert, Button, Col, Form, Modal, Spinner } from 'react-bootstrap';\n\nimport * as authApi from '../../services/authService'\n\nimport UserContext from '../../helpers/contexts/user/userContext'\nimport { authInitialState, authReducer } from './reducer';\n\nfunction Login(props) {\n\n    const { login } = useContext(UserContext);\n\n    let history = useHistory()\n    let location = useLocation()\n\n    const [state, dispatch] = useReducer(authReducer, authInitialState)\n    const { email, password, isSubmitted, isSending, isError, error } = state\n    const [show, setShow] = useState(true)\n\n    useEffect(() => {\n        async function sendData() {\n            await authApi.login({ email, password })\n                .then(res => {\n                    login(res.data.user.name, res.data.user.id, res.data.token, res.data.refreshToken)\n                    //history.replace(location.pathname.slice(0, -6))\n\n                    let pathname = location.pathname.slice(0, -6)\n                    if (pathname === '') pathname = process.env.REACT_APP_PATH_NAME\n\n                    history.replace({\n                        pathname: pathname,\n                        search: location.search,\n                        state: location.state\n                    })\n\n                    //if (!location.state) {\n                    // history.goBack();\n                    //} else {\n                    //   history.replace(location.state.from)\n                    //}\n                })\n                .catch(err => {\n                    let errorMessage = null;\n\n                    if (err.response && err.response.data && err.response.data.errors)\n                        errorMessage = err.response.data.errors;\n\n                    dispatch({\n                        type: 'error',\n                        payload: errorMessage\n                    })\n\n                    console.error(err)\n                })\n        }\n        if (isSending) sendData()\n    }, [isSending, email, password, history, location, login])\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        dispatch({ type: 'submit' })\n\n        if (email && password) {\n            dispatch({ type: 'send' })\n        }\n    }\n\n    const handleForgotPassword = () => {\n        history.goBack();\n\n        setTimeout(function () {\n            history.push(`${location.pathname.slice(0, -5)}forgot${location.search}`);\n        }, 500);\n    };\n\n    const modalClose = () => {\n        setShow(false)\n        if (!location.state) {\n            history.goBack();\n        } else {\n            history.push(process.env.REACT_APP_PATH_NAME)\n        }\n    };\n\n    const handleRegister = () => {\n        history.goBack();\n\n        setTimeout(function () {\n            history.push(`${location.pathname.slice(0, -5)}register${location.search}`);\n        }, 500);\n    };\n\n\n\n    return (\n\n        <Modal\n            onHide={modalClose}\n            show={show}\n            size=\"lg\"\n            aria-labelledby=\"contained-modal-title-vcenter\"\n            centered>\n            <Modal.Header closeButton>\n                <Modal.Title id=\"contained-modal-title-vcenter\">\n                    Login\n                </Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <Form onSubmit={isSending ? null : handleSubmit}>\n\n                    <Form.Group>\n                        <Form.Label htmlFor=\"email\">Email</Form.Label>\n                        <Form.Control isInvalid={isSubmitted && !email} type=\"email\" name=\"email\" value={email}\n                            onChange={e => dispatch({ type: 'field', fieldName: 'email', payload: e.target.value })}>\n                        </Form.Control>\n                        <Form.Control.Feedback type=\"invalid\">\n                            Email is required\n                        </Form.Control.Feedback>\n                    </Form.Group>\n\n                    <Form.Group className=\"mt-2\">\n                        <Form.Label htmlFor=\"password\">Password</Form.Label>\n                        <Form.Control isInvalid={isSubmitted && !password} type=\"password\" name=\"password\"\n                            value={password} onChange={e => dispatch({ type: 'field', fieldName: 'password', payload: e.target.value })}>\n                        </Form.Control>\n                        <Form.Control.Feedback type=\"invalid\">\n                            Password is required\n                        </Form.Control.Feedback>\n                    </Form.Group>\n\n                    <Form.Group className=\"d-flex align-items-center mt-2\">\n                        <Button  disabled={isSending} type=\"submit\" className=\"btn-primary\">\n                            Login\n                        </Button>\n\n                        {\n                            isSending &&\n                            <Spinner className=\"ms-2\" animation=\"grow\" />\n                        }\n                    </Form.Group>\n\n                </Form>\n\n                {\n                    isError &&\n                    <Alert variant=\"danger\" className=\"mt-2 mb-0\">\n                        {error ? error : 'Error while logging in.'}\n                    </Alert>\n                }\n\n                <Button variant=\"link\" onClick={handleRegister} className=\"p-0 mt-2 btn btn-link\">Register</Button>\n\n                <Col className=\"p-0 m-0 \" xs={12} sm={12}>\n                    <Button variant=\"link\" onClick={handleForgotPassword} className=\"p-0 mt-2 btn btn-link\">Forgot password?</Button>\n                </Col>\n\n            </Modal.Body>\n\n            <Modal.Footer>\n                <Button onClick={modalClose}>Close</Button>\n            </Modal.Footer>\n\n\n        </Modal>\n\n\n    );\n}\n\nexport default Login","import React, { useState, useReducer, useEffect, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Alert, Button, Form, Modal, Spinner } from 'react-bootstrap';\nimport * as authApi from '../../services/authService'\nimport { authInitialState, authReducer } from './reducer';\nimport UserContext from '../../helpers/contexts/user/userContext'\n\nfunction Register(props) {\n\n    let history = useHistory()\n\n    const { login } = useContext(UserContext)\n    const [state, dispatch] = useReducer(authReducer, authInitialState)\n    const { email, nick, password, isSubmitted, isSuccess, isSending, isError, error } = state\n\n    const [show, setShow] = useState(true)\n\n    useEffect(() => {\n        async function submitData() {\n\n            await authApi.register({ email: email, password: password, name: nick })\n                .then(res => {\n                    dispatch({\n                        type: 'success'\n                    })\n                    setTimeout(() => {\n                        login(res.data.user.name, res.data.user.id, res.data.token, res.data.refreshToken)\n                        history.goBack()\n                    }, 1500)\n                })\n                .catch(err => {\n                    let errorMessage = null;\n\n                    if (err.response && err.response.data && err.response.data.errors)\n                        errorMessage = err.response.data.errors;\n                    else if (err.response && err.response.data && err.response.data.error)\n                        errorMessage = err.response.data.error\n\n                    dispatch({\n                        type: 'error',\n                        payload: errorMessage\n                    })\n                    console.error(err)\n                })\n        }\n\n        if (isSending) submitData()\n\n    }, [isSending, email, nick, password, history, login])\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n\n        dispatch({\n            type: 'submit'\n        })\n\n        if (email && nick && password && password.length >= 6) {\n            dispatch({\n                type: 'send'\n            })\n        }\n    }\n\n    const modalClose = () => {\n        setShow(false)\n        history.goBack();\n    };\n\n\n    return (\n\n        <Modal\n            onHide={modalClose}\n            show={show}\n            size=\"lg\"\n            aria-labelledby=\"contained-modal-title-vcenter\"\n            centered>\n            <Modal.Header closeButton>\n                <Modal.Title id=\"contained-modal-title-vcenter\">\n                    Register\n                </Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <Form onSubmit={handleSubmit}>\n                    <Form.Group>\n                        <Form.Label htmlFor=\"nick\">Nick</Form.Label>\n                        <Form.Control isInvalid={isSubmitted && !nick} type=\"text\" name=\"nick\" value={nick}\n                            onChange={e => dispatch({ type: 'field', fieldName: 'nick', payload: e.target.value })} >\n                        </Form.Control>\n                        <Form.Control.Feedback type=\"invalid\">\n                            Nick is required\n                        </Form.Control.Feedback>\n                    </Form.Group>\n\n                    <Form.Group className=\"mt-2\">\n                        <Form.Label htmlFor=\"email\">Email</Form.Label>\n                        <Form.Control\n                            isInvalid={(isSubmitted && !email)}\n                            type=\"email\" name=\"email\" value={email} onChange={e => dispatch({ type: 'field', fieldName: 'email', payload: e.target.value })} >\n                        </Form.Control>\n                        <Form.Control.Feedback type=\"invalid\">\n                            Email is required\n                        </Form.Control.Feedback>\n                    </Form.Group>\n\n                    <Form.Group className=\"mt-2\">\n                        <Form.Label htmlFor=\"password\">Password</Form.Label>\n                        <Form.Control isInvalid={isSubmitted && (password.length < 6)} type=\"password\"\n                            name=\"password\" value={password} maxLength=\"11\"\n                            onChange={e => dispatch({ type: 'field', fieldName: 'password', payload: e.target.value })}>\n                        </Form.Control>\n                        <Form.Control.Feedback type=\"invalid\">\n                            {\n                                password.length === 0 ? \"Password is required\" : \"Password too short (min 6 chars)\"\n                            }\n\n                        </Form.Control.Feedback>\n                    </Form.Group>\n\n                    {\n                        isSuccess &&\n                        <Alert variant=\"success\" className=\"mt-2\">\n                            You have successfully registered and logged in.\n                        </Alert>\n                    }\n\n                    {\n                        isError &&\n                        <Alert variant=\"danger\" className=\"mt-2\">\n                            {error ? error : 'Error while registtering.'}\n                        </Alert>\n                    }\n\n                    <Form.Group className=\"d-flex align-items-center mt-2\">\n                        <Button type=\"submit\" className=\"btn-primary\">\n                            Register\n                        </Button>\n\n                        {\n                            isSending &&\n                            <Spinner className=\"ms-2\" animation=\"grow\" />\n                        }\n                    </Form.Group>\n\n                </Form>\n\n            </Modal.Body>\n\n            <Modal.Footer>\n                <Button onClick={modalClose}>Close</Button>\n            </Modal.Footer>\n\n\n        </Modal>\n    );\n}\n\nexport default Register","import { pageMaxFetchCount } from \"../../config\"\n\nexport const searchInitialState = {\n    films: [],\n    isLoading: false,\n    isAllFetched: false,\n    isInitialLoaded: false,\n    error: null,\n    search: '',\n    filter: '',\n    sort: '',\n    dir: 1,\n    sorts: [\n        { id: 'upload_date', title: 'Upload date', dir: 1 },\n        { id: 'view_count', title: 'View count', dir: 1 },\n        { id: 'rating', title: 'Rating', dir: 1 },\n    ]\n\n}\n\nexport const searchReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'initial-success': {\n            return {\n                ...state,\n                isLoading: false,\n                isInitialLoaded: true,\n                error: null,\n                isAllFetched: action.payload.films.length < pageMaxFetchCount,\n                films: action.payload.films,\n                search: action.payload.params.search,\n                sort: action.payload.params.sort,\n                filter: action.payload.params.filter,\n                dir: action.payload.params.dir,\n\n            }\n        }\n        case 'load': {\n            return !state.isLoading && !state.isAllFetched && state.isInitialLoaded && !state.error ? {\n                ...state,\n                isLoading: true,\n            } : state\n        }\n        case 'load-success': {\n            return {\n                ...state,\n                isLoading: false,\n                error: null,\n                isAllFetched: action.payload.length < pageMaxFetchCount,\n                films: [...state.films, ...action.payload],\n            }\n        }\n        case 'sorts-change': {\n            return {\n                ...state,\n                sort: action.resetSort ? '' : state.sort,\n                sorts: state.sorts.map(sort => {\n                    if (sort.id === action.payload.id) return action.payload\n                    else return sort\n                })\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isLoading: false,\n                error: true,\n            }\n        }\n        default: return state\n    }\n}\n","import React, { useEffect, useReducer, useState, useCallback } from 'react';\nimport { useLocation, useHistory } from 'react-router-dom'\nimport { Col, Collapse, Row, Spinner } from 'react-bootstrap';\n\nimport \"./search.css\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Button from '@material-ui/core/Button';\n\nimport queryString from 'query-string';\n\nimport TextTruncate from \"react-text-truncate\";\nimport Truncate from \"react-truncate\";\n\nimport PlaylistAddButtonComponent from '../add/playlistAddButton';\n\n\nimport { parseSearchDate, checkIfPlaylistButtonClick } from '../../helpers'\nimport * as filmApi from '../../services/filmService'\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\n\nimport BlurredImageComponent from '../blurredImage'\n\nimport { searchReducer, searchInitialState } from './reducer'\nimport { pageMaxFetchCount } from '../../config';\n\nlet filters = [\n    { id: 'last_hour', title: 'Last hour' },\n    { id: 'today', title: 'Today' },\n    { id: 'this_week', title: 'This week' },\n    { id: 'this_month', title: 'This month' },\n    { id: 'this_year', title: 'This year' },\n];\n\nconst Search = (props) => {\n\n    const history = useHistory();\n    const location = useLocation();\n\n    const [state, dispatch] = useReducer(searchReducer, searchInitialState)\n\n    const { films, isLoading, isAllFetched, search, sort, filter, dir, sorts, error, isInitialLoaded } = state\n\n    const [isOpen, setIsOpen] = useState(false)\n\n    const handleSearchOnBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && !error && isInitialLoaded) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [error, isAllFetched, isInitialLoaded, isLoading])\n\n    useBottomScrollListener(handleSearchOnBottom)\n\n    useEffect(() => {\n\n        let searchParams = queryString.parse(location.search);\n\n        const params = {\n            search: searchParams.title,\n            sort: searchParams.sort ?? '',\n            filter: searchParams.filter ?? '',\n            dir: searchParams.dir ?? 1\n        }\n\n        function getSearchedFilms() {\n            dispatch({\n                type: 'initial-success',\n                payload: { films: location.state.films, params: params }\n            })\n        }\n\n        async function getFilms() {\n            await filmApi.search({ ...params, limit: pageMaxFetchCount })\n                .then(res => {\n                    dispatch({\n                        type: 'initial-success',\n                        payload: { films: res.data, params: params }\n                    })\n                })\n                .catch(err => {\n                    dispatch({\n                        type: 'error'\n                    })\n                    console.error(err)\n                })\n        }\n\n        if (location.state && location.state.films) getSearchedFilms()\n        else getFilms()\n\n    }, [location])\n\n    useEffect(() => {\n        async function getFilms() {\n            await filmApi.search({\n                search: search,\n                sort: sort,\n                filter: filter,\n                dir: dir,\n                skip: films.length,\n                limit: pageMaxFetchCount\n            })\n                .then(res => {\n                    dispatch({\n                        type: 'load-success',\n                        payload: res.data\n                    })\n                })\n                .catch(err => {\n                    dispatch({\n                        type: 'error'\n                    })\n                    console.error(err)\n                })\n        }\n\n        if (isLoading) getFilms()\n\n    }, [dir, films.length, filter, isLoading, search, sort])\n\n    const setRedirect = (e, filmID) => {\n        history.push(`${process.env.REACT_APP_PATH_NAME}film/` + filmID);\n    };\n\n\n    const handleOnclick = (state, type) => {\n\n        let filterClick = filter;\n        let sortClick = sort;\n        let dirClick = dir;\n\n\n        if (state === 'filter') {\n            if (filterClick === type.id) {\n                filterClick = '';\n            } else {\n                filterClick = type.id;\n            }\n        } else {\n            let tmpType = type;\n\n            if (sortClick === type.id) {\n                sortClick = type.id;\n\n\n                if (tmpType.dir === 1) {\n                    tmpType.dir = -1;\n                    dirClick = type.dir;\n                } else if (tmpType.dir === -1) {\n                    tmpType.dir = 1;\n                    sortClick = '';\n                }\n\n                dispatch({\n                    type: 'sorts-change',\n                    payload: tmpType,\n                    resetSort: sortClick === ''\n                })\n\n                dirClick = type.dir\n\n            } else {\n                sortClick = type.id;\n                dirClick = type.dir;\n            }\n\n        }\n\n\n        if (sortClick !== '' && filterClick !== '') {\n            history.push({\n                search: `?title=${search}&sort=${sortClick}&dir=${dirClick}&filter=${filterClick}`,\n            });\n\n        } else if (sortClick === '' && filterClick !== '') {\n            history.push({\n                search: `?title=${search}&filter=${filterClick}`,\n            });\n        } else if (sortClick !== '' && filterClick === '') {\n            history.push({\n                search: `?title=${search}&sort=${sortClick}&dir=${dirClick}`,\n            });\n        } else if (sortClick === '' && filterClick === '') {\n            history.push({\n                search: `?title=${search}`,\n            });\n        }\n\n    };\n\n    return (\n        <>\n            <Button\n                onClick={() => setIsOpen(!isOpen)}\n                aria-controls=\"filter-collapse\"\n                aria-expanded={isOpen}\n                className=\"mt-3 mx-3 p-2 m-button\">\n                <FontAwesomeIcon style={{ cursor: \"pointer\" }} icon=\"filter\" />\n            </Button>\n\n            <Collapse in={isOpen}>\n                <Row id=\"filter-collapse\" className=\"mx-2\">\n                    <Col className=\"mt-4\" sm={4}>\n                        <p style={{ 'fontWeight': 500 }}>UPLOAD DATE</p>\n\n                        <Col sm={8} className=\"mt-3 mb-3 divider\" />\n\n\n                        {\n                            filters.map((filterTmp) => {\n                                return (<p key={filterTmp.id} style={filter === filterTmp.id ?\n                                    { fontWeight: 700, fontSize: 80 + '%' } :\n                                    { fontWeight: 400, fontSize: 80 + '%' }}\n                                    onClick={() => handleOnclick('filter', filterTmp)}\n                                    className=\"search-filter\">{filterTmp.title}</p>)\n                            })\n                        }\n\n                    </Col>\n\n                    <Col className=\"mt-4\" sm={4}>\n                        <p style={{ 'fontWeight': 500 }}>SORT BY</p>\n\n                        <Col sm={8} className=\"mt-3 mb-3 divider\" />\n\n                        {\n                            sorts.map((sortTmp) => {\n                                return (<Col key={sortTmp.id} className=\"d-flex\">\n                                    <p style={sort === sortTmp.id ?\n                                        { fontWeight: 700, fontSize: 80 + '%' } :\n                                        { fontWeight: 400, fontSize: 80 + '%' }}\n                                        onClick={() => handleOnclick('sort', sortTmp)}\n                                        className=\"search-filter\">{sortTmp.title}\n                                    </p>\n                                    {sort === sortTmp.id && sortTmp.dir === 1 ?\n                                        <FontAwesomeIcon className=\"ms-2\" icon=\"sort-up\" /> :\n                                        sort === sortTmp.id && sortTmp.dir === -1 ?\n                                            <FontAwesomeIcon className=\"ms-2\" icon=\"sort-down\" /> : \"\"}\n                                </Col>)\n                            })\n                        }\n\n                    </Col>\n\n                </Row>\n            </Collapse>\n\n            <Col sm={12} className=\"mt-2 mb-3 divider\" />\n\n            <Row className=\"mx-2 mt-4\">\n                {\n                    films.map((film, index) => {\n                        const time = parseSearchDate(film);\n\n                        return <Col xs={12} sm={12} lg={8}\n                            key={film.id}>\n                            <Col className=\"play-outer-container m-0 mb-1\"\n                                onClick={(e) => {\n                                    const isPlaylistButton = checkIfPlaylistButtonClick(e.target)\n                                    if (!isPlaylistButton) setRedirect(e, film.id)\n\n\n                                }} >\n                                <Row className=\"search-style mb-4 m-0\">\n                                    <Col xs={8} sm={4} className=\"p-0\">\n                                        <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\n                                            <BlurredImageComponent\n                                                image={`${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=small_webp`} />\n                                            <FontAwesomeIcon className=\"play-middle\" icon=\"play\" />\n                                        </div>\n                                    </Col>\n                                    <Col xs={4} sm={8}>\n                                        <Row className=\"m-0\">\n                                            <Col className=\"p-0 mb-1\"\n                                                style={{\n                                                    flex: '0 0 auto !important',\n                                                    width: 'calc(83.33333333% - 24px) !important'\n                                                }}>\n                                                <Truncate lines={1}\n                                                    className=\"mb-0 search-title fw-bold\">\n                                                    {film.title}\n                                                </Truncate>\n                                            </Col>\n                                            <Col className=\"d-flex justify-content-end\">\n                                                <PlaylistAddButtonComponent\n                                                    index={index}\n                                                    filmID={film.id} />\n                                            </Col>\n                                        </Row>\n                                        <p className=\"d-none d-sm-inline mb-1 author-nick-search\">\n                                            <small>{film.author_name} &#183; {film.views} views &#183; {time}</small>\n                                        </p>\n\n                                        <p className=\"d-inline d-sm-none mb-0 author-nick-color\">\n                                            <small>{film.author_name} &#183; {film.views} views</small>\n                                        </p>\n\n                                        <small className=\"d-none d-sm-inline\">\n                                            <TextTruncate className=\"mb-0 author-nick-search\"\n                                                line={2} text={film.description} />\n                                        </small>\n\n                                    </Col>\n                                </Row>\n                            </Col>\n                        </Col>\n                    })\n                }\n\n            </Row>\n\n            {\n                !isAllFetched && <div style={{ height: 32 + 'px', width: '100%' }} className=\"d-flex justify-content-center\">\n                    {(isLoading || !isInitialLoaded) && <Spinner animation=\"border\" />}\n                </div>\n            }\n        </>\n\n    )\n}\n\nexport default Search\n","import { pageInitialMaxFetchCount, pageMaxFetchCount  } from '../../config'\n\n\nexport const initialState = {\n    playlists: null,\n    playlistsCount: 0,\n    isLoading: false,\n    isAllFetched: false,\n    isInitialLoaded: false,\n    error: null,\n}\n\nexport const playlistsPageReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'initial-success': {\n            return {\n                ...state,\n                playlists: [...new Set([...action.playlists])],\n                isLoading: false,\n                isInitialLoaded: true,\n                isAllFetched: action.responseCount < pageInitialMaxFetchCount,\n                playlistsCount: state.playlistsCount + action.responseCount,\n            }\n        }\n        case 'load': {\n            return {\n                ...state,\n                isLoading: true,\n                isAllFetched: false,\n                error: null\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                playlists: [...new Set([...state.playlists, ...action.playlists])],\n                isLoading: false,\n                isAllFetched: action.responseCount < pageMaxFetchCount,\n                playlistsCount: state.playlistsCount + action.responseCount,\n                error: null\n            }\n        }\n        case 'clear': {\n            return initialState\n        }\n        case 'error': {\n            return {\n                ...state,\n                isLoading: false,\n                isAllFetched: false,\n                error: action.payload\n            }\n        }\n        default:\n            return state\n    }\n}\n","import React, { useEffect, useState } from 'react';\nimport { Col, Row } from 'react-bootstrap';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport TextTruncate from \"react-text-truncate\";\nimport BlurredImageComponent from \"../../components/blurredImage\";\nimport RemoveButton from './removeButton';\nimport ChangePrivacyButton from './changePrivacyButton';\n\nconst Playlist = ({ playlist, handleRedirect, handleRemove, isProfile, dispatchPrivacyUpdate }) => {\n\n    const colWidth = isProfile ? 8 : 10\n\n    const [style, setStyle] = useState(\"mb-5 play-outer-container remove-container\")\n\n    useEffect(() => {\n        if (!playlist.film_id) setStyle(\"mb-5 play-cursor-default remove-container\")\n    }, [playlist.film_id])\n\n\n    return (\n        <Col xs={12} sm={6} md={3} lg={2}\n            key={playlist.id}>\n            <Col className={style} onClick={() => handleRedirect(playlist.id, playlist.film_id)}>\n                <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\n                    <BlurredImageComponent\n                        image={playlist.img} />\n\n                    <Row style={{ width: '100%', margin: 0 }} className=\"play-middle\">\n                        <Col xs={5} sm={5} style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center' }}>\n                            <FontAwesomeIcon icon=\"play\" />\n                        </Col>\n                        <Col xs={7} sm={7} style={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center' }}>\n                            <small className=\"fw-bold\" >Play all</small>\n                        </Col>\n                    </Row>\n                </div>\n\n                <Row className=\"m-0\">\n                    <Col xs={colWidth} sm={colWidth} className=\"p-0\">\n                        <TextTruncate line={1} text={playlist.title}\n                            className=\"mb-1 mt-1 title \" />\n                    </Col>\n\n\n                    {\n                        isProfile && <Col xs={4} sm={4} className=\"p-0 d-flex justify-content-end\">\n                            <ChangePrivacyButton\n                                id={playlist.id}\n                                isPublic={playlist.is_public}\n                                isProfile={true}\n                                dispatchPrivacyUpdate={dispatchPrivacyUpdate} />\n                            <RemoveButton handleRemove={handleRemove} />\n                        </Col>\n                    }\n                </Row>\n                <p className=\"mb-0 author-nick-color\">\n                    <small>{playlist.author_name}</small>\n                </p>\n            </Col>\n        </Col>\n\n    )\n}\n\nexport default Playlist","import React, { useEffect, useReducer, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Row, Spinner } from 'react-bootstrap';\n\nimport * as playlistApi from '../../services/playlistService'\n\nimport { playlistsPageReducer, initialState } from './reducer'\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\nimport Playlist from '../../helpers/components/playlist';\nimport { pageInitialMaxFetchCount, pageMaxFetchCount } from '../../config';\n\nconst pathName = process.env.REACT_APP_PATH_NAME;\n\nfunction PlaylistsPage(props) {\n\n    let history = useHistory()\n\n    const [state, dispatch] = useReducer(playlistsPageReducer, initialState)\n    const { playlists, isLoading, isAllFetched, isInitialLoaded, playlistsCount } = state\n\n    const handleOnPlaylistsBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && isInitialLoaded) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isAllFetched, isLoading, isInitialLoaded])\n\n    useBottomScrollListener(handleOnPlaylistsBottom, { triggerOnNoScroll: true })\n\n    useEffect(() => {\n        async function fetchInitialPlaylists() {\n            await playlistApi.show({ limit: pageInitialMaxFetchCount })\n                .then(res => {\n                    const result = res.data;\n\n                    let filtered = result.filter(playlist => playlist.film_id)\n\n                    filtered.forEach(playlist => {\n                        playlist.img = `${process.env.REACT_APP_API_URL}films/${playlist.film_id}/thumbnail?width=small_webp`\n                    });\n\n                    dispatch({\n                        type: 'initial-success',\n                        playlists: filtered,\n                        responseCount: result.length\n                    })\n\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        dispatch({ type: 'clear' })\n        fetchInitialPlaylists()\n\n    }, [])\n\n    useEffect(() => {\n        async function fetchPlaylists() {\n            await playlistApi.show({ skip: playlistsCount, limit: pageMaxFetchCount })\n                .then(res => {\n                    const result = res.data;\n\n                    let filtered = result.filter(playlist => playlist.film_id)\n\n                    filtered.forEach(playlist => {\n                        playlist.img = `${process.env.REACT_APP_API_URL}films/${playlist.film_id}/thumbnail?width=small_webp`\n                    });\n\n                    dispatch({\n                        type: 'success',\n                        playlists: filtered,\n                        responseCount: result.length\n                    })\n\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (isLoading && isInitialLoaded) fetchPlaylists()\n\n    }, [isLoading, isInitialLoaded, playlists, playlistsCount])\n\n\n    const setRedirect = (playlistID, filmID) => {\n        history.push({\n            pathname: `${pathName}film/` + filmID,\n            search: `?list=${playlistID}`\n        });\n    };\n\n\n    return (\n        <Row className=\"mt-5 mx-2\">\n            {\n                playlists && playlists.map((playlist, index) => <Playlist key={playlist.id} playlist={playlist} index={index} handleRedirect={setRedirect} />)\n            }\n            {\n                !isAllFetched && <div style={{ height: 32 + 'px', width: '100%' }} className=\"d-flex justify-content-center\">\n                    {(isLoading || !isInitialLoaded) && <Spinner animation=\"border\" />}\n                </div>\n            }\n\n        </Row>\n\n    )\n}\n\nexport default PlaylistsPage\n","const setFileInitialState = (isFilm) => {\n    return {\n        file: null,\n        name: isFilm ? CHOOSE_FILM : CHOOSE_THUMBNAIL,\n        preview: null\n    }\n}\n\nconst alertInitialState = {\n    type: '',\n    message: ''\n}\n\nexport const CHOOSE_FILM = `Choose a film `;\nexport const CHOOSE_THUMBNAIL = `Choose a thumbnail `;\n\nexport const filmAddInitialState = {\n    title: '',\n    description: '',\n    film: setFileInitialState(true),\n    thumbnail: setFileInitialState(false),\n    isSubmitted: false,\n    isSending: false,\n    isSuccess: false,\n    isError: false,\n    error: null\n}\n\nexport const filmAddReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                isError: false,\n                error: null,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'file-add': {\n            return action.isFilm === true ?\n                {\n                    ...state,\n                    isError: false,\n                    error: null,\n                    alert: alertInitialState,\n                    film: { file: action.file, name: action.fileName, preview: action.preview }\n                } : {\n                    ...state,\n                    isError: false,\n                    error: null,\n                    alert: alertInitialState,\n                    thumbnail: { file: action.file, name: action.fileName, preview: action.preview }\n                }\n        }\n        case 'file-clear': {\n            return action.isFilm === true ?\n                {\n                    ...state,\n                    isError: false,\n                    error: null,\n                    film: setFileInitialState(true)\n                } :\n                {\n                    ...state,\n                    isError: false,\n                    error: null,\n                    thumbnail: setFileInitialState(false)\n                }\n        }\n        case 'submit': {\n            return {\n                ...state,\n                isError: false,\n                error: null,\n                alert: alertInitialState,\n                isSubmitted: true\n            }\n        }\n        case 'send': {\n            return {\n                ...state,\n                isSending: true\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                isSending: false,\n                isSuccess: true\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isSending: false,\n                isSuccess: false,\n                isError: true,\n                error: action.payload\n            }\n        }\n        case 'error-422': {\n            return {\n                ...state,\n                isError: true,\n                error: action.payload,\n                film: setFileInitialState(true),\n                thumbnail: setFileInitialState(false)\n            }\n        }\n        default: return state\n    }\n}","import './filmAdd.css'\n\nimport React, { useRef, useReducer, useEffect, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Alert, Button, Col, Form, FormControl, Row, Ratio, Spinner } from \"react-bootstrap\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { CHOOSE_FILM, CHOOSE_THUMBNAIL, filmAddInitialState, filmAddReducer } from './reducers/filmAddReducer';\n\nimport * as filmApi from '../../services/filmService'\nimport UserContext from '../../helpers/contexts/user/userContext';\n\nfunction FilmAdd() {\n\n\n    const { user, clearUser } = useContext(UserContext)\n\n    let history = useHistory()\n\n    const filmInputRef = useRef(null)\n    const thumbnailInputRef = useRef(null)\n\n    const [state, dispatch] = useReducer(filmAddReducer, filmAddInitialState)\n\n    const { title, description, film, thumbnail, isSubmitted, isSending, isError, error } = state\n\n    useEffect(() => {\n        if (!user.auth && user.isInitialLoaded) {\n            history.replace(`${process.env.REACT_APP_PATH_NAME}`)\n            history.push(`${process.env.REACT_APP_PATH_NAME}login`)\n            clearUser()\n        }\n    }, [user, history, clearUser])\n\n    useEffect(() => {\n        async function sendData() {\n\n            let filmData = new FormData();\n            filmData.set('title', title);\n            filmData.set('description', description);\n            filmData.set('film', film.file);\n            filmData.set('thumbnail', thumbnail.file);\n\n            await filmApi.create(filmData)\n                .then((res) => {\n                    dispatch({ type: 'success' })\n                    history.push(`${process.env.REACT_APP_PATH_NAME}film/${res.data.id}`);\n                })\n                .catch((error) => {\n                    let errorMessage = null\n\n                    if (error.response && error.response.data && error.response.data.error) {\n                        errorMessage = error.response.data.error\n                    } else if (error.response && error.response.data && error.response.data.errors) {\n                        if (error.response.data.errors.description)\n                            errorMessage = error.response.data.errors.description.message\n                        else if (error.response.data.errors.title)\n                            errorMessage = error.response.data.errors.title.message\n                    }\n\n                    if (error.response.status === 422) {\n                        dispatch({ type: 'error-422', payload: errorMessage })\n                    } else {\n                        dispatch({ type: 'error', payload: errorMessage })\n                    }\n                })\n        }\n\n        if (isSending) sendData()\n    }, [description, film.file, history, isSending, thumbnail.file, title])\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        dispatch({ type: 'submit' })\n\n        if (!user.auth) {\n            history.push(`${process.env.REACT_APP_PATH_NAME}add/login`);\n            return;\n        }\n\n        if (title && description) {\n            dispatch({ type: 'send' })\n        }\n    }\n\n    const handleFileChoose = (event, type) => {\n        event.preventDefault();\n\n        switch (type) {\n            case 'film':\n                dispatch({\n                    type: 'file-add',\n                    isFilm: true,\n                    file: filmInputRef.current.files[0],\n                    fileName: filmInputRef.current.files[0].name,\n                    preview: URL.createObjectURL(event.target.files[0])\n                })\n                break;\n\n            case 'thumbnail':\n                dispatch({\n                    type: 'file-add',\n                    isFilm: false,\n                    file: thumbnailInputRef.current.files[0],\n                    fileName: thumbnailInputRef.current.files[0].name,\n                    preview: URL.createObjectURL(event.target.files[0])\n                })\n                break;\n            default:\n                break;\n        }\n    }\n\n    return (\n        <Row className=\"mt-4 mx-2\" sm={12}>\n            <Col className=\"mb-4\" sm={6} lg={5}>\n\n                <Col className=\"mb-4\" xs={12} sm={12} lg={10} >\n                    <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\n                        <div\n                            className=\"position-relative justify-content-center d-flex align-items-center embed-responsive-item text-center box has-advanced-upload\">\n\n\n                            <Ratio aspectRatio=\"16x9\">\n                                <video muted={true} autoPlay={true} className=\"embed-responsive-item\" loop={true}\n                                    src={film.preview ? film.preview : \"\"}>\n                                </video>\n                            </Ratio>\n\n                            <input id=\"film\" accept=\"video/mp4, video/ogg\"\n                                onChange={event => handleFileChoose(event, 'film')}\n                                type=\"file\" ref={filmInputRef} className=\"inputfile\" />\n                            <label htmlFor=\"film\" className=\"position-absolute\">\n                                {\n                                    film.name === CHOOSE_FILM &&\n                                    <span>{film.name}</span>\n                                }\n                            </label>\n\n                            {\n                                film.preview &&\n                                <Col className=\"card-img-overlay film-add-item-opacity\" />\n                            }\n\n                            {\n                                film.preview &&\n                                <FontAwesomeIcon className=\"film-add-item-middle fa-3x\"\n                                    style={{ color: \"#ffffff\" }} icon=\"times\"\n                                    onClick={() => {\n                                        dispatch({ type: 'file-clear', isFilm: true })\n                                    }} />\n                            }\n\n                        </div>\n                    </div>\n                </Col>\n                <Col xs={12} sm={12} lg={10}>\n                    <div\n                        className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\n                        <div\n                            className=\"position-relative justify-content-center d-flex align-items-center embed-responsive-item text-center box has-advanced-upload\">\n                            <Ratio aspectRatio=\"16x9\">\n                                <img alt=\"\" src={thumbnail.preview ? thumbnail.preview : \"data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\"} />\n                            </Ratio>\n                            <input id=\"thumbnail\" accept=\"image/jpg, image/png, image/jpeg\"\n                                onChange={event => handleFileChoose(event, 'thumbnail')}\n                                type=\"file\" ref={thumbnailInputRef} className=\" inputfile position-absolute\" />\n                            <label htmlFor=\"thumbnail\" className=\"position-absolute\">\n\n                                {\n                                    thumbnail.name === CHOOSE_THUMBNAIL &&\n                                    <span>{thumbnail.name}</span>\n                                }\n                            </label>\n                            {\n                                thumbnail.preview &&\n                                <Col className=\"card-img-overlay film-add-item-opacity\" />\n                            }\n\n                            {\n                                thumbnail.preview &&\n                                <FontAwesomeIcon className=\"film-add-item-middle fa-3x\" style={{ color: \"#ffffff\" }} icon=\"times\"\n                                    onClick={() => {\n                                        dispatch({ type: 'file-clear', isFilm: false })\n                                    }} />\n                            }\n                        </div>\n                    </div>\n\n                </Col>\n            </Col>\n            <Col className=\"mb-2\" sm={6} lg={5}>\n\n                <Form.Group className=\"mb-3\" sm={12}>\n                    <FormControl\n                        placeholder=\"Title\"\n                        aria-label=\"Title\"\n                        aria-describedby=\"basic-addon1\"\n                        isInvalid={isSubmitted && !title}\n                        name=\"title\"\n                        value={title}\n                        onChange={e => dispatch({ type: 'field', fieldName: 'title', payload: e.target.value })}\n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Title is required\n                    </Form.Control.Feedback>\n                </Form.Group>\n\n                <Form.Group className=\"mb-3\" sm={12}>\n                    <FormControl\n                        placeholder=\"Description\"\n                        as=\"textarea\"\n                        aria-label=\"With textarea\"\n                        isInvalid={isSubmitted && !description}\n                        name=\"description\"\n                        value={description}\n                        onChange={e => dispatch({ type: 'field', fieldName: 'description', payload: e.target.value })}\n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Description is required\n                    </Form.Control.Feedback>\n                </Form.Group>\n\n                <Col className=\"mb-3 p-0 \" sm={12}>\n                    <Form.Group className=\"d-flex align-items-center\">\n                        <Button variant=\"primary\"\n                            disabled={isSending || !title || !description}\n                            onClick={!isSending ? handleSubmit : null}>\n                            {isSending ? 'Loading…' : 'Add'}\n                        </Button>\n\n                        {\n                            isSending &&\n                            <Spinner className=\"ms-2\" animation=\"grow\" />\n\n                        }\n                    </Form.Group>\n                </Col>\n\n                {\n                    isError &&\n                    <Alert variant=\"danger\">\n                        {error ? error : 'Error while creating film.'}\n                    </Alert>\n                }\n\n            </Col>\n\n\n        </Row>\n    )\n}\n\nexport default FilmAdd\n","export default __webpack_public_path__ + \"static/media/page-not-found.0e39e8d9.svg\";","import React, { useEffect } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { Col, Ratio } from \"react-bootstrap\";\n\nimport error_404 from '../../images/page-not-found.svg'; // Tell Webpack this JS file uses this image\n\nfunction NotFound() {\n\n    let history = useHistory()\n    let location = useLocation()\n\n    useEffect(() => {\n\n        if (location.pathname.includes('login')) history.replace(`${process.env.REACT_APP_PATH_NAME}login`)\n    }, [history, location])\n    \n    return (\n        <Col xs={12} sm={12} className=\"mt-4 px-4 embed-responsive embed-responsive-16by9\">\n            <Ratio aspectRatio=\"16x9\">\n                <img className=\"embed-responsive-item\" src={error_404} alt=\"\" />\n            </Ratio>\n        </Col>\n    )\n}\n\nexport default NotFound;","const userInitialState = {\n    name: '',\n    email: ''\n}\n\nexport const settingsInitialState = {\n    ...userInitialState,\n    password: '',\n    initialUser: userInitialState,\n    isInitialLoaded: false,\n    isSubmitted: false,\n    isSending: false,\n    error: '',\n    success: ''\n}\n\nexport const settingsReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                error: '',\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'initial-success': {\n            return {\n                ...state,\n                initialUser: {\n                    email: action.email,\n                    name: action.name\n                },\n                isInitialLoaded: true\n            }\n        }\n        case 'submit': {\n            return {\n                ...state,\n                isSubmitted: true,\n                error: null,\n            }\n        }\n        case 'send': {\n            return {\n                ...state,\n                isSending: true\n            }\n        }\n        case 'success': {\n            return {\n                ...state,\n                isSubmitted: false,\n                isSending: false,\n                success: 'Changes saved successfully!',\n                error: null\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isSending: false,\n                isSubmitted: false,\n                error: action.payload\n            }\n        }\n        default: return state\n    }\n}","import { Modal, Form, Button, Spinner, Alert } from \"react-bootstrap\";\nimport { useEffect, useState, useReducer, useContext } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport UserContext from \"../../helpers/contexts/user/userContext\";\nimport { settingsInitialState, settingsReducer } from \"./reducer\";\nimport * as userApi from '../../services/userService'\n\nconst Settings = (props) => {\n\n    const { user, clearUser, updateUser } = useContext(UserContext)\n\n    let history = useHistory()\n    let location = useLocation()\n\n    const [state, dispatch] = useReducer(settingsReducer, settingsInitialState)\n    // eslint-disable-next-line no-unused-vars\n    const { email, name, password, initialUser, isSubmitted, isSending, isInitialLoaded, success, error } = state\n\n    const [show, setShow] = useState(true)\n\n    useEffect(() => {\n        if (!user.auth && user.isInitialLoaded) {\n            setShow(false)\n            history.replace(`${process.env.REACT_APP_PATH_NAME}`)\n            history.push(`${process.env.REACT_APP_PATH_NAME}login`)\n            clearUser()\n        }\n    }, [user, history, clearUser])\n\n    useEffect(() => {\n        async function getUser() {\n            await userApi.me()\n                .then(res => {\n                    dispatch({\n                        type: 'initial-success',\n                        name: res.data.name,\n                        email: res.data.email\n                    })\n                })\n                .catch(err => {\n                    console.error(err)\n                    dispatch({\n                        type: 'error',\n                        payload: true\n                    })\n                })\n        }\n        getUser()\n    }, [])\n\n    useEffect(() => {\n        async function updateUserData() {\n            let toUpdate = {}\n            if (password) toUpdate = { password: password }\n            if (email && email !== '' && email !== initialUser.email) toUpdate = { ...toUpdate, email: email }\n            if (name && name !== '' && name !== initialUser.name) toUpdate = { ...toUpdate, name: name }\n\n            await userApi.partialUpdate(toUpdate)\n                .then(res => {\n                    dispatch({\n                        type: 'success'\n                    })\n\n                    setTimeout(() => {\n                        let pathname = location.pathname.slice(0, -9)\n                        if (pathname === '') pathname = process.env.REACT_APP_PATH_NAME\n                        history.replace({\n                            pathname: pathname,\n                            search: location.search,\n                            state: location.state\n                        })\n                        updateUser(res.data.accessToken)\n                    }, 500)\n                })\n                .catch(err => {\n                    console.error(err)\n                    dispatch({\n                        type: 'error',\n                        payload: err.response && err.response.data && err.response.data.error ? err.response.data.error : 'Something went wrong!'\n                    })\n                })\n        }\n        if (isSending) updateUserData()\n    }, [email, initialUser.email, initialUser.name, isSending, name, password, history, location, updateUser])\n\n    const modalClose = () => {\n        setShow(false)\n        history.goBack();\n    };\n\n    const handleSubmit = (e) => {\n        e.preventDefault()\n\n        dispatch({\n            type: 'submit'\n        })\n\n        if (password ||\n            (email && email !== '' && email !== initialUser.email) ||\n            (name && name !== '' && name !== initialUser.name)) {\n            dispatch({\n                type: 'send'\n            })\n        }\n    }\n\n    return (\n        <Modal onHide={modalClose}\n            show={show}\n            size=\"lg\"\n            aria-labelledby=\"contained-modal-title-vcenter\"\n            centered>\n            <Modal.Header closeButton>\n                <Modal.Title>\n                    Settings\n                </Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <Form onSubmit={isSending ? null : handleSubmit}>\n                    <Form.Group>\n                        <Form.Label htmlFor=\"name\">Name</Form.Label>\n                        <Form.Control type=\"text\" name=\"email\"\n                            value={name} placeholder={initialUser.name}\n                            onChange={e => dispatch({ type: 'field', fieldName: 'name', payload: e.target.value })}>\n                        </Form.Control>\n                    </Form.Group>\n                    <Form.Group className=\"mt-2\">\n                        <Form.Label htmlFor=\"email\">Email</Form.Label>\n                        <Form.Control type=\"email\" name=\"email\"\n                            value={email} placeholder={initialUser.email}\n                            onChange={e => dispatch({ type: 'field', fieldName: 'email', payload: e.target.value })}>\n                        </Form.Control>\n                    </Form.Group>\n                    <Form.Group className=\"mt-2\">\n                        <Form.Label htmlFor=\"password\">Password</Form.Label>\n                        <Form.Control type=\"password\" name=\"password\"\n                            value={password} onChange={e => dispatch({ type: 'field', fieldName: 'password', payload: e.target.value })}>\n                        </Form.Control>\n                    </Form.Group>\n                    <Form.Group className=\"d-flex align-items-center mt-2\">\n                        <Button disabled={isSending || !isInitialLoaded} type=\"submit\" className=\"btn-primary\">\n                            Change\n                        </Button>\n\n                        {\n                            isSending &&\n                            <Spinner className=\"ms-2\" animation=\"grow\" />\n                        }\n                    </Form.Group>\n                </Form>\n                {\n                    error &&\n                    <Alert variant=\"danger\" className=\"mt-2 mb-0\">\n                        {error ? error : 'Error while logging in.'}\n                    </Alert>\n                }\n                {\n                    success &&\n                    <Alert variant=\"success\" className=\"mt-2 mb-0\">\n                        {success}\n                    </Alert>\n                }\n            </Modal.Body>\n        </Modal>\n    )\n}\n\nexport default Settings","import React, { useState, useReducer, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Alert, Button, Form, Modal, Spinner } from 'react-bootstrap';\nimport * as authApi from '../../services/authService'\nimport { authInitialState, authReducer } from './reducer';\n\nfunction ResetPassword(props) {\n\n    let history = useHistory()\n\n    const [state, dispatch] = useReducer(authReducer, authInitialState)\n\n    const { password, isSubmitted, isSending, isSuccess, isError, error } = state\n\n    const [show, setShow] = useState(true)\n\n    useEffect(() => {\n        async function sendData() {\n            await authApi.reset(props.match.params.token, { password: password })\n                .then(res => {\n                    dispatch({\n                        type: 'success'\n                    })\n\n                    setTimeout(function () {\n                        setShow(false);\n                        history.push(`${process.env.REACT_APP_PATH_NAME}`);\n                        setTimeout(function () {\n                            history.push(`${process.env.REACT_APP_PATH_NAME}login`);\n                        }, 500);\n                    }, 1500);\n\n                })\n                .catch(err => {\n                    let errorMessage = null;\n\n                    if (err.response && err.response.data && err.response.data.errors)\n                        errorMessage = err.response.data.errors;\n\n                    dispatch({\n                        type: 'error',\n                        payload: errorMessage\n                    })\n\n                })\n\n        }\n\n\n        if (isSending) sendData()\n\n    }, [isSending, history, password, props.match.params.token])\n\n    const handleSubmitPasswordChange = (e) => {\n        e.preventDefault();\n\n        dispatch({\n            type: 'submit'\n        })\n\n        if (props.match.params.token && password && password.length >= 6) {\n            dispatch({ type: 'send' })\n        }\n    }\n\n    const modalClose = () => {\n        setShow(false)\n        history.push(`${process.env.REACT_APP_PATH_NAME}`);\n    };\n\n    return (\n\n        <Modal\n            onHide={modalClose}\n            show={show}\n            size=\"lg\"\n            aria-labelledby=\"contained-modal-title-vcenter\"\n            centered\n        >\n            <Modal.Header closeButton>\n                <Modal.Title id=\"contained-modal-title-vcenter\">\n                    Reset\n                </Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <Form onSubmit={handleSubmitPasswordChange}>\n                    <Form.Group>\n                        <Form.Label htmlFor=\"password\">Password</Form.Label>\n                        <Form.Control isInvalid={isSubmitted && (password.length < 6)} type=\"password\"\n                            name=\"password\" value={password} maxLength=\"11\"\n                            onChange={e => dispatch({ type: 'field', fieldName: 'password', payload: e.target.value })}>\n                        </Form.Control>\n                        <Form.Control.Feedback type={\"invalid\"}>\n                            {\n                                password.length === 0 ? \"Password is required\" : \"Password too short (min 6 chars)\"\n                            }\n\n                        </Form.Control.Feedback>\n                    </Form.Group>\n\n                    {\n                        isSuccess &&\n                        <Alert variant=\"success\" className=\"mt-2\">\n                            Password has been reseated! Redirecting to login page.\n                        </Alert>\n                    }\n\n                    {\n                        isError &&\n                        <Alert variant=\"danger\" className=\"mt-2\">\n                            {error ? error : 'Error while resetting password.'}\n                        </Alert>\n                    }\n\n                    <Form.Group className=\"d-flex align-items-center mt-2\">\n                        <Button type=\"submit\" className=\"btn-primary\">\n                            Reset password\n                        </Button>\n\n                        {\n                            isSending &&\n                            <Spinner className=\"ms-2\" animation=\"grow\" />\n                            }\n                    </Form.Group>\n\n                </Form>\n\n            </Modal.Body>\n\n            <Modal.Footer>\n                <Button onClick={modalClose}>Close</Button>\n            </Modal.Footer>\n\n\n        </Modal>\n\n\n    );\n}\n\n\nexport default ResetPassword","import React, { useState, useReducer, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Alert, Button, Form, Modal, Spinner } from 'react-bootstrap';\nimport * as authApi from '../../services/authService'\nimport { authInitialState, authReducer } from './reducer';\n\nfunction ForgotPassword(props) {\n    let history = useHistory()\n\n    const [show, setShow] = useState(true)\n\n    const [state, dispatch] = useReducer(authReducer, authInitialState)\n\n    const { email, isSuccess, isSubmitted, isSending, isError, error } = state\n\n    useEffect(() => {\n        async function submitData() {\n\n            await authApi.forget({ email: email })\n                .then(res => {\n                    dispatch({\n                        type: 'success'\n                    })\n                })\n                .catch(err => {\n                    let errorMessage = null;\n\n                    if (err.response && err.response.data && err.response.data.errors)\n                        errorMessage = err.response.data.errors;\n\n                    dispatch({\n                        type: 'error',\n                        payload: errorMessage\n                    })\n\n                    console.error(err)\n                })\n        }\n        if (isSending) submitData()\n    }, [isSending, email])\n\n    const handleSubmitForgotRequest = (e) => {\n        e.preventDefault();\n\n        dispatch({\n            type: 'submit'\n        })\n\n        if (email) {\n            dispatch({\n                type: 'send'\n            })\n        }\n    };\n\n    const modalClose = () => {\n        setShow(false)\n        history.goBack();\n    };\n\n\n    return (\n\n        <Modal\n            onHide={modalClose}\n            show={show}\n            size=\"lg\"\n            aria-labelledby=\"contained-modal-title-vcenter\"\n            centered>\n            <Modal.Header closeButton>\n                <Modal.Title id=\"contained-modal-title-vcenter\">\n                    Forgot\n                </Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <Form onSubmit={handleSubmitForgotRequest}>\n                    <Form.Group>\n                        <Form.Label htmlFor=\"email\">Email</Form.Label>\n                        <Form.Control\n                            isInvalid={(isSubmitted && !email)}\n\n                            type=\"email\" name=\"email\" value={email} onChange={e => dispatch({ type: 'field', fieldName: 'email', payload: e.target.value })}>\n                        </Form.Control>\n                        <Form.Control.Feedback type=\"invalid\">\n                            Email is required\n                        </Form.Control.Feedback>\n                    </Form.Group>\n\n\n\n                    {\n                        isSuccess &&\n                        <Alert variant=\"success\" className=\"mt-2\">\n                            Email with link to reset password has been sent.\n                        </Alert>\n                    }\n\n                    {\n                        isError &&\n                        <Alert variant=\"danger\" className=\"mt-2\">\n                            {error ? error : \"Error while sending email.\"}\n                        </Alert>\n                    }\n\n                    <Form.Group className=\"d-flex align-items-center mt-2\">\n                        <Button type=\"submit\" className=\"btn-primary\">\n                            Reset password\n                        </Button>\n\n                        {\n                            isSending &&\n                            <Spinner className=\"ms-2\" animation=\"grow\" />\n                        }\n                    </Form.Group>\n\n                </Form>\n\n            </Modal.Body>\n\n            <Modal.Footer>\n                <Button onClick={modalClose}>Close</Button>\n            </Modal.Footer>\n\n\n        </Modal>\n\n\n    );\n}\n\nexport default ForgotPassword","import {Redirect, Route} from \"react-router\";\nimport React from \"react\";\n\nconst PrivateRoute = ({component: Component, ...rest}) => {\n    return <Route\n        {...rest}\n        render={props =>\n            localStorage.getItem('accessToken') ? (\n                <Component {...props} />\n            ) : (\n                <Redirect to={{\n                    pathname: `${process.env.REACT_APP_PATH_NAME}login`,\n                    state: {from: props.location}\n                }}/>\n            )\n        }/>\n};\n\nexport default PrivateRoute","import { pageMaxFetchCount } from \"../../config\"\n\nexport const initialProfileState = {\n    data: [],\n    isLoading: false,\n    isAllFetched: false,\n    isRemoving: false,\n    toRemove: null,\n    error: null,\n    filmsCount: 0,\n    playlistsCount: 0,\n}\n\nexport function profileReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'initial-success': {\n            return {\n                ...state,\n                isLoading: false,\n                isInitialLoaded: true,\n                isAllFetched: action.filmsCount < pageMaxFetchCount && action.playlistsCount < pageMaxFetchCount,\n                filmsCount: state.filmsCount + action.filmsCount,\n                playlistsCount: state.playlistsCount + action.playlistsCount,\n                data: [...new Set(action.data)]\n            }\n        }\n        case 'load': {\n            return !state.isLoading && !state.isAllFetched && state.isInitialLoaded && !state.error ?\n                { ...state, isLoading: true, isAllFetched: false } :\n                state\n        }\n        case 'success': {\n            return {\n                ...state,\n                isLoading: false,\n                isAllFetched: action.filmsCount < pageMaxFetchCount && action.playlistsCount < pageMaxFetchCount,\n                filmsCount: state.filmsCount + action.filmsCount,\n                playlistsCount: state.playlistsCount + action.playlistsCount,\n                data: [...new Set([...state.data, ...action.data])]\n            }\n        }\n        case 'remove': {\n            return {\n                ...state,\n                toRemove: action.payload,\n                isRemoving: true\n            }\n        }\n        case 'remove-success': {\n            return {\n                ...state,\n                isRemoving: false,\n                toRemove: null,\n                data: state.toRemove ? state.data.filter(resource => resource.id !== state.toRemove.id) : state.data\n            }\n        }\n        case 'change-playlist-privacy-success': {\n            return {\n                ...state,\n                data: state.data.map(data => {\n                    if (data.isPlaylist && data.id === action.payload.id) return { ...data, is_public: action.payload.is_public }\n                    return data\n                })\n            }\n        }\n        case 'clear': {\n            return initialProfileState\n        }\n        default: return state\n    }\n}","import React, { useEffect, useReducer, useCallback, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Row, Spinner } from 'react-bootstrap';\n\nimport { initialProfileState, profileReducer } from './reducer';\nimport useBottomScrollListener from '../../helpers/hooks/useBottomScrollListener';\n\nimport Film from '../../helpers/components/film';\nimport Playlist from '../../helpers/components/playlist';\n\nimport * as userApi from '../../services/userService'\nimport * as playlistApi from '../../services/playlistService'\nimport * as filmApi from '../../services/filmService'\n\nimport image_not_found from '../../images/image_not_found.png'; // Tell Webpack this JS file uses this image\nimport RemoveModalContext from '../../helpers/contexts/removeModal/removeModalContext';\nimport UserContext from '../../helpers/contexts/user/userContext';\nimport { pageInitialMaxFetchCount, pageMaxFetchCount } from '../../config';\n\nconst Profile = (props) => {\n\n    const { user, clearUser } = useContext(UserContext)\n\n    const { showModal, clear, removeModalData } = useContext(RemoveModalContext)\n\n    let history = useHistory()\n\n    const [state, dispatch] = useReducer(profileReducer, initialProfileState)\n    const { data, isLoading, isAllFetched, isInitialLoaded, error, isRemoving, toRemove, filmsCount, playlistsCount } = state\n\n    const handleProfileOnBottom = useCallback(() => {\n        if (!isLoading && !isAllFetched && isInitialLoaded && !error) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isLoading, isAllFetched, isInitialLoaded, error])\n\n    useBottomScrollListener(handleProfileOnBottom, { triggerOnNoScroll: true })\n\n    useEffect(() => {\n        if (!user.auth && user.isInitialLoaded) {\n            history.replace(`${process.env.REACT_APP_PATH_NAME}`)\n            history.push(`${process.env.REACT_APP_PATH_NAME}login`)\n            clearUser()\n        }\n    }, [user, history, clearUser])\n    \n    useEffect(() => {\n        async function fetchInitialData() {\n\n            const [response] = await Promise.allSettled([\n                userApi.me({ skipFilms: 0, skipPlaylists: 0, limit: pageInitialMaxFetchCount })\n            ])\n\n            let data = []\n\n            let films = []\n            let playlists = []\n\n            if (response.status === \"fulfilled\") {\n                films = response.value.data.films.map(film => {\n                    return {\n                        ...film,\n                        img: `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=small_webp`,\n\n                    }\n                })\n\n                playlists = response.value.data.playlists.map(playlist => {\n                    const image = playlist.film_id ?\n                        `${process.env.REACT_APP_API_URL}films/${playlist.film_id}/thumbnail?width=small_webp` :\n                        image_not_found\n                    return {\n                        ...playlist,\n                        img: image,\n                        isPlaylist: true\n\n                    }\n                })\n\n                data = [...data, ...films, ...playlists]\n            }\n\n            dispatch({\n                type: 'initial-success',\n                data: data,\n                filmsCount: films.length,\n                playlistsCount: playlists.length,\n            })\n        }\n\n        dispatch({ type: 'clear' })\n        fetchInitialData()\n\n    }, [])\n\n    useEffect(() => {\n        async function fetchData() {\n            const [response] = await Promise.allSettled([\n                userApi.me({ skipFilms: filmsCount, skipPlaylists: playlistsCount, limit: pageMaxFetchCount })\n            ])\n\n            let data = []\n\n            let films = []\n            let playlists = []\n\n            if (response.status === \"fulfilled\") {\n                films = response.value.data.films.map(film => {\n                    return {\n                        ...film,\n                        img: `${process.env.REACT_APP_API_URL}films/${film.id}/thumbnail?width=small_webp`,\n\n                    }\n                })\n\n                playlists = response.value.data.playlists.map(playlist => {\n                    const image = playlist.film_id ?\n                        `${process.env.REACT_APP_API_URL}films/${playlist.film_id}/thumbnail?width=small_webp` :\n                        image_not_found\n                    return {\n                        ...playlist,\n                        img: image,\n                        isPlaylist: true\n\n                    }\n                })\n\n                data = [...data, ...films, ...playlists]\n            }\n\n            dispatch({\n                type: 'success',\n                data: data,\n                filmsCount: films.length,\n                playlistsCount: playlists.length,\n            })\n        }\n\n        if (isLoading && isInitialLoaded) fetchData()\n    }, [filmsCount, isLoading, playlistsCount, isInitialLoaded])\n\n    useEffect(() => {\n        async function remove() {\n\n            try {\n                if (toRemove.isPlaylist) {\n                    const resPlaylist = await playlistApi.remove(toRemove.id)\n                    if (resPlaylist.status === 204) {\n                        dispatch({\n                            type: 'remove-success'\n                        })\n                        clear()\n                    }\n                } else {\n                    const resFilm = await filmApi.remove(toRemove.id)\n                    if (resFilm.status === 204) {\n                        dispatch({\n                            type: 'remove-success'\n                        })\n                        clear()\n                    }\n                }\n            } catch (err) {\n                console.error(err)\n            }\n        }\n        if (isRemoving && removeModalData.isRemoving && toRemove &&\n            removeModalData.id === toRemove.id && removeModalData.title === toRemove.title &&\n            removeModalData.type === (toRemove.isPlaylist ? 'playlist' : 'film')) remove()\n    }, [isRemoving, removeModalData, toRemove, clear])\n\n    const handleRemove = (e, resource) => {\n        e.stopPropagation()\n        if (removeModalData.isRemoving) return\n        dispatch({\n            type: 'remove',\n            payload: resource\n        })\n        showModal(resource.id, resource.isPlaylist ? 'playlist' : 'film', resource.title)\n    };\n\n    const handleRedirectFilm = (id) => {\n        history.push({ pathname: `${process.env.REACT_APP_PATH_NAME}film/` + id });\n    }\n\n    const handleRedirectPlaylist = (record) => {\n        if (!record.film_id) return\n        history.push({\n            pathname: `${process.env.REACT_APP_PATH_NAME}film/` + record.film_id,\n            search: `?list=${record.id}`\n        });\n    }\n\n    return (\n        <Row className=\"mt-5 mx-2\">\n            {\n                data.map((record, index) => {\n                    if (record.isPlaylist) {\n                        return <Playlist key={record.id}\n                            playlist={record} index={index}\n                            isProfile={true}\n                            dispatchPrivacyUpdate={dispatch}\n                            handleRedirect={() => handleRedirectPlaylist(record)}\n                            handleRemove={(e) => handleRemove(e, record)} />\n                    } else {\n                        return <Film key={record.id} isProfile={true}\n                            film={record} index={index}\n                            handleRedirect={() => handleRedirectFilm(record.id)}\n                            handleRemove={(e) => handleRemove(e, record)} />\n                    }\n                })\n            }\n\n            {\n                !isAllFetched && <div style={{ height: 32 + 'px', width: '100%' }} className=\"d-flex justify-content-center\">\n                    {(isLoading || !isInitialLoaded) && <Spinner animation=\"border\" />}\n                </div>\n            }\n        </Row>\n    )\n}\n\n\nexport default Profile\n","import { useContext, useMemo } from 'react'\nimport { refresh } from '../../services/authService';\nimport axios from '../axios'\nimport UserContext from '../contexts/user/userContext';\n\nconst WithAxios = ({ children }) => {\n\n    const { logout } = useContext(UserContext);\n\n    useMemo(() => {\n        axios.interceptors.response.use((response) => {\n            return response\n        }, (error) => {\n            const isAuth = localStorage.getItem('accessToken')\n            const originalRequest = error.config\n\n            if (error.response && error.response.status === 401 && isAuth && !originalRequest._retry) {\n                if (error.config.url === 'auth/refresh') {\n                    logout()\n                    return Promise.reject(error)\n                }\n                originalRequest._retry = true\n                return refresh({ \"refreshToken\": JSON.parse(localStorage.getItem(\"refreshToken\")) })\n                    .then(res => {\n                        if (res.status === 201) {\n                            const accessToken = res.data.token\n                            localStorage.setItem('accessToken', JSON.stringify(accessToken))\n                            originalRequest.headers['Authorization'] = 'Bearer ' + accessToken\n                            return axios(originalRequest)\n                        }\n                    })\n            }\n            return Promise.reject(error);\n        })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    return children\n}\n\nexport default WithAxios","import { useState, useEffect } from 'react'\nimport { useLocation } from 'react-router-dom'\nimport UserContext from './userContext';\nimport jwt_decode from \"jwt-decode\";\n\nconst UserProvider = ({ children }) => {\n    let { pathname } = useLocation()\n\n    const [user, setUser] = useState({ name: '', id: null, auth: false, isInitialLoaded: false });\n\n    useEffect(() => {\n        window.scrollTo(0, 0)\n    }, [pathname])\n\n    useEffect(() => {\n        function getMe() {\n            const token = localStorage.getItem('accessToken')\n            if (!token) {\n                setUser(user => ({ ...user, isInitialLoaded: true }))\n                return\n            }\n            const decoded = jwt_decode(token);\n            setUser(() => ({\n                name: decoded.name,\n                auth: true,\n                id: decoded.id,\n                isInitialLoaded: true\n            }));\n        }\n        getMe()\n    }, [])\n\n    const login = (name, id, token, refreshToken) => {\n        localStorage.setItem('accessToken', JSON.stringify(token));\n        localStorage.setItem('refreshToken', JSON.stringify(refreshToken));\n\n        setUser(() => ({\n            name: name,\n            auth: true,\n            id: id,\n            isInitialLoaded: true\n        }));\n    };\n\n    const logout = () => {\n        localStorage.removeItem('accessToken');\n        localStorage.removeItem('refreshToken');\n\n\n        setUser((user) => ({\n            ...user,\n            name: '',\n            auth: false,\n            id: null\n        }));\n    };\n\n    const updateUser = (accessToken) => {\n        localStorage.setItem('accessToken', JSON.stringify(accessToken));\n\n        const decoded = jwt_decode(accessToken);\n        setUser((user) => ({\n            ...user,\n            name: decoded.name\n        }));\n\n        window.location.reload();\n    }\n\n    const clearUser = () => {\n        setUser((user) => ({\n            ...user,\n            isInitialLoaded: false\n        }));\n    }\n\n    return (\n        <UserContext.Provider value={{ user, login, logout, clearUser, updateUser }}>\n            {children}\n        </UserContext.Provider>\n    );\n};\n\nexport default UserProvider","import React, { useContext } from 'react';\nimport './App.css';\n\nimport NavbarComponent from './components/navbar';\n\nimport RemoveModal from './helpers/components/removeModal'\n\nimport HomeComponent from './components/homePage';\nimport FilmComponent from './components/filmPage';\nimport LoginComponent from './components/auth/login';\nimport RegisterComponent from './components/auth/register';\nimport SearchComponent from './components/searchPage';\nimport PlaylistsPage from './components/playlistsPage';\nimport AddFilmComponent from './components/add/filmAdd';\nimport NotFoundComponent from './components/notFound';\nimport SettingsComponent from './components/settings'\n\nimport { Route, BrowserRouter as Router } from 'react-router-dom';\n\n//  --------- icons ------------\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport {\n    faCaretDown,\n    faCaretUp,\n    faEllipsisV,\n    faEye,\n    faFilter,\n    faPlay,\n    faPlus,\n    faSearch,\n    faThumbsDown,\n    faThumbsUp,\n    faSortUp,\n    faSortDown,\n    faTrashAlt,\n    faTimes,\n    faGlobeEurope,\n    faLock\n} from '@fortawesome/free-solid-svg-icons'\n\nimport { Switch } from \"react-router\";\nimport ResetPasswordComponent from './components/auth/resetPassword';\nimport ForgotPasswordComponent from './components/auth/forgotPassword';\nimport PrivateRoute from './helpers/components/privateRoute';\nimport ProfileComponent from './components/profilePage';\n\nimport { Toast } from 'react-bootstrap'\nimport ToastContext from './helpers/contexts/toast/toastContext'\n\nimport WithAxios from \"./helpers/components/withAxios\";\nimport UserProvider from './helpers/contexts/user/userProvider';\n\nlibrary.add(faSearch, faPlus, faThumbsUp, faThumbsDown, faEye, faPlay, faFilter, faCaretUp, faCaretDown, faEllipsisV,\n    faSortDown, faSortUp, faTrashAlt, faTimes, faGlobeEurope, faLock);\n\nconst pathName = process.env.REACT_APP_PATH_NAME\n\nfunction App(props) {\n\n    const { toast, clearToast } = useContext(ToastContext)\n\n    return (\n        <div>\n            {\n                <div className=\"toast-root\">\n                    <Toast\n\n                        show={toast.isOpen}\n                        onClose={clearToast}\n                        autohide\n                        className=\"toast-element bg-secondary\">\n                        <Toast.Header>\n                            <strong className=\"me-auto\">Playlist</strong>\n                        </Toast.Header>\n                        <Toast.Body>{toast.message}</Toast.Body>\n                    </Toast>\n                </div>\n            }\n            <Router>\n                <UserProvider>\n                    <WithAxios>\n                        <Route component={() => <NavbarComponent />} />\n\n                        <PrivateRoute exact path={[`${pathName}settings`, `${pathName}profile/settings`, `${pathName}film/:id/settings`, `${pathName}search/settings`, `${pathName}add/settings`, `${pathName}playlists/settings`]}\n                            component={SettingsComponent} />\n\n                        <Route exact path={[`${pathName}login`, `${pathName}film/:id/login`, `${pathName}search/login`, `${pathName}add/login`, `${pathName}playlists/login`]}\n                            component={LoginComponent} />\n\n                        <Route exact path={[`${pathName}register`, `${pathName}film/:id/register`, `${pathName}search/register`, `${pathName}add/register`, `${pathName}playlists/register`]}\n                            component={RegisterComponent} />\n\n                        <Route exact path={[`${pathName}reset/:token`, `${pathName}film/:id/reset/:token`, `${pathName}search/reset/:token`, `${pathName}add/reset/:token`, `${pathName}playlists/reset/:token`]}\n                            component={ResetPasswordComponent} />\n\n                        <Route exact path={[`${pathName}forgot`, `${pathName}film/:id/forgot`, `${pathName}search/forgot`, `${pathName}add/forgot`, `${pathName}playlists/forgot`]}\n                            component={ForgotPasswordComponent} />\n\n                        <Switch>\n\n                            <Route exact path={[`${pathName}film/:id`, `${pathName}film/:id/login`, `${pathName}film/:id/register`, `${pathName}film/:id/reset/:token`,\n                            `${pathName}film/:id/forgot`, `${pathName}film/:id/settings`]} component={FilmComponent} />\n\n                            <Route exact path={[`${pathName}`, `${pathName}login`, `${pathName}register`, `${pathName}settings`,\n                            `${pathName}reset/:token`, `${pathName}forgot`]} component={HomeComponent} />\n\n                            <Route exact path={[`${pathName}search`, `${pathName}search/login`, `${pathName}search/settings`, `${pathName}search/register`, `${pathName}search/reset/:token`, `${pathName}search/forgot`]} component={SearchComponent} />\n\n                            <PrivateRoute exact path={[`${pathName}add`, `${pathName}add/settings`]} component={AddFilmComponent} />\n\n                            <Route exact path={[`${pathName}playlists`, `${pathName}playlists/login`, `${pathName}playlists/settings`, `${pathName}playlists/register`, `${pathName}playlists/reset/:token`,\n                            `${pathName}playlists/forgot`]} component={PlaylistsPage} />\n\n                            <PrivateRoute exact path={[`${pathName}profile`, `${pathName}profile/settings`]} component={ProfileComponent} />\n\n                            <Route exact path=\"*\" component={NotFoundComponent} />\n\n                        </Switch>\n                    </WithAxios>\n                </UserProvider>\n            </Router>\n            <RemoveModal />\n        </div>\n    );\n}\n\nexport default App\n\n","const isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { useState } from 'react'\nimport ToastContext from './toastContext'\n\nconst ToastProvider = ({ children }) => {\n    const [toast, setToast] = useState({ isOpen: false, message: '', isPrevoius: false })\n\n    const createToast = (message) => {\n        if (toast.isPrevoius) {\n            setToast({ isOpen: false, message: '', isPrevoius: true })\n            setTimeout(() => setToast({ isOpen: true, message: message, isPrevoius: true }), 850)\n        } else {\n            setToast({ isOpen: true, message: message, isPrevoius: true })\n        }\n    }\n\n    const clearToast = () => {\n        setToast({ isOpen: false, message: '', isPrevoius: false })\n    }\n\n    return (\n        <ToastContext.Provider value={{ toast, createToast, clearToast }}>\n            {children}\n        </ToastContext.Provider>\n    )\n}\n\nexport default ToastProvider","import { useState } from 'react'\nimport RemoveModalContext from './removeModalContext'\n\nconst RemoveModalProvider = ({ children }) => {\n\n    const [removeModalData, setRemoveModalData] = useState({ show: false, isRemoving: false, id: null, type: null, title: '' })\n\n    const showModal = (id, type, title) => {\n        setRemoveModalData({ show: true, isRemoving: false, id: id, type: type, title: title })\n    }\n\n    const remove = () => {\n        setRemoveModalData(prevState => {\n            return { ...prevState, show: false, isRemoving: true }\n        })\n    }\n\n    const clear = () => {\n        setRemoveModalData({ show: false, isRemoving: false, id: null, type: null, title: '' })\n    }\n\n    return (\n        <RemoveModalContext.Provider value={{ showModal, removeModalData, remove, clear }} >\n            {children}\n        </RemoveModalContext.Provider>\n    )\n}\n\nexport default RemoveModalProvider","import \"es6-promise\";\nimport \"isomorphic-fetch\";\n\nimport 'react-app-polyfill/ie9';\nimport 'react-app-polyfill/ie11';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport ToastProvider from \"./helpers/contexts/toast/toastProvider\";\nimport RemoveModalProvider from \"./helpers/contexts/removeModal/removeModalProvider\";\n\nReactDOM.render(\n    <ToastProvider>\n        <RemoveModalProvider>\n            <App />\n        </RemoveModalProvider>\n    </ToastProvider>\n    ,\n    document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}