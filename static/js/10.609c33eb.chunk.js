(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[10],{370:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c}));var r=10,a=12,i=10,o=40,c=20},372:function(e,t,n){"use strict";var r=n(9),a=n(358),i=n(376),o=n.n(i),c=n(1);t.a=function(e){var t=e.onClick,n=e.children,i=e.className,l=o()({background:"black"}),s=Object(r.a)(l,2),u=s[0],f=s[1];return Object(c.jsxs)(a.a,{variant:"link",onClick:function(e){t(e)},onMouseDown:u,className:"button-ripple ".concat(i),children:[n,f]})}},373:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return s}));var r=n(19),a=n(49),i=function(e){return r.a.post("playlists",e,{headers:Object(a.a)()})},o=function(e){return r.a.get("playlists/".concat(e),{headers:Object(a.a)()})},c=function(e){return r.a.get("playlists",{params:e,headers:Object(a.a)()})},l=function(e,t){return r.a.patch("playlists/".concat(e),t,{headers:Object(a.a)()})},s=function(e){return r.a.delete("playlists/".concat(e),{headers:Object(a.a)()})}},374:function(e,t,n){"use strict";var r=n(21),a=n.n(r),i=n(35),o=n(9),c=n(145),l=n(143),s=n(0),u=n(373),f=n(372),d=n(1);t.a=function(e){var t=e.isPublic,n=e.id,r=e.isProfile,p=e.dispatchPrivacyUpdate,b=e.filmDispatch,m=Object(s.useState)(!1),y=Object(o.a)(m,2),h=y[0],j=y[1];Object(s.useEffect)((function(){function e(){return(e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.c(n,{is_public:!t}).then((function(e){j(!1),p({type:"change-playlist-privacy-success",payload:e.data}),void 0!==b&&b({type:"field",fieldName:"reloadPlaylist",payload:!0})})).catch((function(e){console.error(e),j(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}h&&function(){e.apply(this,arguments)}()}),[p,h,t,n,b]);var O=Object(d.jsx)(f.a,{className:"button-ripple-24 p-0",onClick:function(e){e.stopPropagation(),h||j(!0)},children:Object(d.jsx)(l.a,{icon:t?"globe-europe":"lock"})});return r?Object(d.jsx)(c.a,{className:"text-center justify-content-center d-flex align-items-center p-0 flex-grow-0",children:Object(d.jsx)(c.a,{className:"remove-holder p-0 m-0 flex-grow-0",style:{height:"24px",width:"24"},children:O})}):O}},375:function(e,t,n){"use strict";var r=n(9),a=n(0),i=n.n(a),o=function(e){var t=e.target,n=e.onIntersect,r=e.threshold,a=void 0===r?.1:r,o=e.rootMargin,c=void 0===o?"0px":o;i.a.useEffect((function(){var e=new IntersectionObserver(n,{rootMargin:c,threshold:a}),r=t.current;return e.observe(r),function(){e.unobserve(r)}}))},c=(n(379),n(1)),l=function(e){var t=e.src,n=e.thumb,i=Object(a.useState)(!1),o=Object(r.a)(i,2),l=o[0],s=o[1];return Object(c.jsxs)("div",{className:"ratio ratio-16x9",children:[Object(c.jsx)("img",{className:"image thumb",alt:"",src:n,style:{visibility:l?"hidden":"visible"}}),Object(c.jsx)("img",{onLoad:function(){s(!0)},className:"image full",style:{opacity:l?1:0},alt:"",src:t})]})};t.a=function(e){var t=e.image,n=Object(a.useRef)(),i=Object(a.useState)(!1),s=Object(r.a)(i,2),u=s[0],f=s[1];return o({target:n,onIntersect:function(e,t){Object(r.a)(e,1)[0].isIntersecting&&(f(!0),t.unobserve(n.current))}}),Object(c.jsx)("div",{ref:n,className:"image-container ratio ratio-16x9 play-image",children:u&&Object(c.jsx)(l,{src:t.concat("?width=small_webp"),thumb:t.concat("?width=preview_webp")})})}},376:function(e,t,n){"use strict";var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=r?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(n,o,c):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(n(0));function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(){return(o=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?c(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)([]),2),n=t[0],a=t[1];return[function(t){var n=t.currentTarget.getBoundingClientRect(),r=n.left,i=n.top,o=t.clientX-r,c=t.clientY-i,s=Math.min(t.currentTarget.clientHeight,t.currentTarget.clientWidth,100),d={key:t.timeStamp,style:l({display:"block",width:s,height:s,position:"absolute",left:o-s/2,top:c-s/2,background:"currentColor",borderRadius:"50%",opacity:.4,pointerEvents:"none",animationName:"useRippleAnimation",animationDuration:"0.7s"},e)};a((function(e){return[].concat(function(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e),[d])}))},n.map((function(e){return r.default.createElement("span",o({},e,{onAnimationEnd:function(){a((function(t){return t.filter((function(t){return t.key!==e.key}))}))}}))}))]}},378:function(e,t,n){"use strict";var r,a,i;a=[t,n(0),n(3)],void 0===(i="function"===typeof(r=function(t,n,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(null==e)return{};var n,r,a=s(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function s(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function p(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?m(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){function t(){var e,n;u(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return j(m(n=p(this,(e=b(t)).call.apply(e,[this].concat(a)))),"onResize",(function(){n.rafId&&window.cancelAnimationFrame(n.rafId),n.rafId=window.requestAnimationFrame(n.update.bind(m(n)))})),j(m(n),"onToggled",(function(e){"function"===typeof n.props.onToggled&&setTimeout((function(){return n.props.onToggled(e)}),0)})),j(m(n),"onTruncated",(function(){"function"===typeof n.props.onTruncated&&setTimeout((function(){return n.props.onTruncated()}),0)})),j(m(n),"onCalculated",(function(){"function"===typeof n.props.onCalculated&&setTimeout((function(){return n.props.onCalculated()}),0)})),j(m(n),"update",(function(){var e=window.getComputedStyle(n.scope),t=[e["font-weight"],e["font-style"],e["font-size"],e["font-family"],e["letter-spacing"]].join(" ");n.canvas.font=t,n.forceUpdate()})),n}return y(t,e),d(t,[{key:"componentDidMount",value:function(){var e=document.createElement("canvas"),t=document.createDocumentFragment(),n=window.getComputedStyle(this.scope),r=[n["font-weight"],n["font-style"],n["font-size"],n["font-family"]].join(" ");t.appendChild(e),this.canvas=e.getContext("2d"),this.canvas.font=r,this.forceUpdate(),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),this.rafId&&window.cancelAnimationFrame(this.rafId)}},{key:"measureWidth",value:function(e){return Math.ceil(this.canvas.measureText(e).width)}},{key:"getRenderText",value:function(){var e=this.props,t=(e.containerClassName,e.element,e.line),r=(e.onCalculated,e.onTruncated,e.onToggled,e.text),i=e.textElement,o=e.textTruncateChild,c=e.truncateText,s=e.maxCalculateTimes,u=l(e,["containerClassName","element","line","onCalculated","onTruncated","onToggled","text","textElement","textTruncateChild","truncateText","maxCalculateTimes"]),f=this.scope.getBoundingClientRect().width;if(0===f)return null;if(f>=this.measureWidth(r))return this.onToggled(!1),(0,n.createElement)(i,u,r);var d="";if(o&&"string"===typeof o.type){var p=o.type;(p.indexOf("span")>=0||p.indexOf("a")>=0)&&(d=o.props.children)}for(var b=1,m=r.length,y="",h=0,j=0,O=t,g=0,v=!1,x=!1,w=0,C=-1,T="",k=0;O-- >0;){for(T=O?"":c+(d?" "+d:"");b<=m;){if(y=r.substr(j,b),!((g=this.measureWidth(y+T))<f)){do{if(k++>=s)break;y=r.substr(j,b),O||b--," "===y[y.length-1]&&(y=r.substr(j,b-1)),v&&(C=y.lastIndexOf(" "))>-1?(b=C,O&&b++,y=r.substr(j,b)):(b--,y=r.substr(j,b)),g=this.measureWidth(y+T)}while(g>=f&&y.length>0);j+=b;break}-1===(h=r.indexOf(" ",b+1))?(b+=1,v=!1):(v=!0,b=h)}if(b>=m){j=m;break}v&&!x&&-1===r.substr(w,b).indexOf(" ")&&(x=-1===r.substr(w,b).indexOf(" "),O--),w=b+1}return j===m?(this.onToggled(!1),(0,n.createElement)(i,u,r)):(this.onTruncated(),this.onToggled(!0),a.default.createElement("span",u,(0,n.createElement)(i,u,r.substr(0,j)+c+" "),o))}},{key:"render",value:function(){var e=this,t=this.props,r=t.element,a=t.text,i=t.style,o=void 0===i?{}:i,c=t.containerClassName,s=t.line,u=(t.onCalculated,t.onTruncated,t.onToggled,t.textElement),f=(t.textTruncateChild,t.truncateText,t.maxCalculateTimes,l(t,["element","text","style","containerClassName","line","onCalculated","onTruncated","onToggled","textElement","textTruncateChild","truncateText","maxCalculateTimes"])),d=o.fontWeight,p=o.fontStyle,b=o.fontSize,m=o.fontFamily,y=this.scope&&s?this.getRenderText():(0,n.createElement)(u,f,a),h={ref:function(t){e.scope=t},className:c,style:{overflow:"hidden",fontWeight:d,fontStyle:p,fontSize:b,fontFamily:m}};return this.scope&&this.onCalculated(),(0,n.createElement)(r,h,y)}}]),t}(n.Component);j(O,"propTypes",{containerClassName:i.default.string,element:i.default.string,line:i.default.oneOfType([i.default.number,i.default.bool]),onCalculated:i.default.func,onTruncated:i.default.func,onToggled:i.default.func,text:i.default.string,textElement:i.default.node,textTruncateChild:i.default.node,truncateText:i.default.string,maxCalculateTimes:i.default.number}),j(O,"defaultProps",{element:"div",line:1,text:"",textElement:"span",truncateText:"\u2026",maxCalculateTimes:10}),t.default=O,e.exports=t.default})?r.apply(t,a):r)||(e.exports=i)},379:function(e,t,n){},380:function(e,t,n){"use strict";var r=n(143),a=n(372),i=n(1);t.a=function(e){var t=e.handleRemove;return Object(i.jsx)(a.a,{className:"button-ripple-24 remove-holder p-0",onClick:t,children:Object(i.jsx)(r.a,{icon:"trash-alt"})})}},394:function(e,t,n){"use strict";var r=n(9),a=n(0),i=n(145),o=n(361),c=n(143),l=n(378),s=n.n(l),u=n(375),f=n(380),d=n(374),p=n(1);t.a=function(e){var t=e.playlist,n=e.handleRedirect,l=e.handleRemove,b=e.isProfile,m=e.dispatchPrivacyUpdate,y=b?8:10,h=Object(a.useState)("mb-5 play-outer-container remove-container"),j=Object(r.a)(h,2),O=j[0],g=j[1];return Object(a.useEffect)((function(){t.film_id||g("mb-5 play-cursor-default remove-container")}),[t.film_id]),Object(p.jsx)(i.a,{xs:12,sm:6,md:3,lg:2,children:Object(p.jsxs)(i.a,{className:O,onClick:function(){return n(t.id,t.film_id)},children:[Object(p.jsxs)("div",{className:"embed-responsive embed-responsive-16by9 z-depth-1-half play-container",children:[Object(p.jsx)(u.a,{image:t.img}),Object(p.jsxs)(o.a,{style:{width:"100%",margin:0},className:"play-middle",children:[Object(p.jsx)(i.a,{xs:5,sm:5,style:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:Object(p.jsx)(c.a,{icon:"play"})}),Object(p.jsx)(i.a,{xs:7,sm:7,style:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:Object(p.jsx)("small",{className:"fw-bold",children:"Play all"})})]})]}),Object(p.jsxs)(o.a,{className:"m-0 mt-1",children:[Object(p.jsx)(i.a,{xs:y,sm:y,className:"p-0",children:Object(p.jsx)(s.a,{line:1,text:t.title,className:"mb-1 mt-1 title "})}),b&&Object(p.jsxs)(i.a,{xs:4,sm:4,className:"p-0 d-flex justify-content-end",children:[Object(p.jsx)(d.a,{id:t.id,isPublic:t.is_public,isProfile:!0,dispatchPrivacyUpdate:m}),Object(p.jsx)(f.a,{handleRemove:l})]})]}),Object(p.jsx)("p",{className:"mb-0 author-nick-color",children:Object(p.jsx)("small",{children:t.author_name})})]})},t.id)}},484:function(e,t,n){"use strict";n.r(t);var r=n(21),a=n.n(r),i=n(35),o=n(9),c=n(0),l=n(18),s=n(361),u=n(362),f=n(373),d=n(80),p=n(15),b=n(2),m=n(370),y={playlists:null,playlistsCount:0,isLoading:!1,isAllFetched:!1,isInitialLoaded:!1,error:null},h=function(e,t){switch(t.type){case"field":return Object(b.a)(Object(b.a)({},e),{},Object(p.a)({},t.fieldName,t.payload));case"initial-success":return Object(b.a)(Object(b.a)({},e),{},{playlists:Object(d.a)(new Set(Object(d.a)(t.playlists))),isLoading:!1,isInitialLoaded:!0,isAllFetched:t.responseCount<m.b,playlistsCount:e.playlistsCount+t.responseCount});case"load":return Object(b.a)(Object(b.a)({},e),{},{isLoading:!0,isAllFetched:!1,error:null});case"success":return Object(b.a)(Object(b.a)({},e),{},{playlists:Object(d.a)(new Set([].concat(Object(d.a)(e.playlists),Object(d.a)(t.playlists)))),isLoading:!1,isAllFetched:t.responseCount<m.c,playlistsCount:e.playlistsCount+t.responseCount,error:null});case"clear":return y;case"error":return Object(b.a)(Object(b.a)({},e),{},{isLoading:!1,isAllFetched:!1,error:t.payload});default:return e}},j=n(144),O=n(394),g=n(1);t.default=function(e){var t=Object(l.g)(),n=Object(c.useReducer)(h,y),r=Object(o.a)(n,2),d=r[0],p=r[1],b=d.playlists,v=d.isLoading,x=d.isAllFetched,w=d.isInitialLoaded,C=d.playlistsCount,T=Object(c.useCallback)((function(){v||x||!w||p({type:"load"})}),[x,v,w]);Object(j.a)(T,{triggerOnNoScroll:!0}),Object(c.useEffect)((function(){function e(){return(e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.e({limit:m.b}).then((function(e){var t=e.data,n=t.filter((function(e){return e.film_id}));n.forEach((function(e){e.img="".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.film_id,"/thumbnail")})),p({type:"initial-success",playlists:n,responseCount:t.length})})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}p({type:"clear"}),function(){e.apply(this,arguments)}()}),[]),Object(c.useEffect)((function(){function e(){return(e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.e({skip:C,limit:m.c}).then((function(e){var t=e.data,n=t.filter((function(e){return e.film_id}));n.forEach((function(e){e.img="".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.film_id,"/thumbnail")})),p({type:"success",playlists:n,responseCount:t.length})})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}v&&w&&function(){e.apply(this,arguments)}()}),[v,w,b,C]);var k=function(e,n){t.push({pathname:"".concat("/filmapp-react-frontend/","film/")+n,search:"?list=".concat(e)})};return Object(g.jsxs)(s.a,{className:"mt-5 mx-2",children:[b&&b.map((function(e,t){return Object(g.jsx)(O.a,{playlist:e,index:t,handleRedirect:k},e.id)})),!x&&Object(g.jsx)("div",{className:"fetch-loader d-flex justify-content-center",children:v&&Object(g.jsx)(u.a,{animation:"border"})})]})}}}]);
//# sourceMappingURL=10.609c33eb.chunk.js.map