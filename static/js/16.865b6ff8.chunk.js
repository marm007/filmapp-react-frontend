(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[16],{521:function(t,e,n){"use strict";n.r(e);var a=n(526),i=n.n(a),r=n(527),c=n(60),s=n(1),u=n(7),o=n(539),l=n(139),d=n(137),f=n(15),b={title:"",initialPlaylist:{title:""},isInitialLoaded:!1,isSumbitted:!1,isSending:!1,isError:!1,error:"",isSuccess:!1},p=function(t,e){switch(e.type){case"field":return Object(f.a)(Object(f.a)({},t),{},Object(d.a)({error:"",isError:!1},e.fieldName,e.payload));case"initial-success":return Object(f.a)(Object(f.a)({},t),{},{isInitialLoaded:!0,title:e.payload,initialPlaylist:{title:e.payload}});case"submit":return Object(f.a)(Object(f.a)({},t),{},{isSumbitted:!0,isError:!1,error:""});case"send":return Object(f.a)(Object(f.a)({},t),{},{isSending:!0});case"success":return Object(f.a)(Object(f.a)({},t),{},{isSuccess:!0,isSending:!1,isSumbitted:!1,isError:!1,error:""});case"error":return Object(f.a)(Object(f.a)({},t),{},{isSuccess:!1,isSending:!1,isSumbitted:!1,isError:!0,error:e.payload?e.payload:""});default:return t}},j=n(544),m=n(2);e.default=function(){var t=Object(u.g)(),e=Object(u.i)().id,n=Object(s.useReducer)(p,b),a=Object(c.a)(n,2),d=a[0],f=a[1],O=d.title,h=d.initialPlaylist,v=d.isInitialLoaded,y=d.isSumbitted,g=d.isSending,x=d.isError,S=d.error,w=d.isSuccess;Object(s.useEffect)((function(){var n=function(){var t=Object(r.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.b(e).then((function(t){f({type:"initial-success",payload:t.data.title})})).catch((function(t){f({type:"error"})}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();console.log(t.location.state),t.location.state&&t.location.state.title?f({type:"initial-success",payload:t.location.state.title}):n()}),[e,t]),Object(s.useEffect)((function(){g&&function(){var n=Object(r.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j.c(e,{title:O}).then((function(e){f({type:"success"}),setTimeout((function(){return t.goBack()}),500)})).catch((function(t){f({type:"error"})}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[e,t,g,O]);return Object(m.jsxs)(l.a,{id:"updatatePlaylistModal",title:"Update",onClose:function(){t.goBack()},children:[Object(m.jsxs)("form",{onSubmit:g?null:function(t){t.preventDefault(),f({type:"submit"}),O&&f({type:"send"})},children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"title",children:"Title"}),Object(m.jsx)(o.a,{type:"text",name:"title",value:O,isInvalid:y&&!O,onChange:function(t){return f({type:"field",fieldName:"title",payload:t.target.value})}}),Object(m.jsx)("div",{className:"invalid-feedback",children:"Title cannot be empty"})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("button",{className:"btn btn-primary",disabled:!v||v&&O===h.title,type:"submit",children:"Save"}),g&&Object(m.jsx)("div",{className:"ml-2 spinner-grow"})]})]}),x&&Object(m.jsx)("div",{className:"alert alert-danger mt-2 mb-0",children:S||"Something went wrong"}),w&&Object(m.jsx)("div",{className:"alert alert-success mt-2 mb-0",children:"Changes saved successfully!"})]})}},526:function(t,e,n){t.exports=n(240)},527:function(t,e,n){"use strict";function a(t,e,n,a,i,r,c){try{var s=t[r](c),u=s.value}catch(o){return void n(o)}s.done?e(u):Promise.resolve(u).then(a,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var c=t.apply(e,n);function s(t){a(c,i,r,s,u,"next",t)}function u(t){a(c,i,r,s,u,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return i}))},539:function(t,e,n){"use strict";var a=n(1),i=n(2);e.a=function(t){var e=t.isInvalid,n=t.onChange,r=t.type,c=t.name,s=t.value,u=t.placeholder,o=void 0===u?"":u,l="textarea"===r?"textarea":"input",d=Object(a.useRef)(null);return Object(a.useEffect)((function(){d.current&&(e?d.current.classList.add("is-invalid"):d.current.classList.remove("is-invalid"))}),[e]),Object(i.jsx)(l,{ref:d,className:"form-control",placeholder:o,type:r,name:c,value:s,onChange:n})}},544:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return o}));var a=n(42),i=n(138),r=function(t){return a.a.post("playlists",t,{headers:Object(i.a)()})},c=function(t){return a.a.get("playlists/".concat(t),{headers:Object(i.a)()})},s=function(t){return a.a.get("playlists",{params:t,headers:Object(i.a)()})},u=function(t,e){return a.a.patch("playlists/".concat(t),e,{headers:Object(i.a)()})},o=function(t){return a.a.delete("playlists/".concat(t),{headers:Object(i.a)()})}}}]);
//# sourceMappingURL=16.865b6ff8.chunk.js.map