{"version":3,"sources":["components/dialogs/login/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","helpers/index.js","components/models/input/index.js","components/dialogs/reducer.js"],"names":["Login","login","useContext","UserContext","history","useHistory","location","useLocation","useReducer","authReducer","authInitialState","state","dispatch","email","password","isSubmitted","isSending","isError","isSuccess","error","useEffect","a","authApi","then","res","type","data","user","name","id","token","refreshToken","setTimeout","handleCloseModalWindow","catch","err","errorMessage","response","errors","payload","console","sendData","title","onClose","onSubmit","e","preventDefault","className","htmlFor","isInvalid","value","onChange","fieldName","target","disabled","onClick","push","pathname","slice","search","module","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","done","Promise","_asyncToGenerator","fn","self","this","args","arguments","apply","undefined","displayCommentDate","comment","date","Date","parse","createdAt","getDate","getMonth","getFullYear","getHours","getMinutes","parseSearchDate","film","today","time","Math","abs","floor","UTC","toSplit","replace","split","historyObject","process","Input","placeholder","InputTag","inputRef","useRef","current","classList","add","remove","ref","nick","action"],"mappings":"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","file":"static/js/11.0b4b68fa.chunk.js","sourcesContent":["import React, { useEffect, useContext, useReducer } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom'\n\nimport Modal from '../../models/modal';\nimport Input from '../../models/input';\n\nimport * as authApi from '../../../services/authService'\n\nimport UserContext from '../../../helpers/contexts/user/userContext'\nimport { authInitialState, authReducer } from '../reducer';\nimport { handleCloseModalWindow } from '../../../helpers';\n\nconst Login = () => {\n\n    const { login } = useContext(UserContext);\n\n    let history = useHistory()\n    let location = useLocation()\n\n    const [state, dispatch] = useReducer(authReducer, authInitialState)\n    const { email, password, isSubmitted, isSending, isError, isSuccess, error } = state\n\n    useEffect(() => {\n        async function sendData() {\n            await authApi.login({ email, password })\n                .then(res => {\n                    dispatch({\n                        type: 'success'\n                    })\n                    login(res.data.user.name, res.data.user.id, res.data.token, res.data.refreshToken)\n                    setTimeout(() => handleCloseModalWindow(history, '/login', true), 1500)\n                })\n                .catch(err => {\n                    let errorMessage = null;\n\n                    if (err.response && err.response.data && err.response.data.errors)\n                        errorMessage = err.response.data.errors;\n\n                    dispatch({\n                        type: 'error',\n                        payload: errorMessage\n                    })\n\n                    console.error(err)\n                })\n        }\n        if (isSending) sendData()\n    }, [isSending, email, password, history, location, login])\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        dispatch({ type: 'submit' })\n\n        if (email && password) {\n            dispatch({ type: 'send' })\n        }\n    }\n\n    const handleForgotPassword = () => {\n        handleCloseModalWindow(history, '/login')\n\n        setTimeout(function () {\n            history.push(`${location.pathname.slice(0, -5)}forgot${location.search}`);\n        }, 500);\n    };\n\n    const modalClose = () => {\n        handleCloseModalWindow(history, '/login')\n    };\n\n    const handleRegister = () => {\n        handleCloseModalWindow(history, '/login')\n\n        setTimeout(function () {\n            history.push(`${location.pathname.slice(0, -5)}register${location.search}`);\n        }, 500);\n    };\n\n\n\n    return (\n        <Modal id=\"loginModal\" title=\"Login\" onClose={modalClose}>\n\n            <form onSubmit={isSending ? null : handleSubmit}>\n                <div>\n                    <label className=\"form-label\" htmlFor=\"email\">Email</label>\n                    <Input isInvalid={isSubmitted && !email} type=\"email\" name=\"email\" value={email}\n                        onChange={e => dispatch({ type: 'field', fieldName: 'email', payload: e.target.value })} />\n                    <div className=\"invalid-feedback\">\n                        Email is required\n                    </div>\n                </div>\n\n                <div className=\"mt-2\">\n                    <label className=\"form-label\" htmlFor=\"password\">Password</label>\n                    <Input isInvalid={isSubmitted && !password} type=\"password\" name=\"password\"\n                        value={password} onChange={e => dispatch({ type: 'field', fieldName: 'password', payload: e.target.value })} />\n                    <div className=\"invalid-feedback\">\n                        Password is required\n                    </div>\n                </div>\n\n                <div className=\"d-flex align-items-center mt-2\">\n                    <button disabled={isSending} type=\"submit\" className=\"btn btn-primary\">\n                        Login\n                    </button>\n                    {\n                        isSending &&\n                        <div className=\"spinner-grow ml-2\" />\n                    }\n                </div>\n            </form>\n\n            {\n                isError &&\n                <div className=\"alert alert-danger mt-2 mb-0\">\n                    {error ? error : 'Error while logging in.'}\n                </div>\n            }\n\n            {\n                isSuccess &&\n                <div className=\"alert alert-success mt-2 mb-0\">\n                    You are now logged in.\n                </div>\n            }\n\n            <button onClick={handleRegister} className=\"p-0 mt-2 btn btn-link\">Register</button>\n\n            <div className=\"col-12 col-sm-12 p-0 m-0 \">\n                <button type=\"button\" onClick={handleForgotPassword} className=\"p-0 mt-2 btn btn-link\">Forgot password?</button>\n            </div>\n        </Modal>\n    );\n}\n\nexport default Login","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export const checkIfPlaylistButtonClick = (target) => {\n    if ((target.tagName === 'path' && target.parentNode.className.animVal && target.parentNode.className.animVal.includes('playlist-add-icon')) ||\n        (target.tagName === 'svg' && target.className.animVal && target.className.animVal.includes('playlist-add-icon')) ||\n        (target.className && typeof target.className === 'string' && target.className.includes('playlist-add-icon-holder')))\n        return true\n    return false\n}\n\nexport const displayCommentDate = (comment) => {\n    let date = new Date(Date.parse(comment.createdAt));\n    let time = (('0' + date.getDate()).slice(-2) + '-' + ('0' + (date.getMonth() + 1)).slice(-2) + '-'\n        + ('0' + date.getFullYear()).slice(-2)\n        + ' o ' + ('0' + date.getHours()).slice(-2) + ':' + ('0' + date.getMinutes()).slice(-2))\n    return time;\n};\n\nexport const parseSearchDate = (film) => {\n\n    let date = new Date(Date.parse(film.createdAt));\n    let today = new Date();\n\n\n    let time = Math.abs(Math.floor((\n        Date.UTC(\n            date.getFullYear(),\n            date.getMonth(),\n            date.getDate(),\n            date.getHours(),\n            date.getMinutes()) -\n        Date.UTC(\n            today.getFullYear(),\n            today.getMonth(),\n            today.getDate(),\n            today.getHours(),\n            today.getMinutes()))\n        / (1000 * 60)));\n\n    if (time / 60 >= 1) {\n        time /= 60;\n\n        if (time / 24 >= 1) {\n\n            time /= 24;\n\n            if (time / 30 >= 1) {\n\n                time /= 30;\n\n                if (time / 12 >= 1) {\n\n                    time = time / 12;\n                    time = Math.floor(time) + ' years ';\n\n                } else {\n                    time = Math.floor(time) + ' months ';\n                }\n\n            } else {\n                time = Math.floor(time) + ' days ';\n            }\n\n        } else {\n            time = Math.floor(time) + ' hours ';\n        }\n    } else {\n        time = Math.floor(time) + ' minutes ';\n    }\n\n    time = time + 'ago';\n\n    return time;\n};\n\n\nexport const handleCloseModalWindow = (history, toSplit, replace = false) => {\n\n    let pathname = history.location.pathname.split(toSplit)[0]\n\n    const historyObject = {\n        pathname: pathname === '' ? process.env.REACT_APP_PATH_NAME : pathname,\n        search: history.location.search,\n        state: history.location.state\n    }\n\n    if (replace) {\n        history.replace(historyObject)\n    }\n    else {\n        history.push(historyObject)\n    }\n\n}","import { useEffect, useRef } from \"react\"\n\nconst Input = ({ isInvalid, onChange, type, name, value, placeholder = '' }) => {\n\n    const InputTag = type === 'textarea' ? 'textarea' : 'input'\n\n    const inputRef = useRef(null)\n\n    useEffect(() => {\n        let ref = inputRef.current\n        if (ref) {\n            if (isInvalid) inputRef.current.classList.add('is-invalid')\n            else inputRef.current.classList.remove('is-invalid')\n        }\n    }, [isInvalid])\n\n    return (\n        <InputTag ref={inputRef} className=\"form-control\"\n            placeholder={placeholder}\n            type={type} name={name}\n            value={value} onChange={onChange} />\n    )\n}\n\nexport default Input","\nexport const authInitialState = {\n    email: '',\n    nick: '',\n    password: '',\n    isSubmitted: false,\n    isSending: false,\n    isSuccess: false,\n    isError: false,\n    error: null\n}\n\nexport const authReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                isSubmitted: false,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'submit': {\n            return {\n                ...state,\n                isError: false,\n                error: null,\n                isSubmitted: true\n            }\n        }\n        case 'send': {\n            return {\n                ...state,\n                isSending: true\n            }\n        }\n        case 'success': {\n            return {\n\n                ...state,\n                isError: false,\n                error: null,\n                isSending: false,\n                isSuccess: true\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isSending: false,\n                isError: true,\n                error: action.payload\n            }\n        }\n        default: return state\n    }\n}"],"sourceRoot":""}