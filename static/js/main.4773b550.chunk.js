(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[0],{104:function(e,t,a){"use strict";var n=a(0),c=Object(n.createContext)({show:!1,isRemoving:!1,id:null,type:null,title:""});t.a=c},105:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return l}));var n=a(38),c=a(22),i=function(e){return c.a.post("auth",{},{auth:{username:e.email,password:e.password}})},s=function(e){return c.a.post("users",e)},r=function(e){return c.a.post("auth/refresh",e,{headers:Object(n.a)()})},o=function(e){return c.a.post("auth/password/forgot",e)},l=function(e,t){return c.a.post("auth/password/reset/".concat(e),t)}},107:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var n=a(18),c=a(2),i={email:"",nick:"",password:"",isSubmitted:!1,isSending:!1,isSuccess:!1,isError:!1,error:null},s=function(e,t){switch(t.type){case"field":return Object(c.a)(Object(c.a)({},e),{},Object(n.a)({isSubmitted:!1},t.fieldName,t.payload));case"submit":return Object(c.a)(Object(c.a)({},e),{},{isError:!1,error:null,isSubmitted:!0});case"send":return Object(c.a)(Object(c.a)({},e),{},{isSending:!0});case"success":return Object(c.a)(Object(c.a)({},e),{},{isError:!1,error:null,isSending:!1,isSuccess:!0});case"error":return Object(c.a)(Object(c.a)({},e),{},{isSending:!1,isError:!0,error:t.payload});default:return e}}},114:function(e,t,a){"use strict";var n=a(0),c=Object(n.createContext)("");t.a=c},119:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"f",(function(){return r})),a.d(t,"g",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return d}));var n=a(22),c=a(38),i=function(e){return n.a.get("films/",{params:e})},s=function(e){return n.a.get("films/".concat(e))},r=function(e){return n.a.get("films/search",{params:e})},o=function(e){return n.a.patch("films/".concat(e,"/view"))},l=function(e){return n.a.post("films",e,{headers:Object(c.a)()})},u=function(e,t){return n.a.patch("films/".concat(e,"/action"),t,{headers:Object(c.a)()})},d=function(e){return n.a.delete("films/".concat(e),{headers:Object(c.a)()})}},128:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var n=a(22),c=a(38),i=function(e){return n.a.get("users/me",{params:e,headers:Object(c.a)()})},s=function(e){return n.a.patch("users",e,{headers:Object(c.a)()})}},145:function(e,t,a){"use strict";var n=a(12),c=a(0),i=a(486),s=a(1);t.a=function(e){var t=Object(c.useState)("data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="),a=Object(n.a)(t,2),r=a[0],o=a[1];return Object(c.useEffect)((function(){o(e.image)}),[e.image]),Object(s.jsx)(i.a,{aspectRatio:"16x9",children:Object(s.jsx)("img",{alt:"",className:"embed-responsive-item play-image",src:r})})}},146:function(e,t,a){"use strict";var n=a(23),c=a.n(n),i=a(35),s=a(12),r=a(45),o=a(302),l=a(48),u=a(0),d=a(93),p=a(1);t.a=function(e){var t=e.isPublic,a=e.id,n=e.isProfile,f=e.dispatchPrivacyUpdate,j=e.filmDispatch,b=Object(u.useState)(!1),m=Object(s.a)(b,2),h=m[0],O=m[1];Object(u.useEffect)((function(){function e(){return(e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.c(a,{is_public:!t}).then((function(e){O(!1),f({type:"change-playlist-privacy-success",payload:e.data}),void 0!==j&&j({type:"field",fieldName:"reloadPlaylist",payload:!0})})).catch((function(e){console.error(e),O(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}h&&function(){e.apply(this,arguments)}()}),[f,h,t,a,j]);var g=Object(p.jsx)(o.a,{style:{marginLeft:"auto",borderRadius:"20px",width:"24px",height:"24px"},className:"m-button",onClick:function(e){e.stopPropagation(),h||O(!0)},children:Object(p.jsx)(l.a,{icon:t?"globe-europe":"lock"})});return n?Object(p.jsx)(r.a,{className:"text-center justify-content-center d-flex align-items-center p-0 flex-grow-0",children:Object(p.jsx)(r.a,{className:"remove-holder p-0 m-0 flex-grow-0",style:{height:"24px",width:"24"},children:g})}):g}},147:function(e,t,a){"use strict";var n=a(45),c=a(302),i=a(48),s=a(1);t.a=function(e){var t=e.handleRemove;return Object(s.jsx)(n.a,{className:"text-center justify-content-center d-flex align-items-center p-0 flex-grow-0",children:Object(s.jsx)(n.a,{className:"remove-holder p-0 m-0 flex-grow-0",style:{height:"24px",width:"24px"},children:Object(s.jsx)(c.a,{style:{marginLeft:"auto",borderRadius:"20px",width:"24px",height:"24px"},className:"m-button ",onClick:t,children:Object(s.jsx)(i.a,{icon:"trash-alt"})})})})}},206:function(e,t,a){"use strict";t.a=a.p+"static/media/image_not_found.c4ba1e76.png"},216:function(e,t,a){"use strict";a(0);var n=a(45),c=a(212),i=a(48),s=a(134),r=a.n(s),o=a(145),l=a(286),u=a(217),d=a(147),p=(a(311),a(1));t.a=function(e){var t=e.film,a=e.index,s=e.handleRedirect,f=e.handleRemove,j=e.isProfile,b=e.isRecommendations;return Object(p.jsx)("div",{className:b?"row mx-0 mb-4":"col mb-5 col-12 col-sm-6 col-md-3 col-lg-2",children:Object(p.jsxs)("div",{className:(b?"row p-0 m-0":"col").concat(" play-outer-container remove-container"),onClick:function(e){Object(u.a)(e.target)||s(t.id)},children:[Object(p.jsx)(n.a,{xs:b?6:12,sm:b?6:12,className:"m-0 p-0",children:Object(p.jsxs)("div",{className:"embed-responsive embed-responsive-16by9 z-depth-1-half play-container",children:[Object(p.jsx)(o.a,{image:t.img}),Object(p.jsx)(i.a,{className:"play-middle",icon:"play"})]})}),Object(p.jsxs)(n.a,{xs:b?6:12,sm:b?6:12,className:b?"m-0":"m-0 p-0",children:[Object(p.jsxs)(c.a,{className:"m-0 mt-1",children:[Object(p.jsx)(n.a,{className:"film-preview-playlist-title-width p-0",children:Object(p.jsx)(r.a,{line:1,text:t.title,className:"mb-1 mt-1 title "})}),Object(p.jsx)(n.a,{className:"p-0 d-flex justify-content-end",children:j?Object(p.jsx)(d.a,{handleRemove:f}):Object(p.jsx)(l.a,{index:a,filmID:t.id})})]}),Object(p.jsx)("p",{className:"mb-0 author-nick-color",children:Object(p.jsx)("small",{children:t.author_name})}),Object(p.jsx)("p",{className:"mb-0 film-views",children:Object(p.jsxs)("small",{children:[t.views," views"]})})]})]})})}},217:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return i}));var n=function(e){return!!("path"===e.tagName&&e.parentNode.className.animVal&&e.parentNode.className.animVal.includes("playlist-add-icon")||"svg"===e.tagName&&e.className.animVal&&e.className.animVal.includes("playlist-add-icon")||e.className&&"string"===typeof e.className&&e.className.includes("playlist-add-icon-holder"))},c=function(e){var t=new Date(Date.parse(e.createdAt));return("0"+t.getDate()).slice(-2)+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getFullYear()).slice(-2)+" o "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)},i=function(e){var t=new Date(Date.parse(e.createdAt)),a=new Date,n=Math.abs(Math.floor((Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())-Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes()))/6e4));return n/60>=1?(n/=60)/24>=1?(n/=24)/30>=1?(n/=30)/12>=1?(n/=12,n=Math.floor(n)+" years "):n=Math.floor(n)+" months ":n=Math.floor(n)+" days ":n=Math.floor(n)+" hours ":n=Math.floor(n)+" minutes ",n+="ago"}},22:function(e,t,a){"use strict";var n=a(290),c=a.n(n).a.create({baseURL:"https://marm007-filmapp-backend-node.herokuapp.com/api/"});t.a=c},276:function(e,t,a){"use strict";var n=a(12),c=a(0);t.a=function(){var e=Object(c.useState)(!1),t=Object(n.a)(e,2),a=t[0],i=t[1],s=function(){i(window.innerWidth<600)};return Object(c.useEffect)((function(){return s(),window.addEventListener("resize",s),function(){return window.removeEventListener("resize",s)}}),[]),a}},283:function(e,t,a){"use strict";var n=a(12),c=a(0),i=a(45),s=a(212),r=a(48),o=a(134),l=a.n(o),u=a(145),d=a(147),p=a(146),f=a(1);t.a=function(e){var t=e.playlist,a=e.handleRedirect,o=e.handleRemove,j=e.isProfile,b=e.dispatchPrivacyUpdate,m=j?8:10,h=Object(c.useState)("mb-5 play-outer-container remove-container"),O=Object(n.a)(h,2),g=O[0],x=O[1];return Object(c.useEffect)((function(){t.film_id||x("mb-5 play-cursor-default remove-container")}),[t.film_id]),Object(f.jsx)(i.a,{xs:12,sm:6,md:3,lg:2,children:Object(f.jsxs)(i.a,{className:g,onClick:function(){return a(t.id,t.film_id)},children:[Object(f.jsxs)("div",{className:"embed-responsive embed-responsive-16by9 z-depth-1-half play-container",children:[Object(f.jsx)(u.a,{image:t.img}),Object(f.jsxs)(s.a,{style:{width:"100%",margin:0},className:"play-middle",children:[Object(f.jsx)(i.a,{xs:5,sm:5,style:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:Object(f.jsx)(r.a,{icon:"play"})}),Object(f.jsx)(i.a,{xs:7,sm:7,style:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:Object(f.jsx)("small",{className:"fw-bold",children:"Play all"})})]})]}),Object(f.jsxs)(s.a,{className:"m-0",children:[Object(f.jsx)(i.a,{xs:m,sm:m,className:"p-0",children:Object(f.jsx)(l.a,{line:1,text:t.title,className:"mb-1 mt-1 title "})}),j&&Object(f.jsxs)(i.a,{xs:4,sm:4,className:"p-0 d-flex justify-content-end",children:[Object(f.jsx)(p.a,{id:t.id,isPublic:t.is_public,isProfile:!0,dispatchPrivacyUpdate:b}),Object(f.jsx)(d.a,{handleRemove:o})]})]}),Object(f.jsx)("p",{className:"mb-0 author-nick-color",children:Object(f.jsx)("small",{children:t.author_name})})]})},t.id)}},286:function(e,t,a){"use strict";var n=a(12),c=a(0),i=a(491),s=a(45),r=a(48),o=a(2),l=a(23),u=a.n(l),d=a(35),p=a(212),f=a(509),j=a(118),b=a(505),m=a(294),h=a(295),O=a(128),g=a(93),x=a(114),y=a(98),v=a(31),w=a(18),A=a(58),N={playlists:[],isLoading:!0,isAllFetched:!1,isCreating:!1,isAdding:!1,playlistToUpgrade:null,title:"",isPublic:!1,error:""};function C(e,t){switch(t.type){case"field":return Object(o.a)(Object(o.a)({},e),{},Object(w.a)({error:""},t.fieldName,t.payload));case"load":return Object(o.a)(Object(o.a)({},e),{},{isLoading:!0,isAllFetched:!1});case"load-success":return Object(o.a)(Object(o.a)({},e),{},{playlists:[].concat(Object(v.a)(e.playlists),Object(v.a)(t.payload)),isLoading:!1,isAllFetched:t.payload<A.d,error:""});case"create":return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isCreating:!0});case"create-success":return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isCreating:!1});case"add":return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isAdding:!0,playlistToUpgrade:t.payload});case"add-update-playlist":return Object(o.a)(Object(o.a)({},e),{},{playlists:e.playlists.map((function(t){return t.id===e.playlistToUpgrade.id?Object(o.a)(Object(o.a)({},t),{},{contains:!t.contains}):t})),playlistToUpgrade:null});case"add-success":return Object(o.a)(Object(o.a)({},e),{},{isAdding:!1});case"change-playlist-privacy-success":return Object(o.a)(Object(o.a)({},e),{},{playlists:e.playlists.map((function(e){return e.id===t.payload.id?Object(o.a)(Object(o.a)({},e),{},{is_public:t.payload.is_public}):e}))});case"error":return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isAllFetched:!1,isCreating:!1,error:t.payload,title:""});default:return e}}var k=a(146),P=a(171),L=a.n(P),E=a(1);var S=function(e){var t=e.filmID,a=e.handlePlaylistClose,l=e.isPreview,v=e.filmDispatch,w=L()({background:"black"}),P=Object(n.a)(w,2),S=P[0],D=P[1],I=Object(c.useContext)(x.a).createToast,T=Object(c.useReducer)(C,N),F=Object(n.a)(T,2),B=F[0],R=F[1],H=B.playlists,M=B.title,U=B.isPublic,G=B.isLoading,Y=B.isAllFetched,J=B.isCreating,X=B.isAdding,z=B.playlistToUpgrade,K=B.error,Z=Object(c.useCallback)((function(){G||Y||J||X||R({type:"load"})}),[G,Y,J,X]),V=Object(y.a)(Z);return Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a({playlists:!0,skip:H.length,limit:A.d}).then((function(e){var a=e.data.playlists;a.forEach((function(e){e.contains=e.films.indexOf(t)>-1})),R({type:"load-success",payload:a})})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}G&&function(){e.apply(this,arguments)}()}),[t,H,G]),Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={title:M,is_public:U,films_id:[t]},e.next=3,g.a(n).then((function(e){R({type:"create-success"}),I("Created playlist ".concat(M)),a()})).catch((function(e){console.error(e);var t=null;e.response&&e.response.data&&e.response.data.error?t=e.response.data.error:e.response&&e.response.data&&e.response.data.errors&&(t=e.response.data.errors[0]),R({type:"error",payload:"Path `title` is required."===t?"Playlist title is required":t})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}J&&function(){e.apply(this,arguments)}()}),[J,M,U,I,a,t]),Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={films_id:[t]},a=z.contains?Object(o.a)(Object(o.a)({},a),{},{is_remove_films:!0}):Object(o.a)(Object(o.a)({},a),{},{is_remove_films:!1}),n=z.contains?"Deleted from playlist ".concat(z.title):"Added to playlist ".concat(z.title),R({type:"add-update-playlist",playlist:z}),e.next=6,g.c(z.id,a).then((function(e){R({type:"add-success"}),l&&v({type:"field",fieldName:"reloadPlaylist",payload:!0}),I(n)})).catch((function(e){return console.error(e)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}X&&z&&function(){e.apply(this,arguments)}()}),[X,z,I,v,t,l]),Object(E.jsxs)(i.a.Menu,{onClick:function(e){return e.stopPropagation()},style:{width:"240px"},children:[Object(E.jsxs)(p.a,{className:"m-0 m-button playlist-add-button-ripple",children:[Object(E.jsx)(s.a,{className:"playlist-add-exit-text-width",children:"Save to..."}),Object(E.jsxs)(s.a,{xs:2,sm:2,onClick:function(e){S(e),setTimeout(a,150)},style:{borderRadius:"20px",width:"24px",height:"24px"},className:"playlist-add-icon-holder p-0 playlist-add-button-ripple d-flex align-items-center text-center justify-content-center",children:[Object(E.jsx)(r.a,{icon:"times"}),D]})]}),Object(E.jsx)(i.a.Divider,{}),Object(E.jsxs)("div",{ref:V,style:{maxHeight:"100px",overflowY:"scroll",minHeight:"3rem"},children:[H.map((function(e,t){return Object(E.jsxs)(p.a,{className:"m-0 playlist-form-group",children:[Object(E.jsx)(s.a,{xs:10,sm:10,className:"p-0",children:Object(E.jsxs)(f.a.Check,{id:e.id,className:"form-check",children:[Object(E.jsx)(j.a.Input,{type:"checkbox",onChange:function(){return function(e){R({type:"add",payload:e})}(e)},checked:e.contains}),Object(E.jsx)(j.a.Label,{children:Object(E.jsx)("p",{className:"playlist-check-label",children:e.title})})]})}),Object(E.jsx)(k.a,{id:e.id,isPublic:e.is_public,isProfile:!1,filmDispatch:v,dispatchPrivacyUpdate:R})]},e.id)})),!Y&&Object(E.jsx)("div",{style:{height:"32px"},className:"d-flex justify-content-center",children:G&&Object(E.jsx)(b.a,{animation:"border"})})]}),Object(E.jsx)(i.a.Divider,{}),Object(E.jsx)(i.a.ItemText,{children:"Create a new playlist"}),Object(E.jsx)(p.a,{className:"m-0 p-0",children:Object(E.jsxs)(f.a,{children:[Object(E.jsx)(m.a,{isInvalid:""!==K,onChange:function(e){return R({type:"field",fieldName:"title",payload:e.target.value})},className:"mb-2 mt-2",placeholder:"Enter playlist title..."}),Object(E.jsx)(m.a.Feedback,{type:"invalid",className:"mb-2 mt-2",children:K}),Object(E.jsxs)(f.a.Select,{"aria-label":"Privacy",className:"mb-2 mt-2",onChange:function(e){return R({type:"field",fieldName:"isPublic",payload:"public"===e.target.value})},children:[Object(E.jsx)("option",{value:"private",children:"Private"}),Object(E.jsx)("option",{value:"public",children:"Public"})]}),Object(E.jsxs)(f.a.Group,{className:"d-flex align-items-center mt-2",children:[Object(E.jsx)(h.a,{disabled:J,onClick:J?null:function(e){e.stopPropagation(),R({type:"create"})},children:"Create"}),J&&Object(E.jsx)(b.a,{className:"ms-2",animation:"grow"})]})]})})]})},D=a(69),I=a(63);a(479);t.a=function(e){var t=Object(c.useContext)(D.a).user,a=L()({background:"black"}),o=Object(n.a)(a,2),l=o[0],u=o[1],d=Object(c.useState)(!1),p=Object(n.a)(d,2),f=p[0],j=p[1];return t.auth?Object(E.jsxs)(i.a,{show:f,onToggle:function(e,t,a){j(e)},className:e.isPreview?"col-sm-2 col-2 p-0":"",children:[Object(E.jsx)(i.a.Toggle,{variant:"link",bsPrefix:"p-0",className:"m-button playlist-add-button-ripple",style:{color:"black"},children:Object(E.jsx)("div",{style:{display:"inline-block",width:"100%",height:"100%"},children:Object(E.jsxs)(s.a,{onClick:l,style:{verticalAlign:"top",borderRadius:"20px",width:"24px",height:"24px"},className:"playlist-add-icon-holder p-0 playlist-add-button-ripple",children:[Object(E.jsx)(r.a,{style:{opacity:f?1:""},className:"playlist-add-icon",icon:I.a}),u]})})}),f&&Object(E.jsx)(S,{isPreview:e.isPreview,filmDispatch:e.filmDispatch,isOpen:f,filmID:e.filmID,handlePlaylistClose:function(){j(!1)}})]}):null}},311:function(e,t,a){},38:function(e,t,a){"use strict";t.a=function(){var e=JSON.parse(localStorage.getItem("accessToken"));return e?{Authorization:"Bearer "+e}:{}}},411:function(e,t,a){},412:function(e,t,a){},452:function(e,t,a){},479:function(e,t,a){},481:function(e,t,a){"use strict";a.r(t);a(314),a(315),a(316),a(252);var n=a(0),c=a(21),i=a.n(c),s=(a(411),a(2)),r=(a(412),a(23)),o=a.n(r),l=a(35),u=a(12),d=a(25),p=a(48),f=a(513),j=a(512),b=a(45),m=a(509),h=a(212),O=a(505),g=a(295),x=a(510),y=a(299),v=a.n(y),w=a(178),A=a.n(w),N=a(119),C=a(179),k=a(69),P=(a(451),a(452),a(31)),L=a(18),E={options:[],isLoading:!1,isAllFetched:!1,isSearching:!1,isOpen:!1,selected:null,title:""};function S(e,t){switch(t.type){case"field":return Object(s.a)(Object(s.a)({},e),{},Object(L.a)({selected:null},t.fieldName,t.payload));case"pick-option":return Object(s.a)(Object(s.a)({},e),{},{title:t.title,selected:t.selected});case"success-load":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1,isSearching:!1,isAllFetched:t.payload.length<10,options:[].concat(Object(P.a)(e.options),Object(P.a)(t.payload))});case"success-search":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1,isSearching:!1,isAllFetched:t.payload.length<10,options:t.payload});case"clear":return E;case"load":return e.isLoading||e.isAllFetched?e:Object(s.a)(Object(s.a)({},e),{},{isLoading:!0,isAllFetched:!1,isSearching:!1});case"search":return Object(s.a)(Object(s.a)({},e),{},{options:[],isSearching:!0,isLoading:!1,isAllFetched:!1});default:return e}}var D=a(98),I=a(276),T=a(63),F=a(1);var B=function(e){var t=Object(d.g)(),a=Object(d.h)(),c=Object(I.a)(),i=Object(n.useContext)(k.a),r=i.user,y=i.logout,w=Object(n.useReducer)(S,E),P=Object(u.a)(w,2),L=P[0],B=P[1],R=Object(n.useState)(!1),H=Object(u.a)(R,2),M=H[0],U=H[1],G=L.options,Y=L.title,J=L.isLoading,X=L.isAllFetched,z=L.isSearching,K=L.isOpen,Z=L.selected,V=Object(n.useCallback)((function(){J||X||z||!K||B({type:"load"})}),[J,X,z,K]);Object(D.a)(V,{id:"typeahead-navbar"});var W=Object(n.useRef)(null),Q=Object(n.useState)(null),_=Object(u.a)(Q,2),q=_[0],$=_[1];Object(n.useEffect)((function(){return document.addEventListener("keydown",ee),function(){document.removeEventListener("keydown",ee)}})),Object(n.useEffect)((function(){U(!1)}),[a]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.f({search:Y,skip:G.length}).then((function(e){var t=e.data.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{img:"".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail?width=small_webp")})}));B({type:"success-load",payload:t})})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}J&&function(){e.apply(this,arguments)}()}),[J,Y,G.length]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.f({search:Y}).then((function(e){var t=e.data.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{img:"".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail?width=small_webp")})}));B({type:"success-search",payload:t})})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}z&&function(){e.apply(this,arguments)}()}),[z,Y]);var ee=function(e){if(e&&e.target&&e.target.className&&"rbt-input-main form-control rbt-input  focus"===e.target.className){var t=e.keyCode||e.charCode;switch(console.log(t),t){case 13:te(e);break;case 9:c&&te(e)}}},te=function(e){e.preventDefault(),document.getElementById("search-form").reset(),W&&W.current.clear(),Z?t.push({pathname:"".concat("/filmapp-react-frontend/","film/").concat(Z.id),search:"",state:{}}):""===Y?t.push({pathname:"".concat("/filmapp-react-frontend/","search"),search:"?title=".concat(Y),state:{}}):1===G.length?t.push({pathname:"".concat("/filmapp-react-frontend/","film/").concat(G[0].id),search:"",state:{}}):t.push({pathname:"".concat("/filmapp-react-frontend/","search"),search:"?title=".concat(Y),state:{films:G}}),B({type:"clear"})},ae=Object(n.useCallback)((function(e){B({type:"search",payload:e})}),[]);return Object(F.jsxs)(j.a,{expanded:M,className:"py-2 px-4",expand:"md",bg:"light",variant:"light",onToggle:function(e){U(e)},onSelect:function(e){return function(e){switch(e){case"add_film":t.push("".concat("/filmapp-react-frontend/","add"));break;case"playlists":t.push("".concat("/filmapp-react-frontend/","playlists"))}}(e)},children:[Object(F.jsx)(b.a,{className:"pb-2",xs:{span:5,order:"first"},sm:{span:2,order:"first"},md:{span:4,order:"first"},children:Object(F.jsxs)(j.a.Brand,{style:{cursor:"pointer"},className:"d-flex align-items-center",onClick:function(){return t.push("/filmapp-react-frontend/")},children:[Object(F.jsx)(j.a.Brand,{children:Object(F.jsx)("img",{alt:"",src:"data:image/png;base64,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",width:"30",height:"30"})}),Object(F.jsx)("p",{className:"d-none d-md-inline m-0",children:"FilmApp"})]})}),Object(F.jsx)(b.a,{className:"text-right d-md-none m-button pb-2 ",xs:{span:6,order:2},sm:{span:2,order:"last"},children:Object(F.jsx)(j.a.Toggle,{className:"m-button","aria-controls":"responsive-navbar-nav"})}),Object(F.jsx)(b.a,{xs:{span:12,order:3},sm:{span:8,order:2},md:{span:5,order:2},children:Object(F.jsx)(m.a,{id:"search-form",inline:"true",children:Object(F.jsxs)(h.a,{className:"m-0",style:{width:"100%"},children:[Object(F.jsx)(b.a,{xs:12,sm:10,className:"p-0",children:Object(F.jsx)(C.a,{ref:W,className:"search-bar",useCache:!1,filterBy:function(){return!0},id:"typeahead-navbar",isLoading:!0,open:K,placeholder:"Search",labelKey:"title",minLength:1,options:G,onSearch:ae,onBlur:function(e){return B({type:"field",fieldName:"isOpen",payload:!1})},onFocus:function(e){""!==Y&&B({type:"field",fieldName:"isOpen",payload:!0})},onKeyDown:function(e){return B({type:"field",fieldName:"isOpen",payload:!0})},onMenuToggle:function(e){return B({type:"field",fieldName:"isOpen",payload:e})},onInputChange:function(e,t){B({type:"field",fieldName:"title",payload:e}),""===e&&B({type:"field",fieldName:"options",payload:[]})},onChange:function(e){var t=e.length>0?e[0].title:"";B({type:"pick-option",title:t,selected:e.length>0?e[0]:null})},renderMenu:function(e,a){return Object(F.jsxs)(C.b,Object(s.a)(Object(s.a)({},a),{},{className:"pt-4 pb-4",children:[e.map((function(e,a){return Object(F.jsx)(C.c,{option:e,position:a,children:Object(F.jsxs)(h.a,{className:"p-0 m-0 entry__inner",onClick:function(a){a.stopPropagation(),a.preventDefault(),B({type:"clear"}),document.getElementById("search-form").reset(),W&&W.current.clear(),t.push({pathname:"".concat("/filmapp-react-frontend/","film/").concat(e.id),search:"",state:{}})},children:[Object(F.jsx)("img",{className:"p-0",alt:"",src:e.img,style:{height:"24px",marginRight:"10px",width:"24px"}}),Object(F.jsx)("span",{className:"entry__text",children:e.title})]})},e.id)})),!J&&!z&&0===e.length&&Object(F.jsx)("a",{role:"option",className:"dropdown-item disabled",href:"#",children:"No matches found."}),z&&Object(F.jsx)("a",{role:"option",className:"dropdown-item disabled",href:"#",children:"Searching..."}),Object(F.jsx)("div",{style:{height:"8px"},className:"d-flex justify-content-center",children:J&&!X&&Object(F.jsx)(O.a,{animation:"border"})})]}))}})}),Object(F.jsx)(b.a,{sm:2,children:Object(F.jsx)(g.a,{onClick:te,className:"d-none d-sm-inline",variant:"light",children:Object(F.jsx)(p.a,{icon:T.g})})})]})})}),Object(F.jsx)(b.a,{xs:{span:12,order:"last"},sm:{span:12,order:"last"},md:{span:3,order:"last"},children:Object(F.jsx)(j.a.Collapse,{className:"justify-content-end",id:"responsive-navbar-nav",children:Object(F.jsxs)(x.a,{activeKey:"",className:"d-block d-sm-block d-md-flex  align-items-center",children:[Object(F.jsx)(x.a.Link,{className:"px-2",eventKey:"playlists",children:"Playlists"}),r.auth&&Object(F.jsx)(x.a.Link,{className:"px-2",eventKey:"add_film",children:"Add"}),r.auth?Object(F.jsx)(f.a,{onClick:function(e){$(e.currentTarget)},className:"pe-2 ps-2 custom-avatar m-button",children:r.name.toUpperCase().charAt(0)}):Object(F.jsx)(x.a.Link,{className:"pe-2 ps-2",eventKey:"login ",onClick:function(){return function(){var e=a.pathname;"/filmapp-react-frontend/"===e&&(e=e.slice(0,-1)),t.push({pathname:"".concat(e,"/login"),search:a.search,state:a.state})}()},children:"Login"})]})})}),Object(F.jsxs)(v.a,{id:"film-navbar-menu",anchorEl:q,keepMounted:!0,open:Boolean(q),onClose:function(){$(null)},children:[Object(F.jsx)(A.a,{onClick:function(){$(null),t.push("".concat("/filmapp-react-frontend/","profile"))},children:"Profile"}),Object(F.jsx)(A.a,{onClick:function(){$(null);var e=a.pathname;"/filmapp-react-frontend/"===e&&(e=e.slice(0,-1)),t.push({pathname:"".concat(e,"/settings"),search:a.search,state:a.state})},children:"Settings"}),Object(F.jsx)(A.a,{onClick:function(){$(null),y()},children:"Logout"})]})]})},R=a(508),H=a(104),M=function(e){var t=Object(n.useContext)(H.a),a=t.removeModalData,c=t.remove,i=t.clear,s=function(){return i()};return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(R.a,{show:a.show,onHide:s,centered:!0,children:[Object(F.jsx)(R.a.Header,{children:Object(F.jsxs)(R.a.Title,{children:["Delete ",a.type]})}),Object(F.jsxs)(R.a.Body,{children:["Do you really want to delete ",a.type," ",Object(F.jsx)("b",{children:a.title}),"?",Object(F.jsx)("br",{}),"Action cannot be undone!"]}),Object(F.jsxs)(R.a.Footer,{children:[Object(F.jsx)(g.a,{variant:"secondary",onClick:s,children:"Cancel"}),Object(F.jsx)(g.a,{variant:"primary",onClick:function(){return c()},children:"Delete"})]})]})})},U=a(89),G=a(511),Y=a(95),J=a(507),X=a(105),z=a(107);var K=function(e){var t=Object(d.g)(),a=Object(n.useReducer)(z.b,z.a),c=Object(u.a)(a,2),i=c[0],s=c[1],r=i.password,p=i.isSubmitted,f=i.isSending,j=i.isSuccess,b=i.isError,h=i.error,x=Object(n.useState)(!0),y=Object(u.a)(x,2),v=y[0],w=y[1];Object(n.useEffect)((function(){function a(){return(a=Object(l.a)(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,X.e(e.match.params.token,{password:r}).then((function(e){s({type:"success"}),setTimeout((function(){w(!1),t.push("".concat("/filmapp-react-frontend/")),setTimeout((function(){t.push("".concat("/filmapp-react-frontend/","login"))}),500)}),1500)})).catch((function(e){var t=null;e.response&&e.response.data&&e.response.data.errors&&(t=e.response.data.errors),s({type:"error",payload:t})}));case 2:case"end":return a.stop()}}),a)})))).apply(this,arguments)}f&&function(){a.apply(this,arguments)}()}),[f,t,r,e.match.params.token]);var A=function(){w(!1),t.push("".concat("/filmapp-react-frontend/"))};return Object(F.jsxs)(R.a,{onHide:A,show:v,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(F.jsx)(R.a.Header,{closeButton:!0,children:Object(F.jsx)(R.a.Title,{id:"contained-modal-title-vcenter",children:"Reset"})}),Object(F.jsx)(R.a.Body,{children:Object(F.jsxs)(m.a,{onSubmit:function(t){t.preventDefault(),s({type:"submit"}),e.match.params.token&&r&&r.length>=6&&s({type:"send"})},children:[Object(F.jsxs)(m.a.Group,{children:[Object(F.jsx)(m.a.Label,{htmlFor:"password",children:"Password"}),Object(F.jsx)(m.a.Control,{isInvalid:p&&r.length<6,type:"password",name:"password",value:r,maxLength:"11",onChange:function(e){return s({type:"field",fieldName:"password",payload:e.target.value})}}),Object(F.jsx)(m.a.Control.Feedback,{type:"invalid",children:0===r.length?"Password is required":"Password too short (min 6 chars)"})]}),j&&Object(F.jsx)(J.a,{variant:"success",className:"mt-2",children:"Password has been reseated! Redirecting to login page."}),b&&Object(F.jsx)(J.a,{variant:"danger",className:"mt-2",children:h||"Error while resetting password."}),Object(F.jsxs)(m.a.Group,{className:"d-flex align-items-center mt-2",children:[Object(F.jsx)(g.a,{type:"submit",className:"btn-primary",children:"Reset password"}),f&&Object(F.jsx)(O.a,{className:"ms-2",animation:"grow"})]})]})}),Object(F.jsx)(R.a.Footer,{children:Object(F.jsx)(g.a,{onClick:A,children:"Close"})})]})};var Z=function(e){var t=Object(d.g)(),a=Object(n.useState)(!0),c=Object(u.a)(a,2),i=c[0],s=c[1],r=Object(n.useReducer)(z.b,z.a),p=Object(u.a)(r,2),f=p[0],j=p[1],b=f.email,h=f.isSuccess,x=f.isSubmitted,y=f.isSending,v=f.isError,w=f.error;Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.a({email:b}).then((function(e){j({type:"success"})})).catch((function(e){var t=null;e.response&&e.response.data&&e.response.data.errors&&(t=e.response.data.errors),j({type:"error",payload:t}),console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}y&&function(){e.apply(this,arguments)}()}),[y,b]);var A=function(){s(!1),t.goBack()};return Object(F.jsxs)(R.a,{onHide:A,show:i,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(F.jsx)(R.a.Header,{closeButton:!0,children:Object(F.jsx)(R.a.Title,{id:"contained-modal-title-vcenter",children:"Forgot"})}),Object(F.jsx)(R.a.Body,{children:Object(F.jsxs)(m.a,{onSubmit:function(e){e.preventDefault(),j({type:"submit"}),b&&j({type:"send"})},children:[Object(F.jsxs)(m.a.Group,{children:[Object(F.jsx)(m.a.Label,{htmlFor:"email",children:"Email"}),Object(F.jsx)(m.a.Control,{isInvalid:x&&!b,type:"email",name:"email",value:b,onChange:function(e){return j({type:"field",fieldName:"email",payload:e.target.value})}}),Object(F.jsx)(m.a.Control.Feedback,{type:"invalid",children:"Email is required"})]}),h&&Object(F.jsx)(J.a,{variant:"success",className:"mt-2",children:"Email with link to reset password has been sent."}),v&&Object(F.jsx)(J.a,{variant:"danger",className:"mt-2",children:w||"Error while sending email."}),Object(F.jsxs)(m.a.Group,{className:"d-flex align-items-center mt-2",children:[Object(F.jsx)(g.a,{type:"submit",className:"btn-primary",children:"Reset password"}),y&&Object(F.jsx)(O.a,{className:"ms-2",animation:"grow"})]})]})}),Object(F.jsx)(R.a.Footer,{children:Object(F.jsx)(g.a,{onClick:A,children:"Close"})})]})},V=a(7),W=["component"],Q=function(e){var t=e.component,a=Object(V.a)(e,W);return Object(F.jsx)(d.b,Object(s.a)(Object(s.a)({},a),{},{render:function(e){return localStorage.getItem("accessToken")?Object(F.jsx)(t,Object(s.a)({},e)):Object(F.jsx)(d.a,{to:{pathname:"".concat("/filmapp-react-frontend/","login"),state:{from:e.location}}})}}))},_=a(58),q={data:[],isLoading:!1,isAllFetched:!1,isRemoving:!1,toRemove:null,error:null,filmsCount:0,playlistsCount:0};function $(e,t){switch(t.type){case"field":return Object(s.a)(Object(s.a)({},e),{},Object(L.a)({},t.fieldName,t.payload));case"initial-success":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1,isInitialLoaded:!0,isAllFetched:t.filmsCount<_.c&&t.playlistsCount<_.c,filmsCount:e.filmsCount+t.filmsCount,playlistsCount:e.playlistsCount+t.playlistsCount,data:Object(P.a)(new Set(t.data))});case"load":return e.isLoading||e.isAllFetched||!e.isInitialLoaded||e.error?e:Object(s.a)(Object(s.a)({},e),{},{isLoading:!0,isAllFetched:!1});case"success":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1,isAllFetched:t.filmsCount<_.c&&t.playlistsCount<_.c,filmsCount:e.filmsCount+t.filmsCount,playlistsCount:e.playlistsCount+t.playlistsCount,data:Object(P.a)(new Set([].concat(Object(P.a)(e.data),Object(P.a)(t.data))))});case"remove":return Object(s.a)(Object(s.a)({},e),{},{toRemove:t.payload,isRemoving:!0});case"remove-success":return Object(s.a)(Object(s.a)({},e),{},{isRemoving:!1,toRemove:null,data:e.toRemove?e.data.filter((function(t){return t.id!==e.toRemove.id})):e.data});case"change-playlist-privacy-success":return Object(s.a)(Object(s.a)({},e),{},{data:e.data.map((function(e){return e.isPlaylist&&e.id===t.payload.id?Object(s.a)(Object(s.a)({},e),{},{is_public:t.payload.is_public}):e}))});case"clear":return q;default:return e}}var ee=a(216),te=a(283),ae=a(128),ne=a(93),ce=a(206),ie=function(e){var t=Object(n.useContext)(k.a),a=t.user,c=t.clearUser,i=Object(n.useContext)(H.a),r=i.showModal,p=i.clear,f=i.removeModalData,j=Object(d.g)(),b=Object(n.useReducer)($,q),m=Object(u.a)(b,2),g=m[0],x=m[1],y=g.data,v=g.isLoading,w=g.isAllFetched,A=g.isInitialLoaded,C=g.error,L=g.isRemoving,E=g.toRemove,S=g.filmsCount,I=g.playlistsCount,T=Object(n.useCallback)((function(){v||w||!A||C||x({type:"load"})}),[v,w,A,C]);Object(D.a)(T,{triggerOnNoScroll:!0}),Object(n.useEffect)((function(){!a.auth&&a.isInitialLoaded&&(j.replace("".concat("/filmapp-react-frontend/")),j.push("".concat("/filmapp-react-frontend/","login")),c())}),[a,j,c]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var t,a,n,c,i,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled([ae.a({skipFilms:0,skipPlaylists:0,limit:_.b})]);case 2:t=e.sent,a=Object(u.a)(t,1),n=a[0],c=[],i=[],r=[],"fulfilled"===n.status&&(i=n.value.data.films.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{img:"".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail?width=small_webp")})})),r=n.value.data.playlists.map((function(e){var t=e.film_id?"".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.film_id,"/thumbnail?width=small_webp"):ce.a;return Object(s.a)(Object(s.a)({},e),{},{img:t,isPlaylist:!0})})),c=[].concat(Object(P.a)(c),Object(P.a)(i),Object(P.a)(r))),x({type:"initial-success",data:c,filmsCount:i.length,playlistsCount:r.length});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}x({type:"clear"}),function(){e.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var t,a,n,c,i,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled([ae.a({skipFilms:S,skipPlaylists:I,limit:_.c})]);case 2:t=e.sent,a=Object(u.a)(t,1),n=a[0],c=[],i=[],r=[],"fulfilled"===n.status&&(i=n.value.data.films.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{img:"".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail?width=small_webp")})})),r=n.value.data.playlists.map((function(e){var t=e.film_id?"".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.film_id,"/thumbnail?width=small_webp"):ce.a;return Object(s.a)(Object(s.a)({},e),{},{img:t,isPlaylist:!0})})),c=[].concat(Object(P.a)(c),Object(P.a)(i),Object(P.a)(r))),x({type:"success",data:c,filmsCount:i.length,playlistsCount:r.length});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}v&&A&&function(){e.apply(this,arguments)}()}),[S,v,I,A]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!E.isPlaylist){e.next=8;break}return e.next=4,ne.d(E.id);case 4:204===e.sent.status&&(x({type:"remove-success"}),p()),e.next=12;break;case 8:return e.next=10,N.e(E.id);case 10:204===e.sent.status&&(x({type:"remove-success"}),p());case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}L&&f.isRemoving&&E&&f.id===E.id&&f.title===E.title&&f.type===(E.isPlaylist?"playlist":"film")&&function(){e.apply(this,arguments)}()}),[L,f,E,p]);var B=function(e,t){e.stopPropagation(),f.isRemoving||(x({type:"remove",payload:t}),r(t.id,t.isPlaylist?"playlist":"film",t.title))};return Object(F.jsxs)(h.a,{className:"mt-5 mx-2",children:[y.map((function(e,t){return e.isPlaylist?Object(F.jsx)(te.a,{playlist:e,index:t,isProfile:!0,dispatchPrivacyUpdate:x,handleRedirect:function(){return function(e){e.film_id&&j.push({pathname:"".concat("/filmapp-react-frontend/","film/")+e.film_id,search:"?list=".concat(e.id)})}(e)},handleRemove:function(t){return B(t,e)}},e.id):Object(F.jsx)(ee.a,{isProfile:!0,film:e,index:t,handleRedirect:function(){return t=e.id,void j.push({pathname:"".concat("/filmapp-react-frontend/","film/")+t});var t},handleRemove:function(t){return B(t,e)}},e.id)})),!w&&Object(F.jsx)("div",{style:{height:"32px",width:"100%"},className:"d-flex justify-content-center",children:(v||!A)&&Object(F.jsx)(O.a,{animation:"border"})})]})},se=a(114),re=a(22),oe=function(e){var t=e.children,a=Object(n.useContext)(k.a).logout;return Object(n.useMemo)((function(){re.a.interceptors.response.use((function(e){return e}),(function(e){var t=localStorage.getItem("accessToken"),n=e.config;return e.response&&401===e.response.status&&t&&!n._retry?"auth/refresh"===e.config.url?(a(),Promise.reject(e)):(n._retry=!0,Object(X.c)({refreshToken:JSON.parse(localStorage.getItem("refreshToken"))}).then((function(e){if(201===e.status){var t=e.data.token;return localStorage.setItem("accessToken",JSON.stringify(t)),n.headers.Authorization="Bearer "+t,Object(re.a)(n)}}))):Promise.reject(e)}))}),[]),t},le=a(211),ue=function(e){var t=e.children,a=Object(d.h)().pathname,c=Object(n.useState)({name:"",id:null,auth:!1,isInitialLoaded:!1}),i=Object(u.a)(c,2),r=i[0],o=i[1];Object(n.useEffect)((function(){window.scrollTo(0,0)}),[a]),Object(n.useEffect)((function(){!function(){var e=localStorage.getItem("accessToken");if(e){var t=Object(le.a)(e);o((function(){return{name:t.name,auth:!0,id:t.id,isInitialLoaded:!0}}))}else o((function(e){return Object(s.a)(Object(s.a)({},e),{},{isInitialLoaded:!0})}))}()}),[]);return Object(F.jsx)(k.a.Provider,{value:{user:r,login:function(e,t,a,n){localStorage.setItem("accessToken",JSON.stringify(a)),localStorage.setItem("refreshToken",JSON.stringify(n)),o((function(){return{name:e,auth:!0,id:t,isInitialLoaded:!0}}))},logout:function(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),o((function(e){return Object(s.a)(Object(s.a)({},e),{},{name:"",auth:!1,id:null})}))},clearUser:function(){o((function(e){return Object(s.a)(Object(s.a)({},e),{},{isInitialLoaded:!1})}))},updateUser:function(e){localStorage.setItem("accessToken",JSON.stringify(e));var t=Object(le.a)(e);o((function(e){return Object(s.a)(Object(s.a)({},e),{},{name:t.name})})),window.location.reload()}},children:t})};Y.b.add(T.f,T.h,T.i,T.m,T.l,T.d,T.e);var de="/filmapp-react-frontend/",pe=Object(n.lazy)((function(){return a.e(10).then(a.bind(null,615))})),fe=Object(n.lazy)((function(){return Promise.all([a.e(3),a.e(9)]).then(a.bind(null,614))})),je=Object(n.lazy)((function(){return a.e(7).then(a.bind(null,610))})),be=Object(n.lazy)((function(){return a.e(8).then(a.bind(null,611))})),me=Object(n.lazy)((function(){return Promise.all([a.e(4),a.e(6)]).then(a.bind(null,616))})),he=Object(n.lazy)((function(){return a.e(12).then(a.bind(null,617))})),Oe=Object(n.lazy)((function(){return a.e(5).then(a.bind(null,618))})),ge=Object(n.lazy)((function(){return a.e(11).then(a.bind(null,619))})),xe=Object(n.lazy)((function(){return a.e(13).then(a.bind(null,620))}));var ye=function(e){var t=Object(n.useContext)(se.a),a=t.toast,c=t.clearToast;return Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{className:"toast-root",children:Object(F.jsxs)(G.a,{show:a.isOpen,onClose:c,autohide:!0,className:"toast-element bg-secondary",children:[Object(F.jsx)(G.a.Header,{children:Object(F.jsx)("strong",{className:"me-auto",children:"Playlist"})}),Object(F.jsx)(G.a.Body,{children:a.message})]})}),Object(F.jsx)(n.Suspense,{fallback:Object(F.jsxs)("div",{className:"suspense-loader",children:[" ",Object(F.jsx)(O.a,{animation:"border"})]}),children:Object(F.jsx)(U.a,{children:Object(F.jsx)(ue,{children:Object(F.jsxs)(oe,{children:[Object(F.jsx)(d.b,{render:function(e){return Object(F.jsx)(B,Object(s.a)({},e))}}),Object(F.jsx)(Q,{exact:!0,path:["".concat(de,"settings"),"".concat(de,"profile/settings"),"".concat(de,"film/:id/settings"),"".concat(de,"search/settings"),"".concat(de,"add/settings"),"".concat(de,"playlists/settings")],render:function(e){return Object(F.jsx)(xe,Object(s.a)({},e))}}),Object(F.jsx)(d.b,{exact:!0,path:["".concat(de,"login"),"".concat(de,"film/:id/login"),"".concat(de,"search/login"),"".concat(de,"add/login"),"".concat(de,"playlists/login")],render:function(e){return Object(F.jsx)(je,Object(s.a)({},e))}}),Object(F.jsx)(d.b,{exact:!0,path:["".concat(de,"register"),"".concat(de,"film/:id/register"),"".concat(de,"search/register"),"".concat(de,"add/register"),"".concat(de,"playlists/register")],render:function(e){return Object(F.jsx)(be,Object(s.a)({},e))}}),Object(F.jsx)(d.b,{exact:!0,path:["".concat(de,"reset/:token"),"".concat(de,"film/:id/reset/:token"),"".concat(de,"search/reset/:token"),"".concat(de,"add/reset/:token"),"".concat(de,"playlists/reset/:token")],render:function(e){return Object(F.jsx)(K,Object(s.a)({},e))}}),Object(F.jsx)(d.b,{exact:!0,path:["".concat(de,"forgot"),"".concat(de,"film/:id/forgot"),"".concat(de,"search/forgot"),"".concat(de,"add/forgot"),"".concat(de,"playlists/forgot")],render:function(e){return Object(F.jsx)(Z,Object(s.a)({},e))}}),Object(F.jsxs)(d.d,{children:[Object(F.jsx)(d.b,{exact:!0,path:["".concat(de,"film/:id"),"".concat(de,"film/:id/login"),"".concat(de,"film/:id/register"),"".concat(de,"film/:id/reset/:token"),"".concat(de,"film/:id/forgot"),"".concat(de,"film/:id/settings")],render:function(e){return Object(F.jsx)(fe,Object(s.a)({},e))}}),Object(F.jsx)(d.b,{exact:!0,path:["".concat(de),"".concat(de,"login"),"".concat(de,"register"),"".concat(de,"settings"),"".concat(de,"reset/:token"),"".concat(de,"forgot")],render:function(e){return Object(F.jsx)(pe,Object(s.a)({},e))}}),Object(F.jsx)(d.b,{exact:!0,path:["".concat(de,"search"),"".concat(de,"search/login"),"".concat(de,"search/settings"),"".concat(de,"search/register"),"".concat(de,"search/reset/:token"),"".concat(de,"search/forgot")],render:function(e){return Object(F.jsx)(me,Object(s.a)({},e))}}),Object(F.jsx)(Q,{exact:!0,path:["".concat(de,"add"),"".concat(de,"add/settings")],render:function(e){return Object(F.jsx)(Oe,Object(s.a)({},e))}}),Object(F.jsx)(d.b,{exact:!0,path:["".concat(de,"playlists"),"".concat(de,"playlists/login"),"".concat(de,"playlists/settings"),"".concat(de,"playlists/register"),"".concat(de,"playlists/reset/:token"),"".concat(de,"playlists/forgot")],render:function(e){return Object(F.jsx)(he,Object(s.a)({},e))}}),Object(F.jsx)(Q,{exact:!0,path:["".concat(de,"profile"),"".concat(de,"profile/settings")],render:function(e){return Object(F.jsx)(ie,Object(s.a)({},e))}}),Object(F.jsx)(d.b,{exact:!0,path:"*",render:function(e){return Object(F.jsx)(ge,Object(s.a)({},e))}})]})]})})})}),Object(F.jsx)(M,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(480);var ve=function(e){var t=e.children,a=Object(n.useState)({isOpen:!1,message:"",isPrevoius:!1}),c=Object(u.a)(a,2),i=c[0],s=c[1];return Object(F.jsx)(se.a.Provider,{value:{toast:i,createToast:function(e){i.isPrevoius?(s({isOpen:!1,message:"",isPrevoius:!0}),setTimeout((function(){return s({isOpen:!0,message:e,isPrevoius:!0})}),850)):s({isOpen:!0,message:e,isPrevoius:!0})},clearToast:function(){s({isOpen:!1,message:"",isPrevoius:!1})}},children:t})},we=function(e){var t=e.children,a=Object(n.useState)({show:!1,isRemoving:!1,id:null,type:null,title:""}),c=Object(u.a)(a,2),i=c[0],r=c[1];return Object(F.jsx)(H.a.Provider,{value:{showModal:function(e,t,a){r({show:!0,isRemoving:!1,id:e,type:t,title:a})},removeModalData:i,remove:function(){r((function(e){return Object(s.a)(Object(s.a)({},e),{},{show:!1,isRemoving:!0})}))},clear:function(){r({show:!1,isRemoving:!1,id:null,type:null,title:""})}},children:t})};i.a.render(Object(F.jsx)(ve,{children:Object(F.jsx)(we,{children:Object(F.jsx)(ye,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},58:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return r}));var n=10,c=12,i=10,s=40,r=20},69:function(e,t,a){"use strict";var n=a(0),c=Object(n.createContext)({name:"",id:null,auth:!1,isInitialLoaded:!1});t.a=c},93:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l}));var n=a(22),c=a(38),i=function(e){return n.a.post("playlists",e,{headers:Object(c.a)()})},s=function(e){return n.a.get("playlists/".concat(e),{headers:Object(c.a)()})},r=function(e){return n.a.get("playlists",{params:e,headers:Object(c.a)()})},o=function(e,t){return n.a.patch("playlists/".concat(e),t,{headers:Object(c.a)()})},l=function(e){return n.a.delete("playlists/".concat(e),{headers:Object(c.a)()})}},98:function(e,t,a){"use strict";var n=a(0),c=a(150),i=a.n(c),s=function(e,t,a){return e?i()(t,e,a):t};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(n.useMemo)((function(){var e,a,n,c,i;return{offset:null!==(e=null===t||void 0===t?void 0:t.offset)&&void 0!==e?e:20,debounce:null!==(a=null===t||void 0===t?void 0:t.debounce)&&void 0!==a?a:200,debounceOptions:null!==(n=null===t||void 0===t?void 0:t.debounceOptions)&&void 0!==n?n:{leading:!0},triggerOnNoScroll:null!==(c=null===t||void 0===t?void 0:t.triggerOnNoScroll)&&void 0!==c&&c,id:null!==(i=null===t||void 0===t?void 0:t.id)&&void 0!==i?i:null}}),[null===t||void 0===t?void 0:t.offset,null===t||void 0===t?void 0:t.debounce,null===t||void 0===t?void 0:t.debounceOptions,null===t||void 0===t?void 0:t.triggerOnNoScroll,null===t||void 0===t?void 0:t.id]),c=a.offset,i=a.triggerOnNoScroll,r=a.debounce,o=a.debounceOptions,l=a.id,u=Object(n.useMemo)((function(){return s(r,e,o)}),[e,r,o]),d=Object(n.useRef)(null),p=Object(n.useCallback)((function(){if(null!=d.current){var e=d.current,t=Math.round(e.scrollTop+e.clientHeight);Math.round(e.scrollHeight-c)<=t&&u()}else if(null!==l){var a=document.getElementById(l);if(a){var n=Math.round(a.scrollTop+a.clientHeight);Math.round(a.scrollHeight-c)<=n&&u()}}else{var i=document.scrollingElement||document.documentElement,s=Math.round(i.scrollTop+window.innerHeight);Math.round(i.scrollHeight-c)<=s&&u()}}),[u,c,l]);return Object(n.useEffect)((function(){var e=d.current,t=document.getElementById(l);return null!=e?e.addEventListener("scroll",p):null!==t?t.addEventListener("scroll",p):window.addEventListener("scroll",p),i&&p(),function(){null!=e?e.removeEventListener("scroll",p):null!==t?t.addEventListener("scroll",p):window.removeEventListener("scroll",p)}}),[p,i,l]),d}}},[[481,1,2]]]);
//# sourceMappingURL=main.4773b550.chunk.js.map