(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[2],{108:function(e,t,n){"use strict";var c=n(1),a=Object(c.createContext)("");t.a=a},142:function(e,t,n){"use strict";t.a=function(){var e=JSON.parse(localStorage.getItem("accessToken"));return e?{Authorization:"Bearer "+e}:{}}},143:function(e,t,n){"use strict";var c=n(1),a=n(2);t.a=function(e){var t=e.id,n=e.title,r=e.children,o=e.onClose,i=e.footer,s=e.hide,l=e.isRemove,u=Object(c.useRef)(null);Object(c.useEffect)((function(){return u.current=window.$("#".concat(t)),s||u.current.modal("show"),function(){u.current.modal("hide")}}),[t,s]);var d=function(){o()};return Object(a.jsx)("div",{className:"modal fade",id:t,tabIndex:"-1",children:Object(a.jsx)("div",{className:"modal-dialog modal-dialog-centered ".concat(l?"":"modal-lg"),children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsx)("h5",{className:"modal-title",children:n}),Object(a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:d,children:Object(a.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(a.jsx)("div",{className:"modal-body",children:r}),Object(a.jsxs)("div",{className:"modal-footer",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:d,children:"Close"}),i]})]})})})}},144:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return l}));var c=n(142),a=n(44),r=function(e){return a.a.post("auth",{},{auth:{username:e.email,password:e.password}})},o=function(e){return a.a.post("users",e)},i=function(e){return a.a.post("auth/refresh",e,{headers:Object(c.a)()})},s=function(e){return a.a.post("auth/password/forgot",e)},l=function(e,t){return a.a.post("auth/password/reset/".concat(e),t)}},147:function(e,t,n){"use strict";var c=n(1),a=Object(c.createContext)({isPlaylist:null,resource:null});t.a=a},233:function(e,t,n){"use strict";(function(e){var c=n(16),a=n(1),r=n(83),o=n.n(r),i=(n(480),n(481),n(482),n(112)),s=n(11),l=n(146),u=n(47),d=n(85),j=n(108),b=n(241),f=n(234),h=n(235),O=n(68),m=n(236),p=n(242),x=n(232),g=n(2);window.jQuery=o.a,window.$=o.a,e.jQuery=o.a,l.b.add(u.g,u.i,u.j,u.n,u.m,u.e,u.f,u.a);var v="/filmapp-react-frontend/",y=Object(a.lazy)((function(){return Promise.all([n.e(6),n.e(15)]).then(n.bind(null,513))})),w=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(16)]).then(n.bind(null,514))})),k=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(22)]).then(n.bind(null,515))})),N=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(1),n.e(9)]).then(n.bind(null,511))})),S=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(7)]).then(n.bind(null,512))})),T=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,516))})),P=Object(a.lazy)((function(){return n.e(10).then(n.bind(null,517))})),z=Object(a.lazy)((function(){return n.e(23).then(n.bind(null,518))})),I=Object(a.lazy)((function(){return n.e(17).then(n.bind(null,519))})),C=Object(a.lazy)((function(){return n.e(19).then(n.bind(null,520))})),R=Object(a.lazy)((function(){return n.e(14).then(n.bind(null,521))})),E=Object(a.lazy)((function(){return n.e(18).then(n.bind(null,522))})),J=Object(a.lazy)((function(){return n.e(13).then(n.bind(null,523))})),D=Object(a.lazy)((function(){return n.e(11).then(n.bind(null,524))})),L=Object(a.lazy)((function(){return n.e(12).then(n.bind(null,525))})),M=Object(a.lazy)((function(){return n.e(21).then(n.bind(null,509))})),B=Object(a.lazy)((function(){return n.e(20).then(n.bind(null,510))}));t.a=function(){var e=Object(a.useContext)(j.a).toast;return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"toast-root",children:Object(g.jsxs)("div",{className:"toast bg-secondary",id:"mainToast","data-autohide":"false",role:"alert","aria-live":"assertive","aria-atomic":"true",children:[Object(g.jsx)("div",{className:"toast-header",children:Object(g.jsx)("strong",{className:"mr-auto",children:e.header})}),Object(g.jsx)("div",{className:"toast-body text-light",children:e.message})]})}),Object(g.jsx)(i.a,{children:Object(g.jsx)(b.a,{children:Object(g.jsx)(m.a,{children:Object(g.jsx)(p.a,{children:Object(g.jsxs)(f.a,{children:[Object(g.jsxs)(a.Suspense,{fallback:Object(g.jsx)(g.Fragment,{}),children:[x.isMobile?Object(g.jsx)(M,{}):Object(g.jsx)(B,{}),Object(g.jsx)(O.a,{exact:!0,path:["".concat(v,"settings"),"".concat(v,"profile/settings"),"".concat(v,"film/:id/settings"),"".concat(v,"search/settings"),"".concat(v,"add/settings"),"".concat(v,"playlists/settings")],component:J}),Object(g.jsx)(O.a,{exact:!0,path:["".concat(v,"profile/update-film/:id")],component:D}),Object(g.jsx)(O.a,{exact:!0,path:["".concat(v,"profile/update-playlist/:id")],component:L}),Object(g.jsx)(s.a,{exact:!0,path:["".concat(v,"login"),"".concat(v,"film/:id/login"),"".concat(v,"search/login"),"".concat(v,"add/login"),"".concat(v,"playlists/login")],render:function(e){return Object(g.jsx)(I,Object(c.a)({},e))}}),Object(g.jsx)(s.a,{exact:!0,path:["".concat(v,"register"),"".concat(v,"film/:id/register"),"".concat(v,"search/register"),"".concat(v,"add/register"),"".concat(v,"playlists/register")],render:function(e){return Object(g.jsx)(E,Object(c.a)({},e))}}),Object(g.jsx)(s.a,{exact:!0,path:["".concat(v,"reset/:token"),"".concat(v,"film/:id/reset/:token"),"".concat(v,"search/reset/:token"),"".concat(v,"add/reset/:token"),"".concat(v,"playlists/reset/:token")],render:function(e){return Object(g.jsx)(C,Object(c.a)({},e))}}),Object(g.jsx)(s.a,{exact:!0,path:["".concat(v,"forgot"),"".concat(v,"film/:id/forgot"),"".concat(v,"search/forgot"),"".concat(v,"add/forgot"),"".concat(v,"playlists/forgot")],render:function(e){return Object(g.jsx)(R,Object(c.a)({},e))}})]}),Object(g.jsxs)(a.Suspense,{fallback:Object(g.jsxs)("div",{className:"suspense-loader",children:[" ",Object(g.jsx)("div",{className:"spinner-border"})]}),children:[Object(g.jsx)(s.a,{render:function(){return Object(g.jsx)(y,{})}}),Object(g.jsxs)(d.c,{children:[Object(g.jsx)(s.a,{exact:!0,path:["".concat(v,"film/:id"),"".concat(v,"film/:id/login"),"".concat(v,"film/:id/register"),"".concat(v,"film/:id/reset/:token"),"".concat(v,"film/:id/forgot"),"".concat(v,"film/:id/settings")],render:function(e){return Object(g.jsx)(N,Object(c.a)({},e))}}),Object(g.jsx)(s.a,{exact:!0,path:["".concat(v),"".concat(v,"login"),"".concat(v,"register"),"".concat(v,"settings"),"".concat(v,"reset/:token"),"".concat(v,"forgot")],render:function(e){return Object(g.jsx)(k,Object(c.a)({},e))}}),Object(g.jsx)(s.a,{exact:!0,path:["".concat(v,"search"),"".concat(v,"search/login"),"".concat(v,"search/settings"),"".concat(v,"search/register"),"".concat(v,"search/reset/:token"),"".concat(v,"search/forgot")],render:function(e){return Object(g.jsx)(S,Object(c.a)({},e))}}),Object(g.jsx)(s.a,{exact:!0,path:["".concat(v,"playlists"),"".concat(v,"playlists/login"),"".concat(v,"playlists/settings"),"".concat(v,"playlists/register"),"".concat(v,"playlists/reset/:token"),"".concat(v,"playlists/forgot")],render:function(e){return Object(g.jsx)(T,Object(c.a)({},e))}}),Object(g.jsx)(O.a,{exact:!0,path:["".concat(v,"add"),"".concat(v,"add/settings")],component:P}),Object(g.jsx)(O.a,{exact:!0,path:["".concat(v,"profile"),"".concat(v,"profile/settings"),"".concat(v,"profile/update-film/:id"),"".concat(v,"profile/update-playlist/:id")],component:w}),Object(g.jsx)(s.a,{exact:!0,path:"*",render:function(e){return Object(g.jsx)(z,Object(c.a)({},e))}})]})]})]})})})})}),Object(g.jsx)(h.a,{})]})}}).call(this,n(39))},234:function(e,t,n){"use strict";var c=n(48),a=n(1),r=n(147),o=n(2);t.a=function(e){var t=e.children,n=Object(a.useState)({isPlaylist:null,resource:null}),i=Object(c.a)(n,2),s=i[0],l=i[1];return Object(o.jsx)(r.a.Provider,{value:{setToUpdate:function(e,t){l({isPlaylist:e,resource:t})},clearToUpdate:function(){l({isPlaylist:null,resource:null})},updateResource:s},children:t})}},235:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n(1),a=n(87),r=n(143),o=n(2);function i(){var e=Object(c.useContext)(a.a),t=e.removeModalData,n=e.remove,i=e.clear;return Object(o.jsxs)(r.a,{id:"removeModal",title:"Delete ".concat(t.type),isRemove:!0,onClose:function(){return i()},hide:!0,footer:Object(o.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return n()},children:"Delete"}),children:["Do you really want to delete ",t.type," ",Object(o.jsx)("b",{children:t.title}),"?",Object(o.jsx)("br",{}),"Action cannot be undone!"]})}},236:function(e,t,n){"use strict";var c=n(1),a=n(144),r=n(44),o=n(86);t.a=function(e){var t=e.children,n=Object(c.useContext)(o.a).logout;return Object(c.useMemo)((function(){r.a.interceptors.response.use((function(e){return e}),(function(e){var t=localStorage.getItem("accessToken"),c=e.config;return e.response&&401===e.response.status&&t&&!c._retry?"auth/refresh"===e.config.url?(n(),Promise.reject(e)):(c._retry=!0,Object(a.c)({refreshToken:JSON.parse(localStorage.getItem("refreshToken"))}).then((function(e){if(201===e.status){var t=e.data.token;return localStorage.setItem("accessToken",JSON.stringify(t)),c.headers.Authorization="Bearer "+t,Object(r.a)(c)}}))):Promise.reject(e)}))}),[]),t}},241:function(e,t,n){"use strict";var c=n(16),a=n(48),r=n(1),o=n(86),i=n(140),s=n(11),l=function(){var e=Object(s.f)().pathname;Object(r.useEffect)((function(){e.includes("/profile")||window.scrollTo(0,0)}),[e])},u=n(2);t.a=function(e){var t=e.children;l();var n=Object(r.useState)({name:"",id:null,auth:!1,isInitialLoaded:!1}),s=Object(a.a)(n,2),d=s[0],j=s[1];Object(r.useEffect)((function(){!function(){var e=localStorage.getItem("accessToken");if(e){var t=Object(i.a)(e);j((function(){return{name:t.name,auth:!0,id:t.id,isInitialLoaded:!0}}))}else j((function(e){return Object(c.a)(Object(c.a)({},e),{},{isInitialLoaded:!0})}))}()}),[]);return Object(u.jsx)(o.a.Provider,{value:{user:d,login:function(e,t,n,c){localStorage.setItem("accessToken",JSON.stringify(n)),localStorage.setItem("refreshToken",JSON.stringify(c)),j((function(){return{name:e,auth:!0,id:t,isInitialLoaded:!0}}))},logout:function(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),j((function(e){return Object(c.a)(Object(c.a)({},e),{},{name:"",auth:!1,id:null})}))},clearUser:function(){j((function(e){return Object(c.a)(Object(c.a)({},e),{},{isInitialLoaded:!1})}))},updateUser:function(e){localStorage.setItem("accessToken",JSON.stringify(e));var t=Object(i.a)(e);j((function(e){return Object(c.a)(Object(c.a)({},e),{},{name:t.name})})),window.location.reload()}},children:t})}},242:function(e,t,n){"use strict";var c=n(238),a=n(239),r=n(243),o=n(240),i=n(1),s=n.n(i),l=n.p+"static/media/error_500.b91562a5.svg",u=n(2),d=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={hasError:!1},a}return Object(a.a)(n,[{key:"componentDidCatch",value:function(e,t){console.error("BoundaryError",e),console.error("BoundaryError",t)}},{key:"render",value:function(){return this.state.hasError?Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"text-center",children:[Object(u.jsx)("div",{className:"col-12 col-sm-12 my-4 px-4",children:Object(u.jsx)("div",{className:"embed-responsive embed-responsive-16by9",children:Object(u.jsx)("img",{className:"embed-responsive-item",src:l,alt:""})})}),Object(u.jsx)("h1",{children:"Something went wrong!"}),Object(u.jsx)("h5",{children:"Try reloading this page"}),Object(u.jsx)("button",{className:"btn btn-success",onClick:function(){return window.location.reload()},children:"Reload page"})]})}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(s.a.Component);t.a=d},44:function(e,t,n){"use strict";var c=n(237),a=n.n(c).a.create({baseURL:"https://marm007-filmapp-backend-node.herokuapp.com/api/"});t.a=a},479:function(e,t,n){},482:function(e,t,n){},508:function(e,t,n){"use strict";n.r(t);n(246),n(171),n(295),n(474);var c=n(1),a=n(149),r=n.n(a),o=(n(479),n(233));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(48),s=n(108),l=n(2),u=function(e){var t=e.children,n=2350,a=Object(c.useState)({header:"",message:"",isPrevoius:!1}),r=Object(i.a)(a,2),o=r[0],u=r[1],d=Object(c.useRef)(null),j=Object(c.useRef)(null);return Object(l.jsx)(s.a.Provider,{value:{toast:o,createToast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Playlist",c=window.$("#mainToast");d.current&&(clearTimeout(d.current),d.current=null),o.isPrevoius?(c.toast("hide"),j.current&&clearTimeout(j.current),j.current=setTimeout((function(){c.toast("show"),u({header:t,message:e,isPrevoius:!0}),d.current=setTimeout((function(){c.toast("hide")}),n)}),850)):(c.toast("show"),u({header:t,message:e,isPrevoius:!0}),j.current=setTimeout((function(){c.toast("hide")}),n))}},children:t})},d=n(16),j=n(87),b=function(e){var t=e.children,n=Object(c.useState)({show:!1,isRemoving:!1,id:null,type:null,title:""}),a=Object(i.a)(n,2),r=a[0],o=a[1],s=Object(c.useRef)();return Object(l.jsx)(j.a.Provider,{value:{showModal:function(e,t,n){s.current=window.$("#removeModal"),s.current.modal("show"),o({show:!0,isRemoving:!1,id:e,type:t,title:n})},removeModalData:r,remove:function(){s.current.modal("hide"),o((function(e){return Object(d.a)(Object(d.a)({},e),{},{show:!1,isRemoving:!0})}))},clear:function(){s.current.modal("hide"),o({show:!1,isRemoving:!1,id:null,type:null,title:""})}},children:t})};r.a.render(Object(l.jsx)(u,{children:Object(l.jsx)(b,{children:Object(l.jsx)(o.a,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},68:function(e,t,n){"use strict";var c=n(16),a=n(148),r=n(85),o=(n(1),n(2)),i=["component"];t.a=function(e){var t=e.component,n=Object(a.a)(e,i);return Object(o.jsx)(r.b,Object(c.a)(Object(c.a)({},n),{},{render:function(e){return localStorage.getItem("accessToken")?Object(o.jsx)(t,Object(c.a)({},e)):Object(o.jsx)(r.a,{to:{pathname:"".concat("/filmapp-react-frontend/","login"),state:{from:e.location}}})}}))}},86:function(e,t,n){"use strict";var c=n(1),a=Object(c.createContext)({name:"",id:null,auth:!1,isInitialLoaded:!1});t.a=a},87:function(e,t,n){"use strict";var c=n(1),a=Object(c.createContext)({show:!1,isRemoving:!1,id:null,type:null,title:""});t.a=a}},[[508,3,4]]]);
//# sourceMappingURL=main.fbb41f79.chunk.js.map