(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[18],{520:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return f}));var a=r(7),s=r(139),n=r(46),i=r(1),c=r(541),l=r(553),o=r(140),u=r(81),d=r(537),m=r(2),b=function(){var e=Object(a.g)(),t=Object(i.useContext)(u.a).login,r=Object(i.useReducer)(l.b,l.a),s=Object(n.a)(r,2),b=s[0],f=b.email,j=b.nick,p=b.password,h=b.isSubmitted,g=b.isSuccess,v=b.isSending,O=b.isError,x=b.error,y=s[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("form",{onSubmit:function(r){if(r.preventDefault(),y({type:"submit"}),f&&j&&p&&p.length>=6)return y({type:"send"}),Object(o.d)({email:f,password:p,name:j}).then((function(r){y({type:"success"}),setTimeout((function(){t(r.data.user.name,r.data.user.id,r.data.token,r.data.refreshToken),Object(d.b)(e,"/register",!0)}),1500)})).catch((function(e){var t=null;e.response&&e.response.data&&e.response.data.errors?t=e.response.data.errors:e.response&&e.response.data&&e.response.data.error&&(t=e.response.data.error),y({type:"error",payload:t}),console.error(e)}))},children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"form-label",htmlFor:"nick",children:"Nick"}),Object(m.jsx)(c.a,{isInvalid:h&&!j,type:"text",name:"nick",value:j,onChange:function(e){return y({type:"field",fieldName:"nick",payload:e.target.value})}}),Object(m.jsx)("div",{className:"invalid-feedback",children:"Nick is required"})]}),Object(m.jsxs)("div",{className:"mt-2 form-group",children:[Object(m.jsx)("label",{className:"form-label",htmlFor:"email",children:"Email"}),Object(m.jsx)(c.a,{isInvalid:h&&!f,type:"email",name:"email",value:f,onChange:function(e){return y({type:"field",fieldName:"email",payload:e.target.value})}}),Object(m.jsx)("div",{className:"invalid-feedback",children:"Email is required"})]}),Object(m.jsxs)("div",{className:"mt-2 form-group",children:[Object(m.jsx)("label",{className:"form-label",htmlFor:"password",children:"Password"}),Object(m.jsx)(c.a,{isInvalid:h&&p.length<6,type:"password",name:"password",value:p,onChange:function(e){return y({type:"field",fieldName:"password",payload:e.target.value})}}),Object(m.jsx)("div",{className:"invalid-feedback",children:0===p.length?"Password is required":"Password too short (min 6 chars)"})]}),Object(m.jsxs)("div",{className:"d-flex align-items-center mt-2 form-group",children:[Object(m.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Register"}),v&&Object(m.jsx)("div",{className:"spinner-grow ml-2"})]})]}),g&&Object(m.jsx)("div",{className:"alert alert-success mt-2",children:"You have successfully registered and logged in."}),O&&Object(m.jsx)("div",{className:"alert alert-danger mt-2",children:x||"Error while registtering."})]})};function f(){var e=Object(a.g)();return Object(m.jsx)(s.a,{id:"registerModal",title:"Register",onClose:function(){Object(d.b)(e,"/register")},children:Object(m.jsx)(b,{})})}},537:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return n}));var a=function(e){var t=new Date(Date.parse(e.createdAt));return("0"+t.getDate()).slice(-2)+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getFullYear()).slice(-2)+" o "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)},s=function(e){var t=new Date(Date.parse(e.createdAt)),r=new Date,a=Math.abs(Math.floor((Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())-Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes()))/6e4));return a/60>=1?(a/=60)/24>=1?(a/=24)/30>=1?(a/=30)/12>=1?(a/=12,a=Math.floor(a)+" years "):a=Math.floor(a)+" months ":a=Math.floor(a)+" days ":a=Math.floor(a)+" hours ":a=Math.floor(a)+" minutes ",a+="ago"},n=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.location.pathname.split(t)[0],s={pathname:""===a?"/filmapp-react-frontend/":a,search:e.location.search,state:e.location.state};r?e.replace(s):e.push(s)}},541:function(e,t,r){"use strict";var a=r(1),s=r(2);t.a=function(e){var t=e.isInvalid,r=e.onChange,n=e.type,i=e.name,c=e.value,l=e.placeholder,o=void 0===l?"":l,u=Object(a.useRef)(null);return Object(a.useEffect)((function(){u.current&&(t?u.current.classList.add("is-invalid"):u.current.classList.remove("is-invalid"))}),[t]),"textarea"===n?Object(s.jsx)("textarea",{ref:u,className:"form-control",placeholder:o,type:n,name:i,value:c,onChange:r,rows:8}):Object(s.jsx)("input",{ref:u,className:"form-control",placeholder:o,type:n,name:i,value:c,onChange:r})}},553:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));var a=r(137),s=r(15),n={email:"",nick:"",password:"",isSubmitted:!1,isSending:!1,isSuccess:!1,isError:!1,error:null},i=function(e,t){switch(t.type){case"field":return Object(s.a)(Object(s.a)({},e),{},Object(a.a)({isSubmitted:!1},t.fieldName,t.payload));case"submit":return Object(s.a)(Object(s.a)({},e),{},{isError:!1,error:null,isSubmitted:!0});case"send":return Object(s.a)(Object(s.a)({},e),{},{isSending:!0});case"success":return Object(s.a)(Object(s.a)({},e),{},{isError:!1,error:null,isSending:!1,isSuccess:!0});case"error":return Object(s.a)(Object(s.a)({},e),{},{isSending:!1,isError:!0,error:t.payload});default:return e}}}}]);
//# sourceMappingURL=18.b41587d5.chunk.js.map