(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[9],{370:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return i})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r}));var s=10,c=12,i=10,n=40,r=20},372:function(e,t,a){"use strict";var s=a(9),c=a(358),i=a(376),n=a.n(i),r=a(1);t.a=function(e){var t=e.onClick,a=e.children,i=e.className,l=n()({background:"black"}),o=Object(s.a)(l,2),d=o[0],u=o[1];return Object(r.jsxs)(c.a,{variant:"link",onClick:function(e){d(e),t(e)},className:"button-ripple ".concat(i),children:[a,u]})}},373:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n})),a.d(t,"e",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return o}));var s=a(19),c=a(49),i=function(e){return s.a.post("playlists",e,{headers:Object(c.a)()})},n=function(e){return s.a.get("playlists/".concat(e),{headers:Object(c.a)()})},r=function(e){return s.a.get("playlists",{params:e,headers:Object(c.a)()})},l=function(e,t){return s.a.patch("playlists/".concat(e),t,{headers:Object(c.a)()})},o=function(e){return s.a.delete("playlists/".concat(e),{headers:Object(c.a)()})}},374:function(e,t,a){"use strict";var s=a(21),c=a.n(s),i=a(35),n=a(9),r=a(144),l=a(142),o=a(0),d=a(373),u=a(372),p=a(1);t.a=function(e){var t=e.isPublic,a=e.id,s=e.isProfile,j=e.dispatchPrivacyUpdate,f=e.filmDispatch,b=Object(o.useState)(!1),m=Object(n.a)(b,2),h=m[0],O=m[1];Object(o.useEffect)((function(){function e(){return(e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.c(a,{is_public:!t}).then((function(e){O(!1),j({type:"change-playlist-privacy-success",payload:e.data}),void 0!==f&&f({type:"field",fieldName:"reloadPlaylist",payload:!0})})).catch((function(e){console.error(e),O(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}h&&function(){e.apply(this,arguments)}()}),[j,h,t,a,f]);var y=Object(p.jsx)(u.a,{className:"button-ripple-24 p-0",onClick:function(e){e.stopPropagation(),h||O(!0)},children:Object(p.jsx)(l.a,{icon:t?"globe-europe":"lock"})});return s?Object(p.jsx)(r.a,{className:"text-center justify-content-center d-flex align-items-center p-0 flex-grow-0",children:Object(p.jsx)(r.a,{className:"remove-holder p-0 m-0 flex-grow-0",style:{height:"24px",width:"24"},children:y})}):y}},375:function(e,t,a){"use strict";var s=a(9),c=a(0),i=a(392),n=a(1);t.a=function(e){var t=Object(c.useState)("data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="),a=Object(s.a)(t,2),r=a[0],l=a[1];return Object(c.useEffect)((function(){l(e.image)}),[e.image]),Object(n.jsx)(i.a,{aspectRatio:"16x9",children:Object(n.jsx)("img",{alt:"",className:"embed-responsive-item play-image",src:r})})}},380:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return i}));var s=function(e){return!!("path"===e.tagName&&e.parentNode.className.animVal&&e.parentNode.className.animVal.includes("playlist-add-icon")||"svg"===e.tagName&&e.className.animVal&&e.className.animVal.includes("playlist-add-icon")||e.className&&"string"===typeof e.className&&e.className.includes("playlist-add-icon-holder"))},c=function(e){var t=new Date(Date.parse(e.createdAt));return("0"+t.getDate()).slice(-2)+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getFullYear()).slice(-2)+" o "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)},i=function(e){var t=new Date(Date.parse(e.createdAt)),a=new Date,s=Math.abs(Math.floor((Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())-Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes()))/6e4));return s/60>=1?(s/=60)/24>=1?(s/=24)/30>=1?(s/=30)/12>=1?(s/=12,s=Math.floor(s)+" years "):s=Math.floor(s)+" months ":s=Math.floor(s)+" days ":s=Math.floor(s)+" hours ":s=Math.floor(s)+" minutes ",s+="ago"}},382:function(e,t,a){},384:function(e,t,a){"use strict";var s=a(9),c=a(0),i=a(473),n=a(144),r=a(142),l=a(2),o=a(21),d=a.n(o),u=a(35),p=a(361),j=a(365),f=a(79),b=a(362),m=a(207),h=a(358),O=a(117),y=a(373),x=a(92),g=a(143),v=a(80),N=a(15),w=a(370),A={playlists:[],isLoading:!0,isAllFetched:!1,isCreating:!1,isAdding:!1,playlistToUpgrade:null,title:"",isPublic:!1,error:""};function k(e,t){switch(t.type){case"field":return Object(l.a)(Object(l.a)({},e),{},Object(N.a)({error:""},t.fieldName,t.payload));case"load":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0,isAllFetched:!1});case"load-success":return Object(l.a)(Object(l.a)({},e),{},{playlists:[].concat(Object(v.a)(e.playlists),Object(v.a)(t.payload)),isLoading:!1,isAllFetched:t.payload<w.d,error:""});case"create":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isCreating:!0});case"create-success":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isCreating:!1});case"add":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isAdding:!0,playlistToUpgrade:t.payload});case"add-update-playlist":return Object(l.a)(Object(l.a)({},e),{},{playlists:e.playlists.map((function(t){return t.id===e.playlistToUpgrade.id?Object(l.a)(Object(l.a)({},t),{},{contains:!t.contains}):t})),playlistToUpgrade:null});case"add-success":return Object(l.a)(Object(l.a)({},e),{},{isAdding:!1});case"change-playlist-privacy-success":return Object(l.a)(Object(l.a)({},e),{},{playlists:e.playlists.map((function(e){return e.id===t.payload.id?Object(l.a)(Object(l.a)({},e),{},{is_public:t.payload.is_public}):e}))});case"error":return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isAllFetched:!1,isCreating:!1,error:t.payload,title:""});default:return e}}var C=a(374),P=a(372),D=a(1);var L=function(e){var t=e.filmID,a=e.handlePlaylistClose,o=e.isPreview,v=e.filmDispatch,N=Object(c.useContext)(x.a).createToast,L=Object(c.useReducer)(k,A),_=Object(s.a)(L,2),T=_[0],F=_[1],M=T.playlists,E=T.title,S=T.isPublic,I=T.isLoading,U=T.isAllFetched,R=T.isCreating,H=T.isAdding,W=T.playlistToUpgrade,z=T.error,V=Object(c.useCallback)((function(){I||U||R||H||F({type:"load"})}),[I,U,R,H]),Y=Object(g.a)(V);return Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a({playlists:!0,skip:M.length,limit:w.d}).then((function(e){var a=e.data.playlists;a.forEach((function(e){e.contains=e.films.indexOf(t)>-1})),F({type:"load-success",payload:a})})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}I&&function(){e.apply(this,arguments)}()}),[t,M,I]),Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={title:E,is_public:S,films_id:[t]},e.next=3,y.a(s).then((function(e){F({type:"create-success"}),N("Created playlist ".concat(E)),a()})).catch((function(e){console.error(e);var t=null;e.response&&e.response.data&&e.response.data.error?t=e.response.data.error:e.response&&e.response.data&&e.response.data.errors&&(t=e.response.data.errors[0]),F({type:"error",payload:"Path `title` is required."===t?"Playlist title is required":t})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}R&&function(){e.apply(this,arguments)}()}),[R,E,S,N,a,t]),Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){var a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={films_id:[t]},a=W.contains?Object(l.a)(Object(l.a)({},a),{},{is_remove_films:!0}):Object(l.a)(Object(l.a)({},a),{},{is_remove_films:!1}),s=W.contains?"Deleted from playlist ".concat(W.title):"Added to playlist ".concat(W.title),F({type:"add-update-playlist",playlist:W}),e.next=6,y.c(W.id,a).then((function(e){F({type:"add-success"}),o&&v({type:"field",fieldName:"reloadPlaylist",payload:!0}),N(s)})).catch((function(e){return console.error(e)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}H&&W&&function(){e.apply(this,arguments)}()}),[H,W,N,v,t,o]),Object(D.jsxs)(i.a.Menu,{onClick:function(e){return e.stopPropagation()},style:{width:"240px",left:"50px !important"},children:[Object(D.jsxs)(p.a,{className:"m-0 m-button button-ripple",children:[Object(D.jsx)(n.a,{className:"playlist-add-exit-text-width",children:"Save to..."}),Object(D.jsx)(P.a,{className:"button-ripple-24 playlist-add-icon-holder p-0 d-flex align-items-center text-center justify-content-center",onClick:function(){return setTimeout(a,150)},children:Object(D.jsx)(r.a,{icon:"times"})})]}),Object(D.jsx)(i.a.Divider,{}),Object(D.jsxs)("div",{ref:Y,style:{maxHeight:"100px",overflowY:"scroll",minHeight:"3rem"},children:[M.map((function(e,t){return Object(D.jsxs)(p.a,{className:"m-0 playlist-form-group",children:[Object(D.jsx)(n.a,{xs:10,sm:10,className:"p-0",children:Object(D.jsxs)(j.a.Check,{id:e.id,className:"form-check",children:[Object(D.jsx)(f.a.Input,{type:"checkbox",onChange:function(){return function(e){F({type:"add",payload:e})}(e)},checked:e.contains}),Object(D.jsx)(f.a.Label,{children:Object(D.jsx)("p",{className:"playlist-check-label",children:e.title})})]})}),Object(D.jsx)(C.a,{id:e.id,isPublic:e.is_public,isProfile:!1,filmDispatch:v,dispatchPrivacyUpdate:F})]},e.id)})),!U&&Object(D.jsx)("div",{style:{height:"32px"},className:"d-flex justify-content-center",children:I&&Object(D.jsx)(b.a,{animation:"border"})})]}),Object(D.jsx)(i.a.Divider,{}),Object(D.jsx)(i.a.ItemText,{children:"Create a new playlist"}),Object(D.jsx)(p.a,{className:"m-0 p-0",children:Object(D.jsxs)(j.a,{children:[Object(D.jsx)(m.a,{isInvalid:""!==z,onChange:function(e){return F({type:"field",fieldName:"title",payload:e.target.value})},className:"mb-2 mt-2",placeholder:"Enter playlist title..."}),Object(D.jsx)(m.a.Feedback,{type:"invalid",className:"mb-2 mt-2",children:z}),Object(D.jsxs)(j.a.Select,{"aria-label":"Privacy",className:"mb-2 mt-2",onChange:function(e){return F({type:"field",fieldName:"isPublic",payload:"public"===e.target.value})},children:[Object(D.jsx)("option",{value:"private",children:"Private"}),Object(D.jsx)("option",{value:"public",children:"Public"})]}),Object(D.jsxs)(j.a.Group,{className:"d-flex align-items-center mt-2",children:[Object(D.jsx)(h.a,{disabled:R,onClick:R?null:function(e){e.stopPropagation(),F({type:"create"})},children:"Create"}),R&&Object(D.jsx)(b.a,{className:"ms-2",animation:"grow"})]})]})})]})},_=a(44),T=a(376),F=a.n(T),M=a(52);a(382);t.a=function(e){var t=Object(c.useContext)(_.a).user,a=F()({background:"black"}),l=Object(s.a)(a,2),o=l[0],d=l[1],u=Object(c.useState)(!1),p=Object(s.a)(u,2),j=p[0],f=p[1];return t.auth?Object(D.jsxs)(i.a,{show:j,onToggle:function(e,t,a){f(e)},className:e.isPreview?"col-sm-2 col-2 p-0":"",children:[Object(D.jsx)(i.a.Toggle,{variant:"link",bsPrefix:"p-0",className:"m-button button-ripple",style:{color:"black"},children:Object(D.jsx)("div",{style:{display:"inline-block",width:"100%",height:"100%"},children:Object(D.jsxs)(n.a,{onClick:o,className:"playlist-add-icon-holder p-0 button-ripple button-ripple-24",children:[Object(D.jsx)(r.a,{style:{opacity:j?1:""},className:"playlist-add-icon",icon:M.a}),d]})})}),j&&Object(D.jsx)(L,{isPreview:e.isPreview,filmDispatch:e.filmDispatch,isOpen:j,filmID:e.filmID,handlePlaylistClose:function(){f(!1)}})]}):null}},471:function(e,t,a){},482:function(e,t,a){"use strict";a.r(t);var s=a(21),c=a.n(s),i=a(2),n=a(35),r=a(9),l=a(0),o=a(18),d=a(143),u=a(206),p=a(361),j=a(144),f=a(362),b=a(142),m=a(389),h=a.n(m),O=a(378),y=a.n(O),x=a(470),g=a(384),v=a(380),N=a(116),w=a(375),A=a(80),k=a(15),C=a(370),P={films:[],isLoading:!1,isAllFetched:!1,isInitialLoaded:!1,error:null,search:"",filter:"",sort:"",dir:1,sorts:[{id:"upload_date",title:"Upload date",dir:1},{id:"view_count",title:"View count",dir:1},{id:"rating",title:"Rating",dir:1}]},D=function(e,t){switch(t.type){case"field":return Object(i.a)(Object(i.a)({},e),{},Object(k.a)({},t.fieldName,t.payload));case"initial-success":return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1,isInitialLoaded:!0,error:null,isAllFetched:t.payload.films.length<C.c,films:t.payload.films,search:t.payload.params.search,sort:t.payload.params.sort,filter:t.payload.params.filter,dir:t.payload.params.dir});case"load":return e.isLoading||e.isAllFetched||!e.isInitialLoaded||e.error?e:Object(i.a)(Object(i.a)({},e),{},{isLoading:!0});case"load-success":return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1,error:null,isAllFetched:t.payload.length<C.c,films:[].concat(Object(A.a)(e.films),Object(A.a)(t.payload))});case"sorts-change":return Object(i.a)(Object(i.a)({},e),{},{sort:t.resetSort?"":e.sort,sorts:e.sorts.map((function(e){return e.id===t.payload.id?t.payload:e}))});case"error":return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1,error:!0});default:return e}},L=a(52),_=a(372),T=(a(471),a(1)),F=[{id:"last_hour",title:"Last hour"},{id:"today",title:"Today"},{id:"this_week",title:"This week"},{id:"this_month",title:"This month"},{id:"this_year",title:"This year"}];t.default=function(e){var t=Object(o.g)(),a=Object(o.h)(),s=Object(l.useReducer)(D,P),m=Object(r.a)(s,2),O=m[0],A=m[1],k=O.films,M=O.isLoading,E=O.isAllFetched,S=O.search,I=O.sort,U=O.filter,R=O.dir,H=O.sorts,W=O.error,z=O.isInitialLoaded,V=Object(l.useState)(!1),Y=Object(r.a)(V,2),B=Y[0],q=Y[1],G=Object(l.useCallback)((function(){M||E||W||!z||A({type:"load"})}),[W,E,z,M]);Object(d.a)(G),Object(l.useEffect)((function(){var e,t,s,r=h.a.parse(a.search),l={search:r.title,sort:null!==(e=r.sort)&&void 0!==e?e:"",filter:null!==(t=r.filter)&&void 0!==t?t:"",dir:null!==(s=r.dir)&&void 0!==s?s:1};function o(){return(o=Object(n.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.f(Object(i.a)(Object(i.a)({},l),{},{limit:C.c})).then((function(e){A({type:"initial-success",payload:{films:e.data,params:l}})})).catch((function(e){A({type:"error"}),console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a.state&&a.state.films?A({type:"initial-success",payload:{films:a.state.films,params:l}}):function(){o.apply(this,arguments)}()}),[a]),Object(l.useEffect)((function(){function e(){return(e=Object(n.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.f({search:S,sort:I,filter:U,dir:R,skip:k.length,limit:C.c}).then((function(e){A({type:"load-success",payload:e.data})})).catch((function(e){A({type:"error"}),console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}M&&function(){e.apply(this,arguments)}()}),[R,k.length,U,M,S,I]);var J=function(e,a){var s=U,c=I,i=R;if("filter"===e)s=s===a.id?"":a.id;else{var n=a;c===a.id?(c=a.id,1===n.dir?(n.dir=-1,i=a.dir):-1===n.dir&&(n.dir=1,c=""),A({type:"sorts-change",payload:n,resetSort:""===c}),i=a.dir):(c=a.id,i=a.dir)}""!==c&&""!==s?t.push({search:"?title=".concat(S,"&sort=").concat(c,"&dir=").concat(i,"&filter=").concat(s)}):""===c&&""!==s?t.push({search:"?title=".concat(S,"&filter=").concat(s)}):""!==c&&""===s?t.push({search:"?title=".concat(S,"&sort=").concat(c,"&dir=").concat(i)}):""===c&&""===s&&t.push({search:"?title=".concat(S)})};return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(_.a,{className:"mt-3 mx-3 search-button",onClick:function(){return q(!B)},children:Object(T.jsx)("span",{"aria-controls":"filter-collapse","aria-expanded":B,className:"p-2",children:Object(T.jsx)(b.a,{style:{cursor:"pointer"},icon:L.c})})}),Object(T.jsx)(u.a,{in:B,children:Object(T.jsxs)(p.a,{id:"filter-collapse",className:"mx-2",children:[Object(T.jsxs)(j.a,{className:"mt-4",sm:4,children:[Object(T.jsx)("p",{style:{fontWeight:500},children:"UPLOAD DATE"}),Object(T.jsx)(j.a,{sm:8,className:"mt-3 mb-3 divider"}),F.map((function(e){return Object(T.jsx)("p",{style:U===e.id?{fontWeight:700,fontSize:"80%"}:{fontWeight:400,fontSize:"80%"},onClick:function(){return J("filter",e)},className:"search-filter",children:e.title},e.id)}))]}),Object(T.jsxs)(j.a,{className:"mt-4",sm:4,children:[Object(T.jsx)("p",{style:{fontWeight:500},children:"SORT BY"}),Object(T.jsx)(j.a,{sm:8,className:"mt-3 mb-3 divider"}),H.map((function(e){return Object(T.jsxs)(j.a,{className:"d-flex",children:[Object(T.jsx)("p",{style:I===e.id?{fontWeight:700,fontSize:"80%"}:{fontWeight:400,fontSize:"80%"},onClick:function(){return J("sort",e)},className:"search-filter",children:e.title}),I===e.id&&1===e.dir?Object(T.jsx)(b.a,{className:"ms-2",icon:"sort-up"}):I===e.id&&-1===e.dir?Object(T.jsx)(b.a,{className:"ms-2",icon:"sort-down"}):""]},e.id)}))]})]})}),Object(T.jsx)(j.a,{sm:12,className:"mt-2 mb-3 divider"}),Object(T.jsx)(p.a,{className:"mx-2 mt-4",children:k.map((function(e,a){var s=Object(v.c)(e);return Object(T.jsx)(j.a,{xs:12,sm:12,lg:8,children:Object(T.jsx)(j.a,{className:"play-outer-container m-0 mb-1",onClick:function(a){var s;Object(v.a)(a.target)||(s=e.id,t.push("".concat("/filmapp-react-frontend/","film/")+s))},children:Object(T.jsxs)(p.a,{className:"search-style mb-4 m-0",children:[Object(T.jsx)(j.a,{xs:8,sm:4,className:"p-0",children:Object(T.jsxs)("div",{className:"embed-responsive embed-responsive-16by9 z-depth-1-half play-container",children:[Object(T.jsx)(w.a,{image:"".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail?width=small_webp")}),Object(T.jsx)(b.a,{className:"play-middle",icon:"play"})]})}),Object(T.jsxs)(j.a,{xs:4,sm:8,children:[Object(T.jsxs)(p.a,{className:"m-0",children:[Object(T.jsx)(j.a,{className:"p-0 mb-1",style:{flex:"0 0 auto !important",width:"calc(83.33333333% - 24px) !important"},children:Object(T.jsx)(x.a,{lines:1,className:"mb-0 search-title fw-bold",children:e.title})}),Object(T.jsx)(j.a,{className:"d-flex justify-content-end",children:Object(T.jsx)(g.a,{index:a,filmID:e.id})})]}),Object(T.jsx)("p",{className:"d-none d-sm-inline mb-1 author-nick-search",children:Object(T.jsxs)("small",{children:[e.author_name," \xb7 ",e.views," views \xb7 ",s]})}),Object(T.jsx)("p",{className:"d-inline d-sm-none mb-0 author-nick-color",children:Object(T.jsxs)("small",{children:[e.author_name," \xb7 ",e.views," views"]})}),Object(T.jsx)("small",{className:"d-none d-sm-inline",children:Object(T.jsx)(y.a,{className:"mb-0 author-nick-search",line:2,text:e.description})})]})]})})},e.id)}))}),!E&&Object(T.jsx)("div",{className:z?"fetch-loader d-flex justify-content-center":"suspense-loader",children:(M||!z)&&Object(T.jsx)(f.a,{className:z?"":"suspense-loader-spinner",animation:"border"})})]})}}}]);
//# sourceMappingURL=9.05da2e19.chunk.js.map