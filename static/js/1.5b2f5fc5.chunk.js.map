{"version":3,"sources":["config/index.js","services/filmService.js","services/playlistService.js","hooks/use-bottom-scroll-listener.js","components/buttons/ripple.js","services/userService.js","hooks/use-intersection-observer.js","components/blurred-image/index.js","components/buttons/remove.js","skeletons/film.js","components/buttons/change-privacy.js","components/film-row/index.js","components/buttons/edit.js","components/buttons/update-playlist/reducer.js","components/buttons/update-playlist/menu.js","components/buttons/update-playlist/index.js"],"names":["commentsMaxFetchCount","recommendationsMaxFetchCount","playlistButtonMaxFetchCount","pageInitialMaxFetchCount","pageMaxFetchCount","searchPageMaxFetchCount","all","params","axios","get","index","id","indexDetails","search","view","patch","create","form","post","headers","authHeader","partialUpdate","body","like","remove","delete","show","createCallback","debounce","handleOnScroll","options","lodashDebounce","useBottomScrollListener","onBottom","useMemo","offset","debounceOptions","leading","triggerOnNoScroll","debouncedOnBottom","containerRef","useRef","useCallback","current","scrollNode","scrollContainerBottomPosition","Math","round","scrollTop","clientHeight","scrollHeight","document","getElementById","scrollingElement","documentElement","window","innerHeight","useEffect","ref","node","addEventListener","removeEventListener","RippleButton","onClick","children","className","props","useRipple","background","addRipple","ripples","e","onMouseDown","me","require","useIntersectionObserver","target","onIntersect","threshold","rootMargin","React","observer","IntersectionObserver","observe","unobserve","BlurredImage","src","srcWebp","thumb","thumbWebp","isCached","useState","isLoaded","setIsLoaded","type","srcSet","alt","style","visibility","onLoad","opacity","BlurredImageComponent","image","isVisible","setIsVisible","setIsCached","observerElement","isIntersecting","tmp","Image","concat","complete","RemoveButton","handleRemove","icon","FilmSkeleton","isRecommendations","ChangePrivacyButton","isPublic","isPlaylist","dispatchPrivacyUpdate","filmDispatch","isChanging","setIsChanging","a","playlistApi","is_public","then","res","payload","data","undefined","fieldName","catch","err","console","error","changePrivacy","preventDefault","stopPropagation","Film","film","handleRedirect","isProfile","user","useContext","UserContext","img","auth","line","text","title","author_name","views","description","filmID","EditButton","history","useHistory","push","pathname","state","playlistDropdownMenuInitialState","playlists","isLoading","isAllLoaded","isCreating","isAdding","playlistToUpgrade","playlistDropdownMenuReducer","action","length","map","playlist","contains","PlaylistDropdownMenu","createToast","ToastContext","titleInputRef","useReducer","dispatch","handleOnPlaylistDropdownMenuBottom","scrollRef","userApi","skip","limit","result","forEach","films","indexOf","getMyPlaylists","handlePlaylistClose","click","films_id","errorMessage","response","errors","classList","add","creatPlaylist","is_remove_films","message","addToPlaylist","handleChange","onChange","handleAddToPlaylist","checked","htmlFor","onSubmit","placeholder","value","disabled","PlaylistAddButton","menuRef","isOpen","setIsOpen","handleOpenMenu","handleCloseMenu","element","$","on","off","faEllipsisV"],"mappings":"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","file":"static/js/1.5b2f5fc5.chunk.js","sourcesContent":["export const commentsMaxFetchCount = 10\nexport const recommendationsMaxFetchCount = 12\n\nexport const playlistButtonMaxFetchCount = 10\n\nexport const pageInitialMaxFetchCount = 40\nexport const pageMaxFetchCount = 20\n\nexport const searchPageMaxFetchCount = 10\n","import axios from '../helpers/axios'\nimport authHeader from '../helpers/auth-header'\n\n\nexport const all = (params) => axios.get('films/', {params})\nexport const index = (id) => axios.get(`films/${id}`)\nexport const indexDetails = (id) => axios.get(`films/${id}/details`)\nexport const search = (params) => axios.get('films/search', {params})\n\nexport const view = (id) => axios.patch(`films/${id}/view`)\n\nexport const video = (id) => axios.get(`films/${id}/video`)\nexport const thumbnail = (id, params) => axios.get(`films/${id}/thumbnail`, {params})\n\nexport const create = (form) => axios.post(`films`, form, {headers: authHeader()})\n\nexport const update = (id, body) => axios.put(`films/${id}`, body, {headers: authHeader()})\nexport const partialUpdate = (id, body) => axios.patch(`films/${id}`, body, {headers: authHeader()})\n\nexport const like = (id, form) => axios.patch(`films/${id}/action`, form, {headers: authHeader()})\n\nexport const remove = (id) => axios.delete(`films/${id}`, { headers: authHeader() })\n\n\n\n","import axios from '../helpers/axios'\nimport authHeader from '../helpers/auth-header'\n\n\nexport const create = (body) => axios.post('playlists', body, { headers: authHeader() })\nexport const index = (id) => axios.get(`playlists/${id}`, { headers: authHeader() })\nexport const show = (params) => axios.get(`playlists`, { params, headers: authHeader() })\nexport const partialUpdate = (id, body) => axios.patch(`playlists/${id}`, body, { headers: authHeader() })\n\n\nexport const remove = (id) => axios.delete(`playlists/${id}`, { headers: authHeader() })\n\n","import { useCallback, useEffect, useRef, useMemo } from 'react';\nimport lodashDebounce from 'lodash.debounce';\n\nconst createCallback = (debounce, handleOnScroll, options) => {\n  if (debounce) {\n    return lodashDebounce(handleOnScroll, debounce, options);\n  } else {\n    return handleOnScroll;\n  }\n};\n\nfunction useBottomScrollListener(\n  onBottom = () => { },\n  options = {},\n) {\n  const { offset, triggerOnNoScroll, debounce, debounceOptions, id } = useMemo(\n    () => ({\n      offset: options?.offset ?? 20,\n      debounce: options?.debounce ?? 200,\n      debounceOptions: options?.debounceOptions ?? { leading: true },\n      triggerOnNoScroll: options?.triggerOnNoScroll ?? false,\n      id: options?.id ?? null\n    }),\n    [options?.offset, options?.debounce, options?.debounceOptions, options?.triggerOnNoScroll, options?.id],\n  );\n\n  const debouncedOnBottom = useMemo(() => createCallback(debounce, onBottom, debounceOptions), [onBottom, debounce, debounceOptions]);\n  const containerRef = useRef(null);\n  const handleOnScroll = useCallback(() => {\n\n    if (containerRef.current != null) {\n      const scrollNode = containerRef.current;\n      const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + scrollNode.clientHeight);\n      const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\n\n      if (scrollPosition <= scrollContainerBottomPosition) {\n        debouncedOnBottom();\n      }\n    } else if (id !== null) {\n      const scrollNode = document.getElementById(id);\n      if (scrollNode) {\n        const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + scrollNode.clientHeight);\n        const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\n        if (scrollPosition <= scrollContainerBottomPosition) {\n          debouncedOnBottom();\n        }\n      }\n    } else {\n      const scrollNode = document.scrollingElement || document.documentElement;\n      const scrollContainerBottomPosition = Math.round(scrollNode.scrollTop + window.innerHeight);\n      const scrollPosition = Math.round(scrollNode.scrollHeight - offset);\n\n      if (scrollPosition <= scrollContainerBottomPosition) {\n        debouncedOnBottom();\n      }\n    }\n  }, [debouncedOnBottom, offset, id]);\n\n  useEffect(() => {\n    const ref = containerRef.current;\n    const node = document.getElementById(id)\n\n    if (ref != null) {\n      ref.addEventListener('scroll', handleOnScroll);\n    } else if (node !== null) {\n      node.addEventListener('scroll', handleOnScroll);\n    } else {\n      window.addEventListener('scroll', handleOnScroll);\n    }\n\n    if (triggerOnNoScroll) {\n      handleOnScroll();\n    }\n\n    return () => {\n      if (ref != null) {\n        ref.removeEventListener('scroll', handleOnScroll);\n      } else if (node !== null) {\n        node.addEventListener('scroll', handleOnScroll);\n      } else {\n        window.removeEventListener('scroll', handleOnScroll);\n      }\n    };\n  }, [handleOnScroll, triggerOnNoScroll, id]);\n\n  return containerRef;\n}\n\nexport default useBottomScrollListener;\n","import useRipple from 'useripple'\n\nconst RippleButton = ({ onClick = () => {}, children, className, id, ...props }) => {\n\n    const [addRipple, ripples] = useRipple({ background: 'black' })\n\n    return (\n        <button id={id ? id : ''} onClick={(e) => {\n            onClick(e)\n        }}\n            onMouseDown={addRipple}\n            className={`btn btn-link button-ripple text-dark ${className}`} {...props}>\n            {children}\n            {ripples}\n        </button>\n    )\n}\n\nexport default RippleButton","import axios from '../helpers/axios'\nimport authHeader from '../helpers/auth-header'\n\n\nexport const me = (params) => axios.get('users/me', { params, headers: authHeader() })\nexport const partialUpdate = (body) => axios.patch('users', body, { headers: authHeader() })\n\nexport const userService = {\n    login,\n    logout,\n    register\n};\n\nfunction login(username, password) {\n\n    let loginHeaderMy = null\n\n    const requestOptions = {\n        method: 'POST',\n        headers: loginHeaderMy\n\n    };\n\n    return fetch(`${process.env.REACT_APP_API_URL}/users/auth`, requestOptions)\n        .then(handleResponse)\n        .then(user => {\n            localStorage.setItem('user', JSON.stringify(user));\n            return user;\n        })\n}\n\nfunction logout() {\n    localStorage.removeItem('user');\n}\n\nfunction register(user) {\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(user)\n    };\n    return fetch(`${process.env.REACT_APP_API_URL}/users/`, requestOptions)\n        .then(handleResponse);\n}\n\nfunction handleResponse(response) {\n    return response.text().then(text => {\n        const data = text && JSON.parse(text);\n        if (!response.ok) {\n            if (response.status === 401) {\n                logout();\n            }\n            const error = (data && data.errors) || response.statusText;\n            return Promise.reject(error);\n        }\n        return data;\n    })\n}\n\n","import React from \"react\";\nrequire('intersection-observer');\n\nconst useIntersectionObserver = ({\n  target,\n  onIntersect,\n  threshold = 0.1,\n  rootMargin = \"0px\"\n}) => {\n  React.useEffect(() => {\n    const observer = new IntersectionObserver(onIntersect, {\n      rootMargin,\n      threshold\n    });\n    const current = target.current;\n    observer.observe(current);\n    return () => {\n      observer.unobserve(current);\n    };\n  });\n};\nexport default useIntersectionObserver;","import React, { useState, useRef } from 'react';\nimport useIntersectionObserver from '../../hooks/use-intersection-observer';\nimport \"./style.css\";\n\nconst BlurredImage = ({ src, srcWebp, thumb, thumbWebp, isCached }) => {\n    const [isLoaded, setIsLoaded] = useState(isCached);\n\n    return (\n        <div>\n\n            <picture >\n                <source type=\"image/webp\" srcSet={thumbWebp} />\n                <source type=\"image/jpeg\" srcSet={thumb} />\n                <img className=\"image thumb\" alt=\"\"\n                    style={{ visibility: isLoaded ? \"hidden\" : \"visible\" }}\n                    src={thumb}\n                    onLoad={() => {\n                        setIsLoaded(true);\n                    }} />\n            </picture>\n\n            <picture >\n                <source type=\"image/webp\" srcSet={srcWebp} />\n                <source type=\"image/jpeg\" srcSet={src} />\n                <img className=\"image full\" alt=\"\"\n                    style={{ opacity: isLoaded ? 1 : 0 }}\n                    src={src}\n                    onLoad={() => {\n                        setIsLoaded(true);\n                    }} />\n            </picture>\n        </div>\n    );\n}\n\nfunction BlurredImageComponent({ image }) {\n    const ref = useRef();\n    const [isVisible, setIsVisible] = useState(false);\n    const [isCached, setIsCached] = useState(false);\n\n    useIntersectionObserver({\n        target: ref,\n        onIntersect: ([{ isIntersecting }], observerElement) => {\n            if (isIntersecting) {\n                let tmp = new Image();\n                tmp.src = image.concat('?width=poster_webp');\n                setIsCached(tmp.complete)\n                setIsVisible(true);\n                if (ref.current)\n                    observerElement.unobserve(ref.current);\n            }\n        }\n    });\n\n    return (\n        <div\n            ref={ref}\n            className=\"image-container embed-responsive embed-responsive-16by9  play-image\"\n        >\n            {isVisible && (\n                <BlurredImage isCached={isCached}\n                    src={image.concat('?width=poster')}\n                    srcWebp={image.concat('?width=poster_webp')}\n                    thumb={image.concat('?width=preview')}\n                    thumbWebp={image.concat('?width=preview_webp')} />\n            )}\n        </div>\n    );\n}\n\nexport default BlurredImageComponent;","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport RippleButton from './ripple'\n\nconst RemoveButton = ({ handleRemove }) => {\n    return (\n        <RippleButton\n            className=\"button-ripple-24 remove-holder p-0\"\n            onClick={handleRemove}>\n            <FontAwesomeIcon icon=\"trash-alt\" />\n        </RippleButton>\n    )\n}\n\nexport default RemoveButton","import Skeleton from 'react-loading-skeleton';\n\nconst FilmSkeleton = ({ isRecommendations }) => {\n\n    return (\n        <div className={`${isRecommendations ? 'col-sm-12' : 'col-sm-6'} mb-4 col col-12 col-md-3 col-lg-2 container-px`}>\n            <div className=\"col-12 col-sm-12 p-0\">\n                <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half play-container\">\n                    <div className=\"embed-responsive-item\">\n                        <Skeleton className=\"w-100 h-100 line-height-unset\" />\n                    </div>\n                </div>\n            </div>\n            <div className=\"col-12 col-sm-12 mt-2 p-0\">\n                <div className=\"col p-0\">\n                    <Skeleton className=\"w-100 h-100 line-height-unset\" />\n                </div>\n\n                <div className=\"col p-0\">\n                    <Skeleton className={`${isRecommendations ? 'line-height-unset' : ''} col w-100`} />\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default FilmSkeleton","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { useEffect, useState } from \"react\"\nimport * as playlistApi from '../../services/playlistService'\nimport RippleButton from \"./ripple\"\n\nconst ChangePrivacyButton = ({ isPublic, id, isPlaylist, dispatchPrivacyUpdate, filmDispatch }) => {\n\n    const [isChanging, setIsChanging] = useState(false)\n\n\n    useEffect(() => {\n        async function changePrivacy() {\n            await playlistApi.partialUpdate(id, { is_public: !isPublic })\n                .then(res => {\n                    setIsChanging(false)\n\n                    dispatchPrivacyUpdate({\n                        type: 'change-playlist-privacy-success',\n                        payload: res.data\n                    })\n\n                    if (filmDispatch !== undefined) {\n                        filmDispatch({\n                            type: 'field',\n                            fieldName: 'reloadPlaylist',\n                            payload: true\n                        })\n                    }\n                })\n                .catch(err => {\n                    console.error(err)\n                    setIsChanging(false)\n                })\n        }\n        if (isChanging) changePrivacy()\n    }, [dispatchPrivacyUpdate, isChanging, isPublic, id, filmDispatch])\n\n    const handleChangePrivacy = (e) => {\n        e.preventDefault()\n        e.stopPropagation()\n        if (!isChanging) setIsChanging(true)\n    }\n\n\n    return <RippleButton\n        className={`button-ripple-24 p-0 ${isPlaylist ? '' : 'remove-holder'}`}\n        onClick={handleChangePrivacy}>\n        <FontAwesomeIcon icon={isPublic ? \"globe-europe\" : \"lock\"} />\n    </RippleButton>\n}\n\nexport default ChangePrivacyButton","import { useContext } from 'react';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport TextTruncate from \"react-text-truncate\";\n\nimport BlurredImageComponent from \"../blurred-image\";\n\nimport PlaylistAddButtonComponent from \"../buttons/update-playlist\";\nimport RemoveButton from '../buttons/remove';\nimport EditButton from '../buttons/edit';\n\nimport UserContext from '../../contexts/user/userContext';\n\nimport './style.css'\n\nconst Film = ({ film, index, handleRedirect, handleRemove, isProfile, isRecommendations, filmDispatch, children }) => {\n\n    const { user } = useContext(UserContext);\n\n    return (\n        <div className={`col-12 ${isRecommendations ? 'col-sm-12' : 'col-sm-6'} col-md-3 col-lg-2 mb-4 container-px`}>\n\n            <div className={`col play-outer-container remove-container p-0`}>\n\n                <div className={`col-12 col-sm-12 p-0`}\n                    onClick={() => handleRedirect()}>\n                    <div className=\"play-container\">\n                        <BlurredImageComponent\n                            image={film.img} />\n                        <FontAwesomeIcon className=\"play-middle\" icon=\"play\" />\n                    </div>\n                </div>\n\n                <div className={`col-12 col-sm-12 p-0`}>\n                    <div className={`row mx-0 mb-0 mt-1`}>\n                        <div className={`${user.auth ? `${isProfile ? 'button-ripple-div-next-width-2x' : 'button-ripple-div-next-width'}` : 'col-12'} col p-0 pr-2 cursor-pointer`}\n                            onClick={() => handleRedirect()}>\n\n                            <TextTruncate line={1} text={film.title}\n                                className={`mb-1 mt-1 title`} />\n\n                            {children ? children : <div className=\"mb-0 author-nick\">\n                                <span>{film.author_name}&nbsp;</span>\n                                <span>•&nbsp;</span>\n                                <span>{film.views} views</span>\n                            </div>\n                            }\n                        </div>\n                        <div className={`${user.auth ? `${isProfile ? 'click-under-buttons-container-x2' : 'click-under-buttons-container'}` : 'click-under-buttons-container'}`}>\n                            {\n                                isProfile ? <>\n                                    <RemoveButton handleRemove={handleRemove} />\n                                    <EditButton id={film.id} title={film.title} description={film.description} />\n                                </>\n                                    : user.auth ?\n                                        <PlaylistAddButtonComponent\n                                            isRecommendations={isRecommendations}\n                                            filmDispatch={filmDispatch}\n                                            index={index}\n                                            filmID={film.id} /> : null\n                            }\n                            <div className=\"col col-12 m-0 p-0 click-under-buttons\"\n                                onClick={() => handleRedirect()}>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div >\n    )\n}\n\nexport default Film","import React from 'react'\nimport { useHistory } from \"react-router-dom\"\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport RippleButton from \"./ripple\"\n\nconst EditButton = ({ isPlaylist, id, title, description }) => {\n    let history = useHistory()\n\n    const handleEditClick = (e) => {\n        e.stopPropagation()\n        if (isPlaylist) {\n            history.push({ pathname: `profile/update-playlist/${id}`, state: { title } })\n        } else {\n            history.push({ pathname: `profile/update-film/${id}`, state: { title, description } })\n        }\n    }\n\n    return (\n        <RippleButton className=\"button-ripple-24 remove-holder p-0\"\n            onClick={handleEditClick}>\n            <FontAwesomeIcon icon=\"edit\" />\n        </RippleButton>\n    )\n}\n\nexport default EditButton","import { playlistButtonMaxFetchCount } from \"../../../config\"\n\nexport const playlistDropdownMenuInitialState = {\n    playlists: [],\n    isLoading: true,\n    isAllLoaded: false,\n    isCreating: false,\n    isAdding: false,\n    playlistToUpgrade: null,\n    title: '',\n    isPublic: false,\n    error: '',\n}\n\nexport function playlistDropdownMenuReducer(state, action) {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                error: '',\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'load': {\n            return {\n                ...state,\n                isLoading: true,\n                isAllLoaded: false,\n            }\n        }\n        case 'load-success': {\n            return {\n                ...state,\n                playlists: [...state.playlists, ...action.payload],\n                isLoading: false,\n                isAllLoaded: action.payload.length < playlistButtonMaxFetchCount,\n                error: '',\n            }\n        }\n        case 'create': {\n            return {\n                ...state,\n                isLoading: false,\n                isCreating: true\n            }\n        }\n        case 'create-success': {\n            return {\n                ...state,\n                isLoading: false,\n                isCreating: false\n            }\n        }\n        case 'add': {\n            return {\n                ...state,\n                isLoading: false,\n                isAdding: true,\n                playlistToUpgrade: action.payload\n            }\n        }\n        case 'add-update-playlist': {\n            return {\n                ...state,\n                playlists: state.playlists.map(playlist => {\n                    if (playlist.id === state.playlistToUpgrade.id) return { ...playlist, contains: !playlist.contains }\n                    else return playlist\n                }),\n                playlistToUpgrade: null\n            }\n        }\n        case 'add-success': {\n            return {\n                ...state,\n                isAdding: false\n            }\n        }\n        case 'change-playlist-privacy-success': {\n            return {\n                ...state,\n                playlists: state.playlists.map(playlist => {\n                    if (playlist.id === action.payload.id) return { ...playlist, is_public: action.payload.is_public }\n                    return playlist\n                })\n            }\n        }\n        case 'error':\n            return {\n                ...state,\n                isLoading: false,\n                isCreating: false,\n                error: action.payload,\n                title: ''\n            }\n        default:\n            return state\n\n    }\n}\n","import React, { useCallback, useEffect, useContext, useReducer, useRef } from 'react';\n\nimport * as userApi from '../../../services/userService'\nimport * as playlistApi from '../../../services/playlistService'\n\nimport ToastContext from '../../../contexts/toast/toastContext';\nimport useBottomScrollListener from '../../../hooks/use-bottom-scroll-listener';\nimport { playlistDropdownMenuReducer, playlistDropdownMenuInitialState } from './reducer'\nimport ChangePrivacyButton from '../../buttons/change-privacy';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { playlistButtonMaxFetchCount } from '../../../config';\nimport RippleButton from '../ripple';\n\nfunction PlaylistDropdownMenu({ filmID, isRecommendations, filmDispatch }) {\n\n    const { createToast } = useContext(ToastContext);\n\n    const titleInputRef = useRef()\n\n    const [state, dispatch] = useReducer(playlistDropdownMenuReducer, playlistDropdownMenuInitialState);\n\n    const { playlists, title, isPublic, isLoading, isAllLoaded, isCreating, isAdding, playlistToUpgrade, error } = state\n\n\n    const handleOnPlaylistDropdownMenuBottom = useCallback(() => {\n        if (!isLoading && !isAllLoaded && !isCreating && !isAdding) {\n            dispatch({\n                type: 'load'\n            })\n        }\n    }, [isLoading, isAllLoaded, isCreating, isAdding])\n\n    const scrollRef = useBottomScrollListener(handleOnPlaylistDropdownMenuBottom);\n\n    useEffect(() => {\n        async function getMyPlaylists() {\n            await userApi.me({ playlists: true, skip: playlists.length, limit: playlistButtonMaxFetchCount })\n                .then(res => {\n\n                    let result = res.data.playlists\n\n                    result.forEach(playlist => {\n                        playlist.contains = playlist.films.indexOf(filmID) > -1\n                    });\n\n                    dispatch({\n                        type: 'load-success',\n                        payload: result\n                    })\n                })\n                .catch(err => {\n                    console.error(err)\n                })\n        }\n\n        if (isLoading) getMyPlaylists()\n\n    }, [filmID, playlists, isLoading])\n\n    useEffect(() => {\n        const handlePlaylistClose = () => {\n            document.getElementById(`closePlaylistMenuButton${filmID}`).click()\n        }\n\n        async function creatPlaylist() {\n            const body = { title: title, is_public: isPublic, films_id: [filmID] };\n\n            await playlistApi.create(body)\n                .then(res => {\n                    dispatch({\n                        type: 'create-success'\n                    })\n                    createToast(`Created playlist ${title}`)\n                    handlePlaylistClose()\n                })\n                .catch(err => {\n                    console.error(err)\n                    let errorMessage = null\n\n                    if (err.response && err.response.data && err.response.data.error) {\n                        errorMessage = err.response.data.error\n                    } else if (err.response && err.response.data && err.response.data.errors) {\n                        errorMessage = err.response.data.errors[0]\n                    }\n                    titleInputRef.current.classList.add('is-invalid')\n                    dispatch({\n                        type: 'error',\n                        payload: errorMessage === \"Path `title` is required.\" ? 'Playlist title is required' : errorMessage\n                    })\n                })\n        }\n\n        if (isCreating) creatPlaylist()\n\n    }, [isCreating, title, isPublic, createToast, filmID])\n\n    useEffect(() => {\n        async function addToPlaylist() {\n\n            let body = { films_id: [filmID] };\n\n            body = playlistToUpgrade.contains ? { ...body, is_remove_films: true } : { ...body, is_remove_films: false }\n\n            const message = playlistToUpgrade.contains ? `Deleted from playlist ${playlistToUpgrade.title}` : `Added to playlist ${playlistToUpgrade.title}`\n\n            dispatch({\n                type: 'add-update-playlist',\n                playlist: playlistToUpgrade\n            })\n\n            await playlistApi.partialUpdate(playlistToUpgrade.id, body)\n                .then(res => {\n                    dispatch({\n                        type: 'add-success'\n                    })\n\n                    if (isRecommendations) {\n                        filmDispatch({\n                            type: 'field',\n                            fieldName: 'reloadPlaylist',\n                            payload: true\n                        })\n                    }\n                    createToast(message)\n                })\n                .catch(err => console.error(err))\n        }\n        if (isAdding && playlistToUpgrade) addToPlaylist()\n    }, [isAdding, playlistToUpgrade, createToast, filmDispatch, filmID, isRecommendations])\n\n    const handleAddToPlaylist = (playlist) => {\n        dispatch({\n            type: 'add',\n            payload: playlist\n        })\n    };\n\n    const handleChange = (fieldName, payload) => {\n        titleInputRef.current.classList.remove('is-invalid')\n        dispatch({\n            type: 'field',\n            fieldName: fieldName,\n            payload: payload\n        })\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault()\n        e.stopPropagation()\n\n        dispatch({\n            type: 'create'\n        })\n    };\n\n    return (\n\n        <>\n            <div className=\"row m-0 m-button button-ripple\" >\n                <div className=\"col playlist-add-exit-text-width px-3\">Save to...</div>\n                <RippleButton id={`closePlaylistMenuButton${filmID}`} className=\"button-ripple-24 playlist-add-icon-holder p-0 d-flex align-items-center text-center justify-content-center\"\n                    onClick={() => { }}>\n                    <FontAwesomeIcon icon=\"times\" />\n                </RippleButton>\n            </div>\n            <hr className=\"dropdown-divider\" />\n            <div ref={scrollRef} className=\"playlist-dropdown-content\">\n                {\n                    playlists.map((playlist, index) => {\n                        return (<div className=\"row m-0 playlist-form-group form-group mb-1\" key={playlist.id} >\n                            <div className=\"col-10 col-sm-10 p-0\">\n                                <div id={playlist.id} className=\"form-check\">\n                                    <input type=\"checkbox\"\n                                        id={`formCheckAddToPlaylist${playlist.id}`}\n                                        className=\"form-check-input\"\n                                        onChange={() => handleAddToPlaylist(playlist)}\n                                        checked={playlist.contains} />\n                                    <label className=\"form-check-label w-100\"\n                                        htmlFor={`formCheckAddToPlaylist${playlist.id}`}>\n                                        <p className=\"playlist-check-label\" onClick={e => e.stopPropagation()}>\n                                            {playlist.title}\n                                        </p>\n                                    </label>\n                                </div>\n\n                            </div>\n                            <ChangePrivacyButton\n                                id={playlist.id}\n                                isPublic={playlist.is_public}\n                                isPlaylist={true}\n                                filmDispatch={filmDispatch}\n                                dispatchPrivacyUpdate={dispatch} />\n\n                        </div>)\n                    })\n                }\n\n                {\n                    !isAllLoaded && <div className=\"fetch-spinner d-flex justify-content-center align-items-center h-100\">\n                        {isLoading && <div className=\"spinner-border\" />}\n                    </div>\n                }\n            </div>\n            <hr className=\"dropdown-divider\" />\n            <div className=\"row m-0 px-3\">\n                <span className=\"m-0\">Create a new playlist</span>\n            </div>\n            <div className=\"row m-0 px-3\">\n                <form onSubmit={handleSubmit}>\n                    <div className=\"form-group mb-2 mt-2\" >\n                        <input type=\"text\" className=\"form-control\" aria-label=\"playlistNameInput\"\n                            placeholder=\"Enter playlist title...\" ref={titleInputRef}\n                            onChange={(e) => handleChange('title', e.target.value)}\n                        />\n                        <div className=\"invalid-feedback\">\n                            {error}\n                        </div>\n                    </div>\n                    <div className=\"form-group mb-2 mt-2\">\n                        <select className=\"form-control\"\n                            onChange={(e) => handleChange('isPublic', e.target.value === 'public')}>\n                            <option value=\"private\">Private</option>\n                            <option value=\"public\">Public</option>\n                        </select>\n                    </div>\n\n                    <div className=\"d-flex align-items-center mt-2\">\n                        <button type=\"submit\" className=\"btn btn-primary\" disabled={isCreating}>\n                            Create\n                        </button>\n\n                        {\n                            isCreating &&\n                            <div className=\"spinner-grow ml-2\" />\n                        }\n                    </div>\n\n                </form>\n\n            </div>\n\n        </>\n\n\n    )\n}\n\nexport default PlaylistDropdownMenu\n","import React, { useState, useRef, useEffect } from 'react';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport PlaylistDropdownMenu from './menu'\nimport useRipple from \"useripple\"\n\nimport { faEllipsisV } from '@fortawesome/free-solid-svg-icons'\n\nimport './style.css'\n\nfunction PlaylistAddButton({ isRecommendations, filmDispatch, filmID }) {\n\n    const menuRef = useRef()\n\n    const [addRipple, ripples] = useRipple({ background: \"black\" })\n\n    const [isOpen, setIsOpen] = useState(false)\n\n    const handleOpenMenu = () => {\n        setIsOpen(true)\n    }\n\n    const handleCloseMenu = () => {\n        setIsOpen(false)\n    }\n\n    useEffect(() => {\n        let ref = menuRef.current\n\n        if (ref) {\n\n            const element = window.$(`#playlistDropdown${filmID}`)\n\n            element.on('show.bs.dropdown', handleOpenMenu)\n            element.on('hide.bs.dropdown', handleCloseMenu)\n\n            return () => {\n                element.off('show.bs.dropdown', handleOpenMenu)\n                element.off('hide.bs.dropdown', handleCloseMenu)\n            }\n\n        }\n    }, [menuRef, filmID])\n\n    return (\n\n        <div ref={menuRef}\n            id={`playlistDropdown${filmID}`}\n            className={`p-0 dropdown dropdown-sizes`} >\n\n            <button\n                onMouseDown={addRipple}\n                id={`playlistAddButtonLabel${filmID}`}\n                type=\"button\"\n                data-toggle=\"dropdown\"\n                data-boundary=\"window\"\n                className=\"btn btn-link button-ripple dropdown-toggle p-0 text-dark\">\n                <div\n                    className=\"col playlist-add-icon-holder p-0 button-ripple button-ripple-24\">\n                    <FontAwesomeIcon style={{ opacity: (isOpen ? 1 : \"\") }}\n                        className=\"playlist-add-icon\" icon={faEllipsisV} />\n                    {ripples}\n                </div>\n            </button>\n\n            <div className={`dropdown-menu playlist-dropdown-menu ${isRecommendations ? 'dropdown-menu-right' : 'playlist-dropdown-menu-position'}`}\n                id={`playlistDropdownMenu${filmID}`}\n                aria-labelledby={`playlistAddButtonLabel${filmID}`}\n            >\n                {isOpen && <PlaylistDropdownMenu\n                    isRecommendations={isRecommendations}\n                    filmDispatch={filmDispatch}\n                    filmID={filmID} />\n                }\n            </div>\n        </div >\n    )\n}\n\nexport default PlaylistAddButton\n"],"sourceRoot":""}