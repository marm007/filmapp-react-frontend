(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[20],{440:function(e,t,a){"use strict";a.r(t);var n=a(27),c=a(270),i=a.n(c),r=a(271),o=a(29),s=a(0),l=a(7),u=a(44),d=a(2),f=a(277),p={films:null,isLoading:!1,isAllFetched:!1,isInitialLoaded:!1,error:null},b=function(e,t){switch(t.type){case"field":return Object(d.a)(Object(d.a)({},e),{},Object(u.a)({},t.fieldName,t.payload));case"load":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!0,isAllFetched:!1,error:""});case"initial-load":return Object(d.a)(Object(d.a)({},e),{},{films:Object(n.a)(new Set(Object(n.a)(t.payload))),isLoading:!1,isInitialLoaded:!0,isAllFetched:t.payload.length<f.b});case"success":return Object(d.a)(Object(d.a)({},e),{},{films:Object(n.a)(new Set([].concat(Object(n.a)(e.films),Object(n.a)(t.payload)))),isLoading:!1,isAllFetched:t.payload.length<f.c,error:null});case"error":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1,isAllFetched:!1,error:t.payload});default:return e}},h=a(304),j=a(290),m=a(281),O=a(279),y=a(1);t.default=function(){var e=Object(l.g)(),t=Object(s.useReducer)(b,p),a=Object(o.a)(t,2),c=a[0],u=a[1],d=c.films,g=c.isLoading,x=c.isAllFetched,k=c.isInitialLoaded,v=Object(s.useCallback)((function(){g||x||!k||u({type:"load"})}),[g,x,k]);Object(O.a)(v,{triggerOnNoScroll:!0}),Object(s.useEffect)((function(){function e(){return(e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a({limit:f.b}).then((function(e){var t=e.data;t.forEach((function(e){e.img="".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail")})),u({type:"initial-load",payload:t})})).catch((function(e){return console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(s.useEffect)((function(){function e(){return(e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a({skip:d.length,limit:f.c}).then((function(e){var t=e.data;t.forEach((function(e){e.img="".concat("https://marm007-filmapp-backend-node.herokuapp.com/api/","films/").concat(e.id,"/thumbnail")})),u({type:"success",payload:t})})).catch((function(e){return console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}g&&k&&d&&function(){e.apply(this,arguments)}()}),[g,k,d]);var w=function(t){e.push({pathname:"".concat("/filmapp-react-frontend/","film/")+t})};return Object(y.jsxs)("div",{className:"row mt-5 mx-2",children:[d?d.map((function(e,t){return Object(y.jsx)(h.a,{film:e,index:t,handleRedirect:w},e.id)})):Object(n.a)(Array(20)).map((function(e,t){return Object(y.jsx)(j.a,{},t)})),!x&&Object(y.jsx)("div",{className:"fetch-loader d-flex justify-content-center",children:g&&Object(y.jsx)("div",{className:"spinner-border"})})]})}}}]);
//# sourceMappingURL=20.c32ecc9a.chunk.js.map