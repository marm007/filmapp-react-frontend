{"version":3,"sources":["components/dialogs/updateFilm/reducer.js","components/dialogs/updateFilm/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","components/models/input/index.js","services/filmService.js"],"names":["updateFilmInitialState","title","description","initialFilm","isInitialLoaded","isSumbitted","isSending","isError","error","isSuccess","updateFilmReducer","state","action","type","fieldName","payload","UpdateFilm","history","useHistory","id","useParams","useReducer","dispatch","useEffect","a","filmApi","then","res","data","catch","err","getInitialFilm","setTimeout","goBack","updateFilm","onClose","onSubmit","e","preventDefautl","className","htmlFor","name","value","isInvalid","onChange","target","disabled","module","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","done","Promise","_asyncToGenerator","fn","self","this","args","arguments","apply","undefined","Input","placeholder","InputTag","inputRef","useRef","current","classList","add","remove","ref","all","params","axios","get","index","search","view","patch","create","form","post","headers","authHeader","update","put","like","delete"],"mappings":"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","file":"static/js/15.3b23f60b.chunk.js","sourcesContent":["export const updateFilmInitialState = {\r\n    title: '',\r\n    description: '',\r\n    initialFilm: {\r\n        title: '',\r\n        description: ''\r\n    },\r\n    isInitialLoaded: false,\r\n    isSumbitted: false,\r\n    isSending: false,\r\n    isError: false,\r\n    error: '',\r\n    isSuccess: false,\r\n}\r\n\r\nexport const updateFilmReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'field': {\r\n            return {\r\n                ...state,\r\n                error: '',\r\n                isError: false,\r\n                [action.fieldName]: action.payload\r\n            }\r\n        }\r\n        case 'initial-success': {\r\n            return {\r\n                ...state,\r\n                isInitialLoaded: true,\r\n                title: action.title,\r\n                description: action.description,\r\n                initialFilm: {\r\n                    title: action.title,\r\n                    description: action.description\r\n                }\r\n            }\r\n        }\r\n        case 'submit': {\r\n            return {\r\n                ...state,\r\n                isSumbitted: true,\r\n                isError: false,\r\n                error: ''\r\n            }\r\n        }\r\n        case 'send': {\r\n            return {\r\n                ...state,\r\n                isSending: true\r\n            }\r\n        }\r\n        case 'success': {\r\n            return {\r\n                ...state,\r\n                isSuccess: true,\r\n                isSending: false,\r\n                isSumbitted: false,\r\n                isError: false,\r\n                error: ''\r\n            }\r\n        }\r\n        case 'error': {\r\n            return {\r\n                ...state,\r\n                isSuccess: false,\r\n                isSending: false,\r\n                isSumbitted: false,\r\n                isError: true,\r\n                error: action.payload ? action.payload : ''\r\n            }\r\n        }\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}","import React, { useEffect, useReducer } from 'react'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport Input from '../../models/input'\r\nimport Modal from '../../models/modal'\r\nimport { updateFilmInitialState, updateFilmReducer } from './reducer'\r\n\r\nimport * as filmApi from '../../../services/filmService'\r\n\r\nconst UpdateFilm = () => {\r\n    let history = useHistory()\r\n    let { id } = useParams();\r\n\r\n    const [state, dispatch] = useReducer(updateFilmReducer, updateFilmInitialState)\r\n    const { title, description, initialFilm, isInitialLoaded,\r\n        isSumbitted, isSending, isError, error, isSuccess } = state\r\n\r\n\r\n    useEffect(() => {\r\n        const getInitialFilm = async () => {\r\n            await filmApi.index(id)\r\n                .then(res => {\r\n                    dispatch({\r\n                        type: 'initial-success',\r\n                        title: res.data.title,\r\n                        description: res.data.description\r\n                    })\r\n                })\r\n                .catch(err => {\r\n                    dispatch({\r\n                        type: 'error'\r\n                    })\r\n                })\r\n        }\r\n\r\n        getInitialFilm()\r\n\r\n    }, [id, history])\r\n\r\n    useEffect(() => {\r\n        const updateFilm = async () => {\r\n            await filmApi.update(id, { title, description })\r\n                .then(res => {\r\n                    dispatch({\r\n                        type: 'success'\r\n                    })\r\n\r\n                    setTimeout(() => history.goBack(), 500)\r\n                })\r\n                .catch(err => {\r\n                    dispatch({\r\n                        type: 'error'\r\n                    })\r\n                })\r\n        }\r\n\r\n        if (isSending) updateFilm()\r\n    }, [description, id, history, isSending, title])\r\n\r\n    const modalClose = () => {\r\n        history.goBack()\r\n    }\r\n\r\n    const handleSumbit = (e) => {\r\n        e.preventDefautl()\r\n        dispatch({\r\n            type: 'submit'\r\n        })\r\n\r\n        if (title && description) {\r\n            dispatch({\r\n                type: 'send'\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Modal id=\"updatateFilmModal\" title=\"Update\" onClose={modalClose}>\r\n            <form onSubmit={isSending ? handleSumbit : null}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"title\">Title</label>\r\n                    <Input type=\"text\" name=\"title\" value={title}\r\n                        isInvalid={isSumbitted && !title}\r\n                        onChange={e => dispatch({ type: 'field', fieldName: 'title', payload: e.target.value })}\r\n                    />\r\n                    <div className=\"invalid-feedback\">\r\n                        Title cannot be empty\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"description\">Description</label>\r\n                    <Input type=\"textarea\" name=\"description\" value={description}\r\n                        isInvalid={isSumbitted && !description}\r\n                        onChange={e => dispatch({ type: 'field', fieldName: 'description', payload: e.target.value })} />\r\n                    <div className=\"invalid-feedback\">\r\n                        Description cannot be empty\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <button className=\"btn btn-primary\"\r\n                        disabled={!isInitialLoaded ||\r\n                            (isInitialLoaded && description === initialFilm.description && title === initialFilm.title)}\r\n                        type=\"submit\">Save</button>\r\n                </div>\r\n            </form>\r\n            {\r\n                isError && <div className=\"alert alert-danger mt-2 mb-0\">\r\n                    {error ? error : 'Something went wrong'}\r\n                </div>\r\n            }\r\n\r\n            {\r\n                isSuccess && <div className=\"alert alert-success mt-2 mb-0\">\r\n                    Changes saved successfully!\r\n                </div>\r\n            }\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default UpdateFilm","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import { useEffect, useRef } from \"react\"\r\n\r\nconst Input = ({ isInvalid, onChange, type, name, value, placeholder = '' }) => {\r\n\r\n    const InputTag = type === 'textarea' ? 'textarea' : 'input'\r\n\r\n    const inputRef = useRef(null)\r\n\r\n    useEffect(() => {\r\n        let ref = inputRef.current\r\n        if (ref) {\r\n            if (isInvalid) inputRef.current.classList.add('is-invalid')\r\n            else inputRef.current.classList.remove('is-invalid')\r\n        }\r\n    }, [isInvalid])\r\n\r\n    return (\r\n        <InputTag ref={inputRef} className=\"form-control\"\r\n            placeholder={placeholder}\r\n            type={type} name={name}\r\n            value={value} onChange={onChange} />\r\n    )\r\n}\r\n\r\nexport default Input","import axios from '../helpers/axios'\r\nimport authHeader from '../helpers/authHeader'\r\n\r\n\r\nexport const all = (params) => axios.get('films/', {params})\r\nexport const index = (id) => axios.get(`films/${id}`)\r\nexport const search = (params) => axios.get('films/search', {params})\r\n\r\nexport const view = (id) => axios.patch(`films/${id}/view`)\r\n\r\nexport const video = (id) => axios.get(`films/${id}/video`)\r\nexport const thumbnail = (id, params) => axios.get(`films/${id}/thumbnail`, {params})\r\n\r\nexport const create = (form) => axios.post(`films`, form, {headers: authHeader()})\r\n\r\nexport const update = (id, form) => axios.put(`films/${id}`, form, {headers: authHeader()})\r\nexport const partialUpdate = (id, form) => axios.patch(`films/${id}`, form, {headers: authHeader()})\r\n\r\nexport const like = (id, form) => axios.patch(`films/${id}/action`, form, {headers: authHeader()})\r\n\r\nexport const remove = (id) => axios.delete(`films/${id}`, { headers: authHeader() })\r\n\r\n\r\n\r\n"],"sourceRoot":""}