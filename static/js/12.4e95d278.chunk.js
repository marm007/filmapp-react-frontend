(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[12],{510:function(e,t,n){e.exports=n(234)},511:function(e,t,n){"use strict";function a(e,t,n,a,r,s,i){try{var c=e[s](i),o=c.value}catch(l){return void n(l)}c.done?t(o):Promise.resolve(o).then(a,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function c(e){a(i,r,s,c,o,"next",e)}function o(e){a(i,r,s,c,o,"throw",e)}c(void 0)}))}}n.d(t,"a",(function(){return r}))},522:function(e,t,n){"use strict";var a=n(1),r=n(2);t.a=function(e){var t=e.isInvalid,n=e.onChange,s=e.type,i=e.name,c=e.value,o=e.placeholder,l=void 0===o?"":o,u="textarea"===s?"textarea":"input",d=Object(a.useRef)(null);return Object(a.useEffect)((function(){d.current&&(t?d.current.classList.add("is-invalid"):d.current.classList.remove("is-invalid"))}),[t]),Object(r.jsx)(u,{ref:d,className:"form-control",placeholder:l,type:s,name:i,value:c,onChange:n})}},527:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));var a=n(136),r=n(14),s={email:"",nick:"",password:"",isSubmitted:!1,isSending:!1,isSuccess:!1,isError:!1,error:null},i=function(e,t){switch(t.type){case"field":return Object(r.a)(Object(r.a)({},e),{},Object(a.a)({isSubmitted:!1},t.fieldName,t.payload));case"submit":return Object(r.a)(Object(r.a)({},e),{},{isError:!1,error:null,isSubmitted:!0});case"send":return Object(r.a)(Object(r.a)({},e),{},{isSending:!0});case"success":return Object(r.a)(Object(r.a)({},e),{},{isError:!1,error:null,isSending:!1,isSuccess:!0});case"error":return Object(r.a)(Object(r.a)({},e),{},{isSending:!1,isError:!0,error:t.payload});default:return e}}},673:function(e,t,n){"use strict";n.r(t);var a=n(510),r=n.n(a),s=n(511),i=n(61),c=n(1),o=n(15),l=n(138),u=n(522),d=n(139),b=n(80),m=n(527),p=n(2);t.default=function(){var e=Object(c.useContext)(b.a).login,t=Object(o.g)(),n=Object(o.h)(),a=Object(c.useReducer)(m.b,m.a),f=Object(i.a)(a,2),j=f[0],h=f[1],v=j.email,O=j.password,g=j.isSubmitted,x=j.isSending,y=j.isError,w=j.error;Object(c.useEffect)((function(){function a(){return(a=Object(s.a)(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.b({email:v,password:O}).then((function(a){e(a.data.user.name,a.data.user.id,a.data.token,a.data.refreshToken);var r=n.pathname.slice(0,-6);""===r&&(r="/filmapp-react-frontend/"),t.replace({pathname:r,search:n.search,state:n.state})})).catch((function(e){var t=null;e.response&&e.response.data&&e.response.data.errors&&(t=e.response.data.errors),h({type:"error",payload:t}),console.error(e)}));case 2:case"end":return a.stop()}}),a)})))).apply(this,arguments)}x&&function(){a.apply(this,arguments)}()}),[x,v,O,t,n,e]);return Object(p.jsxs)(l.a,{id:"loginModal",title:"Login",onClose:function(){t.goBack()},children:[Object(p.jsxs)("form",{onSubmit:x?null:function(e){e.preventDefault(),h({type:"submit"}),v&&O&&h({type:"send"})},children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"email",children:"Email"}),Object(p.jsx)(u.a,{isInvalid:g&&!v,type:"email",name:"email",value:v,onChange:function(e){return h({type:"field",fieldName:"email",payload:e.target.value})}}),Object(p.jsx)("div",{className:"invalid-feedback",children:"Email is required"})]}),Object(p.jsxs)("div",{className:"mt-2",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"password",children:"Password"}),Object(p.jsx)(u.a,{isInvalid:g&&!O,type:"password",name:"password",value:O,onChange:function(e){return h({type:"field",fieldName:"password",payload:e.target.value})}}),Object(p.jsx)("div",{className:"invalid-feedback",children:"Password is required"})]}),Object(p.jsxs)("div",{className:"d-flex align-items-center mt-2",children:[Object(p.jsx)("button",{disabled:x,type:"submit",className:"btn btn-primary",children:"Login"}),x&&Object(p.jsx)("div",{className:"spinner-grow ml-2"})]})]}),y&&Object(p.jsx)("div",{className:"alert-danger mt-2 mb-0",children:w||"Error while logging in."}),Object(p.jsx)("button",{onClick:function(){t.goBack(),setTimeout((function(){t.push("".concat(n.pathname.slice(0,-5),"register").concat(n.search))}),500)},className:"p-0 mt-2 btn btn-link",children:"Register"}),Object(p.jsx)("div",{className:"col-12 col-sm-12 p-0 m-0 ",children:Object(p.jsx)("button",{type:"button",onClick:function(){t.goBack(),setTimeout((function(){t.push("".concat(n.pathname.slice(0,-5),"forgot").concat(n.search))}),500)},className:"p-0 mt-2 btn btn-link",children:"Forgot password?"})})]})}}}]);
//# sourceMappingURL=12.4e95d278.chunk.js.map