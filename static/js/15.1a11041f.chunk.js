(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[15],{520:function(t,e,n){"use strict";n.r(e);var i=n(526),r=n.n(i),c=n(527),a=n(60),s=n(1),o=n(7),u=n(539),l=n(139),d=n(137),f=n(15),p={title:"",description:"",initialFilm:{title:"",description:""},isInitialLoaded:!1,isSumbitted:!1,isSending:!1,isError:!1,error:"",isSuccess:!1},b=function(t,e){switch(e.type){case"field":return Object(f.a)(Object(f.a)({},t),{},Object(d.a)({error:"",isError:!1},e.fieldName,e.payload));case"initial-success":return Object(f.a)(Object(f.a)({},t),{},{isInitialLoaded:!0,title:e.title,description:e.description,initialFilm:{title:e.title,description:e.description}});case"submit":return Object(f.a)(Object(f.a)({},t),{},{isSumbitted:!0,isError:!1,error:""});case"send":return Object(f.a)(Object(f.a)({},t),{},{isSending:!0});case"success":return Object(f.a)(Object(f.a)({},t),{},{isSuccess:!0,isSending:!1,isSumbitted:!1,isError:!1,error:""});case"error":return Object(f.a)(Object(f.a)({},t),{},{isSuccess:!1,isSending:!1,isSumbitted:!1,isError:!0,error:e.payload?e.payload:""});default:return t}},m=n(540),j=n(2);e.default=function(){var t=Object(o.g)(),e=Object(o.i)().id,n=Object(s.useReducer)(b,p),i=Object(a.a)(n,2),d=i[0],f=i[1],h=d.title,v=d.description,O=d.initialFilm,y=d.isInitialLoaded,g=d.isSumbitted,x=d.isSending,S=d.isError,w=d.error,N=d.isSuccess;Object(s.useEffect)((function(){var n=function(){var t=Object(c.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.c(e).then((function(t){f({type:"initial-success",title:t.data.title,description:t.data.description})})).catch((function(t){f({type:"error"})}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t.location.state&&t.location.state.title&&t.location.state.description?f({type:"initial-success",title:t.location.state.title,description:t.location.state.description}):n()}),[e,t]),Object(s.useEffect)((function(){x&&function(){var n=Object(c.a)(r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.f(e,{title:h,description:v}).then((function(e){f({type:"success"}),setTimeout((function(){return t.goBack()}),500)})).catch((function(t){f({type:"error"})}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[v,e,t,x,h]);return Object(j.jsxs)(l.a,{id:"updatateFilmModal",title:"Update",onClose:function(){t.goBack()},children:[Object(j.jsxs)("form",{onSubmit:x?null:function(t){t.preventDefault(),f({type:"submit"}),h&&v&&f({type:"send"})},children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"title",children:"Title"}),Object(j.jsx)(u.a,{type:"text",name:"title",value:h,isInvalid:g&&!h,onChange:function(t){return f({type:"field",fieldName:"title",payload:t.target.value})}}),Object(j.jsx)("div",{className:"invalid-feedback",children:"Title cannot be empty"})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"description",children:"Description"}),Object(j.jsx)(u.a,{type:"textarea",name:"description",value:v,isInvalid:g&&!v,onChange:function(t){return f({type:"field",fieldName:"description",payload:t.target.value})}}),Object(j.jsx)("div",{className:"invalid-feedback",children:"Description cannot be empty"})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("button",{className:"btn btn-primary",disabled:!y||y&&v===O.description&&h===O.title,type:"submit",children:"Save"}),x&&Object(j.jsx)("div",{className:"ml-2 spinner-grow"})]})]}),S&&Object(j.jsx)("div",{className:"alert alert-danger mt-2 mb-0",children:w||"Something went wrong"}),N&&Object(j.jsx)("div",{className:"alert alert-success mt-2 mb-0",children:"Changes saved successfully!"})]})}},526:function(t,e,n){t.exports=n(240)},527:function(t,e,n){"use strict";function i(t,e,n,i,r,c,a){try{var s=t[c](a),o=s.value}catch(u){return void n(u)}s.done?e(o):Promise.resolve(o).then(i,r)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(r,c){var a=t.apply(e,n);function s(t){i(a,r,c,s,o,"next",t)}function o(t){i(a,r,c,s,o,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return r}))},539:function(t,e,n){"use strict";var i=n(1),r=n(2);e.a=function(t){var e=t.isInvalid,n=t.onChange,c=t.type,a=t.name,s=t.value,o=t.placeholder,u=void 0===o?"":o,l="textarea"===c?"textarea":"input",d=Object(i.useRef)(null);return Object(i.useEffect)((function(){d.current&&(e?d.current.classList.add("is-invalid"):d.current.classList.remove("is-invalid"))}),[e]),Object(r.jsx)(l,{ref:d,className:"form-control",placeholder:u,type:c,name:a,value:s,onChange:n})}},540:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"h",(function(){return o})),n.d(e,"i",(function(){return u})),n.d(e,"b",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"e",(function(){return f})),n.d(e,"g",(function(){return p}));var i=n(42),r=n(138),c=function(t){return i.a.get("films/",{params:t})},a=function(t){return i.a.get("films/".concat(t))},s=function(t){return i.a.get("films/".concat(t,"/details"))},o=function(t){return i.a.get("films/search",{params:t})},u=function(t){return i.a.patch("films/".concat(t,"/view"))},l=function(t){return i.a.post("films",t,{headers:Object(r.a)()})},d=function(t,e){return i.a.patch("films/".concat(t),e,{headers:Object(r.a)()})},f=function(t,e){return i.a.patch("films/".concat(t,"/action"),e,{headers:Object(r.a)()})},p=function(t){return i.a.delete("films/".concat(t),{headers:Object(r.a)()})}}}]);
//# sourceMappingURL=15.1a11041f.chunk.js.map