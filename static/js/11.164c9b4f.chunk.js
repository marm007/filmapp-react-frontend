(this.webpackJsonpfilmapp_frontened=this.webpackJsonpfilmapp_frontened||[]).push([[11],{521:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return O}));var a=n(8),i=n(138),r=n(531),c=n.n(r),s=n(532),o=n(15),u=n(47),l=n(1),d=n(540),f=n(562),p=n(542),b=n(536),j=n(142),m=n(2),h=function(){var t=Object(l.useContext)(j.a).setToUpdate,e=Object(a.g)(),n=Object(a.i)().id,i=Object(l.useReducer)(f.b,Object(o.a)(Object(o.a)({},f.a),{},{update:{title:"",description:""},initial:{title:"",description:""}})),r=Object(u.a)(i,2),h=r[0],O=h.update,v=h.initial,g=h.isInitialLoaded,y=h.isSumbitted,x=h.isSending,S=h.isError,w=h.error,M=h.isSuccess,N=r[1];Object(l.useEffect)((function(){var t=function(){var t=Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.c)(n).then((function(t){N({type:"initial-success",payload:{title:t.data.title,description:t.data.description}})})).catch((function(t){N({type:"error"})}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e.location.state&&e.location.state.title&&e.location.state.description?N({type:"initial-success",payload:{title:e.location.state.title,description:e.location.state.description}}):t()}),[n,e]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("form",{onSubmit:x?null:function(a){if(a.preventDefault(),N({type:"submit"}),O.title&&O.description)return N({type:"send"}),Object(p.f)(n,{title:O.title,description:O.description}).then((function(n){N({type:"success"}),t(!1,n.data),setTimeout((function(){return Object(b.b)(e,"/update-film")}),500)})).catch((function(t){N({type:"error"})}))},children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"title",children:"Title"}),Object(m.jsx)(d.a,{type:"text",name:"title",value:O.title,isInvalid:y&&!O.title,onChange:function(t){return N({type:"update",fieldName:"title",payload:t.target.value})}}),Object(m.jsx)("div",{className:"invalid-feedback",children:"Title cannot be empty"})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"description",children:"Description"}),Object(m.jsx)(d.a,{type:"textarea",name:"description",value:O.description,isInvalid:y&&!O.description,onChange:function(t){return N({type:"update",fieldName:"description",payload:t.target.value})}}),Object(m.jsx)("div",{className:"invalid-feedback",children:"Description cannot be empty"})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("button",{className:"btn btn-primary",disabled:!g||g&&O.description===v.description&&O.title===v.title,type:"submit",children:"Save"}),x&&Object(m.jsx)("div",{className:"ml-2 spinner-grow"})]})]}),S&&Object(m.jsx)("div",{className:"alert alert-danger mt-2 mb-0",children:w||"Something went wrong"}),M&&Object(m.jsx)("div",{className:"alert alert-success mt-2 mb-0",children:"Changes saved successfully!"})]})};function O(){var t=Object(a.g)();return Object(m.jsx)(i.a,{id:"updatateFilmModal",title:"Update",onClose:function(){Object(b.b)(t,"/update-film")},children:Object(m.jsx)(h,{})})}},531:function(t,e,n){t.exports=n(241)},532:function(t,e,n){"use strict";function a(t,e,n,a,i,r,c){try{var s=t[r](c),o=s.value}catch(u){return void n(u)}s.done?e(o):Promise.resolve(o).then(a,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var c=t.apply(e,n);function s(t){a(c,i,r,s,o,"next",t)}function o(t){a(c,i,r,s,o,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return i}))},536:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return r}));var a=function(t){var e=new Date(Date.parse(t.createdAt));return("0"+e.getDate()).slice(-2)+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getFullYear()).slice(-2)+" o "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)},i=function(t){var e=new Date(Date.parse(t.createdAt)),n=new Date,a=Math.abs(Math.floor((Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes())-Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes()))/6e4));return a/60>=1?(a/=60)/24>=1?(a/=24)/30>=1?(a/=30)/12>=1?(a/=12,a=Math.floor(a)+" years "):a=Math.floor(a)+" months ":a=Math.floor(a)+" days ":a=Math.floor(a)+" hours ":a=Math.floor(a)+" minutes ",a+="ago"},r=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t.location.pathname.split(e)[0],i={pathname:""===a?"/filmapp-react-frontend/":a,search:t.location.search,state:t.location.state};n?t.replace(i):t.push(i)}},540:function(t,e,n){"use strict";var a=n(1),i=n(2);e.a=function(t){var e=t.isInvalid,n=t.onChange,r=t.type,c=t.name,s=t.value,o=t.placeholder,u=void 0===o?"":o,l=Object(a.useRef)(null);return Object(a.useEffect)((function(){l.current&&(e?l.current.classList.add("is-invalid"):l.current.classList.remove("is-invalid"))}),[e]),"textarea"===r?Object(i.jsx)("textarea",{ref:l,className:"form-control",placeholder:u,type:r,name:c,value:s,onChange:n,rows:8}):Object(i.jsx)("input",{ref:l,className:"form-control",placeholder:u,type:r,name:c,value:s,onChange:n})}},542:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return s})),n.d(e,"h",(function(){return o})),n.d(e,"i",(function(){return u})),n.d(e,"b",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"e",(function(){return f})),n.d(e,"g",(function(){return p}));var a=n(43),i=n(137),r=function(t){return a.a.get("films/",{params:t})},c=function(t){return a.a.get("films/".concat(t))},s=function(t){return a.a.get("films/".concat(t,"/details"))},o=function(t){return a.a.get("films/search",{params:t})},u=function(t){return a.a.patch("films/".concat(t,"/view"))},l=function(t){return a.a.post("films",t,{headers:Object(i.a)()})},d=function(t,e){return a.a.patch("films/".concat(t),e,{headers:Object(i.a)()})},f=function(t,e){return a.a.patch("films/".concat(t,"/action"),e,{headers:Object(i.a)()})},p=function(t){return a.a.delete("films/".concat(t),{headers:Object(i.a)()})}},562:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c}));var a=n(136),i=n(15),r={update:{},initial:{},isInitialLoaded:!1,isSumbitted:!1,isSending:!1,isSuccess:!1,isError:!1,error:""},c=function(t,e){switch(e.type){case"update":return Object(i.a)(Object(i.a)({},t),{},{error:"",isError:!1,update:Object(i.a)(Object(i.a)({},t.update),{},Object(a.a)({},e.fieldName,e.payload))});case"initial-success":return Object(i.a)(Object(i.a)({},t),{},{isInitialLoaded:!0,update:e.payload,initial:e.payload});case"submit":return Object(i.a)(Object(i.a)({},t),{},{isSumbitted:!0,isError:!1,error:""});case"send":return Object(i.a)(Object(i.a)({},t),{},{isSending:!0});case"success":return Object(i.a)(Object(i.a)({},t),{},{isSuccess:!0,isSending:!1,isSumbitted:!1,isError:!1,error:""});case"error":return Object(i.a)(Object(i.a)({},t),{},{isSuccess:!1,isSending:!1,isSumbitted:!1,isError:!0,error:e.payload?e.payload:""});default:return t}}}}]);
//# sourceMappingURL=11.164c9b4f.chunk.js.map