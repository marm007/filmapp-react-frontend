{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","components/helpers/input.js","components/modals/reducer.js","components/modals/login.js"],"names":["module","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","Input","isInvalid","onChange","type","name","placeholder","InputTag","inputRef","useRef","useEffect","current","classList","add","remove","ref","className","authInitialState","email","nick","password","isSubmitted","isSending","isSuccess","isError","authReducer","state","action","fieldName","payload","Login","login","useContext","UserContext","history","useHistory","location","useLocation","useReducer","dispatch","a","authApi","res","data","user","id","token","refreshToken","pathname","slice","process","replace","search","catch","errorMessage","response","errors","console","sendData","title","onClose","push","goBack","onSubmit","e","preventDefault","htmlFor","target","disabled","onClick","setTimeout"],"mappings":"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","file":"static/js/12.2673ef48.chunk.js","sourcesContent":["module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import { useEffect, useRef } from \"react\"\n\nconst Input = ({ isInvalid, onChange, type, name, value, placeholder = '' }) => {\n\n    const InputTag = type === 'textarea' ? 'textarea' : 'input'\n\n    const inputRef = useRef(null)\n\n    useEffect(() => {\n        let ref = inputRef.current\n        if (ref) {\n            if (isInvalid) inputRef.current.classList.add('is-invalid')\n            else inputRef.current.classList.remove('is-invalid')\n        }\n    }, [isInvalid])\n\n    return (\n        <InputTag ref={inputRef} className=\"form-control\"\n            placeholder={placeholder}\n            type={type} name={name}\n            value={value} onChange={onChange} />\n    )\n}\n\nexport default Input","\nexport const authInitialState = {\n    email: '',\n    nick: '',\n    password: '',\n    isSubmitted: false,\n    isSending: false,\n    isSuccess: false,\n    isError: false,\n    error: null\n}\n\nexport const authReducer = (state, action) => {\n    switch (action.type) {\n        case 'field': {\n            return {\n                ...state,\n                isSubmitted: false,\n                [action.fieldName]: action.payload\n            }\n        }\n        case 'submit': {\n            return {\n                ...state,\n                isError: false,\n                error: null,\n                isSubmitted: true\n            }\n        }\n        case 'send': {\n            return {\n                ...state,\n                isSending: true\n            }\n        }\n        case 'success': {\n            return {\n\n                ...state,\n                isError: false,\n                error: null,\n                isSending: false,\n                isSuccess: true\n            }\n        }\n        case 'error': {\n            return {\n                ...state,\n                isSending: false,\n                isError: true,\n                error: action.payload\n            }\n        }\n        default: return state\n    }\n}","import React, { useEffect, useContext, useReducer } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom'\n\nimport Modal from '../helpers/modal';\nimport Input from '../helpers/input';\n\nimport * as authApi from '../../services/authService'\n\nimport UserContext from '../../helpers/contexts/user/userContext'\nimport { authInitialState, authReducer } from './reducer';\n\nconst Login = () => {\n\n    const { login } = useContext(UserContext);\n\n    let history = useHistory()\n    let location = useLocation()\n\n    const [state, dispatch] = useReducer(authReducer, authInitialState)\n    const { email, password, isSubmitted, isSending, isError, error } = state\n\n    useEffect(() => {\n        async function sendData() {\n            await authApi.login({ email, password })\n                .then(res => {\n                    login(res.data.user.name, res.data.user.id, res.data.token, res.data.refreshToken)\n                    //history.replace(location.pathname.slice(0, -6))\n\n                    let pathname = location.pathname.slice(0, -6)\n                    if (pathname === '') pathname = process.env.REACT_APP_PATH_NAME\n\n                    history.replace({\n                        pathname: pathname,\n                        search: location.search,\n                        state: location.state\n                    })\n\n                    //if (!location.state) {\n                    // history.goBack();\n                    //} else {\n                    //   history.replace(location.state.from)\n                    //}\n                })\n                .catch(err => {\n                    let errorMessage = null;\n\n                    if (err.response && err.response.data && err.response.data.errors)\n                        errorMessage = err.response.data.errors;\n\n                    dispatch({\n                        type: 'error',\n                        payload: errorMessage\n                    })\n\n                    console.error(err)\n                })\n        }\n        if (isSending) sendData()\n    }, [isSending, email, password, history, location, login])\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        dispatch({ type: 'submit' })\n\n        if (email && password) {\n            dispatch({ type: 'send' })\n        }\n    }\n\n    const handleForgotPassword = () => {\n        history.goBack();\n\n        setTimeout(function () {\n            history.push(`${location.pathname.slice(0, -5)}forgot${location.search}`);\n        }, 500);\n    };\n\n    const modalClose = () => {\n        if (!location.state) {\n            history.goBack();\n        } else {\n            history.push(process.env.REACT_APP_PATH_NAME)\n        }\n    };\n\n    const handleRegister = () => {\n        history.goBack();\n\n        setTimeout(function () {\n            history.push(`${location.pathname.slice(0, -5)}register${location.search}`);\n        }, 500);\n    };\n\n\n\n    return (\n        <Modal id=\"loginModal\" title=\"Login\" onClose={modalClose}>\n\n            <form onSubmit={isSending ? null : handleSubmit}>\n                <div>\n                    <label className=\"form-label\" htmlFor=\"email\">Email</label>\n                    <Input isInvalid={isSubmitted && !email} type=\"email\" name=\"email\" value={email}\n                        onChange={e => dispatch({ type: 'field', fieldName: 'email', payload: e.target.value })} />\n                    <div className=\"invalid-feedback\">\n                        Email is required\n                    </div>\n                </div>\n\n                <div className=\"mt-2\">\n                    <label className=\"form-label\" htmlFor=\"password\">Password</label>\n                    <Input isInvalid={isSubmitted && !password} type=\"password\" name=\"password\"\n                        value={password} onChange={e => dispatch({ type: 'field', fieldName: 'password', payload: e.target.value })} />\n                    <div className=\"invalid-feedback\">\n                        Password is required\n                    </div>\n                </div>\n\n                <div className=\"d-flex align-items-center mt-2\">\n                    <button disabled={isSending} type=\"submit\" className=\"btn btn-primary\">\n                        Login\n                    </button>\n                    {\n                        isSending &&\n                        <div className=\"spinner-grow ms-2\" />\n                    }\n                </div>\n            </form>\n\n            {\n                isError &&\n                <div className=\"alert-danger mt-2 mb-0\">\n                    {error ? error : 'Error while logging in.'}\n                </div>\n            }\n\n            <button onClick={handleRegister} className=\"p-0 mt-2 btn btn-link\">Register</button>\n\n            <div className=\"col-12 col-sm-12 p-0 m-0 \">\n                <button type=\"button\" onClick={handleForgotPassword} className=\"p-0 mt-2 btn btn-link\">Forgot password?</button>\n            </div>\n        </Modal>\n    );\n}\n\nexport default Login"],"sourceRoot":""}